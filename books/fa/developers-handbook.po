# FreeBSD$
# Faraz Vahedi <kfv@irbug.org>, 2020.
# Parsa Samet <qps@irbug.org>, 2020.
# Danilo G. Baio <dbaio@FreeBSD.org>, 2020.
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2020-07-26 09:04-0300\n"
"PO-Revision-Date: 2020-10-04 17:36+0000\n"
"Last-Translator: Parsa Samet <qps@irbug.org>\n"
"Language-Team: Persian <https://translate-dev.freebsd.org/projects/"
"freebsd-doc/boooks_developers-handbook/fa/>\n"
"Language: fa\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=2; plural=n > 1;\n"
"X-Generator: Weblate 4.2.2\n"

#. Put one translator per line, in the form NAME <EMAIL>, YEAR1, YEAR2
msgctxt "_"
msgid "translator-credits"
msgstr "فراز واحدی <kfv@irbug.org>، سال ۲۰۲۰"

#. (itstool) path: info/title
#: book.translate.xml:32
msgid "FreeBSD Developers' Handbook"
msgstr "کتاب راهنمای توسعه‌دهندگان FreeBSD"

#. (itstool) path: info/author
#: book.translate.xml:35
msgid "<orgname>The FreeBSD Documentation Project</orgname>"
msgstr "<orgname>پروژه مستندات FreeBSD</orgname>"

#. (itstool) path: info/pubdate
#. (itstool) path: info/releaseinfo
#: book.translate.xml:37 book.translate.xml:148
msgid ""
"$FreeBSD: head/en_US.ISO8859-1/books/developers-handbook/book.xml 54255 "
"2020-06-15 08:13:08Z bcr $"
msgstr ""
"$FreeBSD: head/en_US.ISO8859-1/books/developers-handbook/book.xml 54255 "
"2020-06-15 08:13:08Z bcr $"

#. (itstool) path: info/copyright
#: book.translate.xml:39
msgid ""
"<year>2000</year> <year>2001</year> <year>2002</year> <year>2003</year> "
"<year>2004</year> <year>2005</year> <year>2006</year> <year>2007</year> "
"<year>2008</year> <year>2009</year> <year>2010</year> <year>2011</year> "
"<year>2012</year> <year>2013</year> <year>2014</year> <year>2015</year> "
"<year>2016</year> <year>2017</year> <year>2018</year> <year>2019</year> "
"<year>2020</year> <holder>The FreeBSD Documentation Project</holder>"
msgstr ""
"<year>۲۰۰۰</year> <year>۲۰۰۱</year> <year>۲۰۰۲</year> <year>۲۰۰۳</year> "
"<year>۲۰۰۴</year> <year>۲۰۰۵</year> <year>۲۰۰۶</year> <year>۲۰۰۷</year> "
"<year>۲۰۰۸</year> <year>۲۰۰۹</year> <year>۲۰۱۰</year> <year>۲۰۱۱</year> "
"<year>۲۰۱۲</year> <year>۲۰۱۳</year> <year>۲۰۱۴</year> <year>۲۰۱۵</year> "
"<year>۲۰۱۶</year> <year>۲۰۱۷</year> <year>۲۰۱۸</year> <year>۲۰۱۹</year> "
"<year>۲۰۲۰</year> <holder>پروژه مستندات FreeBSD</holder>"

#. (itstool) path: legalnotice/title
#: book.translate.xml:66
msgid "Copyright"
msgstr "حق نشر"

#. (itstool) path: legalnotice/para
#: book.translate.xml:68
msgid ""
"Redistribution and use in source (XML DocBook) and 'compiled' forms (XML, "
"HTML, PDF, PostScript, RTF and so forth) with or without modification, are "
"permitted provided that the following conditions are met:"
msgstr ""
"بازتوزیع و استفاده در منبع (XML DocBook) و قالب‌های 'همگردان‌شده' (XML، "
"HTML،PDF، PostScript، RTF و غیره) با یا بدون تغییر، مجاز است مشروط بر آنکه "
"این شرایط برآورده شوند:"

#. (itstool) path: listitem/para
#: book.translate.xml:75
msgid ""
"Redistributions of source code (XML DocBook) must retain the above copyright "
"notice, this list of conditions and the following disclaimer as the first "
"lines of this file unmodified."
msgstr ""
"بازتوزیع‌های کد منبع (XML DocBook) باید اعلان حق نشر بالا، این فهرست از "
"شرایط و بیانیه رفع مسئولیت پیشِ رو را بدون تغییر، به‌عنوان اولین خطوط از "
"پرونده حفظ کنند."

#. (itstool) path: listitem/para
#: book.translate.xml:81
msgid ""
"Redistributions in compiled form (transformed to other DTDs, converted to "
"PDF, PostScript, RTF and other formats) must reproduce the above copyright "
"notice, this list of conditions and the following disclaimer in the "
"documentation and/or other materials provided with the distribution."
msgstr ""
"بازتوزیع‌ها در قالب کامپایل شده (مبدل به اعلامیه‌های نوع سند دیگر، مبدل به "
"RTF ,Postscript ,PDF و دیگر قالب‌ها) باید اعلان حق نشر بالا، این فهرست از "
"شرایط و بیانیه رفع مسئولیت پیشِ رو در مستندات و/یا دیگر محتواهای ارائه شده "
"همراه با این توزیع را بازتولید کنند."

#. (itstool) path: important/para
#: book.translate.xml:90
msgid ""
"THIS DOCUMENTATION IS PROVIDED BY THE FREEBSD DOCUMENTATION PROJECT \"AS IS"
"\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE "
"IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE "
"ARE DISCLAIMED. IN NO EVENT SHALL THE FREEBSD DOCUMENTATION PROJECT BE "
"LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR "
"CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF "
"SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS "
"INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN "
"CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) "
"ARISING IN ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF "
"THE POSSIBILITY OF SUCH DAMAGE."
msgstr ""
"این دبیزش توسط پروژه‌ مستندات FreeBSD \"همان‌طور که هست\" ارائه شده و هرگونه "
"ضمانت‌نامه‌ اظهار شده یا ضمنی، شامل، اما نه محدود به، ضمانت‌نامهٔ ضمنیِ "
"بازاریابی و سازگاری به‌منظور هدفی مشخص رد می‌شوند. پروژه مستندات FreeBSD در "
"هیچ شرایطی مسئولیت هرگونه خسارت مستقیم، غیرمستقیم، جنبی، ویژه، تنبیهی، یا "
"تبعی (شامل، اما نه محدود به، تهیهٔ کالا‌ها یا خدمات جانشین؛ فقدان کاربرد، "
"داده، یا سود؛ یا وقفه در کسب و کار) به هر نحو که موجب شده باشد و در هر "
"مسئولیت قانونی، چه در قرارداد، مسئولیت سخت، یا شبه‌جرم (شامل غفلت یا غیر) به "
"هر شکل با استفاده از این مستندات برخاسته باشد، حتی اگر بر امکان چنین خسارتی "
"آگاه‌سازی شده باشد را بر عهده نخواهد داشت."

#. (itstool) path: legalnotice/para
#: book.translate.xml:107
msgid "FreeBSD is a registered trademark of the FreeBSD Foundation."
msgstr "FreeBSD یک نشان تجاری ثبت شده متعلق به FreeBSD Foundation است."

#. (itstool) path: legalnotice/para
#: book.translate.xml:109
msgid ""
"Apple, AirPort, FireWire, iMac, iPhone, iPad, Mac, Macintosh, Mac OS, "
"Quicktime, and TrueType are trademarks of Apple Inc., registered in the U.S. "
"and other countries."
msgstr ""
"Apple، AirPort، FireWire، iMac، iPhone، iPad، Mac، Macintosh، Mac OS، "
"Quicktime، و TrueType نشان‌های تجاری متعلق به شرکت Apple، ثبت شده در ایالات "
"متحده و دیگر کشورها هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:114
msgid ""
"IBM, AIX, OS/2, PowerPC, PS/2, S/390, and ThinkPad are trademarks of "
"International Business Machines Corporation in the United States, other "
"countries, or both."
msgstr ""
"IBM، AIX، OS/2، PowerPC، PS/2، S/390 و ThinkPad نشان‌های تجاری متعلق به شرکت "
"ماشین‌های بین‌المللی کسب و کار در ایالات متحده، دیگر کشورها، یا هردو هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:118
msgid ""
"IEEE, POSIX, and 802 are registered trademarks of Institute of Electrical "
"and Electronics Engineers, Inc. in the United States."
msgstr ""
"IEEE، POSIX و 802 نشان‌های تجاری ثبت شده متعلق به مؤسسه مهندسان برق و "
"الکترونیک هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:121
msgid ""
"Intel, Celeron, Centrino, Core, EtherExpress, i386, i486, Itanium, Pentium, "
"and Xeon are trademarks or registered trademarks of Intel Corporation or its "
"subsidiaries in the United States and other countries."
msgstr ""
"Intel، Celeron، Centrino، Core، EtherExpress، i386، i486، Itanium، Pentium و "
"Xeon نشان‌های تجاری یا نشان‌های تجاری ثبت شده متعلق به شرکت Intel و شرکت‌های "
"تابعه آن در ایالات متحده و دیگر کشورها هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:125
msgid "Linux is a registered trademark of Linus Torvalds."
msgstr "Linux یک نشان تجاری ثبت شده متعلق به لینوس توروالدز است."

#. (itstool) path: legalnotice/para
#: book.translate.xml:127
msgid ""
"Microsoft, IntelliMouse, MS-DOS, Outlook, Windows, Windows Media and Windows "
"NT are either registered trademarks or trademarks of Microsoft Corporation "
"in the United States and/or other countries."
msgstr ""
"Microsoft، IntelliMouse، MS-DOS، Outlook، Windows، Windows Media و Windows "
"NT نشان‌های تجاری ثبت شده یا نشان‌های تجاری متعلق به شرکت Microsoft در ایالات "
"متحده و دیگر کشورها هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:131
msgid ""
"Motif, OSF/1, and UNIX are registered trademarks and IT DialTone and The "
"Open Group are trademarks of The Open Group in the United States and other "
"countries."
msgstr ""
"Motif، OSF/1 و UNIX نشان‌های تجاری ثبت شده و IT DialTone و The Open Group "
"نشان‌های تجاری متعلق به کنسرسیوم The Open Group در ایالات متحده و دیگر کشورها "
"هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:135
msgid ""
"Sun, Sun Microsystems, Java, Java Virtual Machine, JDK, JRE, JSP, JVM, "
"Netra, OpenJDK, Solaris, StarOffice, SunOS and VirtualBox are trademarks or "
"registered trademarks of Sun Microsystems, Inc. in the United States and "
"other countries."
msgstr ""
"Sun، Sun Microsystems، Java، Java Virtual Machine، JDK، JRE، JSP، JVM، "
"Netra، OpenJDK، Solaris، StarOffice، SunOS و VirtualBox نشان‌های تجاری یا "
"نشان‌های تجاری ثبت شده متعلق به شرکت Sun Microsystems در ایالات متحده و دیگر "
"کشورها هستند."

#. (itstool) path: legalnotice/para
#: book.translate.xml:140
msgid ""
"Many of the designations used by manufacturers and sellers to distinguish "
"their products are claimed as trademarks. Where those designations appear in "
"this document, and the FreeBSD Project was aware of the trademark claim, the "
"designations have been followed by the <quote>™</quote> or the <quote>®</"
"quote> symbol."
msgstr ""
"بسیاری از عناوین مورد استفاده توسط تولیدکنندگان و فروشندگان برای مشخص کردن "
"محصولاتشان به‌عنوان نشان‌های تجاری اظهار شده‌اند. در هر جای این سند که این "
"عناوین ذکر شده باشند، در صورتی که پروژه FreeBSD از اظهارنامه آن نشان تجاری "
"آگاه باشد، همراه عنوان علامت <quote>™</quote> یا <quote>®</quote> آمده است."

#. (itstool) path: abstract/para
#: book.translate.xml:151
msgid ""
"Welcome to the Developers' Handbook. This manual is a <emphasis>work in "
"progress</emphasis> and is the work of many individuals. Many sections do "
"not yet exist and some of those that do exist need to be updated. If you are "
"interested in helping with this project, send email to the <link xlink:href="
"\"http://lists.FreeBSD.org/mailman/listinfo/freebsd-doc\">FreeBSD "
"documentation project mailing list</link>."
msgstr ""
"به کتاب راهنمای توسعه‌دهندگان خوش آمدید. این راهنما یک <emphasis>کار در حال "
"انجام</emphasis> و ماحصل تلاش افراد بسیاری است. بسیاری از بخش‌ها هنوز موجود "
"نیستند و بسیاری از بخش‌های موجود هم نیازمند به روز رسانی هستند. اگر تمایل به "
"کمک کردن در این پروژه دارید، نامه‌ای الکترونیک به <link xlink:href=\"http://"
"lists.FreeBSD.org/mailman/listinfo/freebsd-doc\">فهرست پست‌سپاری پروژه "
"مستندات FreeBSD</link> ارسال کنید."

#. (itstool) path: abstract/para
#: book.translate.xml:157
msgid ""
"The latest version of this document is always available from the <link xlink:"
"href=\"@@URL_RELPREFIX@@/index.html\">FreeBSD World Wide Web server</link>. "
"It may also be downloaded in a variety of formats and compression options "
"from the <link xlink:href=\"https://download.freebsd.org/ftp/doc/\">FreeBSD "
"FTP server</link> or one of the numerous <link xlink:href="
"\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/mirrors-ftp.html"
"\">mirror sites</link>."
msgstr ""
"آخرین نسخه از این دبیزه همیشه در <link xlink:href=\"@@URL_RELPREFIX@@/index."
"html\">وبسایت FreeBSD</link> در دسترس است. همچنین می‌توان این راهنما را در "
"قالب‌ها و حالت‌های فشرده شده متنوع از <link xlink:href=\"https://download."
"freebsd.org/ftp/doc/\"> FTP کارساز FreeBSD</link> یا از طریق یکی از چند "
"<link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/"
"mirrors-ftp.html\">وبگاه آینه‌ای</link> دریافت کرد."

#. (itstool) path: part/title
#: book.translate.xml:167
msgid "Basics"
msgstr "اصول پایه"

#. (itstool) path: info/title
#. (itstool) path: sect1/title
#: book.translate.xml:176 book.translate.xml:430
msgid "Introduction"
msgstr "پیش درآمد"

#. (itstool) path: authorgroup/author
#: book.translate.xml:178 book.translate.xml:2956
msgid ""
"<personname><firstname>Murray</firstname><surname>Stokely</surname></"
"personname><contrib>Contributed by </contrib>"
msgstr ""
"<personname><firstname>Murray</firstname><surname>Stokely</surname></"
"personname><contrib>نوشته شده توسط </contrib>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:179
msgid ""
"<personname><firstname>Jeroen</firstname><surname>Ruigrok van der Werven</"
"surname></personname>"
msgstr ""
"<personname><firstname>Jeroen</firstname><surname>Ruigrok van der Werven</"
"surname></personname>"

#. (itstool) path: sect1/title
#: book.translate.xml:185
msgid "Developing on FreeBSD"
msgstr "توسعه بر روی FreeBSD"

#. (itstool) path: sect1/para
#: book.translate.xml:187
msgid ""
"So here we are. System all installed and you are ready to start programming. "
"But where to start? What does FreeBSD provide? What can it do for me, as a "
"programmer?"
msgstr ""
"خب، سرانجام اینجا هستیم. سامانه کامل نصب شده است و شما آماده شروع "
"برنامه‌نویسی هستید. اما از کجا باید شروع کرد؟ FreeBSD چه چیزهایی ارائه می‌دهد؟ "
"چه می‌تواند برای منِ برنامه‌نویس انجام دهد؟"

#. (itstool) path: sect1/para
#: book.translate.xml:191
msgid ""
"These are some questions which this chapter tries to answer. Of course, "
"programming has different levels of proficiency like any other trade. For "
"some it is a hobby, for others it is their profession. The information in "
"this chapter might be aimed toward the beginning programmer; indeed, it "
"could serve useful for the programmer unfamiliar with the FreeBSD platform."
msgstr ""
"اینها سوالاتی‌اند که این فصل در پاسخ به آنان می‌کوشد. البته، برنامه‌نویسی "
"نیز مانند هر تجارتی سطح مهارت‌های مختلفی دارد. برای برخی این تفریح است، و "
"برای برخی دیگر حرفهٔ ایشان. اطلاعات موجود در این بخش ممکن است برای برنامه‌"
"نویسان تازه‌وارد باشد؛ در واقع، می‌تواند برای برنامه‌نویسان ناآشنا با بستر "
"FreeBSD مفید باشد."

#. (itstool) path: sect1/title
#: book.translate.xml:200
msgid "The BSD Vision"
msgstr "نگرش BSD"

#. (itstool) path: sect1/para
#: book.translate.xml:202
msgid ""
"To produce the best <trademark class=\"registered\">UNIX</trademark> like "
"operating system package possible, with due respect to the original software "
"tools ideology as well as usability, performance and stability."
msgstr ""
"تولید بهترین بستهٔ سامانهٔ عاملِ شبه <trademark class=\"registered\">UNIX</"
"trademark>، با توجه به ایدئولوژی ابزارهای نرم‌افزاری اصلی بعلاوهٔ کاربردپذیری، "
"عملکرد و پایداری."

#. (itstool) path: sect1/title
#: book.translate.xml:209
msgid "Architectural Guidelines"
msgstr "رهنمون‌های وابسته به معماری"

#. (itstool) path: sect1/para
#: book.translate.xml:211
msgid "Our ideology can be described by the following guidelines"
msgstr "ایدئولوژی ما می‌تواند در رهنمون‌های زیر تشریح شود"

#. (itstool) path: listitem/para
#: book.translate.xml:217
msgid ""
"Do not add new functionality unless an implementor cannot complete a real "
"application without it."
msgstr ""
"عملکرد جدیدی اضافه نکنید مگر راه‌اندازی‌ای نتواند بدون آن برنامه‌ای را تکمیل "
"کند."

#. (itstool) path: listitem/para
#: book.translate.xml:222
msgid ""
"It is as important to decide what a system is not as to decide what it is. "
"Do not serve all the world's needs; rather, make the system extensible so "
"that additional needs can be met in an upwardly compatible fashion."
msgstr ""
"همان اندازه که تصمیم گرفتن برای چه چیزی بودن یک سامانه مهم است تصمیم گرفتن "
"برای چه چیزی نبودن آن حائز اهمیت است. تمام نیازهای دنیا را تامین نکنید؛ در "
"عوض، سامانه‌ای منعطف تولید کنید که نیازهای اضافی بتوانند در مسیری همانا "
"سازگار برآورده شوند."

#. (itstool) path: listitem/para
#: book.translate.xml:230
msgid ""
"The only thing worse than generalizing from one example is generalizing from "
"no examples at all."
msgstr "تنها تعمیم عاری از هر مثال از تعمیم تنها با یک مثال بدتر است."

#. (itstool) path: listitem/para
#: book.translate.xml:235
msgid ""
"If a problem is not completely understood, it is probably best to provide no "
"solution at all."
msgstr ""
"اگر مشکلی به‌صورت کامل درک نشد، همان بهتر است برایش هیچ راهکاری ارائه نشود."

#. (itstool) path: listitem/para
#: book.translate.xml:240
msgid ""
"If you can get 90 percent of the desired effect for 10 percent of the work, "
"use the simpler solution."
msgstr ""
"اگر برای ۱۰ درصد کار می‌توانید ۹۰ درصد اثر مطلوب بدست آورید، از راهکاری "
"ساده‌تر استفاده کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:245
msgid "Isolate complexity as much as possible."
msgstr "تا آنجا که بشود از پیچیدگی دوری کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:249
msgid ""
"Provide mechanism, rather than policy. In particular, place user interface "
"policy in the client's hands."
msgstr ""
"ساز و کار ارائه دهید، نه سیاست. به‌طور خاص، سیاست رابط کاربری را به دستان "
"کارخواه بسپارید."

#. (itstool) path: sect1/para
#: book.translate.xml:254
msgid "From Scheifler &amp; Gettys: \"X Window System\""
msgstr "از Scheifler و Gettys: \"سامانهٔ پنجره X\""

#. (itstool) path: sect1/title
#: book.translate.xml:258
msgid "The Layout of <filename>/usr/src</filename>"
msgstr "طرح‌بندی <filename>/usr/src</filename>"

#. (itstool) path: sect1/para
#: book.translate.xml:261
msgid ""
"The complete source code to FreeBSD is available from our public repository. "
"The source code is normally installed in <filename>/usr/src</filename> which "
"contains the following subdirectories:"
msgstr ""
"کد منبع کامل FreeBSD در مخزن عمومی ما قابل دسترس است. کدمنبع به‌طور معمول در "
"<filename>/usr/src</filename> نصب می‌شود که شامل زیرفهرست‌های نامبرده است:"

#. (itstool) path: row/entry
#: book.translate.xml:271
msgid "Directory"
msgstr "فهرست"

#. (itstool) path: row/entry
#: book.translate.xml:272
msgid "Description"
msgstr "شرح"

#. (itstool) path: row/entry
#: book.translate.xml:278
msgid "<filename>bin/</filename>"
msgstr "<filename>bin/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:279
msgid "Source for files in <filename>/bin</filename>"
msgstr "منبع پرونده‌ها در <filename>/bin</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:284
msgid "<filename>cddl/</filename>"
msgstr "<filename>cddl/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:285
msgid "Utilities covered by the Common Development and Distribution License"
msgstr "برنامه‌های کمکی تحت پوشش پروانهٔ توسعه و توزیع مشترک"

#. (itstool) path: row/entry
#: book.translate.xml:290
msgid "<filename>contrib/</filename>"
msgstr "<filename>contrib/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:291
msgid "Source for files from contributed software"
msgstr "منبع پرونده‌های نرم‌افزارهای اعطا شده"

#. (itstool) path: row/entry
#: book.translate.xml:296
msgid "<filename>crypto/</filename>"
msgstr "<filename>crypto/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:297
msgid "Cryptographical sources"
msgstr "منابع رمزنگاری"

#. (itstool) path: row/entry
#: book.translate.xml:301
msgid "<filename>etc/</filename>"
msgstr "<filename>etc/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:302
msgid "Source for files in <filename>/etc</filename>"
msgstr "منبع پرونده‌ها در <filename>/etc</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:306
msgid "<filename>gnu/</filename>"
msgstr "<filename>gnu/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:307
msgid "Utilities covered by the GNU Public License"
msgstr "برنامه‌های کمکی تحت پوشش پروانهٔ عمومی GNU"

#. (itstool) path: row/entry
#: book.translate.xml:312
msgid "<filename>include/</filename>"
msgstr "<filename>include/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:313
msgid "Source for files in <filename>/usr/include</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/include</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:317
msgid "<filename>kerberos5/</filename>"
msgstr "<filename>kerberos5/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:318
msgid "Source for Kerberos version 5"
msgstr "منبع Kerberos نسخه پنج"

#. (itstool) path: row/entry
#: book.translate.xml:322
msgid "<filename>lib/</filename>"
msgstr "<filename>lib/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:323
msgid "Source for files in <filename>/usr/lib</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/lib</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:327
msgid "<filename>libexec/</filename>"
msgstr "<filename>libexec/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:328
msgid "Source for files in <filename>/usr/libexec</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/libexec</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:332
msgid "<filename>release/</filename>"
msgstr "<filename>release/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:333
msgid "Files required to produce a FreeBSD release"
msgstr "پرونده‌های مورد نیاز برای تولید یک نسخهٔ FreeBSD قابل انتشار"

#. (itstool) path: row/entry
#: book.translate.xml:338
msgid "<filename>rescue/</filename>"
msgstr "<filename>rescue/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:339
msgid "Build system for the <filename>/rescue</filename> utilities"
msgstr "سامانهٔ ساخت برای برنامه‌های کمکیِ <filename>/rescue</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:345
msgid "<filename>sbin/</filename>"
msgstr "<filename>sbin/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:346
msgid "Source for files in <filename>/sbin</filename>"
msgstr "منبع پرونده‌ها در <filename>/sbin</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:350
msgid "<filename>secure/</filename>"
msgstr "<filename>secure/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:351
msgid "Contributed cryptographic sources"
msgstr "منابع رمزنگاری اعطا شده"

#. (itstool) path: row/entry
#: book.translate.xml:355
msgid "<filename>share/</filename>"
msgstr "<filename>share/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:356
msgid "Source for files in <filename>/usr/share</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/share</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:360
msgid "<filename>sys/</filename>"
msgstr "<filename>sys/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:361
msgid "Kernel source files"
msgstr "منبع پرونده‌های هسته"

#. (itstool) path: row/entry
#: book.translate.xml:365
msgid "<filename>tests/</filename>"
msgstr "<filename>tests/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:366
msgid "The FreeBSD test suite"
msgstr "مجموعه آزمون FreeBSD"

#. (itstool) path: row/entry
#: book.translate.xml:370
msgid "<filename>tools/</filename>"
msgstr "<filename>tools/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:371
msgid "Tools used for maintenance and testing of FreeBSD"
msgstr "ابزار استفاده شده در نگه‌داری و آزمایش FreeBSD"

#. (itstool) path: row/entry
#: book.translate.xml:376
msgid "<filename>usr.bin/</filename>"
msgstr "<filename>usr.bin/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:377
msgid "Source for files in <filename>/usr/bin</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/bin</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:381
msgid "<filename>usr.sbin/</filename>"
msgstr "<filename>usr.sbin/</filename>"

#. (itstool) path: row/entry
#: book.translate.xml:382
msgid "Source for files in <filename>/usr/sbin</filename>"
msgstr "منبع پرونده‌ها در <filename>/usr/sbin</filename>"

#. (itstool) path: info/title
#: book.translate.xml:398
msgid "Programming Tools"
msgstr "ابزار برنامه‌نویسی"

#. (itstool) path: authorgroup/author
#: book.translate.xml:401
msgid ""
"<personname> <firstname>James</firstname> <surname>Raynard</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname><firstname>James</firstname><surname>Raynard</surname></"
"personname><contrib>نوشته شده توسط </contrib>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:408
msgid ""
"<personname> <firstname>Murray</firstname> <surname>Stokely</surname> </"
"personname>"
msgstr ""
"<personname><firstname>Murray</firstname><surname>Stokely</surname></"
"personname>"

#. (itstool) path: sect1/title
#: book.translate.xml:418 book.translate.xml:2962 book.translate.xml:4885
#: book.translate.xml:9418
msgid "Synopsis"
msgstr "چکیده"

#. (itstool) path: sect1/para
#: book.translate.xml:420
msgid ""
"This chapter is an introduction to using some of the programming tools "
"supplied with FreeBSD, although much of it will be applicable to many other "
"versions of <trademark class=\"registered\">UNIX</trademark>. It does "
"<emphasis>not</emphasis> attempt to describe coding in any detail. Most of "
"the chapter assumes little or no previous programming knowledge, although it "
"is hoped that most programmers will find something of value in it."
msgstr ""
"این بخش مقدمه‌ای به برخی از ابزارهای برنامه‌نویسی عرضه شده همراه با FreeBSD "
"است، هرچند حجم زیادی به بسیاری از نسخ دیگر <trademark class=\"registered"
"\">UNIX</trademark> نیز صدق می‌کند. این بخش قصد تشریح جزئیات برنامه‌نویسی را "
"<emphasis>ندارد</emphasis>. بیشتر این بخش فرض بر هیچ یا اندک شناخت "
"برنامه‌نویسی دارد، گرچه امید بر این است که اکثر برنامه‌نویسان چیزی ارزشمند در "
"این بخش خواهند یافت."

#. (itstool) path: sect1/para
#: book.translate.xml:432
msgid ""
"FreeBSD offers an excellent development environment. Compilers for C and C++ "
"and an assembler come with the basic system, not to mention classic "
"<trademark class=\"registered\">UNIX</trademark> tools such as <command>sed</"
"command> and <command>awk</command>. If that is not enough, there are many "
"more compilers and interpreters in the Ports collection. The following "
"section, <link linkend=\"tools-programming\">Introduction to Programming</"
"link>, lists some of the available options. FreeBSD is very compatible with "
"standards such as <acronym><trademark class=\"registered\">POSIX</"
"trademark></acronym> and <acronym>ANSI</acronym> C, as well with its own BSD "
"heritage, so it is possible to write applications that will compile and run "
"with little or no modification on a wide range of platforms."
msgstr ""
"FreeBSD یک محیط توسعهٔ عالی ارائه می‌دهد. همگردان‌‌های C و C++ و یک همگذار "
"به‌همراه سیستم پایه عرضه می‌شوند، ابزار دیرینهٔ <trademark class=\"registered"
"\">UNIX</trademark> مانند <command>sed</command> و <command>awk</command> هم "
"که دیگر نیازی به اشاره ندارند. اگر این کافی نباشد، همگردان‌ها و مفسران "
"بسیاری در مجموعه پورت‌ها هستند. بخش پیش‌رو، <link linkend=\"tools-"
"programming\">پیش‌درآمدی بر برنامه‌نویسی</link>، گزینه‌های موجود را فهرست می‌"
"کند. FreeBSD بسی سازگار با استانداردهایی چون <acronym><trademark class="
"\"registered\">POSIX</trademark></acronym> و <acronym>ANSI</acronym> C، و "
"همچنین میراث BSD خود است، از این رو نوشتن برنامه‌کاربردی‌هایی که با کمترین "
"یا هیچ تغییری می‌توانند بر روی دامنهٔ گسترده‌ای از بسترها ترجمه و اجرا شوند، "
"میسر است."

#. (itstool) path: sect1/para
#: book.translate.xml:445
msgid ""
"However, all this power can be rather overwhelming at first if you have "
"never written programs on a <trademark class=\"registered\">UNIX</trademark> "
"platform before. This document aims to help you get up and running, without "
"getting too deeply into more advanced topics. The intention is that this "
"document should give you enough of the basics to be able to make some sense "
"of the documentation."
msgstr ""
"با این حال، اگر شما پش از این برنامه‌ای بر روی بستر <trademark class="
"\"registered\">UNIX</trademark> ننوشتید، این همه قدرت می‌تواند در ابتدا "
"پیچیده باشد. هدف این دبیزه راه انداختن شما بدون درگیری عمیق با موضوعات "
"پیشرفته‌تر است. مقصود این است که در این دبیزه اطلاعات کافی از اصول پایه به "
"شما داده شود تا بتوانید از مستندات موجود استفاده کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:452
msgid ""
"Most of the document requires little or no knowledge of programming, "
"although it does assume a basic competence with using <trademark class="
"\"registered\">UNIX</trademark> and a willingness to learn!"
msgstr ""
"بیشترِ این دبیزه به هیچ یا اندک دانش برنامه‌نویسی نیاز دارد، اگرچه فرض بر "
"توانایی استفادهٔ پایه از <trademark class=\"registered\">UNIX</trademark> و "
"تمایل به یادگیری است!"

#. (itstool) path: sect1/title
#: book.translate.xml:459
msgid "Introduction to Programming"
msgstr "پیش‌درآمدی بر برنامه‌نویسی"

#. (itstool) path: sect1/para
#: book.translate.xml:461
msgid ""
"A program is a set of instructions that tell the computer to do various "
"things; sometimes the instruction it has to perform depends on what happened "
"when it performed a previous instruction. This section gives an overview of "
"the two main ways in which you can give these instructions, or "
"<quote>commands</quote> as they are usually called. One way uses an "
"<firstterm>interpreter</firstterm>, the other a <firstterm>compiler</"
"firstterm>. As human languages are too difficult for a computer to "
"understand in an unambiguous way, commands are usually written in one or "
"other languages specially designed for the purpose."
msgstr ""
"برنامه مجموعه‌ای از دستورالعمل‌ها است که کارهای مخلفتی انجام می‌دهد؛ گاهی "
"اجرای یک دستورالعمل وابسته به نتیجه دستورالعمل قبلی است. این بخش به بررسی "
"اجمالی دو حالت عمده‌ای می‌پردازد که شما می‌توانید این دستورالعمل‌ها، یا "
"به‌گفته‌ای مرسوم‌تر <quote>دستورات</quote> را تعریف کنید. یک روش از "
"<firstterm>مفسر</firstterm> استفاده می‌کند و دیگری از <firstterm>همگردان</"
"firstterm>. از آنجایی که درک صریح زبان انسان برای رایانه بسیار دشوار است، "
"دستورات به‌طور معمول به زبان‌هایی که برای این نیاز طراحی شده‌اند نوشته "
"می‌شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:474
msgid "Interpreters"
msgstr "مفسرها"

#. (itstool) path: sect2/para
#: book.translate.xml:476
msgid ""
"With an interpreter, the language comes as an environment, where you type in "
"commands at a prompt and the environment executes them for you. For more "
"complicated programs, you can type the commands into a file and get the "
"interpreter to load the file and execute the commands in it. If anything "
"goes wrong, many interpreters will drop you into a debugger to help you "
"track down the problem."
msgstr ""
"با یک مفسر، زبان مانند یک محیط می‌شود که شما در آن دستورات را وارد می‌کنید و "
"محیط آنها را برای شما اجرا می‌کند. برای برنامه‌های پیچیده‌تر، می‌توانید "
"دستورات را داخل یک پرونده بنویسید و از مفسر برای بارگیری آن پرونده و اجرای "
"دستورات استفاده کنید. اگر خطایی رخ دهد، بسیاری از مفسرها به شما یک اشکال‌زدا "
"برای وارسی مشکل می‌دهند."

#. (itstool) path: sect2/para
#: book.translate.xml:484
msgid ""
"The advantage of this is that you can see the results of your commands "
"immediately, and mistakes can be corrected readily. The biggest disadvantage "
"comes when you want to share your programs with someone. They must have the "
"same interpreter, or you must have some way of giving it to them, and they "
"need to understand how to use it. Also users may not appreciate being thrown "
"into a debugger if they press the wrong key! From a performance point of "
"view, interpreters can use up a lot of memory, and generally do not generate "
"code as efficiently as compilers."
msgstr ""
"مزیت این امر این است که شما نتیجهٔ دستورات خود را فوراً مشاهده می‌کنید، و "
"اشتباهات را به‌راحتی می‌توانید اصلاح کنید. بزرگترین نقطه ضعف زمانی مشهود است "
"که شما می‌خواهید برنامهٔ خود را با کسی به اشتراک بذارید. ایشان باید همان "
"مفسر را داشته باشند، یا شما باید راهی برای تحویل آن داشته باشید، و ایشان "
"بدانند که چگونه از آن استفاده کنند. همچنین ممکن است کاربران علاقه‌ای به "
"هدایت شدن به یک اشکال‌زدا در صورت فشردن کلیدی اشتباه را نداشته باشند! از "
"منظر عملکرد، مفسرها می‌توانند حافظهٔ زیادی مصرف کنند، و به‌طور کلی کدی به "
"کارآمدی همگردان‌ها تولید نمی‌کنند."

#. (itstool) path: sect2/para
#: book.translate.xml:495
msgid ""
"In my opinion, interpreted languages are the best way to start if you have "
"not done any programming before. This kind of environment is typically found "
"with languages like Lisp, Smalltalk, Perl and Basic. It could also be argued "
"that the <trademark class=\"registered\">UNIX</trademark> shell "
"(<command>sh</command>, <command>csh</command>) is itself an interpreter, "
"and many people do in fact write shell <quote>scripts</quote> to help with "
"various <quote>housekeeping</quote> tasks on their machine. Indeed, part of "
"the original <trademark class=\"registered\">UNIX</trademark> philosophy was "
"to provide lots of small utility programs that could be linked together in "
"shell scripts to perform useful tasks."
msgstr ""
"به نظر من، اگر تا به‌حال برنامه‌نویسی نکردید زبان‌های تفسیری بهترین راه برای "
"شروع هستند. این نوع محیط معمولاً همراه زبان‌هایی چون List، Smalltalk، Perl و "
"Basic یافت می‌شود. همچنین می‌توان استدلال کرد که پوستهٔ <trademark class="
"\"registered\">UNIX</trademark> (<command>sh</command>, "
"<command>csh</command>) خود یک مفسر است، و به‌راستی افراد بسیاری در پوسته "
"<quote>اجرانامه‌هایی</quote> برای کمک در کارهای <quote>نگهداری</quote> "
"دستگاه خود می‌نویسند. در واقع، بخشی از فلسفه اصلی <trademark class="
"\"registered\">UNIX</trademark> ارائه بسیاری ابزار کوچک بود که بتوانند با "
"یکدیگر از طریق اجرانامه‌های پوسته برای انجام کارهای مفید وصل شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:509
msgid "Interpreters Available with FreeBSD"
msgstr "مفسرهای موجود در FreeBSD"

#. (itstool) path: sect2/para
#: book.translate.xml:511
msgid ""
"Here is a list of interpreters that are available from the FreeBSD Ports "
"Collection, with a brief discussion of some of the more popular interpreted "
"languages."
msgstr ""
"در اینجا فهرستی از مفسرهای موجود در مجموعه پورت‌های FreeBSD همراه با بررسی "
"اجمالی برخی از زبان‌های تفسیری مشهور آمده است."

#. (itstool) path: sect2/para
#: book.translate.xml:515
msgid ""
"Instructions on how to get and install applications from the Ports "
"Collection can be found in the <link xlink:href=\"@@URL_RELPREFIX@@/doc/"
"en_US.ISO8859-1/books/handbook/ports-using.html\">Ports section</link> of "
"the handbook."
msgstr ""
"راهنمای دریافت و نصب برنامه‌های کاربردی از مجموعه پورت‌ها را می‌توان در <link "
"xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ports-"
"using.html\">بخش پورت‌ها</link> از کتاب راهنما پیدا کرد."

#. (itstool) path: varlistentry/term
#: book.translate.xml:521
msgid "<acronym>BASIC</acronym>"
msgstr "<acronym>BASIC</acronym>"

#. (itstool) path: listitem/para
#: book.translate.xml:524
msgid ""
"Short for Beginner's All-purpose Symbolic Instruction Code. Developed in the "
"1950s for teaching University students to program and provided with every "
"self-respecting personal computer in the 1980s, <acronym>BASIC</acronym> has "
"been the first programming language for many programmers. It is also the "
"foundation for Visual Basic."
msgstr ""
"کوتاه شدهٔ Beginner's All-purpose Symbolic Instruction Code، به‌معنای "
"دستورالعمل‌های نمادینِ همه‌منظوره برای نوآموزان. در دهه پنجاه میلادی برای "
"تدریس برنامه‌نویسی به دانشجویان دانشگاه توسعه یافت و در دهه هشتاد میلادی به‌"
"همراه هر رایانهٔ شخصی <acronym>BASIC</acronym> اولین زبان برنامه‌نویسی برای "
"بسیاری از برنامه‌نویسان بوده‌است. همچنین پایه و اساس Visual Basic است."

#. (itstool) path: listitem/para
#: book.translate.xml:532
msgid ""
"The Bywater Basic Interpreter can be found in the Ports Collection as "
"<package>lang/bwbasic</package> and the Phil Cockroft's Basic Interpreter "
"(formerly Rabbit Basic) is available as <package>lang/pbasic</package>."
msgstr ""
"مفسر ‌Bywater Basic را می‌توان در مجموعه پورت‌ها به‌عنوان <package>lang/"
"bwbasic</package> و مفسر Phil Cockroft (سابقاً Rabbit Basic) را به‌عنوان "
"<package>lang/pbasic</package> یافت."

#. (itstool) path: varlistentry/term
#: book.translate.xml:541
msgid "Lisp"
msgstr "Lisp"

#. (itstool) path: listitem/para
#: book.translate.xml:544
msgid ""
"A language that was developed in the late 1950s as an alternative to the "
"<quote>number-crunching</quote> languages that were popular at the time. "
"Instead of being based on numbers, Lisp is based on lists; in fact, the name "
"is short for <quote>List Processing</quote>. It is very popular in "
"<acronym>AI</acronym> (Artificial Intelligence) circles."
msgstr ""
"یک زبان که در اواخر دهه پنجاه میلادی به‌عنوان جایگزینی برای زبان‌های "
"<quote>جوندهٔ عدد</quote> محبوب در آن زبان توسعه یافت. Lisp به‌جای اینکه "
"مبتنی بر اعداد باشد، مبتنی بر فهرست‌ها است؛ در واقع، اسم آن کوتاه شدهٔ "
"<quote>List Processing</quote> به‌معنای پردازش فهرست است. این زبان در زمینه‌"
"های <acronym>AI</acronym> (هوش مصنوعی) بسیار محبوب است."

#. (itstool) path: listitem/para
#: book.translate.xml:552
msgid ""
"Lisp is an extremely powerful and sophisticated language, but can be rather "
"large and unwieldy."
msgstr ""
"Lisp زبانی به‌شدت قدرتمند و حرفه‌ای است، اما می‌تواند بسیار هم بزرگ و بدقلق "
"باشد."

#. (itstool) path: listitem/para
#: book.translate.xml:555
msgid ""
"Various implementations of Lisp that can run on <trademark class=\"registered"
"\">UNIX</trademark> systems are available in the Ports Collection for "
"FreeBSD. GNU Common Lisp can be found as <package>lang/gcl</package>. CLISP "
"by Bruno Haible and Michael Stoll is available as <package>lang/clisp</"
"package>. For CMUCL, which includes a highly-optimizing compiler too, or "
"simpler Lisp implementations like SLisp, which implements most of the Common "
"Lisp constructs in a few hundred lines of C code, <package>lang/cmucl</"
"package> and <package>lang/slisp</package> are available respectively."
msgstr ""
"پیاده‌سازی‌های متعددی از Lisp که بر روی <trademark class=\"registered\""
">UNIX</trademark> بتوان اجرا کرد در مجموعه پورت‌ها برای FreeBSD موجود است. "
"GNU Common Lisp را می‌توان به‌عنوان <package>lang/gcl</package> یافت. CLISP "
"از Bruno Haible و Michael Stoll به‌عنوان <package>lang/clisp</package> موجود "
"است. برای CMUCL، که یک همگردان بهینه هم به‌همراه دارد، یا پیاده‌سازی‌های "
"ساده‌تری از Lisp مانند SLisp، که بیشتر ساختار Common Lisp را در چند صد خط کد "
"C پیاده‌سازی می‌کند، به‌ترتیب <package>lang/cmucl</package> و <package>lang/"
"slisp</package> در دسترس هستند."

#. (itstool) path: varlistentry/term
#: book.translate.xml:571
msgid "Perl"
msgstr "Perl"

#. (itstool) path: listitem/para
#: book.translate.xml:574
msgid ""
"Very popular with system administrators for writing scripts; also often used "
"on World Wide Web servers for writing <acronym>CGI</acronym> scripts."
msgstr ""
"بسیار محبوب مدیران سامانه برای اجرانامه‌نویسی؛ و همچنین استفاده شده در تارِ "
"جهان‌گستر برای نوشتن اجرانامه‌های <acronym>CGI</acronym>."

#. (itstool) path: listitem/para
#: book.translate.xml:578
msgid ""
"Perl is available in the Ports Collection as <package>lang/perl5.24</"
"package> for all FreeBSD releases."
msgstr ""
"Perl در مجموعه پورت‌ها به‌عنوان <package>lang/perl5.24</package> برای تمامی "
"نسخ FreeBSD موجود است."

#. (itstool) path: varlistentry/term
#: book.translate.xml:585
msgid "Scheme"
msgstr "Scheme"

#. (itstool) path: listitem/para
#: book.translate.xml:588
msgid ""
"A dialect of Lisp that is rather more compact and cleaner than Common Lisp. "
"Popular in Universities as it is simple enough to teach to undergraduates as "
"a first language, while it has a high enough level of abstraction to be used "
"in research work."
msgstr ""
"یک گویش از زبان Lisp که نسبتاً متراکم‌تر و تمیز‌تر از Common Lisp است. محبوب "
"دانشگاه‌ها به‌دلیل سهولت آن برای تدریس زبان اول به دانشجویان دوره کارشناسی، "
"در حالی که دارای سطح بالایی از انتزاع است و می‌تواند در کار تحقیقاتی استفاده "
"شود."

#. (itstool) path: listitem/para
#: book.translate.xml:594
msgid ""
"Scheme is available from the Ports Collection as <package>lang/elk</package> "
"for the Elk Scheme Interpreter. The MIT Scheme Interpreter can be found in "
"<package>lang/mit-scheme</package> and the SCM Scheme Interpreter in "
"<package>lang/scm</package>."
msgstr ""
"Scheme در مجموعه پورت‌ها به‌عنوان <package>lang/elk</package> برای مفسر Elk "
"Scheme موجود است. مفسر MIT Scheme را در <package>lang/mit-scheme</package> و "
"مفسر SCM Scheme را در <package>lang/scm</package> می‌توان یافت."

#. (itstool) path: varlistentry/term
#: book.translate.xml:605
msgid "Icon"
msgstr "Icon"

#. (itstool) path: listitem/para
#: book.translate.xml:608
msgid ""
"Icon is a high-level language with extensive facilities for processing "
"strings and structures. The version of Icon for FreeBSD can be found in the "
"Ports Collection as <package>lang/icon</package>."
msgstr ""
"Icon یک زبان سطح بالا با امکانات گسترده برای پردازش رشته‌ها و ساختارهاست. "
"نسخهٔ Icon برای FreeBSD را می‌توان در مجموعه پورت‌ها به‌عنوان <package>lang/"
"icon</package> یافت."

#. (itstool) path: varlistentry/term
#: book.translate.xml:617
msgid "Logo"
msgstr "Logo"

#. (itstool) path: listitem/para
#: book.translate.xml:620
msgid ""
"Logo is a language that is easy to learn, and has been used as an "
"introductory programming language in various courses. It is an excellent "
"tool to work with when teaching programming to smaller age groups, as it "
"makes creation of elaborate geometric shapes an easy task."
msgstr ""
"Logo یک زبان ساده برای یادگیری است، و در بسیاری از دوره‌های آموزشی به عنوان "
"زبان برنامه‌نویسی مقدماتی مورد استفاده قرار گرفته است. یک زبان بی‌اندازه خوب "
"برای آموزش به گروه‌های سنی پایین‌تر است، چرا که ساخت اشکال هندسی دقیق را به "
"یک کار ساده تبدیل می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:627
msgid ""
"The latest version of Logo for FreeBSD is available from the Ports "
"Collection in <package>lang/logo</package>."
msgstr ""
"آخرین نسخه Logo برای FreeBSD در <package>lang/logo</package> از مجموعه "
"پورت‌ها موجود است."

#. (itstool) path: varlistentry/term
#: book.translate.xml:634
msgid "Python"
msgstr "Python"

#. (itstool) path: listitem/para
#: book.translate.xml:637
msgid ""
"Python is an Object-Oriented, interpreted language. Its advocates argue that "
"it is one of the best languages to start programming with, since it is "
"relatively easy to start with, but is not limited in comparison to other "
"popular interpreted languages that are used for the development of large, "
"complex applications (Perl and Tcl are two other languages that are popular "
"for such tasks)."
msgstr ""
"Python یک زبان شی‌گرا و تفسیری است. طرفداران این زبان استدلال می‌کنند که یکی "
"از بهترین زبان‌ها برای شروع برنامه‌نویسی است، چرا که نسبتاً زبان ساده‌ای "
"برای شروع است و اما در مقایسه با دیگر زبان‌های تفسیری استفاده شده در توسعه "
"برنامه‌کاربردی‌های بزرگ و پیچیده هم محدود و کم‌توان نیست (Perl و Tcl دو زبان "
"دیگر مشهور در چنین زمینه‌هایی هستند)."

#. (itstool) path: listitem/para
#: book.translate.xml:646
msgid ""
"The latest version of Python is available from the Ports Collection in "
"<package>lang/python</package>."
msgstr ""
"نسخه آخر Python در <package>lang/python</package> از مجموعه پورت‌ها موجود "
"است."

#. (itstool) path: varlistentry/term
#: book.translate.xml:653
msgid "Ruby"
msgstr "Ruby"

#. (itstool) path: listitem/para
#: book.translate.xml:656
msgid ""
"Ruby is an interpreter, pure object-oriented programming language. It has "
"become widely popular because of its easy to understand syntax, flexibility "
"when writing code, and the ability to easily develop and maintain large, "
"complex programs."
msgstr ""
"Ruby یک زبان تفسیری و شی‌گرای خالص است. این زبان به دلیل سهولت و قابل فهم "
"بودن قواعد نحوی، انعطاف‌پذیری به‌هنگام نوشتن کد، و قابلیت در توسعهٔ راحت و "
"نگهداری برنامه‌های بزرگ و پیچیده، بسیار مشهور شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:662
msgid ""
"Ruby is available from the Ports Collection as <package>lang/ruby25</"
"package>."
msgstr ""
"Ruby به‌عنوان <package>lang/ruby25</package> در مجموعه پورت‌ها موجود است."

#. (itstool) path: varlistentry/term
#: book.translate.xml:668
msgid "Tcl and Tk"
msgstr "Tcl و Tk"

#. (itstool) path: listitem/para
#: book.translate.xml:671
msgid ""
"Tcl is an embeddable, interpreted language, that has become widely used and "
"became popular mostly because of its portability to many platforms. It can "
"be used both for quickly writing small, prototype applications, or (when "
"combined with Tk, a GUI toolkit) fully-fledged, featureful programs."
msgstr ""
"Tcl یک زبان تفسیری و قابل جاسازی است که به‌طور گسترده مورد استفاده قرار "
"گرفته است و بیشتر به دلیل انتقال‌پذیری‌اش به دیگر بسترها شهرت یافته است. می‌"
"تواند به‌منظور سریع نوشتنِ نرم‌افزارهای نمونهٔ اصلیِ کوچک، یا برنامه‌های "
"(زمانی‌که با Tk، یک مجموعه ابزار گرافیکی، ترکیب شود) همه‌جانبه و با امکانات "
"فراوان، آن را به‌کاربست."

#. (itstool) path: listitem/para
#: book.translate.xml:678
msgid ""
"Various versions of Tcl are available as ports for FreeBSD. The latest "
"version, Tcl 8.5, can be found in <package>lang/tcl87</package>."
msgstr ""
"نسخ مختلف Tcl برای FreeBSD در مجموعه پورت‌ها موجود است. نسخهٔ آخر را، Tcl "
"8.5 را، می‌توان در <package>lang/tcl87</package> یافت."

#. (itstool) path: sect2/title
#: book.translate.xml:687
msgid "Compilers"
msgstr "همگردان‌ها"

#. (itstool) path: footnote/para
#: book.translate.xml:695
msgid "If you run it in the shell, you may get a core dump."
msgstr "اگر در پوسته اجرا کنید ممکن است که یک core dump بگیرید."

#. (itstool) path: sect2/para
#: book.translate.xml:689
msgid ""
"Compilers are rather different. First of all, you write your code in a file "
"(or files) using an editor. You then run the compiler and see if it accepts "
"your program. If it did not compile, grit your teeth and go back to the "
"editor; if it did compile and gave you a program, you can run it either at a "
"shell command prompt or in a debugger to see if it works properly.<_:"
"footnote-1/>"
msgstr ""
"همگردان‌ها نسبتاً متفاوت‌اند. اول از همه، شما کد را در یک فایل (یا چند فایل) "
"توسط یک ویرایشگر می‌نویسید. سپس همگردان را اجرا می‌کنید تا ببینید برنامهٔ "
"شما را تأیید می‌کند یا خیر. اگر همگردانی نکرد، دوباره به ویرایشگر خود "
"برگردید؛ اگر همگردانی کرد و به شما یک برنامه داد، می‌توانید آن را یا در "
"پوسته و یا در یک اشکال‌زدا اجرا کنید تا ببینید که درست کار می‌کند یا خیر.<_:"
"footnote-1/>"

#. (itstool) path: sect2/para
#: book.translate.xml:698
msgid ""
"Obviously, this is not quite as direct as using an interpreter. However it "
"allows you to do a lot of things which are very difficult or even impossible "
"with an interpreter, such as writing code which interacts closely with the "
"operating system—or even writing your own operating system! It is also "
"useful if you need to write very efficient code, as the compiler can take "
"its time and optimize the code, which would not be acceptable in an "
"interpreter. Moreover, distributing a program written for a compiler is "
"usually more straightforward than one written for an interpreter—you can "
"just give them a copy of the executable, assuming they have the same "
"operating system as you."
msgstr ""
"بدیهی است که این به روشنیِ استفاده از یک مفسر نیست. با این حال به شما اجازهٔ "
"انجام بسیاری از کارها را می‌دهد که با یک مفسر یا بسیار دشوار است و یا حتی "
"غیرممکن، مثل نوشتن کدی که از نزدیک با سامانهٔ عامل تعامل داشته باشد - یا حتی "
"نوشتن سامانهٔ عامل خودتان! همچنین اگر شما نیاز به نوشتن کدی پربازده داشته "
"باشید مفید است، چرا که همگردان در زمان مورد نیاز کد را بهینه می‌سازد، چیزی "
"که در یک مفسر قابل‌پذیرش نخواهد بود. علاوه بر این، توزیع برنامهٔ نوشته شده "
"برای یک همگردان معمولاً ساده‌تر از توزیع برنامهٔ نوشته شده برای یک مفسر است—"
"تنها کافیست با این فرض که مخاطب شما سامانهٔ مشابه شما را دارد، نسخه‌ای "
"اجراپذیر به ایشان بدهید."

#. (itstool) path: sect2/para
#: book.translate.xml:711
msgid ""
"As the edit-compile-run-debug cycle is rather tedious when using separate "
"programs, many commercial compiler makers have produced Integrated "
"Development Environments (<acronym>IDE</acronym>s for short). FreeBSD does "
"not include an IDE in the base system, but <package>devel/kdevelop</package> "
"is available in the Ports Collection and many use <application>Emacs</"
"application> for this purpose. Using <application>Emacs</application> as an "
"IDE is discussed in <xref linkend=\"emacs\"/>."
msgstr ""
"از آنجا که چرخهٔ ویرایش-همگردانی-اجرا-اشکال‌زدایی هنگام استفاده از چند ابزار "
"چرخه‌ای خسته‌کننده است، بسیاری از همگردان‌سازان تجاری، محیط‌های توسعهٔ یک‌"
"پارچه (به‌اختصار <acronym>IDE</acronym>) را ارائه داده‌اند. FreeBSD شامل IDE "
"در ریشهٔ سامانه نیست، اما <package>devel/kdevelop</package> در مجموعه پورت‌"
"ها موجود است و بسیاری هم از <application>Emacs</application> برای این منظور "
"استفاده می‌کنند. استفاده از <application>Emacs</application> به‌منظور IDE در "
"<xref linkend=\"emacs\"/> مطرح شده است."

#. (itstool) path: sect1/title
#: book.translate.xml:725
msgid "Compiling with <command>cc</command>"
msgstr "همگردانی با <command>cc</command>"

#. (itstool) path: sect1/para
#: book.translate.xml:727
msgid ""
"This section deals with the <application>gcc</application> and "
"<application>clang</application> compilers for C and C++, since they come "
"with the FreeBSD base system. Starting with FreeBSD 10.X <command>clang</"
"command> is installed as <command>cc</command>. The details of producing a "
"program with an interpreter vary considerably between interpreters, and are "
"usually well covered in the documentation and on-line help for the "
"interpreter."
msgstr ""
"این بخش همگردان‌های <application>gcc</application> و <application>clang</"
"application> را برای C و C++ پوشش می‌دهد، چرا که همراه با ریشهٔ سامانه "
"FreeBSD ارائه می‌شوند. از FreeBSD 10.X دستور <command>clang</command> به‌"
"عنوان <command>cc</command> نصب شده است. جزئیات تولید یک برنامه بین مفسرهای "
"مختلف بسیار متفاوت است، و معمولاً در مستندات و کمک‌های برخط آن مفسر به خوبی "
"تشریح شده است."

#. (itstool) path: sect1/para
#: book.translate.xml:736
msgid ""
"Once you have written your masterpiece, the next step is to convert it into "
"something that will (hopefully!) run on FreeBSD. This usually involves "
"several steps, each of which is done by a separate program."
msgstr ""
"هنگامی که شاهکار خود را نوشتید، مرحله بعد تبدیل آن به چیزی است که "
"(خوش‌بختانه!) بر روی FreeBSD اجرا خواهد شد. این معمولاً شامل چند مرحله است "
"که هر یک توسط برنامه‌ای مجزا انجام می‌شود."

#. (itstool) path: step/para
#: book.translate.xml:743
msgid ""
"Pre-process your source code to remove comments and do other tricks like "
"expanding macros in C."
msgstr ""
"کد خود را پیش‌پردازش کنید تا توضیحات حذف گشته و ترفندهای دیگری چون گسترش "
"ماکروهای موجود در C را انجام دهید."

#. (itstool) path: step/para
#: book.translate.xml:748
msgid ""
"Check the syntax of your code to see if you have obeyed the rules of the "
"language. If you have not, it will complain!"
msgstr ""
"قواعد نحوی کد خود را جهت حصول اطمینان از اینکه قوانین زبان را رعایت کرده "
"باشید بررسی کنید. اگر چنین نکرده باشید، ایراد خواهد گرفت!"

#. (itstool) path: step/para
#: book.translate.xml:754
msgid ""
"Convert the source code into assembly language—this is very close to machine "
"code, but still understandable by humans. Allegedly."
msgstr ""
"کد منبع را به زبان همگذاری (assembly) تبدیل کنید—بسیار نزدیک به کد دستگاه "
"هست، اما همچنان قابل فهم توسط انسان‌ها. ظاهراً."

#. (itstool) path: step/para
#: book.translate.xml:760
msgid ""
"Convert the assembly language into machine code—yep, we are talking bits and "
"bytes, ones and zeros here."
msgstr ""
"زبان همگذاری را به کد دستگاه تبدیل کنید—بلی، اینجا در مورد بیت و بایت‌ها، و "
"صفر و یک‌ها حرف می‌زنیم."

#. (itstool) path: step/para
#: book.translate.xml:766
msgid ""
"Check that you have used things like functions and global variables in a "
"consistent way. For example, if you have called a non-existent function, it "
"will complain."
msgstr ""
"استفاده از توابع و متغیرهای سراسری را مورد بررسی قرار دهید تا مطمئن شوید "
"سازگار با یکدیگر هستند. برای مثال، اگر تابع ناموجودی را صدا زده‌اید، ایراد "
"خواهد گرفت."

#. (itstool) path: step/para
#: book.translate.xml:773
msgid ""
"If you are trying to produce an executable from several source code files, "
"work out how to fit them all together."
msgstr ""
"اگر تلاش به ارائهٔ یک برنامهٔ اجراپذیر از چندین پروندهٔ کد منبع را دارید، "
"راهی برای یکپارچه کردن آنها بیابید."

#. (itstool) path: step/para
#: book.translate.xml:779
msgid ""
"Work out how to produce something that the system's run-time loader will be "
"able to load into memory and run."
msgstr ""
"راهی برای تولید چیزی که بارکنِ زمان اجرای سامانه بتواند آن را در حافظه بار و "
"اجرا کند بیابید."

#. (itstool) path: step/para
#: book.translate.xml:785
msgid "Finally, write the executable on the filesystem."
msgstr "و سرانجام، برنامهٔ اجراپذیر را بر روی سامانهٔ پرونده بنویسید."

#. (itstool) path: sect1/para
#: book.translate.xml:789
msgid ""
"The word <firstterm>compiling</firstterm> is often used to refer to just "
"steps 1 to 4—the others are referred to as <firstterm>linking</firstterm>. "
"Sometimes step 1 is referred to as <firstterm>pre-processing</firstterm> and "
"steps 3-4 as <firstterm>assembling</firstterm>."
msgstr ""
"واژهٔ <firstterm>همگردانی</firstterm> بیشتر برای اشاره به مراحل ۱ تا ۴ "
"استفاده می‌شود—مراحل دیگر <firstterm>پیونددهی</firstterm> نامیده می‌شوند. "
"گاهی اوقات مرحله ۱ به‌عنوان <firstterm>پیش‌پردازش</firstterm> و مراحل ۳-۴ به‌"
"عنوان <firstterm>همگذاری</firstterm> نامیده می‌شوند."

#. (itstool) path: sect1/para
#: book.translate.xml:795
msgid ""
"Fortunately, almost all this detail is hidden from you, as <command>cc</"
"command> is a front end that manages calling all these programs with the "
"right arguments for you; simply typing"
msgstr ""
"خوشبختانه، بیشتر این جزئیات از شما پنهان‌اند، چرا که دستور <command>cc</"
"command> یک پایانهٔ جلویی است و صدا کردن تمام این برنامه‌ها با براهین درست "
"را مدیریت می‌کند؛ به‌سادگی نوشتن"

#. (itstool) path: sect1/screen
#: book.translate.xml:800
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc foobar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc foobar.c</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:802
msgid ""
"will cause <filename>foobar.c</filename> to be compiled by all the steps "
"above. If you have more than one file to compile, just do something like"
msgstr ""
"سبب می‌شود که <filename>foobar.c</filename> با تمام مراحل فوق همگردانی شود. "
"اگر بیشتر از یک پرونده برای همگردانی دارید، تنها کافیست چیزی بدین شکل انجام "
"دهید"

#. (itstool) path: sect1/screen
#: book.translate.xml:806
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc foo.c bar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc foo.c bar.c</userinput>"

#. (itstool) path: footnote/para
#: book.translate.xml:812
msgid ""
"In case you did not know, a binary sort is an efficient way of sorting "
"things into order and a bubble sort is not."
msgstr ""
"در صورتی که نمی‌دانستید، مرتب‌سازی دودویی یک روش پربازده برای مرتب‌سازی "
"موارد در ترتیب مشخص است و مرتب‌سازی حبابی چنین نیست."

#. (itstool) path: sect1/para
#: book.translate.xml:808
msgid ""
"Note that the syntax checking is just that—checking the syntax. It will not "
"check for any logical mistakes you may have made, like putting the program "
"into an infinite loop, or using a bubble sort when you meant to use a binary "
"sort.<_:footnote-1/>"
msgstr ""
"ملاحظه بفرمایید که بررسی قواعد نحوی فقط همین است - بررسی قواعد نحوی. خطاهای "
"منطقی محتمل شما را، مانند قرار دادن برنامه در یک حلقه بی‌نهایت، یا استفاده "
"از مرتب‌سازی حبابی زمانی که شما منظور شما مرتب‌سازی دودویی بوده، بررسی "
"نمی‌کند.<_:footnote-1/>"

#. (itstool) path: sect1/para
#: book.translate.xml:816
msgid ""
"There are lots and lots of options for <command>cc</command>, which are all "
"in the manual page. Here are a few of the most important ones, with examples "
"of how to use them."
msgstr ""
"گزینه‌های بسیار فراوانی برای <command>cc</command> در اختیار است، که تمامشان "
"در صفحهٔ راهنما قابل مشاهده هستند. در اینجا می‌توانید تعدادی از مهم‌ترین "
"آنها را به‌همراه مثال‌هایی در نحوهٔ استفادهٔ آنها مشاهده کنید."

#. (itstool) path: varlistentry/term
#: book.translate.xml:823
msgid "<option>-o <replaceable>filename</replaceable></option>"
msgstr "<option>-o <replaceable>filename</replaceable></option>"

#. (itstool) path: footnote/para
#: book.translate.xml:830
msgid "The reasons for this are buried in the mists of history."
msgstr "دلایل این امر در هاله‌ای از ابهامات تاریخی مدفون شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:828
msgid ""
"The output name of the file. If you do not use this option, <command>cc</"
"command> will produce an executable called <filename>a.out</filename>.<_:"
"footnote-1/>"
msgstr ""
"نام خروجی پرونده. اگر شما این گزینه را استفاده نکنید، <command>cc</command> "
"یک برنامهٔ اجراپذیر به نام <filename>a.out</filename> ایجاد خواهد کرد.<_:"
"footnote-1/>"

#. (itstool) path: informalexample/screen
#: book.translate.xml:835
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cc foobar.c</userinput>               <lineannotation>executable is a.out</lineannotation>\n"
"<prompt>%</prompt> <userinput>cc -o foobar foobar.c</userinput>     <lineannotation>executable is foobar</lineannotation>"
msgstr ""
"<prompt>%</prompt> <userinput>cc foobar.c</userinput>               "
"<lineannotation>executable is a.out</lineannotation>\n"
"<prompt>%</prompt> <userinput>cc -o foobar foobar.c</userinput>     "
"<lineannotation>executable is foobar</lineannotation>"

#. (itstool) path: varlistentry/term
#: book.translate.xml:842
msgid "<option>-c</option>"
msgstr "<option>-c</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:845
msgid ""
"Just compile the file, do not link it. Useful for toy programs where you "
"just want to check the syntax, or if you are using a <filename>Makefile</"
"filename>."
msgstr ""
"تنها پرونده را ترجمه کنید، آن را پیوند ندهید. برای برنامه‌های تمرینی که در "
"آن تنها می‌خواهید نحو را مورد بررسی قرار دهید، یا هنگامی‌که دارید از یک "
"<filename>Makefile</filename> استفاده می‌کنید مناسب است."

#. (itstool) path: informalexample/screen
#: book.translate.xml:850
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -c foobar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc -c foobar.c</userinput>"

#. (itstool) path: listitem/para
#: book.translate.xml:853
msgid ""
"This will produce an <firstterm>object file</firstterm> (not an executable) "
"called <filename>foobar.o</filename>. This can be linked together with other "
"object files into an executable."
msgstr ""
"یک <firstterm>پروندهٔ هدف</firstterm> (غیرقابل اجرا) به نام <filename>foobar."
"o</filename> ایجاد کنید. این پرونده می‌تواند به‌همراه پرونده‌های هدف دیگر به "
"یک برنامهٔ اجراپذیر پیوند داده شود."

#. (itstool) path: varlistentry/term
#: book.translate.xml:862
msgid "<option>-g</option>"
msgstr "<option>-g</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:865
msgid ""
"Create a debug version of the executable. This makes the compiler put "
"information into the executable about which line of which source file "
"corresponds to which function call. A debugger can use this information to "
"show the source code as you step through the program, which is "
"<emphasis>very</emphasis> useful; the disadvantage is that all this extra "
"information makes the program much bigger. Normally, you compile with "
"<option>-g</option> while you are developing a program and then compile a "
"<quote>release version</quote> without <option>-g</option> when you are "
"satisfied it works properly."
msgstr ""
"نسخه‌ای اشکال‌زدا از برنامهٔ اجراپذیر ایجاد کنید. این گزینه سبب می‌شود "
"همگردان اطلاعاتی را در مورد اینکه کدام خط از کدام پروندهٔ منبع با کدام "
"فراخوان تابع تطابق دارد در برنامهٔ اجراپذیر قرار دهد. یک اشکال‌زدا می‌تواند "
"از اطلاعات برای نشان‌دادن کد منبع در هنگام ورود شما به برنامه استفاده کند، "
"که این امر می‌تواند <emphasis>بسیار</emphasis> مفید باشد؛ ضعف آن در این است "
"که این اطلاعات اضافی به میزان قابل توجهی باعث بزرگتر شدن برنامه می‌شوند. به‌"
"طور معمول، شما زمانی از گزینهٔ <option>-g</option> برای همگردانی استفاده می‌"
"کنید که در حال توسعهٔ یک برنامه هستید و برای همگردانیِ <quote>نسخهٔ انتشار</"
"quote> هنگامی‌که از کارکرد صحیح آن مطمئن هستید دیگر از <option>-g</option> "
"استفاده نمی‌کنید."

#. (itstool) path: informalexample/screen
#: book.translate.xml:879
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -g foobar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc -g foobar.c</userinput>"

#. (itstool) path: footnote/para
#: book.translate.xml:886
msgid ""
"Note, we did not use the <option>-o</option> flag to specify the executable "
"name, so we will get an executable called <filename>a.out</filename>. "
"Producing a debug version called <filename>foobar</filename> is left as an "
"exercise for the reader!"
msgstr ""
"توجه، ما از نشان <option>-o</option> برای تعیین نام برنامه استفاده نکردیم، "
"در نتیجه برنامه‌ای اجراپذیر به نام <filename>a.out</filename> دریافت خواهیم "
"کرد. ساخت نسخهٔ اشکال‌زدا تحت عنوان <filename>foobar</filename> به‌عنوان "
"تمرین برای خواننده باقی مانده است!"

#. (itstool) path: listitem/para
#: book.translate.xml:882
msgid "This will produce a debug version of the program. <_:footnote-1/>"
msgstr "نسخه‌ای اشکال‌زدا از برنامه ایجاد می‌کند. <_:footnote-1/>"

#. (itstool) path: varlistentry/term
#: book.translate.xml:896
msgid "<option>-O</option>"
msgstr "<option>-O</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:899
msgid ""
"Create an optimized version of the executable. The compiler performs various "
"clever tricks to try to produce an executable that runs faster than normal. "
"You can add a number after the <option>-O</option> to specify a higher level "
"of optimization, but this often exposes bugs in the compiler's optimizer."
msgstr ""
"یک نسخهٔ بهینه از برنامه بسازید. همگردان چندین ترفند هوشمند پیاده می‌کند تا "
"سعی کند یک برنامهٔ اجراپذیر با سرعت اجرای بالاتر از حد معمول تولید کند. شما "
"می‌توانید یک عدد بعد از <option>-O</option> اضافه کنید تا سطح بالاتری از "
"بهینه‌سازی را تعیین کنید، اما این اغلب بهینه‌سازِ همگردان را در معرض اشکال "
"قرار می‌دهد."

#. (itstool) path: informalexample/screen
#: book.translate.xml:907
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -O -o foobar foobar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc -O -o foobar foobar.c</userinput>"

#. (itstool) path: listitem/para
#: book.translate.xml:910
msgid "This will produce an optimized version of <filename>foobar</filename>."
msgstr "یک نسخهٔ بهینه‌شده از <filename>foobar</filename> ایجاد می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:916
msgid ""
"The following three flags will force <command>cc</command> to check that "
"your code complies to the relevant international standard, often referred to "
"as the <acronym>ANSI</acronym> standard, though strictly speaking it is an "
"<acronym>ISO</acronym> standard."
msgstr ""
"سه نشان پیش‌رو دستور <command>cc</command> را مجبور می‌کنند تا بررسی کند که "
"کد شما مطابق با استاندارد بین‌المللی مربوطه همگردانی می‌شود، که معمولاً به "
"عنوان استاندارد <acronym>ANSI</acronym> یاد می‌شوند، اگرچه به‌طور دقیق یک "
"استاندارد <acronym>ISO</acronym> است."

#. (itstool) path: varlistentry/term
#: book.translate.xml:924
msgid "<option>-Wall</option>"
msgstr "<option>-Wall</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:927
msgid ""
"Enable all the warnings which the authors of <command>cc</command> believe "
"are worthwhile. Despite the name, it will not enable all the warnings "
"<command>cc</command> is capable of."
msgstr ""
"تمام هشدارهایی که نویسندگان <command>cc</command> به ارزشمند بودنشان باور "
"دارند را فعال کنید. فارق از نامش، تمام هشدارهایی که <command>cc</command> "
"قادر به نمایششان است را فعال نمی‌سازد."

#. (itstool) path: varlistentry/term
#: book.translate.xml:935
msgid "<option>-ansi</option>"
msgstr "<option>-ansi</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:938
msgid ""
"Turn off most, but not all, of the non-<acronym>ANSI</acronym> C features "
"provided by <command>cc</command>. Despite the name, it does not guarantee "
"strictly that your code will comply to the standard."
msgstr ""
"اکثر و نه اما تمام امکانات غیر <acronym>ANSI</acronym> C ارائه شده توسط "
"<command>cc</command> را خاموش کنید. فارق از نامش، به‌طور کامل تضمین نمی‌کند "
"که کد شما مطابق استاندارد باشد."

#. (itstool) path: varlistentry/term
#: book.translate.xml:947
msgid "<option>-pedantic</option>"
msgstr "<option>-pedantic</option>"

#. (itstool) path: listitem/para
#: book.translate.xml:950
msgid ""
"Turn off <emphasis>all</emphasis> <command>cc</command>'s non-<acronym>ANSI</"
"acronym> C features."
msgstr ""
"<emphasis>تمام</emphasis> امکانات دستور <command>cc</command> که پیرو "
"<acronym>ANSI</acronym> نیستند را خاموش کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:957
msgid ""
"Without these flags, <command>cc</command> will allow you to use some of its "
"non-standard extensions to the standard. Some of these are very useful, but "
"will not work with other compilers—in fact, one of the main aims of the "
"standard is to allow people to write code that will work with any compiler "
"on any system. This is known as <firstterm>portable code</firstterm>."
msgstr ""
"بدون این نشان‌ها، دستور <command>cc</command> به شما اجازه می‌دهد تا از بعضی "
"پسوند‌های غیر استانداردش هم استفاده کنید. برخی از آنها بسیار مفید هستند، اما "
"با دیگر همگردان‌ها کار نخواهند کرد - در حقیقت، یکی از اهداف اساسی استاندارد "
"این است که به افراد امکان نوشتن کدی را دهد که با هر همگردانی بر روی هر "
"سامانه‌ای کار کند. این کد به عنوان <firstterm>کد انتقال‌پذیر</firstterm> "
"شناخته می‌شود."

#. (itstool) path: sect1/para
#: book.translate.xml:965
msgid ""
"Generally, you should try to make your code as portable as possible, as "
"otherwise you may have to completely rewrite the program later to get it to "
"work somewhere else—and who knows what you may be using in a few years time?"
msgstr ""
"به‌طور معمول، بهتر است کدتان را تا جای ممکن انتقال‌پذیر بسازید، در غیر این "
"صورت ممکن است برای کار کردن آن در جای دیگر ناچار به بازنویسی کامل آن باشید - "
"و چه کسی می‌داند که شما چه چیزی ممکن است طی چند سال آتی استفاده کنید؟"

#. (itstool) path: informalexample/screen
#: book.translate.xml:971
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -Wall -ansi -pedantic -o foobar foobar.c</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cc -Wall -ansi -pedantic -o foobar foobar."
"c</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:974
msgid ""
"This will produce an executable <filename>foobar</filename> after checking "
"<filename>foobar.c</filename> for standard compliance."
msgstr ""
"این یک <filename>foobar</filename> اجراپذیر بعد از بررسی <filename>foobar.c</"
"filename> برای رعایت استاندارد می‌سازد."

#. (itstool) path: varlistentry/term
#: book.translate.xml:980
msgid "<option>-l<replaceable>library</replaceable></option>"
msgstr "<option>-l<replaceable>library</replaceable></option>"

#. (itstool) path: listitem/para
#: book.translate.xml:983
msgid "Specify a function library to be used at link time."
msgstr "یک کتابخانهٔ توابع برای استفاده در زمان پیوند مشخص کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:986
msgid ""
"The most common example of this is when compiling a program that uses some "
"of the mathematical functions in C. Unlike most other platforms, these are "
"in a separate library from the standard C one and you have to tell the "
"compiler to add it."
msgstr ""
"معمول‌ترین مثال زمان همگردانی برنامه‌ای است که از برخی توابع ریاضیاتی در C "
"استفاده می‌کند. برخلاف دیگر بسترها، آنها در کتابخانه‌ای جدا از استاندارد C "
"هستند و شما باید به همگردان بگویید که اضافه‌اش کند."

#. (itstool) path: listitem/para
#: book.translate.xml:992
msgid ""
"The rule is that if the library is called "
"<filename>lib<replaceable>something</replaceable>.a</filename>, you give "
"<command>cc</command> the argument <option>-l<replaceable>something</"
"replaceable></option>. For example, the math library is <filename>libm.a</"
"filename>, so you give <command>cc</command> the argument <option>-lm</"
"option>. A common <quote>gotcha</quote> with the math library is that it has "
"to be the last library on the command line."
msgstr ""
"قاعده این است که اگر کتابخانه‌ای "
"<filename>lib<replaceable>something</replaceable>.a</filename> باشد، شما به "
"<command>cc</command> برهان <option>-l<replaceable>something</replaceable></"
"option> را می‌دهید. به‌طور مثال، کتابخانهٔ ریاضیات <filename>libm.a</"
"filename> است، پس شما به <command>cc</command> برهان <option>-lm</option> را "
"می‌دهید. یک <quote>نکته</quote> در مورد کتابخانهٔ ریاضیات این است که حتماً "
"باید آخرین کتابخانهٔ ذکر شده در دستور باشد."

#. (itstool) path: informalexample/screen
#: book.translate.xml:1004 book.translate.xml:1047
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -o foobar foobar.c -lm</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc -o foobar foobar.c -lm</userinput>"

#. (itstool) path: listitem/para
#: book.translate.xml:1007
msgid ""
"This will link the math library functions into <filename>foobar</filename>."
msgstr ""
"این دستور کتابخانهٔ توابع ریاضیات را به <filename>foobar</filename> پیوند "
"می‌دهد."

#. (itstool) path: listitem/para
#: book.translate.xml:1010
msgid ""
"If you are compiling C++ code, use <command>c++</command>. <command>c++</"
"command> can also be invoked as <command>clang++</command> on FreeBSD."
msgstr ""
"اگر مشغول همگردانی کد ++C هستید، از <command>c++</command> استفاده کنید. "
"<command>c++</command> همچنین می‌تواند به‌عنوان <command>clang++</command> "
"در FreeBSD فراخوانده شود."

#. (itstool) path: informalexample/screen
#: book.translate.xml:1015
#, no-wrap
msgid "<prompt>%</prompt> <userinput>c++ -o foobar foobar.cc</userinput>"
msgstr "<prompt>%</prompt> <userinput>c++ -o foobar foobar.cc</userinput>"

#. (itstool) path: listitem/para
#: book.translate.xml:1018
msgid ""
"This will both produce an executable <filename>foobar</filename> from the C+"
"+ source file <filename>foobar.cc</filename>."
msgstr ""
"هردو باعث تولید اجراپذیرِ <filename>foobar</filename> از پروندهٔ منبع C++، "
"<filename>foobar.cc</filename> می‌شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:1026
msgid "Common <command>cc</command> Queries and Problems"
msgstr "پرسش‌ها و چالش‌های رایجِ <command>cc</command>"

#. (itstool) path: question/para
#: book.translate.xml:1031
msgid ""
"I am trying to write a program which uses the <function>sin()</function> "
"function and I get an error like this. What does it mean?"
msgstr ""
"من در تلاش برای نوشتن برنامه‌ای هستم که از تابع <function>sin()</function> "
"استفاده می‌کند و پیغام خطایی مثل این دریافت می‌کنم. این به چه معناست؟"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1036
#, no-wrap
msgid "/var/tmp/cc0143941.o: Undefined symbol `_sin' referenced from text segment"
msgstr ""
"/var/tmp/cc0143941.o: Undefined symbol `_sin' referenced from text segment"

#. (itstool) path: answer/para
#: book.translate.xml:1041
msgid ""
"When using mathematical functions like <function>sin()</function>, you have "
"to tell <command>cc</command> to link in the math library, like so:"
msgstr ""
"هنگامی‌که از توابع ریاضیاتی چون <function>sin()</function> استفاده می‌کنید، "
"باید به <command>cc</command> بگویید تا کتابخانهٔ ریاضیات را پیوند دهد، بدین "
"شکل:"

#. (itstool) path: question/para
#: book.translate.xml:1054
msgid ""
"All right, I wrote this simple program to practice using <option>-lm</"
"option>. All it does is raise 2.1 to the power of 6."
msgstr ""
"بسیار خوب، من این برنامهٔ ساده را برای تمرین در استفاده از <option>-lm</"
"option> نوشتم. تمام آنچه که انجام می‌دهد رساندن ۲٫۱ به توان ۶ است."

#. (itstool) path: informalexample/programlisting
#: book.translate.xml:1059
#, no-wrap
msgid ""
"#include &lt;stdio.h&gt;\n"
"\n"
"int main() {\n"
"\tfloat f;\n"
"\n"
"\tf = pow(2.1, 6);\n"
"\tprintf(\"2.1 ^ 6 = %f\\n\", f);\n"
"\treturn 0;\n"
"}"
msgstr ""
"#include &lt;stdio.h&gt;\n"
"\n"
"int main() {\n"
"\tfloat f;\n"
"\n"
"\tf = pow(2.1, 6);\n"
"\tprintf(\"2.1 ^ 6 = %f\\n"
"\", f);\n"
"\treturn 0;\n"
"}"

#. (itstool) path: question/para
#: book.translate.xml:1070
msgid "and I compiled it as:"
msgstr "و آن را اینگونه همگردان کردم:"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1073
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc temp.c -lm</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc temp.c -lm</userinput>"

#. (itstool) path: question/para
#: book.translate.xml:1076
msgid "like you said I should, but I get this when I run it:"
msgstr "همانطور که گفتید، اما این خروجی را هنگام اجرا دریافت می‌کنم:"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1080
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>./a.out</userinput>\n"
"2.1 ^ 6 = 1023.000000"
msgstr ""
"<prompt>%</prompt> <userinput>./a.out</userinput>\n"
"2.1 ^ 6 = 1023.000000"

#. (itstool) path: question/para
#: book.translate.xml:1084
msgid "This is <emphasis>not</emphasis> the right answer! What is going on?"
msgstr "این پاسخ درست <emphasis>نیست</emphasis>! جریان چیست؟"

#. (itstool) path: answer/para
#: book.translate.xml:1089
msgid ""
"When the compiler sees you call a function, it checks if it has already seen "
"a prototype for it. If it has not, it assumes the function returns an "
"<type>int</type>, which is definitely not what you want here."
msgstr ""
"زمانی‌که همگردان می‌بیند شما تابعی را فراخوانی می‌کنید، بررسی می‌کند که از "
"پیش نمونهٔ اصلی آن را دیده است یا خیر. اگر ندیده باشد، تصور می‌کند که تابع "
"<type>int</type> برمی‌گرداند، چیزی که قطعاً اینجا نمی‌خواهید."

#. (itstool) path: question/para
#: book.translate.xml:1099
msgid "So how do I fix this?"
msgstr "پس چطور این را درست کنم؟"

#. (itstool) path: answer/para
#: book.translate.xml:1103
msgid ""
"The prototypes for the mathematical functions are in <filename>math.h</"
"filename>. If you include this file, the compiler will be able to find the "
"prototype and it will stop doing strange things to your calculation!"
msgstr ""
"نمونه‌های اصلی برای توابع ریاضیانی در <filename>math.h</filename> هستند. اگر "
"این پرونده را لحاظ کنید، همگردان قادر به یافتن نمونهٔ اصلی خواهد بود و از "
"انجام اقدامات عجیب خودداری می‌کند!"

#. (itstool) path: informalexample/programlisting
#: book.translate.xml:1110
#, no-wrap
msgid ""
"#include &lt;math.h&gt;\n"
"#include &lt;stdio.h&gt;\n"
"\n"
"int main() {\n"
"..."
msgstr ""
"#include &lt;math.h&gt;\n"
"#include &lt;stdio.h&gt;\n"
"\n"
"int main() {\n"
"..."

#. (itstool) path: answer/para
#: book.translate.xml:1117
msgid "After recompiling it as you did before, run it:"
msgstr "پس از همگردانی مجدد آن همچون قبل‌تر که انجام دادید، آن را اجرا کنید:"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1121
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>./a.out</userinput>\n"
"2.1 ^ 6 = 85.766121"
msgstr ""
"<prompt>%</prompt> <userinput>./a.out</userinput>\n"
"2.1 ^ 6 = 85.766121"

#. (itstool) path: answer/para
#: book.translate.xml:1125
msgid ""
"If you are using any of the mathematical functions, <emphasis>always</"
"emphasis> include <filename>math.h</filename> and remember to link in the "
"math library."
msgstr ""
"اگر هرکدام از توابع ریاضیاتی را به‌کار می‌برید، <emphasis>همواره</emphasis> "
"<filename>math.h</filename> را لحاظ کنید و به‌خاطر داشته باشید در کتابخانهٔ "
"ریاضیات پیوند برقرار کنید."

#. (itstool) path: question/para
#: book.translate.xml:1134
msgid ""
"I compiled a file called <filename>foobar.c</filename> and I cannot find an "
"executable called <filename>foobar</filename>. Where has it gone?"
msgstr ""
"من یک پرونده به نام <filename>foobar.c</filename> همگردان کرده‌ام و نمی‌"
"توانم اجراپذیری به نام <filename>foobar</filename> پیدا کنم. کجا رفته است؟"

#. (itstool) path: answer/para
#: book.translate.xml:1141
msgid ""
"Remember, <command>cc</command> will call the executable <filename>a.out</"
"filename> unless you tell it differently. Use the <option>-o "
"<replaceable>filename</replaceable></option> option:"
msgstr ""
"به‌یاد داشته باشید، <command>cc</command> اجراپذیر را <filename>a.out</"
"filename> می‌نامد، مگر آنکه شما طور دیگری امر کنید. از گزینهٔ <option>-o "
"<replaceable>filename</replaceable></option> استفاده کنید:"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1148
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc -o foobar foobar.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc -o foobar foobar.c</userinput>"

#. (itstool) path: question/para
#: book.translate.xml:1155
msgid ""
"OK, I have an executable called <filename>foobar</filename>, I can see it "
"when I run <command>ls</command>, but when I type in <command>foobar</"
"command> at the command prompt it tells me there is no such file. Why can it "
"not find it?"
msgstr ""
"بسیار خوب، من اجراپذیری به نام <filename>foobar</filename> دارم، می‌توانم آن "
"را هنگامی‌که <command>ls</command> را اجرا می‌کنم ببینم، اما هنگامی‌که "
"<command>foobar</command> را در خط فرمان وارد می‌کنم به من می‌گوید که چنین "
"پرونده‌ای وجود ندارد. چرا نمی‌تواند آن را پیدا کند؟"

#. (itstool) path: answer/para
#: book.translate.xml:1164
msgid ""
"Unlike <trademark class=\"registered\">MS-DOS</trademark>, <trademark class="
"\"registered\">UNIX</trademark> does not look in the current directory when "
"it is trying to find out which executable you want it to run, unless you "
"tell it to. Type <command>./foobar</command>, which means <quote>run the "
"file called <filename>foobar</filename> in the current directory.</quote>"
msgstr ""
"برخلاف <trademark class=\"registered\">MS-DOS</trademark>، <trademark class="
"\"registered\">UNIX</trademark> برای تشخیص اینکه شما چه پروندهٔ اجراپذیری را "
"می‌خواهید اجرا کنید نگاهی به مسیر جاری نمی‌اندازد، مگر آنکه شما بگویید. "
"بنویسید <command>./foobar</command>، که به معنی <quote>پرونده‌ای به نام "
"<filename>foobar</filename> را در مسیر جاری اجرا کن</quote> است."

#. (itstool) path: question/para
#: book.translate.xml:1175
msgid ""
"I called my executable <filename>test</filename>, but nothing happens when I "
"run it. What is going on?"
msgstr ""
"من پروندهٔ اجراپذیر خود را <filename>test</filename> نامیدم، اما زمانی که "
"اجرایش می‌کنم هیچ نمی‌شود. جریان چیست؟"

#. (itstool) path: answer/para
#: book.translate.xml:1181
msgid ""
"Most <trademark class=\"registered\">UNIX</trademark> systems have a program "
"called <command>test</command> in <filename>/usr/bin</filename> and the "
"shell is picking that one up before it gets to checking the current "
"directory. Either type:"
msgstr ""
"بیشتر سامانه‌های <trademark class=\"registered\">UNIX</trademark> برنامه‌ای "
"به نام <command>test</command> در <filename>/usr/bin</filename> دارند و "
"پوسته پیش از بررسی کردن مسیر جاری، آن را انتخاب می‌کند. یا بنویسید:"

#. (itstool) path: informalexample/screen
#: book.translate.xml:1187
#, no-wrap
msgid "<prompt>%</prompt> <userinput>./test</userinput>"
msgstr "<prompt>%</prompt> <userinput>./test</userinput>"

#. (itstool) path: answer/para
#: book.translate.xml:1190
msgid "or choose a better name for your program!"
msgstr "یا نام بهتری برای برنامهٔ خود انتخاب کنید!"

#. (itstool) path: question/para
#: book.translate.xml:1196
msgid ""
"I compiled my program and it seemed to run all right at first, then there "
"was an error and it said something about <errorname>core dumped</errorname>. "
"What does that mean?"
msgstr ""
"من برنامهٔ خود را همگردانی کردم و در ابتدا به نظر درست اجرا شد، سپس خطایی در "
"مورد <errorname>core dumped</errorname> گفت. این به چه معناست؟"

#. (itstool) path: answer/para
#: book.translate.xml:1203
msgid ""
"The name <firstterm>core dump</firstterm> dates back to the very early days "
"of <trademark class=\"registered\">UNIX</trademark>, when the machines used "
"core memory for storing data. Basically, if the program failed under certain "
"conditions, the system would write the contents of core memory to disk in a "
"file called <filename>core</filename>, which the programmer could then pore "
"over to find out what went wrong."
msgstr ""
"نام <firstterm>core dump</firstterm> به روزهای آغازین <trademark class="
"\"registered\">UNIX</trademark> برمی‌گردد، زمانی‌که دستگاه‌ها از حافظهٔ اصلی "
"برای ذخیره‌کردن داده‌ها استفاده می‌کردند. اساساً، اگر برنامه تحت شرایط به‌"
"خصوصی از کار می‌ایستاد، سامانه محتوای حافظهٔ اصلی را داخل پرونده‌ای به نام "
"<filename>core</filename> در دیسک می‌نوشت، که بعدتر برنامه‌نویس می‌توانست با "
"مطالعهٔ دقیق آن بفهمد چه اشتباهی رخ داده است."

#. (itstool) path: question/para
#: book.translate.xml:1215
msgid "Fascinating stuff, but what I am supposed to do now?"
msgstr "چه چیزهای جالبی، اما الان قرار است چه کنم؟"

#. (itstool) path: answer/para
#: book.translate.xml:1220
msgid "Use a debugger to analyze the core (see <xref linkend=\"debugging\"/>)."
msgstr ""
"از یک اشکال‌زدا برای تحلیل هسته استفاده کنید (<xref linkend=\"اشکال‌زدایی\"/"
"> را ببینید)."

#. (itstool) path: question/para
#: book.translate.xml:1227
msgid ""
"When my program dumped core, it said something about a "
"<errorname>segmentation fault</errorname>. What is that?"
msgstr ""
"هنگامی‌که برنامهٔ من هسته را روبرداری کرد، مطلبی تحت عنوان <errorname>خطای "
"قطعه‌بندی</errorname> بیان کرد. مسئله چیست؟"

#. (itstool) path: answer/para
#: book.translate.xml:1233
msgid ""
"This basically means that your program tried to perform some sort of illegal "
"operation on memory; <trademark class=\"registered\">UNIX</trademark> is "
"designed to protect the operating system and other programs from rogue "
"programs."
msgstr ""
"این بدان معناست که برنامهٔ شما سعی بر انجام عملیاتی غیرمجاز بر روی حافظه را "
"داشته است؛ <trademark class=\"registered\">UNIX</trademark> به‌گونه‌ای طراحی "
"شده است تا از سامانهٔ عامل و سایر برنامه‌ها در مقابل برنامه‌های فریبکار "
"محافظت کند."

#. (itstool) path: answer/para
#: book.translate.xml:1238
msgid "Common causes for this are:"
msgstr "علات مرسوم برای این بدین شرح هستند:"

#. (itstool) path: listitem/para
#: book.translate.xml:1242
msgid "Trying to write to a <symbol>NULL</symbol> pointer, eg"
msgstr "تلاش برای نوشتن در یک اشاره‌گر <symbol>NULL</symbol>، به‌طور مثال"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1245
#, no-wrap
msgid ""
"char *foo = NULL;\n"
"strcpy(foo, \"bang!\");"
msgstr ""
"char *foo = NULL;\n"
"strcpy(foo, \"bang!\");"

#. (itstool) path: listitem/para
#: book.translate.xml:1250
msgid "Using a pointer that has not been initialized, eg"
msgstr "استفاده از اشاره‌گری که از پیش مقداردهی نشده است، به‌طور مثال"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1253
#, no-wrap
msgid ""
"char *foo;\n"
"strcpy(foo, \"bang!\");"
msgstr ""
"char *foo;\n"
"strcpy(foo, \"bang!\");"

#. (itstool) path: listitem/para
#: book.translate.xml:1256
msgid ""
"The pointer will have some random value that, with luck, will point into an "
"area of memory that is not available to your program and the kernel will "
"kill your program before it can do any damage. If you are unlucky, it will "
"point somewhere inside your own program and corrupt one of your data "
"structures, causing the program to fail mysteriously."
msgstr ""
"اشاره‌گر مقدار تصادفی‌ای خواهد داشت که، اگر شانس بیارید، به فضایی در حافظه "
"اشاره خواهد کرد که قابل دسترس برنامهٔ شما نیست و هسته پیس از آنکه این بتواند "
"ضرری وارد کند برنامهٔ شما را می‌کشد. اگر شانس نیارید، به جایی داخل برنامهٔ "
"شما اشاره خواهد کرد و یکی از ساختار دادهٔ شما را تباه می‌سازد، که به‌طوری "
"رمزآلور باعث شکست برنامه می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:1266
msgid "Trying to access past the end of an array, eg"
msgstr "تلاش برای دسترسی به خارج از آرایه، به‌طور مثال"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1269
#, no-wrap
msgid ""
"int bar[20];\n"
"bar[27] = 6;"
msgstr ""
"int bar[20];\n"
"bar[27] = 6;"

#. (itstool) path: listitem/para
#: book.translate.xml:1274
msgid "Trying to store something in read-only memory, eg"
msgstr "تلاش برای ذخیرهٔ چیزی در حافظهٔ فقط خواندنی، به‌طور مثال"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1277
#, no-wrap
msgid ""
"char *foo = \"My string\";\n"
"strcpy(foo, \"bang!\");"
msgstr ""
"char *foo = \"My string\";\n"
"strcpy(foo, \"bang!\");"

#. (itstool) path: listitem/para
#: book.translate.xml:1280
msgid ""
"<trademark class=\"registered\">UNIX</trademark> compilers often put string "
"literals like <literal>\"My string\"</literal> into read-only areas of "
"memory."
msgstr ""
"همگردان‌های <trademark class=\"registered\">UNIX</trademark> اغلب راستین‌"
"نمادهای رشته‌ای چون <literal>\"My string\"</literal> را در قسمت‌های فقط "
"خواندنی حافظه قرار می‌دهند."

#. (itstool) path: listitem/para
#: book.translate.xml:1286
msgid ""
"Doing naughty things with <function>malloc()</function> and "
"<function>free()</function>, eg"
msgstr ""
"شیطنت با <function>malloc()</function> و <function>free()</function>، به‌طور "
"مثال"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1290
#, no-wrap
msgid ""
"char bar[80];\n"
"free(bar);"
msgstr ""
"char bar[80];\n"
"free(bar);"

#. (itstool) path: listitem/para
#: book.translate.xml:1293
msgid "or"
msgstr "یا"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:1295
#, no-wrap
msgid ""
"char *foo = malloc(27);\n"
"free(foo);\n"
"free(foo);"
msgstr ""
"char *foo = malloc(27);\n"
"free(foo);\n"
"free(foo);"

#. (itstool) path: answer/para
#: book.translate.xml:1301
msgid ""
"Making one of these mistakes will not always lead to an error, but they are "
"always bad practice. Some systems and compilers are more tolerant than "
"others, which is why programs that ran well on one system can crash when you "
"try them on an another."
msgstr ""
"انجام هر یک از این اشتباهات همیشه منجر به خطا نمی‌شود، اما همواره روشی بد "
"تلقی می‌شوند. برخی سامانه‌ها و همگردان‌ها تحمل‌پذیرتر از برخی دیگرند، از این "
"رو برنامه‌هایی که بر روی یک سامانه به‌خوبی اجرا می‌شوند بر روی سامانه‌ای "
"دیگر خراب می‌شوند."

#. (itstool) path: question/para
#: book.translate.xml:1311
msgid ""
"Sometimes when I get a core dump it says <errorname>bus error</errorname>. "
"It says in my <trademark class=\"registered\">UNIX</trademark> book that "
"this means a hardware problem, but the computer still seems to be working. "
"Is this true?"
msgstr ""
"گاهی زمانی‌که خطای روگرفت حافظه را دریافت می‌کنم می‌گوید <errorname>bus "
"error</errorname>. در کتاب <trademark class=\"registered\">UNIX</trademark> "
"من آمده است که این به معنای ایراد سخت‌افزاری است، اما رایانه به‌نظر هنوز کار "
"می‌کند. آیا این درست است؟"

#. (itstool) path: answer/para
#: book.translate.xml:1319
msgid ""
"No, fortunately not (unless of course you really do have a hardware "
"problem…). This is usually another way of saying that you accessed memory in "
"a way you should not have."
msgstr ""
"خیر، متأسفانه چنین نیست (البته تا زمانی‌که واقعاً ایراد سخت‌افزاری داشته "
"باشید...). این معمولاً روش دیگری است برای بیان اینکه شما به‌روشی که نباید به "
"حافظه دسترسی پیدا کرده‌اید."

#. (itstool) path: question/para
#: book.translate.xml:1328
msgid ""
"This dumping core business sounds as though it could be quite useful, if I "
"can make it happen when I want to. Can I do this, or do I have to wait until "
"there is an error?"
msgstr ""
"به‌نظر می‌رسد این مسئلهٔ روگرفت حافظه کاربردی باشد، اگر بتوانم هر زمان که می‌"
"خواهم آن را ایجاد کنم. آیا ممکن است، یا مجبور هستم تا هنگام وقوع خطا منتظر "
"بمانم؟"

#. (itstool) path: answer/para
#: book.translate.xml:1335
msgid "Yes, just go to another console or xterm, do"
msgstr "بله، به xterm یا پیشانه‌‌ای دیگر بروید، بزنید"

#. (itstool) path: answer/screen
#: book.translate.xml:1337
#, no-wrap
msgid "<prompt>%</prompt> <userinput>ps</userinput>"
msgstr "<prompt>%</prompt> <userinput>ps</userinput>"

#. (itstool) path: answer/para
#: book.translate.xml:1339
msgid "to find out the process ID of your program, and do"
msgstr "تا شناسهٔ فرایند برنامهٔ خود را پیدا کنید، و بزنید"

#. (itstool) path: answer/screen
#: book.translate.xml:1342
#, no-wrap
msgid "<prompt>%</prompt> <userinput>kill -ABRT <replaceable>pid</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>kill -ABRT "
"<replaceable>pid</replaceable></userinput>"

#. (itstool) path: answer/para
#: book.translate.xml:1344
msgid ""
"where <parameter><replaceable>pid</replaceable></parameter> is the process "
"ID you looked up."
msgstr ""
"که <parameter><replaceable>pid</replaceable></parameter> شناسهٔ فرآیندی است "
"که به‌دنبالش بودید."

#. (itstool) path: answer/para
#: book.translate.xml:1348
msgid ""
"This is useful if your program has got stuck in an infinite loop, for "
"instance. If your program happens to trap <symbol>SIGABRT</symbol>, there "
"are several other signals which have a similar effect."
msgstr ""
"برای مثال، اگر برنامهٔ شما درون یک چرخهٔ نامتناهی گیر کرده باشد مفید است. "
"اگر برنامهٔ شما <symbol>SIGABRT</symbol> را جلب می‌کند، سیگنال‌های دیگری "
"هستند که تأثیر یکسان دارند."

#. (itstool) path: answer/para
#: book.translate.xml:1353
msgid ""
"Alternatively, you can create a core dump from inside your program, by "
"calling the <function>abort()</function> function. See the manual page of "
"<citerefentry><refentrytitle>abort</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> to learn more."
msgstr ""
"همچنین، شما می‌توانید با صدا زدن تابع <function>abort()</function> یک روگرفت "
"حافظه را از داخل برنامهٔ خود بسازید. برای اطلاعات بیشتر، به صفحهٔ راهنمای "
"<citerefentry><refentrytitle>abort</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> مراجعه کنید."

#. (itstool) path: answer/para
#: book.translate.xml:1358
msgid ""
"If you want to create a core dump from outside your program, but do not want "
"the process to terminate, you can use the <command>gcore</command> program. "
"See the manual page of <citerefentry><refentrytitle>gcore</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry> for more information."
msgstr ""
"اگر می‌خواهید از بیرون برنامهٔ خود روگرفتی از حافظه بسازید، اما نمی‌خواهید "
"که برنامه پایان یابد، می‌توانید از برنامهٔ <command>gcore</command> استفاده "
"کنید. برای اطلاعات بیشتر به صفحهٔ راهنمای "
"<citerefentry><refentrytitle>gcore</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> رجوع کنید."

#. (itstool) path: sect1/title
#: book.translate.xml:1370
msgid "Make"
msgstr "Make"

#. (itstool) path: sect2/title
#: book.translate.xml:1373
msgid "What is <command>make</command>?"
msgstr "<command>make</command> چیست؟"

#. (itstool) path: sect2/para
#: book.translate.xml:1375
msgid ""
"When you are working on a simple program with only one or two source files, "
"typing in"
msgstr ""
"هنگامی‌که دارید بر روی یک برنامهٔ ساده با تنها یک یا دو پروندهٔ منبع کار "
"می‌کنید، وارد کردنِ"

#. (itstool) path: sect2/screen
#: book.translate.xml:1378
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc file1.c file2.c</userinput>"
msgstr "<prompt>%</prompt> <userinput>cc file1.c file2.c</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:1380
msgid ""
"is not too bad, but it quickly becomes very tedious when there are several "
"files—and it can take a while to compile, too."
msgstr ""
"خیلی بد نیست، اما زمانی‌که چندین پرونده وجود دارد به‌سرعت خسته‌کننده می‌شود—"
"و همگردانی آن نیز می‌تواند مدتی به‌طول انجامد."

#. (itstool) path: sect2/para
#: book.translate.xml:1384
msgid ""
"One way to get around this is to use object files and only recompile the "
"source file if the source code has changed. So we could have something like:"
msgstr ""
"یکی از راه‌های حصول آن، استفاده از پرونده‌های هدف است و تنها درصورتی‌که کد "
"منبع تغییر کرده است پروندهٔ منبع را بازهمگردانی کنیم. پس ما می‌توانیم چیزی "
"مانند این را داشته باشیم:"

#. (itstool) path: sect2/screen
#: book.translate.xml:1388
#, no-wrap
msgid "<prompt>%</prompt> <userinput>cc file1.o file2.o</userinput> … <userinput>file37.c</userinput> …"
msgstr ""
"<prompt>%</prompt> <userinput>cc file1.o file2.o</userinput> … "
"<userinput>file37.c</userinput> …"

#. (itstool) path: sect2/para
#: book.translate.xml:1390
msgid ""
"if we had changed <filename>file37.c</filename>, but not any of the others, "
"since the last time we compiled. This may speed up the compilation quite a "
"bit, but does not solve the typing problem."
msgstr ""
"اگر از زمان آخرین همگردانی تنها پروندهٔ <filename>file37.c</filename> را "
"تغییر داده باشیم، و نه هیچ پروندهٔ دیگری را. این ممکن است به همگردانی بسی "
"سرعت بخشد، اما مشکل نوشتن را حل نمی‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:1395
msgid ""
"Or we could write a shell script to solve the typing problem, but it would "
"have to re-compile everything, making it very inefficient on a large project."
msgstr ""
"یا می‌توانیم اجرانامه‌ای در پوسته بنویسیم تا مشکل نوشتن را حل کند، اما همه "
"چیز را مجدد همگردانی خواهد کرد و این در یک پروژهٔ بزرگ بسیار ناکارآمد است."

#. (itstool) path: sect2/para
#: book.translate.xml:1399
msgid ""
"What happens if we have hundreds of source files lying about? What if we are "
"working in a team with other people who forget to tell us when they have "
"changed one of their source files that we use?"
msgstr ""
"اگر صدها پروندهٔ منبع داشته باشیم که در موردش اشتباه کند چه؟ اگر در تیمی کار "
"می‌کنیم که دیگر افراد فراموش می‌کنند زمانی که یکی از کد منبع‌هایی که ما "
"استفاده می‌کنیم را تغییر دادند به ما اطلاع دهند چطور؟"

#. (itstool) path: sect2/para
#: book.translate.xml:1404
msgid ""
"Perhaps we could put the two solutions together and write something like a "
"shell script that would contain some kind of magic rule saying when a source "
"file needs compiling. Now all we need now is a program that can understand "
"these rules, as it is a bit too complicated for the shell."
msgstr ""
"شاید بتوانیم این دو راه‌حل رابا هم ترکیب کنیم و اجرانامه‌ای بنویسیم که شامل "
"نوعی دستور جادویی باشد و زمانی را که یک پروندهٔ منبع نیاز به همگردانی دارد "
"به ما بگوید. حال تمام آنچه که نیاز داریم برنامه‌ایست که بتواند این دستورات "
"را بفهمد، از آنجا که فهم آن برای پوسته کمی پیچیده است."

#. (itstool) path: sect2/para
#: book.translate.xml:1410
msgid ""
"This program is called <command>make</command>. It reads in a file, called a "
"<firstterm>makefile</firstterm>, that tells it how different files depend on "
"each other, and works out which files need to be re-compiled and which ones "
"do not. For example, a rule could say something like <quote>if "
"<filename>fromboz.o</filename> is older than <filename>fromboz.c</filename>, "
"that means someone must have changed <filename>fromboz.c</filename>, so it "
"needs to be re-compiled.</quote> The makefile also has rules telling make "
"<emphasis>how</emphasis> to re-compile the source file, making it a much "
"more powerful tool."
msgstr ""
"این برنامه <command>make</command> نام دارد. پرونده‌ای به نام "
"<firstterm>makefile</firstterm> را می‌خواند، که به آن می‌گوید چگونه پرونده‌"
"های مختلف به یکدیگر وابسته‌اند، و تشخیص می‌دهد کدام پرونده‌ها نیاز به "
"همگردانی مجدد دارند و کدام ندارند. برای مثال، یک دستور می‌تواند بگوید "
"<quote>اگر <filename>fromboz.o</filename> قدیمی‌تر از <filename>fromboz.c</"
"filename> است، این بدین معناست که شخصی باید <filename>fromboz.c</filename> "
"را تغییر داده باشد، در نتیجه نیاز به همگردانی مجدد دارد.</quote> همچنین "
"makefile شامل دستوراتی است که به make بگوید <emphasis>چگونه</emphasis> "
"پروندهٔ منبع را همگردانی مجدد کند، که آن را تبدیل به ابزاری بسیار قدرتمند‌تر "
"می‌کند."

#. (itstool) path: footnote/para
#: book.translate.xml:1428
msgid ""
"They do not use the <filename>MAKEFILE</filename> form as block capitals are "
"often used for documentation files like <filename>README</filename>."
msgstr ""
"آنها از صورت <filename>MAKEFILE</filename> استفاده نمی‌کنند، زیرا حروف بزرگ "
"معمولاً برای پرونده‌های مستندسازی چون <filename>README</filename> استفاده "
"می‌شوند."

#. (itstool) path: sect2/para
#: book.translate.xml:1422
msgid ""
"Makefiles are typically kept in the same directory as the source they apply "
"to, and can be called <filename>makefile</filename>, <filename>Makefile</"
"filename> or <filename>MAKEFILE</filename>. Most programmers use the name "
"<filename>Makefile</filename>, as this puts it near the top of a directory "
"listing, where it can easily be seen.<_:footnote-1/>"
msgstr ""
"پرونده‌های Makefile به‌طور معمول در همان مسیر پرونده‌های مورد نظرشان نگه "
"داشته می‌شوند، و می‌توانند <filename>makefile</filename>، "
"<filename>Makefile</filename> یا <filename>MAKEFILE</filename> نامیده شوند. "
"بیشتر برنامه‌نویس‌ها نام <filename>Makefile</filename> را استفاده می‌کنند، "
"زیرا این کار آن را در نزدیکی صدر فهرست مسیر قرار می‌دهد، جایی که به راحتی می‌"
"تواند دیده شود.<_:footnote-1/>"

#. (itstool) path: sect2/title
#: book.translate.xml:1435
msgid "Example of Using <command>make</command>"
msgstr "مثال برای استفاده از <command>make</command>"

#. (itstool) path: sect2/para
#: book.translate.xml:1437
msgid "Here is a very simple make file:"
msgstr "این یک نمونهٔ خیلی ساده از پروندهٔ make:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1439
#, no-wrap
msgid ""
"foo: foo.c\n"
"\tcc -o foo foo.c"
msgstr ""
"foo: foo.c\n"
"\tcc -o foo foo.c"

#. (itstool) path: sect2/para
#: book.translate.xml:1442
msgid "It consists of two lines, a dependency line and a creation line."
msgstr "این متشکل از دو سطر است، یک خط برای وابستگی و یک خط برای ایجاد."

#. (itstool) path: sect2/para
#: book.translate.xml:1445
msgid ""
"The dependency line here consists of the name of the program (known as the "
"<firstterm>target</firstterm>), followed by a colon, then whitespace, then "
"the name of the source file. When <command>make</command> reads this line, "
"it looks to see if <filename>foo</filename> exists; if it exists, it "
"compares the time <filename>foo</filename> was last modified to the time "
"<filename>foo.c</filename> was last modified. If <filename>foo</filename> "
"does not exist, or is older than <filename>foo.c</filename>, it then looks "
"at the creation line to find out what to do. In other words, this is the "
"rule for working out when <filename>foo.c</filename> needs to be re-compiled."
msgstr ""
"خط وابستگی در اینجا متشکل از نام برنامه (شناخته شده به‌عنوان "
"<firstterm>target</firstterm>)، به همراه دونقطه، سپس فاصلهٔ خالی، و سپس نام "
"پروندهٔ منبع است. زمانی‌که <command>make</command> این خط را می‌خواند، می‌"
"بیند که آیا <filename>foo</filename> وجود دارد؛ اگر باشد، زمان آخرین تغییر "
"<filename>foo</filename> و <filename>foo.c</filename> را مقایسه می‌کند. اگر "
"<filename>foo</filename> وجود نداشته باشد، یا قدیمی‌تر از <filename>foo.c</"
"filename> باشد، سپس به دنبال خط ایجاد می‌گردد تا ببیند چه باید انجام دهد. "
"به‌گفته‌ای دیگر، این قاعده کار در زمانی است که <filename>foo.c</filename> "
"نیاز به همگردانی مجدد دارد."

#. (itstool) path: sect2/para
#: book.translate.xml:1458
msgid ""
"The creation line starts with a <token>tab</token> (press <keycap>tab</"
"keycap>) and then the command you would type to create <filename>foo</"
"filename> if you were doing it at a command prompt. If <filename>foo</"
"filename> is out of date, or does not exist, <command>make</command> then "
"executes this command to create it. In other words, this is the rule which "
"tells make how to re-compile <filename>foo.c</filename>."
msgstr ""
"خط ایجاد با یک <token>tab</token> شروع می‌شود (کلید <keycap>tab</keycap> را "
"فشار دهید) و سپس دستوری که اگر بنا به انجام دستی بود شما در خط فرمان برای "
"ایجاد <filename>foo</filename> می‌نوشتید. اگر <filename>foo</filename> قدیمی "
"باشد، یا موجود نباشد، <command>make</command> این دستور را برای ایجادش اجرا "
"می‌کند. به‌گفته‌ای دیگر، این قاعده کاری است که به make می‌گوید چطور "
"<filename>foo.c</filename> را همگردانی مجدد کند."

#. (itstool) path: sect2/para
#: book.translate.xml:1467
msgid ""
"So, when you type <userinput>make</userinput>, it will make sure that "
"<filename>foo</filename> is up to date with respect to your latest changes "
"to <filename>foo.c</filename>. This principle can be extended to "
"<filename>Makefile</filename>s with hundreds of targets—in fact, on FreeBSD, "
"it is possible to compile the entire operating system just by typing "
"<userinput>make world</userinput> in the appropriate directory!"
msgstr ""
"در نتیجه، زمانی که می‌نویسید <userinput>make</userinput>، مطمئن می‌شود که "
"<filename>foo</filename> با توجه به آخرین تغییرات شما در <filename>foo.c</"
"filename> به روز است. این قاعده می‌تواند در خصوص <filename>Makefile</"
"filename>هایی با صدها هدف نیز صدق کند - در حقیقت، روی FreeBSD، همگردانی کل "
"سامانهٔ عامل تنها با نوشتن <userinput>make world</userinput> در مسیر مناسب "
"متحقق است!"

#. (itstool) path: sect2/para
#: book.translate.xml:1476
msgid ""
"Another useful property of makefiles is that the targets do not have to be "
"programs. For instance, we could have a make file that looks like this:"
msgstr ""
"یکی از ویژگی‌های کاربردی makefile ها این است که اهداف‌ لازم نیست برنامه "
"باشند. برای مثال، make file ما می‌تواند بدین شکل باشد:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1480
#, no-wrap
msgid ""
"foo: foo.c\n"
"\tcc -o foo foo.c\n"
"\n"
"install:\n"
"\tcp foo /home/me"
msgstr ""
"foo: foo.c\n"
"\tcc -o foo foo.c\n"
"\n"
"install:\n"
"\tcp foo /home/me"

#. (itstool) path: sect2/para
#: book.translate.xml:1486
msgid "We can tell make which target we want to make by typing:"
msgstr ""
"می‌توانیم با وارد کردن عبارات زیر به make بگوییم قصد ساختن کدام هدف را داریم "
":"

#. (itstool) path: sect2/screen
#: book.translate.xml:1489
#, no-wrap
msgid "<prompt>%</prompt> <userinput>make <replaceable>target</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>make "
"<replaceable>target</replaceable></userinput>"

#. (itstool) path: para/buildtarget
#: book.translate.xml:1494 book.translate.xml:1503 book.translate.xml:1506
msgid "install"
msgstr "install"

#. (itstool) path: sect2/para
#: book.translate.xml:1491
msgid ""
"<command>make</command> will then only look at that target and ignore any "
"others. For example, if we type <userinput>make foo</userinput> with the "
"makefile above, make will ignore the <_:buildtarget-1/> target."
msgstr ""
"دستور <command>make</command> آنگاه فقط به آن هدف نگاه می‌کند و باقی را "
"نادیده می‌گیرد. برای مثال، اگر <userinput>make foo</userinput> را با "
"makefile بالا بنویسیم، make هدف <_:buildtarget-1/> را نادیده می‌گیرد."

#. (itstool) path: para/buildtarget
#: book.translate.xml:1501
msgid "foo"
msgstr "foo"

#. (itstool) path: sect2/para
#: book.translate.xml:1497
msgid ""
"If we just type <userinput>make</userinput> on its own, make will always "
"look at the first target and then stop without looking at any others. So if "
"we typed <userinput>make</userinput> here, it will just go to the <_:"
"buildtarget-1/> target, re-compile <filename>foo</filename> if necessary, "
"and then stop without going on to the <_:buildtarget-2/> target."
msgstr ""
"اگر ما <userinput>make</userinput> را به تنهایی بنویسیم، make همیشه به اولین "
"هدف نگاه می‌کند و بعد بدون دیدن هیچکدام دیگر متوقف می‌شود. پس اگر اینجا می‌"
"نوشتیم <userinput>make</userinput>، تنها به هدف <_:buildtarget-1/> می‌رفت، "
"در صورت نیاز دوباره <filename>foo</filename> را همگردانی می‌کرد، و سپس بدون "
"ادامه دادن به هدف <_:buildtarget-2/> پایان می‌گرفت."

#. (itstool) path: sect2/para
#: book.translate.xml:1506
msgid ""
"Notice that the <_:buildtarget-1/> target does not actually depend on "
"anything! This means that the command on the following line is always "
"executed when we try to make that target by typing <userinput>make install</"
"userinput>. In this case, it will copy <filename>foo</filename> into the "
"user's home directory. This is often used by application makefiles, so that "
"the application can be installed in the correct directory when it has been "
"correctly compiled."
msgstr ""
"ملاحظه بفرمایید که هدف <_:buildtarget-1/> در واقع بر روی هیچ چیز وابسته "
"نیست! این یعنی دستور مذکور همیشه زمانی اجرا می‌شود که هدف را با "
"<userinput>make install</userinput> ایجاد می‌کنیم. در این مورد، "
"<filename>foo</filename> را در مسیر کاربر کپی می‌کند. این اغلب توسط پرونده‌"
"های makefile برنامه‌کاربردی استفاده می‌شود، پس برنامه در صورت همگردانی درست، "
"می‌تواند در مسیر درستی نصب شود."

#. (itstool) path: sect2/para
#: book.translate.xml:1516
msgid ""
"This is a slightly confusing subject to try to explain. If you do not quite "
"understand how <command>make</command> works, the best thing to do is to "
"write a simple program like <quote>hello world</quote> and a make file like "
"the one above and experiment. Then progress to using more than one source "
"file, or having the source file include a header file. <command>touch</"
"command> is very useful here—it changes the date on a file without you "
"having to edit it."
msgstr ""
"این موضوع کمی پیچیده است برای توضیح. اگر نمی‌دانید <command>make</command> "
"چطور کار می‌کند، بهترین کار نوشتن برنامه ساده‌ای مانند <quote>hello world</"
"quote> و یک پروندهٔ make شبیه به نمونهٔ بالا و آزمایش آن است. سپس به نوشتن "
"چند پروندهٔ منبع پیش بروید، یا به فراخوانی از پرونده‌ٔ سرآیند در کد منبع. "
"دستور <command>touch</command> اینجا بسیار مفید است - بدون نیاز به ویرایش "
"تاریخ پرونده را تغییر می‌دهد."

#. (itstool) path: sect2/title
#: book.translate.xml:1527
msgid "Make and include-files"
msgstr "Make و پرونده‌های سرآیند"

#. (itstool) path: sect2/para
#: book.translate.xml:1529
msgid ""
"C code often starts with a list of files to include, for example stdio.h. "
"Some of these files are system-include files, some of them are from the "
"project you are now working on:"
msgstr ""
"کد C معمولاً با فهرستی از پرونده‌های سرآیند شروع می‌شود، مانند stdio.h. برخی "
"از این پرونده‌ها مختص خود سامانه هستند و برخی دیگر از پروژه‌ایست که اکنون بر "
"روی آن کار می‌کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1534
#, no-wrap
msgid ""
"#include &lt;stdio.h&gt;\n"
"#include \"foo.h\"\n"
"\n"
"int main(...."
msgstr ""
"#include &lt;stdio.h&gt;\n"
"#include \"foo.h\"\n"
"\n"
"int main(...."

#. (itstool) path: sect2/para
#: book.translate.xml:1539
msgid ""
"To make sure that this file is recompiled the moment <filename>foo.h</"
"filename> is changed, you have to add it in your <filename>Makefile</"
"filename>:"
msgstr ""
"جهت اطمینان از همگردانیِ مجدد این پرونده در لحظه‌ای که <filename>foo.h</"
"filename> تغییر می‌کند، کافیست آن را در <filename>Makefile</filename> خود "
"اضافه کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1543
#, no-wrap
msgid "foo: foo.c foo.h"
msgstr "foo: foo.c foo.h"

#. (itstool) path: sect2/para
#: book.translate.xml:1545
msgid ""
"The moment your project is getting bigger and you have more and more own "
"include-files to maintain, it will be a pain to keep track of all include "
"files and the files which are depending on it. If you change an include-file "
"but forget to recompile all the files which are depending on it, the results "
"will be devastating. <command>clang</command> has an option to analyze your "
"files and to produce a list of include-files and their dependencies: "
"<option>-MM</option>."
msgstr ""
"لحظه‌ای که پروژهٔ شما در حال بزرگ‌تر شدن است و شما پرونده‌های سرآیند بیشتر و "
"بیشتری را باید مدیریت کنید، پیگیری تمام پرونده‌های سرآیند و پرونده‌هایی که "
"بر روی آنها تکیه می‌کنند بسیار دشوار می‌شود. اگر پروندهٔ سرآیندی را تغییر "
"دهید و فراموش کنید که تمام پرونده‌های وابسته به آن را دوباره همگردانی کنید، "
"نتیجه مخرب خواهد بود. <command>clang</command> امکانی برای بررسی پرونده‌های "
"شما و تولید فهرستی از پرونده‌های سرآیند و وابستگی‌هایشان دارد: "
"<option>-MM</option>."

#. (itstool) path: sect2/para
#: book.translate.xml:1554
msgid "If you add this to your Makefile:"
msgstr "اگر این را به Makefile خود اضافه کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1556
#, no-wrap
msgid ""
"depend:\n"
"\tcc -E -MM *.c &gt; .depend"
msgstr ""
"depend:\n"
"\tcc -E -MM *.c &gt; .depend"

#. (itstool) path: sect2/para
#: book.translate.xml:1559
msgid ""
"and run <userinput>make depend</userinput>, the file <filename>.depend</"
"filename> will appear with a list of object-files, C-files and the include-"
"files:"
msgstr ""
"و <userinput>make depend</userinput> را اجرا کنید، پروندهٔ <filename>."
"depend</filename> به‌همراه فهرستی از پرونده‌های هدف، پرونده‌های C و پرونده‌"
"های سرآیند پدیدار می‌شود:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1563
#, no-wrap
msgid "foo.o: foo.c foo.h"
msgstr "foo.o: foo.c foo.h"

#. (itstool) path: sect2/para
#: book.translate.xml:1565
msgid ""
"If you change <filename>foo.h</filename>, next time you run <command>make</"
"command> all files depending on <filename>foo.h</filename> will be "
"recompiled."
msgstr ""
"اگر شما پروندهٔ <filename>foo.h</filename> را تغییر دهید، دفعه بعد که "
"<command>make</command> را اجرا کنید، تمام پرونده‌های وابسته به <filename>foo"
".h</filename> دوباره همگردانی می‌شوند."

#. (itstool) path: sect2/para
#: book.translate.xml:1569
msgid ""
"Do not forget to run <command>make depend</command> each time you add an "
"include-file to one of your files."
msgstr ""
"فراموش نکنید هر بار که پروندهٔ سرآیندی به یکی از پرونده‌های خود اضافه می‌"
"کنید دستور <command>make depend</command> را اجرا کنید."

#. (itstool) path: sect2/title
#: book.translate.xml:1574
msgid "FreeBSD Makefiles"
msgstr "FreeBSD Makefiles"

#. (itstool) path: sect2/para
#: book.translate.xml:1576
msgid ""
"Makefiles can be rather complicated to write. Fortunately, BSD-based systems "
"like FreeBSD come with some very powerful ones as part of the system. One "
"very good example of this is the FreeBSD ports system. Here is the essential "
"part of a typical ports <filename>Makefile</filename>:"
msgstr ""
"نوشتن Makefile ها می‌تواند نسبتاً کار پیچیده‌ای باشد. خوشبختانه، سامانه‌های "
"مبتنی‌بر BSD همچون FreeBSD به‌همراه برخی از قدرت‌مندترین آنها و بخشی از خود "
"سامانه می‌آیند. در اینجا بخش اساسی از <filename>Makefile</filename> یک پورت "
"عادی آمده است:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1583
#, no-wrap
msgid ""
"MASTER_SITES=   ftp://freefall.cdrom.com/pub/FreeBSD/LOCAL_PORTS/\n"
"DISTFILES=      scheme-microcode+dist-7.3-freebsd.tgz\n"
"\n"
".include &lt;bsd.port.mk&gt;"
msgstr ""
"MASTER_SITES=   ftp://freefall.cdrom.com/pub/FreeBSD/LOCAL_PORTS/\n"
"DISTFILES=      scheme-microcode+dist-7.3-freebsd.tgz\n"
"\n"
".include &lt;bsd.port.mk&gt;"

#. (itstool) path: sect2/para
#: book.translate.xml:1588
msgid ""
"Now, if we go to the directory for this port and type <userinput>make</"
"userinput>, the following happens:"
msgstr ""
"حال، اگر به مسیر این پورت برویم و بنویسیم <userinput>make</userinput>، چنین "
"می‌شود:"

#. (itstool) path: step/para
#: book.translate.xml:1593
msgid ""
"A check is made to see if the source code for this port is already on the "
"system."
msgstr ""
"بررسی صورت می‌گیرد تا ببیند کد منبعِ این پورت از قبل بر روی سامانه موجود است "
"یا خیر."

#. (itstool) path: step/para
#: book.translate.xml:1598
msgid ""
"If it is not, an FTP connection to the URL in <symbol>MASTER_SITES</symbol> "
"is set up to download the source."
msgstr ""
"اگر چنین نباشد، یک اتصال FTP به نشانی وب مذکور در <symbol>MASTER_SITES</"
"symbol> برقرار می‌شود تا منبع را بارگیری کند."

#. (itstool) path: step/para
#: book.translate.xml:1604
msgid ""
"The checksum for the source is calculated and compared it with one for a "
"known, good, copy of the source. This is to make sure that the source was "
"not corrupted while in transit."
msgstr ""
"سرجمع منبع حساب شده است و با یک سرجمع شناخته شده و درست از همان منبع مقایسه "
"می‌شود. این امر برای حصول اطمینان از سالم بودن منبع به‌هنگام انتقال است."

#. (itstool) path: step/para
#: book.translate.xml:1611
msgid ""
"Any changes required to make the source work on FreeBSD are applied—this is "
"known as <firstterm>patching</firstterm>."
msgstr ""
"هر تغییر ضرروی‌ای برای اطمینان از کارکرد منبع بر روی FreeBSD اعمال شده‌است - "
"این به‌عنوان <firstterm>رفع اشکال</firstterm> شناخته می‌شود."

#. (itstool) path: step/para
#: book.translate.xml:1617
msgid ""
"Any special configuration needed for the source is done. (Many <trademark "
"class=\"registered\">UNIX</trademark> program distributions try to work out "
"which version of <trademark class=\"registered\">UNIX</trademark> they are "
"being compiled on and which optional <trademark class=\"registered\">UNIX</"
"trademark> features are present—this is where they are given the information "
"in the FreeBSD ports scenario)."
msgstr ""
"هر تغییر خاصی که نیازِ منبع باشد انجام شده است. (بسیاری از برنامه‌های "
"<trademark class=\"registered\">UNIX</trademark> برای تشخیص نسخه و امکانات "
"اختیاری موجود بر روی آن <trademark class=\"registered\">UNIX</trademark> "
"تلاش می‌کنند - این همان جایی است که آنها در سناریو پورت‌های FreeBSD اطلاعات "
"را دریافت می‌کنند)."

#. (itstool) path: step/para
#: book.translate.xml:1626
msgid ""
"The source code for the program is compiled. In effect, we change to the "
"directory where the source was unpacked and do <command>make</command>—the "
"program's own make file has the necessary information to build the program."
msgstr ""
"کد منبع برنامه همگردان شده است. به‌طور خلاصه، ما مسیری که منبع در آن باز شده "
"است را تغییر می‌دهیم و <command>make</command> می‌کنیم—پروندهٔ make خودِ "
"برنامه اطلاعات لازم برای ساختن برنامه را دارد."

#. (itstool) path: step/para
#: book.translate.xml:1634
msgid ""
"We now have a compiled version of the program. If we wish, we can test it "
"now; when we feel confident about the program, we can type <userinput>make "
"install</userinput>. This will cause the program and any supporting files it "
"needs to be copied into the correct location; an entry is also made into a "
"<database>package database</database>, so that the port can easily be "
"uninstalled later if we change our mind about it."
msgstr ""
"ما اکنون نسخه‌ای همگردان‌شده از برنامه را در اختیار داریم. اگر بخواهیم، می‌"
"توانیم تست کنیم؛ هر زمان که در مورد برنامه احساس اطمینان کنیم، می‌توانیم "
"بنویسیم <userinput>make install</userinput>. این باعث می‌شود برنامه به‌همراه "
"تمام پرونده‌های پشتیبانی موردنیازش در مسیر درست کپی شوند؛ همچنین داده‌ای در "
"<database>package database</database> ثبت می‌شود، در نتیجه اگر زمانی تغییر "
"نظر بدهیم، پورت به‌راحتی می‌تواند پاک شود."

#. (itstool) path: sect2/para
#: book.translate.xml:1645
msgid ""
"Now I think you will agree that is rather impressive for a four line script!"
msgstr ""
"اکنون به گمانم موافق هستید که این برای یک اجرانامهٔ چهار خطی بسیار تحسین "
"برانگیز است!"

#. (itstool) path: sect2/para
#: book.translate.xml:1648
msgid ""
"The secret lies in the last line, which tells <command>make</command> to "
"look in the system makefile called <filename>bsd.port.mk</filename>. It is "
"easy to overlook this line, but this is where all the clever stuff comes from"
"—someone has written a makefile that tells <command>make</command> to do all "
"the things above (plus a couple of other things I did not mention, including "
"handling any errors that may occur) and anyone can get access to that just "
"by putting a single line in their own make file!"
msgstr ""
"راز آن در آخرین خط نهفته است، آنجا که به <command>make</command> می‌گوید "
"داخل makefile سامانه به نام <filename>bsd.port.mk</filename> را نگاه کن. "
"غفلت از این خط آسان است، اما اینجا همان بخشی است که تمام مسائل هوشمندانه "
"می‌آیند—کسی یک makefile نوشته است که به <command>make</command> می‌گوید تمام "
"کارهای بالا را انجام دهد (افزون بر تعدادی کارهای دیگر، مانند رسیدگی به "
"هرگونه خطای احتمالی) و هرکس می‌تواند تنها با اضافه کردن یک خط درون پروندهٔ "
"make خود به آن دست‌یابد!"

#. (itstool) path: sect2/para
#: book.translate.xml:1658
msgid ""
"If you want to have a look at these system makefiles, they are in <filename>/"
"usr/share/mk</filename>, but it is probably best to wait until you have had "
"a bit of practice with makefiles, as they are very complicated (and if you "
"do look at them, make sure you have a flask of strong coffee handy!)"
msgstr ""
"اگر می‌خواهید نگاهی به این پرونده‌های make در سامانه داشته باشید، آنها در "
"<filename>/usr/share/mk</filename> هستند، اما احتمالاً بهتر است منتظر بمانید "
"تا زمانی‌که اندکی تمرین با آنها داشته باشید، زیرا بسیار پیچیده‌اند (و اگر "
"آنها را نگاه کردید، مطمئن شوید یک فلاسک قهوهٔ قوی دم دستتان باشد!)"

#. (itstool) path: sect2/title
#: book.translate.xml:1667
msgid "More Advanced Uses of <command>make</command>"
msgstr "کاربردهای حرفه‌ای‌تر <command>make</command>"

#. (itstool) path: sect2/para
#: book.translate.xml:1669
msgid ""
"<command>Make</command> is a very powerful tool, and can do much more than "
"the simple example above shows. Unfortunately, there are several different "
"versions of <command>make</command>, and they all differ considerably. The "
"best way to learn what they can do is probably to read the documentation—"
"hopefully this introduction will have given you a base from which you can do "
"this."
msgstr ""
"<command>Make</command> ابزار بسیار قدرتمندی است، و می‌تواند کارهای بسیار "
"بیشتری نسبت به آنچه در مثال بالا مشاهده کردید را انجام دهد. متأسفانه، نسخه‌"
"های مختلفی از <command>make</command> وجود دارد، و آنها به‌شکل قابل‌توجهی "
"متفاوت از یکدیگرند. بهترین روش برای یادگیری آنها مطالعهٔ مستندات است—"
"خوشبختانه این پیش‌درآمد پایه‌ای برای شما فراهم کرده است که به‌کمک آن این امر "
"میسر می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:1677
msgid ""
"The version of make that comes with FreeBSD is the <application>Berkeley "
"make</application>; there is a tutorial for it in <filename>/usr/share/doc/"
"psd/12.make</filename>. To view it, do"
msgstr ""
"نسخه‌ای که به‌همراه FreeBSD می‌آید <application>Berkeley make</application> "
"است؛ آموزه‌ای در مسیرِ <filename>/usr/share/doc/psd/12.make</filename> بدین "
"منظور در دسترس است. برای مشاهدهٔ آن، وارد کنید"

#. (itstool) path: sect2/screen
#: book.translate.xml:1682
#, no-wrap
msgid "<prompt>%</prompt> <userinput>zmore paper.ascii.gz</userinput>"
msgstr "<prompt>%</prompt> <userinput>zmore paper.ascii.gz</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:1684
msgid "in that directory."
msgstr "در همان مسیر."

#. (itstool) path: sect2/para
#: book.translate.xml:1686
msgid ""
"Many applications in the ports use <application>GNU make</application>, "
"which has a very good set of <quote>info</quote> pages. If you have "
"installed any of these ports, <application>GNU make</application> will "
"automatically have been installed as <command>gmake</command>. It is also "
"available as a port and package in its own right."
msgstr ""
"بسیاری از برنامه‌های موجود در پورت‌ها از <application>GNU make</application> "
"استفاده می‌کنند، که شامل مجموعه‌ای بسیار خوب از صفحات <quote>اطلاعات</quote> "
"هستند. اگر هرکدام از این پورت‌ها را نصب کرده باشید، <application>GNU make</"
"application> به‌طور خودکار تحت عنوان <command>gmake</command> نصب خواهد شد. "
"همچنین به‌عنوان پورت و بسته‌ای جدا در دسترس است."

#. (itstool) path: sect2/para
#: book.translate.xml:1693
msgid ""
"To view the info pages for <application>GNU make</application>, you will "
"have to edit <filename>dir</filename> in the <filename>/usr/local/info</"
"filename> directory to add an entry for it. This involves adding a line like"
msgstr ""
"برای آنکه صفحهٔ اطلاعاتِ <application>GNU make</application> را ببینید، لازم "
"است <filename>dir</filename> در مسیر <filename>/usr/local/info</filename> را "
"ویرایش کنید تا ورودی‌ای برای آن اضافه کنید. این شامل اضافه‌کردن خطی مانند"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:1699
#, no-wrap
msgid " * Make: (make).                 The GNU Make utility."
msgstr " * Make: (make).                 The GNU Make utility."

#. (itstool) path: sect2/para
#: book.translate.xml:1701
msgid ""
"to the file. Once you have done this, you can type <userinput>info</"
"userinput> and then select <guimenuitem>make</guimenuitem> from the menu (or "
"in <application>Emacs</application>, do <userinput>C-h i</userinput>)."
msgstr ""
"به پرونده است. پس از انجام این کار، می‌توانید عبارت <userinput>info</"
"userinput> را وارد کنید و سپس <guimenuitem>make</guimenuitem> را از فهرست "
"انتخاب کنید (یا در محیطِ <application>Emacs</application>، بزنید "
"<userinput>C-h i</userinput>)."

#. (itstool) path: sect1/title
#: book.translate.xml:1710
msgid "Debugging"
msgstr "اشکال‌زدایی"

#. (itstool) path: sect2/title
#: book.translate.xml:1713
msgid "Introduction to Available Debuggers"
msgstr "پیش‌درآمدی بر اشکال‌زدا‌های موجود"

#. (itstool) path: sect2/para
#: book.translate.xml:1715
msgid ""
"Using a debugger allows running the program under more controlled "
"circumstances. Typically, it is possible to step through the program a line "
"at a time, inspect the value of variables, change them, tell the debugger to "
"run up to a certain point and then stop, and so on. It is also possible to "
"attach to a program that is already running, or load a core file to "
"investigate why the program crashed. It is even possible to debug the "
"kernel, though that is a little trickier than the user applications we will "
"be discussing in this section."
msgstr ""
"استفاده از اشکال‌زدا این امکان را فراهم می‌کند تا برنامه را تحت شرایط "
"کنترل‌شده‌تری راه‌اندازی کنیم. به‌طور معمول، این امکان هست تا هربار وارد یک "
"خط از برنامه شد، ارزش متغیرها را وارسی کرد، آنها را تغییر داد، به اشکال‌زدا "
"گفت که تا کدام مرحله اجرا و سپس توقف کند، و به‌همین ترتیب. همچنین ممکن است "
"یک برنامهٔ در حال اجرا را به آن ضمیمه کرد، یا یک پروندهٔ حافظه (core) را جهت "
"بررسی علل خراب‌شدن برنامه بار کرد. حتی امکان اشکال‌زدایی هسته نیز وجود دارد، "
"گرچه این کمی پیچیده‌تر از اشکال‌زدایی برنامه‌هایی است که ما قرار است در این "
"بخش مطرح کنیم."

#. (itstool) path: sect2/para
#: book.translate.xml:1726
msgid ""
"This section is intended to be a quick introduction to using debuggers and "
"does not cover specialized topics such as debugging the kernel. For more "
"information about that, refer to <xref linkend=\"kerneldebug\"/>."
msgstr ""
"این بخش به‌عنوان پیش‌درآمدی سریع بر استفاده از اشکال‌زداها در نظر گرفته شده "
"است و موضوعات تخصصی چون اشکال‌زداییِ هسته را پوشش نمی‌دهد. برای اطلاعات "
"بیشتر در آن مورد، به <xref linkend=\"kerneldebug\"/> رجوع کنید."

#. (itstool) path: sect2/para
#: book.translate.xml:1731
msgid ""
"The standard debugger supplied with FreeBSD 12.1 is called <command>lldb</"
"command> (<application>LLVM debugger</application>). As it is part of the "
"standard installation for that release, there is no need to do anything "
"special to use it. It has good command help, accessible via the "
"<userinput>help</userinput> command, as well as <link xlink:href=\"https://"
"lldb.llvm.org/\">a web tutorial and documentation</link>."
msgstr ""
"اشکال‌زدای استانداردِ عرضه‌شده با FreeBSD نسخهٔ 12.1 <command>lldb</command> "
"(<application>LLVM debugger</application>) نام دارد. نیاز به انجام کار خاصی "
"به‌منظور استفاده از آن نیست، زیرا قسمتی از نصب استاندارد آن توزیع هست. دارای "
"دستور کمک مناسبی است، قابل‌دسترس از طریق دستور <userinput>help</userinput>، "
"و نیز <link xlink:href=\"https://lldb.llvm.org/\">آموزه و مستندات تحت "
"وب</link>."

#. (itstool) path: note/para
#: book.translate.xml:1741
msgid ""
"The <command>lldb</command> command is available for FreeBSD 11.3 <link "
"xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/ports-"
"using.html\">from ports or packages</link> as <package>devel/llvm</package>. "
"This will install the default version of lldb (currently 9.0)."
msgstr ""
"دستور <command>lldb</command> در FreeBSD 11.3 به‌عنوان <package>devel/llvm</"
"package> در <link xlink:href=\"@@URL_RELPREFIX@@/doc/fa_IR.UTF-8/books/"
"handbook/ports-using.html\">پورت‌ها یا بسته‌ها</link> موجود است. این نسخهٔ "
"پیش‌فرض lldb را نصب می‌کند (در حال حاضر 9.0)."

#. (itstool) path: sect2/para
#: book.translate.xml:1748
msgid ""
"The other debugger available with FreeBSD is called <command>gdb</command> "
"(<application>GNU debugger</application>). Unlike lldb, it is not installed "
"by default on FreeBSD 12.1; to use it, <link xlink:href=\"@@URL_RELPREFIX@@/"
"doc/en_US.ISO8859-1/books/handbook/ports-using.html\">install</link> "
"<package>devel/gdb</package> from ports or packages. The version installed "
"by default on FreeBSD 11.3 is old; instead, install <package>devel/gdb</"
"package> there as well. It has quite good on-line help, as well as a set of "
"info pages."
msgstr ""
"اشکال‌زدای دیگری که در FreeBSD هست <command>gdb</command> (<application>GNU "
"debugger</application>) نام دارد. برخلاف lldb، به‌طور پیش‌فرض در FreeBSD "
"12.1 نصب نشده است؛ برای استفاده از آن، <package>devel/gdb</package> را از "
"طریق پورت یا بسته‌ها <link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US."
"ISO8859-1/books/handbook/ports-using.html\">نصب کنید</link>. نسخهٔ از پیش "
"نصب‌شدهٔ موجود در FreeBSD 11.3 قدیمی است؛ در عوض، <package>devel/gdb</"
"package> را در آنجا نیز نصب کنید. در کنار مجموعه‌ای از صفحات اطلاعات، "
"راهنمای برخطِ بسیار خوبی نیز دارد."

#. (itstool) path: sect2/para
#: book.translate.xml:1758
msgid ""
"Which one to use is largely a matter of taste. If familiar with one only, "
"use that one. People familiar with neither or both but wanting to use one "
"from inside <application>Emacs</application> will need to use <command>gdb</"
"command> as <command>lldb</command> is unsupported by <application>Emacs</"
"application>. Otherwise, try both and see which one you prefer."
msgstr ""
"اینکه کدام یک را استفاده کنید تا حد زیادی به سلیقهٔ شما برمی‌گردد. اگر فقط "
"با یکی از آنها آشنا هستید، از همان استفاده کنید. اشخاصی که با هردوی آنها "
"آشنایی دارند یا هیچکدام را نمی‌شناسند اما می‌خواهند یک کدام را از داخل "
"<application>Emacs</application> استفاده کنند لازم است از <command>gdb</"
"command> استفاده کنند زیرا <command>lldb</command> توسط <application>Emacs</"
"application> پشتیبانی نمی‌شود. در غیر این صورت، هر دو را استفاده کنید و "
"ببینید کدام را ترجیح می‌دهید."

#. (itstool) path: sect2/title
#: book.translate.xml:1768
msgid "Using lldb"
msgstr "استفاده از lldb"

#. (itstool) path: sect3/title
#: book.translate.xml:1771
msgid "Starting lldb"
msgstr "راه‌اندازیِ lldb"

#. (itstool) path: sect3/para
#: book.translate.xml:1773
msgid "Start up lldb by typing"
msgstr "lldb را با نوشتن عبارات زیر راه‌اندازی کنید"

#. (itstool) path: sect3/screen
#: book.translate.xml:1775
#, no-wrap
msgid "<prompt>%</prompt> <userinput>lldb -- <replaceable>progname</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>lldb -- "
"<replaceable>progname</replaceable></userinput>"

#. (itstool) path: sect3/title
#: book.translate.xml:1779
msgid "Running a Program with lldb"
msgstr "اجرای برنامه با lldb"

#. (itstool) path: sect3/para
#: book.translate.xml:1781
msgid ""
"Compile the program with <option>-g</option> to get the most out of using "
"<command>lldb</command>. It will work without, but will only display the "
"name of the function currently running, instead of the source code. If it "
"displays a line like:"
msgstr ""
"برنامه را با<option>-g</option> همگردان کنید تا بیشترین بهره را از استفادهٔ "
"<command>lldb</command> ببرید. بدون آن نیز کار خواهد کرد، اما به‌جای کد منبع،"
" تنها نام تابعِ در حال اجرا به شما نشان داده خواهد شد. اگر خطی مانند این را "
"نمایش می‌دهد:"

#. (itstool) path: sect3/screen
#: book.translate.xml:1787
#, no-wrap
msgid "Breakpoint 1: where = temp`main, address = …"
msgstr "Breakpoint 1: where = temp`main, address = …"

#. (itstool) path: sect3/para
#: book.translate.xml:1789
msgid ""
"(without an indication of source code filename and line number) when setting "
"a breakpoint, this means that the program was not compiled with <option>-g</"
"option>."
msgstr ""
"(بدون هیچ اشاره‌ای به نام پرونده و شماره خطِ کد منبع) هنگامی‌که نقطهٔ توقف "
"را تعیین می‌کنیم، بدان معناست که برنامه بدون <option>-g</option> همگردان شده "
"است."

#. (itstool) path: tip/para
#: book.translate.xml:1794
msgid ""
"Most <command>lldb</command> commands have shorter forms that can be used "
"instead. The longer forms are used here for clarity."
msgstr ""
"بیشتر دستورات <command>lldb</command> صورت‌های کوتاه‌تری دارند که می‌توان در "
"عوض آنها را به‌کار برد. صورت‌های بلندتر برای شفافیت در اینجا به‌کار رفته‌اند."

#. (itstool) path: sect3/para
#: book.translate.xml:1799
msgid ""
"At the <command>lldb</command> prompt, type <userinput>breakpoint set -n "
"main</userinput>. This will tell the debugger not to display the preliminary "
"set-up code in the program being run and to stop execution at the beginning "
"of the program's code. Now type <userinput>process launch</userinput> to "
"actually start the program— it will start at the beginning of the set-up "
"code and then get stopped by the debugger when it calls <function>main()</"
"function>."
msgstr ""
"در اعلانِ <command>lldb</command>، وارد کنید <userinput>breakpoint set -n "
"main</userinput>. این به اشکال‌زدا می‌گوید که کد راه‌اندازیِ مقدماتیِ برنامهٔ"
" در حال اجرا را نمایش ندهد و اجرا را در ابتدای کد برنامه متوقف سازد. حال "
"بنویسید <userinput>process launch</userinput> تا برنامه را آغاز کنید— از "
"ابتدای کدِ راه‌اندازی آغاز می‌کند و سپس زمانی‌که اشکال‌زدا <function>main()</"
"function> را صدا می‌زند، متوقف می‌شود."

#. (itstool) path: sect3/para
#: book.translate.xml:1809
msgid ""
"To step through the program a line at a time, type <userinput>thread step-"
"over</userinput>. When the program gets to a function call, step into it by "
"typing <userinput>thread step-in</userinput>. Once in a function call, "
"return from it by typing <userinput>thread step-out</userinput> or use "
"<userinput>up</userinput> and <userinput>down</userinput> to take a quick "
"look at the caller."
msgstr ""
"برای آنکه به‌ازای هر خط وارد برنامه شوید، وارد کنید <userinput>thread step-"
"over</userinput>. هنگامی‌که برنامه به یک فراخوان تابع می‌رسد، "
"<userinput>thread step-in</userinput> را وارد کنید تا وارد آن شوید. وقتی "
"داخل فراخوان تابع بودید، <userinput>thread step-out</userinput> را وارد کنید "
"تا از آن خارج شوید یا از <userinput>up</userinput> و <userinput>down</"
"userinput> استفاده کنید تا نگاهی سریع به فراخوان داشته باشید."

#. (itstool) path: sect3/para
#: book.translate.xml:1818
msgid ""
"Here is a simple example of how to spot a mistake in a program with "
"<command>lldb</command>. This is our program (with a deliberate mistake):"
msgstr ""
"در اینجا مثالی ساده از چگونگی تشخیص اشتباه در یک برنامه به‌وسیلهٔ "
"<command>lldb</command> آمده است. این برنامهٔ ماست (با اشتباهی عمدی):"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:1822 book.translate.xml:2099
#, no-wrap
msgid ""
"#include &lt;stdio.h&gt;\n"
"\n"
"int bazz(int anint);\n"
"\n"
"main() {\n"
"\tint i;\n"
"\n"
"\tprintf(\"This is my program\\n\");\n"
"\tbazz(i);\n"
"\treturn 0;\n"
"}\n"
"\n"
"int bazz(int anint) {\n"
"\tprintf(\"You gave me %d\\n\", anint);\n"
"\treturn anint;\n"
"}"
msgstr ""
"#include &lt;stdio.h&gt;\n"
"\n"
"int bazz(int anint);\n"
"\n"
"main() {\n"
"\tint i;\n"
"\n"
"\tprintf(\"This is my program\\n"
"\");\n"
"\tbazz(i);\n"
"\treturn 0;\n"
"}\n"
"\n"
"int bazz(int anint) {\n"
"\tprintf(\"You gave me %d\\n"
"\", anint);\n"
"\treturn anint;\n"
"}"

#. (itstool) path: sect3/para
#: book.translate.xml:1839 book.translate.xml:2116
msgid ""
"This program sets <symbol>i</symbol> to be <literal>5</literal> and passes "
"it to a function <function>bazz()</function> which prints out the number we "
"gave it."
msgstr ""
"این برنامه مقدار <symbol>i</symbol> را <literal>5</literal> قرار می‌دهد و آن "
"را به تابعِ <function>bazz()</function> می‌دهد که شماره‌ای که ما به آن داده‌"
"ایم را چاپ می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:1844 book.translate.xml:2121
msgid "Compiling and running the program displays"
msgstr "همگردانی و اجرای برنامه نمایش می‌دهد"

#. (itstool) path: sect3/screen
#: book.translate.xml:1846
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cc -g -o temp temp.c</userinput>\n"
"<prompt>%</prompt> <userinput>./temp</userinput>\n"
"This is my program\n"
"anint = -5360"
msgstr ""
"<prompt>%</prompt> <userinput>cc -g -o temp temp.c</userinput>\n"
"<prompt>%</prompt> <userinput>./temp</userinput>\n"
"This is my program\n"
"anint = -5360"

#. (itstool) path: sect3/para
#: book.translate.xml:1851
msgid "That is not what was expected! Time to see what is going on!"
msgstr "این چیزی نیست که انتظار می‌رفت! وقت آن است تا ببینیم جریان چیست!"

#. (itstool) path: sect3/screen
#: book.translate.xml:1854
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>lldb -- temp</userinput>\n"
"(lldb) target create \"temp\"\n"
"Current executable set to 'temp' (x86_64).\n"
"(lldb) <userinput>breakpoint set -n main</userinput>\t\t\t\t<lineannotation>Skip the set-up code</lineannotation>\n"
"Breakpoint 1: where = temp`main + 15 at temp.c:8:2, address = 0x00000000002012ef\t<lineannotation>lldb puts breakpoint at main()</lineannotation>\n"
"(lldb) <userinput>process launch</userinput>\t\t\t\t\t<lineannotation>Run as far as main()</lineannotation>\n"
"Process 9992 launching\n"
"Process 9992 launched: '/home/pauamma/tmp/temp' (x86_64)\t<lineannotation>Program starts running</lineannotation>\n"
"\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = breakpoint 1.1\t<lineannotation>lldb stops at main()</lineannotation>\n"
"    frame #0: 0x00000000002012ef temp`main at temp.c:8:2\n"
"   5\tmain() {\n"
"   6\t\tint i;\n"
"   7\n"
"-&gt; 8\t\tprintf(\"This is my program\\n\");\t\t\t<lineannotation>Indicates the line where it stopped</lineannotation>\n"
"   9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"(lldb) <userinput>thread step-over</userinput>\t\t\t<lineannotation>Go to next line</lineannotation>\n"
"This is my program\t\t\t\t\t\t<lineannotation>Program prints out</lineannotation>\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = step over\n"
"    frame #0: 0x0000000000201300 temp`main at temp.c:9:7\n"
"   6\t\tint i;\n"
"   7\n"
"   8\t\tprintf(\"This is my program\\n\");\n"
"-&gt; 9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"   12\n"
"(lldb) <userinput>thread step-in</userinput>\t\t\t<lineannotation>step into bazz()</lineannotation>\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = step in\n"
"    frame #0: 0x000000000020132b temp`bazz(anint=-5360) at temp.c:14:29\t<lineannotation>lldb displays stack frame</lineannotation>\n"
"   11\t}\n"
"   12\n"
"   13\tint bazz(int anint) {\n"
"-&gt; 14\t\tprintf(\"You gave me %d\\n\", anint);\n"
"   15\t\treturn anint;\n"
"   16\t}\n"
"(lldb)"
msgstr ""
"<prompt>%</prompt> <userinput>lldb -- temp</userinput>\n"
"(lldb) target create \"temp\"\n"
"Current executable set to 'temp' (x86_64).\n"
"(lldb) <userinput>breakpoint set -n main</userinput>\t\t\t\t"
"<lineannotation>Skip the set-up code</lineannotation>\n"
"Breakpoint 1: where = temp`main + 15 at temp.c:8:2, address = "
"0x00000000002012ef\t<lineannotation>lldb puts breakpoint at "
"main()</lineannotation>\n"
"(lldb) <userinput>process launch</userinput>\t\t\t\t\t<lineannotation>Run as "
"far as main()</lineannotation>\n"
"Process 9992 launching\n"
"Process 9992 launched: '/home/pauamma/tmp/temp' (x86_64)\t"
"<lineannotation>Program starts running</lineannotation>\n"
"\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = breakpoint 1.1\t"
"<lineannotation>lldb stops at main()</lineannotation>\n"
"    frame #0: 0x00000000002012ef temp`main at temp.c:8:2\n"
"   5\tmain() {\n"
"   6\t\tint i;\n"
"   7\n"
"-&gt; 8\t\tprintf(\"This is my program\\n"
"\");\t\t\t<lineannotation>Indicates the line where it "
"stopped</lineannotation>\n"
"   9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"(lldb) <userinput>thread step-over</userinput>\t\t\t<lineannotation>Go to "
"next line</lineannotation>\n"
"This is my program\t\t\t\t\t\t<lineannotation>Program prints "
"out</lineannotation>\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = step over\n"
"    frame #0: 0x0000000000201300 temp`main at temp.c:9:7\n"
"   6\t\tint i;\n"
"   7\n"
"   8\t\tprintf(\"This is my program\\n"
"\");\n"
"-&gt; 9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"   12\n"
"(lldb) <userinput>thread step-in</userinput>\t\t\t<lineannotation>step into "
"bazz()</lineannotation>\n"
"Process 9992 stopped\n"
"* thread #1, name = 'temp', stop reason = step in\n"
"    frame #0: 0x000000000020132b temp`bazz(anint=-5360) at temp.c:14:29\t"
"<lineannotation>lldb displays stack frame</lineannotation>\n"
"   11\t}\n"
"   12\n"
"   13\tint bazz(int anint) {\n"
"-&gt; 14\t\tprintf(\"You gave me %d\\n"
"\", anint);\n"
"   15\t\treturn anint;\n"
"   16\t}\n"
"(lldb)"

#. (itstool) path: sect3/para
#: book.translate.xml:1897
msgid ""
"Hang on a minute! How did <symbol>anint</symbol> get to be <literal>-5360</"
"literal>? Was it not set to <literal>5</literal> in <function>main()</"
"function>? Let us move up to <function>main()</function> and have a look."
msgstr ""
"یک دقیقه صبر کنید! <symbol>anint</symbol> چگونه به <literal>-5360</literal> "
"رسید؟ آیا در <function>main()</function> روی <literal>5</literal> قرار "
"نگرفته بود؟ بگذارید برویم به <function>main()</function> تا نگاهی بیندازیم."

#. (itstool) path: sect3/screen
#: book.translate.xml:1903
#, no-wrap
msgid ""
"(lldb) <userinput>up</userinput>\t\t<lineannotation>Move up call stack</lineannotation>\n"
"frame #1: 0x000000000020130b temp`main at temp.c:9:2\t\t<lineannotation>lldb displays stack frame</lineannotation>\n"
"   6\t\tint i;\n"
"   7\n"
"   8\t\tprintf(\"This is my program\\n\");\n"
"-&gt; 9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"   12\n"
"(lldb) <userinput>frame variable i</userinput>\t\t\t<lineannotation>Show us the value of i</lineannotation>\n"
"(int) i = -5360\t\t\t\t\t\t\t<lineannotation>lldb displays -5360</lineannotation>"
msgstr ""
"(lldb) <userinput>up</userinput>\t\t<lineannotation>Move up call "
"stack</lineannotation>\n"
"frame #1: 0x000000000020130b temp`main at temp.c:9:2\t\t<lineannotation>lldb "
"displays stack frame</lineannotation>\n"
"   6\t\tint i;\n"
"   7\n"
"   8\t\tprintf(\"This is my program\\n"
"\");\n"
"-&gt; 9\t\tbazz(i);\n"
"   10\t\treturn 0;\n"
"   11\t}\n"
"   12\n"
"(lldb) <userinput>frame variable i</userinput>\t\t\t<lineannotation>Show us "
"the value of i</lineannotation>\n"
"(int) i = -5360\t\t\t\t\t\t\t<lineannotation>lldb displays "
"-5360</lineannotation>"

#. (itstool) path: sect3/para
#: book.translate.xml:1915 book.translate.xml:2158
msgid ""
"Oh dear! Looking at the code, we forgot to initialize <symbol>i</symbol>. We "
"meant to put"
msgstr ""
"اوه! با نگاه به کد، فراموش کردیم <symbol>i</symbol> را مقداردهی کنیم. منظور "
"ما این بود"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:1918 book.translate.xml:2161
#, no-wrap
msgid ""
"<lineannotation>…</lineannotation>\n"
"main() {\n"
"\tint i;\n"
"\n"
"\ti = 5;\n"
"\tprintf(\"This is my program\\n\");\n"
"<lineannotation>…</lineannotation>"
msgstr ""
"<lineannotation>…</lineannotation>\n"
"main() {\n"
"\tint i;\n"
"\n"
"\ti = 5;\n"
"\tprintf(\"This is my program\\n"
"\");\n"
"<lineannotation>…</lineannotation>"

#. (itstool) path: sect3/para
#: book.translate.xml:1926
msgid ""
"but we left the <literal>i=5;</literal> line out. As we did not initialize "
"<symbol>i</symbol>, it had whatever number happened to be in that area of "
"memory when the program ran, which in this case happened to be "
"<literal>-5360</literal>."
msgstr ""
"اما خط <literal>i=5;</literal> را جا انداختیم. از آنجا که <symbol>i</symbol> "
"را مقداردهی نکردیم، عددی احتمالی در آن فضا از حافظه را به‌هنگام اجرا به خود "
"گرفت، که در این مورد <literal>-5360</literal> بود."

#. (itstool) path: note/para
#: book.translate.xml:1933
msgid ""
"The <command>lldb</command> command displays the stack frame every time we "
"go into or out of a function, even if we are using <userinput>up</userinput> "
"and <userinput>down</userinput> to move around the call stack. This shows "
"the name of the function and the values of its arguments, which helps us "
"keep track of where we are and what is going on. (The stack is a storage "
"area where the program stores information about the arguments passed to "
"functions and where to go when it returns from a function call.)"
msgstr ""
"دستور <command>lldb</command> چارچوب پشته را هر زمان که به داخل یا بیرون از "
"یک تابع می‌رویم نمایش می‌دهد، حتی اگر داریم از <userinput>up</userinput> یا "
"<userinput>down</userinput> برای حرکت پیرامون پشتهٔ فراخوان استفاده می‌کنیم. "
"این نام تابع و مقدار براهین آن را نشان می‌دهد، که این امر به ما کمک می‌کند "
"تا جایی که هستیم و اتفاقی که دارد می‌افتد را دنبال کنیم. (پشته یک فضای ذخیره‌"
"سازی است که برنامه اطلاعات مربوط به براهین منتقل شده به توابع و جایی که بعد "
"از اجرای یک تابع باید برود را ذخیره می‌کند.)"

#. (itstool) path: sect3/title
#: book.translate.xml:1947
msgid "Examining a Core File with lldb"
msgstr "بررسی یک پروندهٔ حافظه با lldb"

#. (itstool) path: sect3/para
#: book.translate.xml:1949 book.translate.xml:2191
msgid ""
"A core file is basically a file which contains the complete state of the "
"process when it crashed. In <quote>the good old days</quote>, programmers "
"had to print out hex listings of core files and sweat over machine code "
"manuals, but now life is a bit easier. Incidentally, under FreeBSD and other "
"4.4BSD systems, a core file is called <filename><replaceable>progname</"
"replaceable>.core</filename> instead of just <filename>core</filename>, to "
"make it clearer which program a core file belongs to."
msgstr ""
"پروندهٔ حافظه در واقع یک پرونده است که هنگام خراب شدن، وضعیت کاملی از فرآیند "
"را شامل می‌شود. در <quote>روزگاران خوش گذشته</quote>، برنامه‌نویسان مجبور "
"بودند لیست‌های شانزده‌شانزدهی پرونده‌های حافظه را چاپ کنند و کد دستگاه "
"(ماشین) را به‌سختی اجرا کنند، اما امروزه زندگی کمی ساده‌تر است. در FreeBSD و "
"دیگر سامانه‌های 4.4BSD، برای روشن‌سازی این موضوع که پروندهٔ حافظه برای کدام "
"برنامه است، پروندهٔ حافظه <filename><replaceable>progname</replaceable>."
"core</filename> نامیده می‌شود و نه فقط <filename>core</filename>."

#. (itstool) path: sect3/para
#: book.translate.xml:1959
msgid ""
"To examine a core file, specify the name of the core file in addition to the "
"program itself. Instead of starting up <command>lldb</command> in the usual "
"way, type <userinput>lldb -c <replaceable>progname</replaceable>.core -- "
"<replaceable>progname</replaceable></userinput>"
msgstr ""
"برای بررسی یک پروندهٔ حافظه، نام آن را بعلاوه خود برنامه مشخص کنید. به جای "
"اجرای <command>lldb</command> به حالت معمول، بنویسید <userinput>lldb -c "
"<replaceable>progname</replaceable>.core -- "
"<replaceable>progname</replaceable></userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:1965
msgid "The debugger will display something like this:"
msgstr "اشکال‌زدا چیزی مانند این را نشان می‌دهد:"

#. (itstool) path: sect3/screen
#: book.translate.xml:1967
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>lldb -c <filename><replaceable>progname</replaceable>.core</filename> -- <filename><replaceable>progname</replaceable></filename></userinput>\n"
"(lldb) target create \"<filename><replaceable>progname</replaceable></filename>\" --core \"<filename><replaceable>progname</replaceable></filename>.core\"\n"
"Core file '/home/pauamma/tmp/<filename><replaceable>progname</replaceable>.core</filename>' (x86_64) was loaded.\n"
"(lldb)"
msgstr ""
"<prompt>%</prompt> <userinput>lldb -c "
"<filename><replaceable>progname</replaceable>.core</filename> -- "
"<filename><replaceable>progname</replaceable></filename></userinput>\n"
"(lldb) target create \""
"<filename><replaceable>progname</replaceable></filename>\" --core \""
"<filename><replaceable>progname</replaceable></filename>.core\"\n"
"Core file '/home/pauamma/tmp/<filename><replaceable>progname</replaceable>."
"core</filename>' (x86_64) was loaded.\n"
"(lldb)"

#. (itstool) path: sect3/para
#: book.translate.xml:1972
msgid ""
"In this case, the program was called <filename><replaceable>progname</"
"replaceable></filename>, so the core file is called "
"<filename><replaceable>progname</replaceable>.core</filename>. The debugger "
"does not display why the program crashed or where. For this, use "
"<userinput>thread backtrace all</userinput>. This will also show how the "
"function where the program dumped core was called."
msgstr ""
"در این مورد، برنامه <filename><replaceable>progname</replaceable></filename> "
"نامیده شد، در نتیجه پروندهٔ حافظه "
"<filename><replaceable>progname</replaceable>.core</filename> نامیده می‌شود. "
"اشکال‌زدا علت یا جایی‌که برنامه در آن خراب شد را نشان نمی‌دهد. برای این "
"منظور، از <userinput>thread backtrace all</userinput> استفاده کنید. این "
"همچنین نشان می‌دهد چگونه تابعی که برنامه را روبرداری کرد فراخوانی شده است."

#. (itstool) path: sect3/screen
#: book.translate.xml:1982
#, no-wrap
msgid ""
"(lldb) <userinput>thread backtrace all</userinput>\n"
"* thread #1, name = '<filename><replaceable>progname</replaceable></filename>', stop reason = signal SIGSEGV\n"
"  * frame #0: 0x0000000000201347 <filename><replaceable>progname</replaceable></filename>`bazz(anint=5) at temp2.c:17:10\n"
"    frame #1: 0x0000000000201312 <filename><replaceable>progname</replaceable></filename>`main at temp2.c:10:2\n"
"    frame #2: 0x000000000020110f <filename><replaceable>progname</replaceable></filename>`_start(ap=&lt;unavailable&gt;, cleanup=&lt;unavailable&gt;) at crt1.c:76:7\n"
"(lldb)"
msgstr ""
"(lldb) <userinput>thread backtrace all</userinput>\n"
"* thread #1, name = '<filename><replaceable>progname</replaceable></"
"filename>', stop reason = signal SIGSEGV\n"
"  * frame #0: 0x0000000000201347 "
"<filename><replaceable>progname</replaceable></filename>`bazz(anint=5) at "
"temp2.c:17:10\n"
"    frame #1: 0x0000000000201312 "
"<filename><replaceable>progname</replaceable></filename>`main at temp2.c:10:"
"2\n"
"    frame #2: 0x000000000020110f <filename><replaceable>progname</replaceable"
"></filename>`_start(ap=&lt;unavailable&gt;, cleanup=&lt;unavailable&gt;) at "
"crt1.c:76:7\n"
"(lldb)"

#. (itstool) path: sect3/para
#: book.translate.xml:1989
msgid ""
"<literal>SIGSEGV</literal> indicates that the program tried to access memory "
"(run code or read/write data usually) at a location that does not belong to "
"it, but does not give any specifics. For that, look at the source code at "
"line 10 of file temp2.c, in <function>bazz()</function>. The backtrace also "
"says that in this case, <function>bazz()</function> was called from "
"<function>main()</function>."
msgstr ""
"<literal>SIGSEGV</literal> حاکی از آن است که برنامه سعی بر دسترسی به حافظه "
"(معمولاً اجرای کد یا خواندن/نوشتنِ داده) در مکانی که به آن تعلق ندارد را "
"داشته است، اما هیچ جزئیاتی ارائه نمی‌دهد. بدین منظور، به کد منبع در خط ۱۰ از "
"پروندهٔ temp2.c، در <function>bazz()</function> نگاه بیندازید. همچنین عقب‌"
"گرد به ما می‌گوید که در این مورد، تابع <function>bazz()</function> توسط "
"<function>main()</function> فراخوان شده است."

#. (itstool) path: sect3/title
#: book.translate.xml:2000
msgid "Attaching to a Running Program with lldb"
msgstr "پیوستن به برنامه‌ای در حال اجرا توسط lldb"

#. (itstool) path: sect3/para
#: book.translate.xml:2002
msgid ""
"One of the neatest features about <command>lldb</command> is that it can "
"attach to a program that is already running. Of course, that requires "
"sufficient permissions to do so. A common problem is stepping through a "
"program that forks and wanting to trace the child, but the debugger will "
"only trace the parent."
msgstr ""
"یکی از امکانات مهم دیگر در مورد <command>lldb</command> این است که می‌تواند "
"به برنامه‌ای از پیش در حال اجرا متصل شود. البته، این نیازمند دسترسی کافی "
"برای انجام است. یک مشکل متداول ورود به برنامه‌ای است که از انشعاب استفاده می‌"
"کند و فرزند را پیگیری می‌کند، اما اشکال‌زدا تنها فرآیند والد را دنبال می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:2010
msgid ""
"To do that, start up another <command>lldb</command>, use <command>ps</"
"command> to find the process ID for the child, and do"
msgstr ""
"برای انجام این کار، یک <command>lldb</command> دیگر اجرا کنید، از "
"<command>ps</command> برای پیدا کردن نشانی فرآیند فرزند استفاده کنید، و "
"بنویسید"

#. (itstool) path: sect3/screen
#: book.translate.xml:2014
#, no-wrap
msgid "(lldb) <userinput>process attach -p <replaceable>pid</replaceable></userinput>"
msgstr ""
"(lldb) <userinput>process attach -p "
"<replaceable>pid</replaceable></userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:2016
msgid "in <command>lldb</command>, and then debug as usual."
msgstr "در <command>lldb</command>، و سپس به‌طور معمول اشکال‌زدایی کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:2019 book.translate.xml:2267
msgid ""
"For that to work well, the code that calls <function>fork</function> to "
"create the child needs to do something like the following (courtesy of the "
"<command>gdb</command> info pages):"
msgstr ""
"برای اینکه به درستی عمل کند، کدی که از <function>fork</function> برای ایجاد "
"فرزند استفاده می‌کنم نیاز است کاری مانند زیر انجام دهد (با اجازه از صفحات "
"اطلاعات <command>gdb</command>):"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:2024 book.translate.xml:2272
#, no-wrap
msgid ""
"<lineannotation>…</lineannotation>\n"
"if ((pid = fork()) &lt; 0)\t\t/* _Always_ check this */\n"
"\terror();\n"
"else if (pid == 0) {\t\t/* child */\n"
"\tint PauseMode = 1;\n"
"\n"
"\twhile (PauseMode)\n"
"\t\tsleep(10);\t/* Wait until someone attaches to us */\n"
"\t<lineannotation>…</lineannotation>\n"
"} else {\t\t\t/* parent */\n"
"\t<lineannotation>…</lineannotation>"
msgstr ""
"<lineannotation>…</lineannotation>\n"
"if ((pid = fork()) &lt; 0)\t\t/* _Always_ check this */\n"
"\terror();\n"
"else if (pid == 0) {\t\t/* child */\n"
"\tint PauseMode = 1;\n"
"\n"
"\twhile (PauseMode)\n"
"\t\tsleep(10);\t/* Wait until someone attaches to us */\n"
"\t<lineannotation>…</lineannotation>\n"
"} else {\t\t\t/* parent */\n"
"\t<lineannotation>…</lineannotation>"

#. (itstool) path: sect3/para
#: book.translate.xml:2036
msgid ""
"Now all that is needed is to attach to the child, set <symbol>PauseMode</"
"symbol> to <literal>0</literal> with <userinput>expr PauseMode = 0</"
"userinput> and wait for the <function>sleep()</function> call to return."
msgstr ""
"حال تمام آنچه که لازم است الصاقِ فرزند است، <symbol>PauseMode</symbol> را از "
"طریق <userinput>expr PauseMode = 0</userinput> روی <literal>0</literal> قرار "
"دهید و منتظر بازگشت فراخوان <function>sleep()</function> باشید."

#. (itstool) path: sect2/title
#: book.translate.xml:2044
msgid "Using gdb"
msgstr "استفاده از gdb"

#. (itstool) path: sect3/title
#: book.translate.xml:2047
msgid "Starting gdb"
msgstr "اجرای gdb"

#. (itstool) path: sect3/para
#: book.translate.xml:2049
msgid "Start up gdb by typing"
msgstr "gdb را بدین شکل اجرا کنید"

#. (itstool) path: sect3/screen
#: book.translate.xml:2051
#, no-wrap
msgid "<prompt>%</prompt> <userinput>gdb <replaceable>progname</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>gdb "
"<replaceable>progname</replaceable></userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:2053
msgid ""
"although many people prefer to run it inside <application>Emacs</"
"application>. To do this, type:"
msgstr ""
"هر چند بسیاری ترجیح می‌دهند آن را داخل <application>Emacs</application> اجرا "
"کنند. برای انجام این کار، بنویسید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:2056
#, no-wrap
msgid "<userinput>M-x gdb RET <replaceable>progname</replaceable> RET</userinput>"
msgstr ""
"<userinput>M-x gdb RET <replaceable>progname</replaceable> RET</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:2058
msgid ""
"Finally, for those finding its text-based command-prompt style off-putting, "
"there is a graphical front-end for it (<package>devel/xxgdb</package>) in "
"the Ports Collection."
msgstr ""
"سرانجام، برای آنان که سبک خط فرمانیِ نسخه نوشتاری آن را ناخوش‌آیند می‌یابند، "
"جلوداری گرافیکی برای آن (به‌عنوان <package>devel/xxgdb</package>) در مجموعه "
"پورت‌ها وجود دارد."

#. (itstool) path: sect3/title
#: book.translate.xml:2066
msgid "Running a Program with gdb"
msgstr "اجرای برنامه‌ با gdb"

#. (itstool) path: sect3/para
#: book.translate.xml:2068
msgid ""
"Compile the program with <option>-g</option> to get the most out of using "
"<command>gdb</command>. It will work without, but will only display the name "
"of the function currently running, instead of the source code. A line like:"
msgstr ""
"برنامه را با <option>-g</option> همگردانی کنید تا بیشترین بهره را از "
"<command>gdb</command> ببرید. بدون این نیز کار می‌کند، اما به‌جای کد منبع "
"تنها نام توابع در حال اجرا را نمایش خواهد داد. سطری مانند:"

#. (itstool) path: sect3/screen
#: book.translate.xml:2074
#, no-wrap
msgid "… (no debugging symbols found) …"
msgstr "… (no debugging symbols found) …"

#. (itstool) path: sect3/para
#: book.translate.xml:2076
msgid ""
"when <command>gdb</command> starts up means that the program was not "
"compiled with <option>-g</option>."
msgstr ""
"هنگامی که <command>gdb</command> اجرا می‌شود به آن معنی است که برنامه به‌"
"همراه <option>-g</option> همگردانی نشده است."

#. (itstool) path: sect3/para
#: book.translate.xml:2079
msgid ""
"At the <command>gdb</command> prompt, type <userinput>break main</"
"userinput>. This will tell the debugger to skip the preliminary set-up code "
"in the program being run and to stop execution at the beginning of the "
"program's code. Now type <userinput>run</userinput> to start the program— it "
"will start at the beginning of the set-up code and then get stopped by the "
"debugger when it calls <function>main()</function>."
msgstr ""
"در پیام‌وارهٔ <command>gdb</command>، بنویسید <userinput>break main</"
"userinput>. این به اشکال‌زدا می‌گوید که از کد راه‌اندازیِ مقدماتیِ برنامهٔ "
"در حال اجرا جهش کند و در ابتدای کدِ برنامه اجرا را متوقف سازد. اکنون بنویسید "
"<userinput>run</userinput> تا برنامه اجرا شود - این در ابتدای کدِ راه‌اندازی "
"اجرا می‌شود و زمانی‌که <function>main()</function> را فراخوانی می‌کند به "
"واسطهٔ اشکال‌زدا متوقف می‌شود."

#. (itstool) path: sect3/para
#: book.translate.xml:2088
msgid ""
"To step through the program a line at a time, press <command>n</command>. "
"When at a function call, step into it by pressing <command>s</command>. Once "
"in a function call, return from it by pressing <command>f</command>, or use "
"<command>up</command> and <command>down</command> to take a quick look at "
"the caller."
msgstr ""
"برای آنکه به‌ازای هر خط وارد برنامه شوید، <command>n</command> را فشار دهید. "
"زمانی‌که در فراخوان تابع هستید، با فشردن <command>s</command> وارد آن شوید. "
"زمانی‌که وارد فراخوان تابع شدید، با فشردن <command>f</command> از آن خارج "
"شوید، یا از <command>up</command> و <command>down</command> استفاده کنید تا "
"نگاهی سریع به فراخوان داشته باشید."

#. (itstool) path: sect3/para
#: book.translate.xml:2095
msgid ""
"Here is a simple example of how to spot a mistake in a program with "
"<command>gdb</command>. This is our program (with a deliberate mistake):"
msgstr ""
"این نمونه‌ای برای انکشاف مشکل در یک برنامه توسط <command>gdb</command> است. "
"این برنامهٔ ماست (با ایرادی تعمدی):"

#. (itstool) path: sect3/screen
#: book.translate.xml:2123
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cc -g -o temp temp.c</userinput>\n"
"<prompt>%</prompt> <userinput>./temp</userinput>\n"
"This is my program\n"
"anint = 4231"
msgstr ""
"<prompt>%</prompt> <userinput>cc -g -o temp temp.c</userinput>\n"
"<prompt>%</prompt> <userinput>./temp</userinput>\n"
"This is my program\n"
"anint = 4231"

#. (itstool) path: sect3/para
#: book.translate.xml:2128
msgid "That was not what we expected! Time to see what is going on!"
msgstr ""
"این چیزی نبود که ما انتظارش را داشتیم! زمان آن است که ببینیم داستان چیست!"

#. (itstool) path: sect3/screen
#: book.translate.xml:2131
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>gdb temp</userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details.\n"
"GDB 4.13 (i386-unknown-freebsd), Copyright 1994 Free Software Foundation, Inc.\n"
"(gdb) <userinput>break main</userinput>\t\t\t\t<lineannotation>Skip the set-up code</lineannotation>\n"
"Breakpoint 1 at 0x160f: file temp.c, line 9.\t<lineannotation>gdb puts breakpoint at main()</lineannotation>\n"
"(gdb) <userinput>run</userinput>\t\t\t\t\t<lineannotation>Run as far as main()</lineannotation>\n"
"Starting program: /home/james/tmp/temp\t\t<lineannotation>Program starts running</lineannotation>\n"
"\n"
"Breakpoint 1, main () at temp.c:9\t\t<lineannotation>gdb stops at main()</lineannotation>\n"
"(gdb) <userinput>n</userinput>\t\t\t\t\t\t<lineannotation>Go to next line</lineannotation>\n"
"This is my program\t\t\t\t<lineannotation>Program prints out</lineannotation>\n"
"(gdb) <userinput>s</userinput>\t\t\t\t\t\t<lineannotation>step into bazz()</lineannotation>\n"
"bazz (anint=4231) at temp.c:17\t\t\t<lineannotation>gdb displays stack frame</lineannotation>\n"
"(gdb)"
msgstr ""
"<prompt>%</prompt> <userinput>gdb temp</userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details."
"\n"
"GDB 4.13 (i386-unknown-freebsd), Copyright 1994 Free Software Foundation, "
"Inc.\n"
"(gdb) <userinput>break main</userinput>\t\t\t\t<lineannotation>Skip the set-"
"up code</lineannotation>\n"
"Breakpoint 1 at 0x160f: file temp.c, line 9.\t<lineannotation>gdb puts "
"breakpoint at main()</lineannotation>\n"
"(gdb) <userinput>run</userinput>\t\t\t\t\t<lineannotation>Run as far as "
"main()</lineannotation>\n"
"Starting program: /home/james/tmp/temp\t\t<lineannotation>Program starts "
"running</lineannotation>\n"
"\n"
"Breakpoint 1, main () at temp.c:9\t\t<lineannotation>gdb stops at "
"main()</lineannotation>\n"
"(gdb) <userinput>n</userinput>\t\t\t\t\t\t<lineannotation>Go to next "
"line</lineannotation>\n"
"This is my program\t\t\t\t<lineannotation>Program prints out</lineannotation>"
"\n"
"(gdb) <userinput>s</userinput>\t\t\t\t\t\t<lineannotation>step into "
"bazz()</lineannotation>\n"
"bazz (anint=4231) at temp.c:17\t\t\t<lineannotation>gdb displays stack "
"frame</lineannotation>\n"
"(gdb)"

#. (itstool) path: sect3/para
#: book.translate.xml:2148
msgid ""
"Hang on a minute! How did <symbol>anint</symbol> get to be <literal>4231</"
"literal>? Was it not set to <literal>5</literal> in <function>main()</"
"function>? Let us move up to <function>main()</function> and have a look."
msgstr ""
"یک دقیقه صبر کنید! <symbol>anint</symbol> چگونه به مقدار <literal>4231</"
"literal> رسید؟ آیا در تابع <function>main()</function> روی <literal>5</"
"literal> قرار نگرفته بود؟ بیایید نگاهی به تابع <function>main()</function> "
"بیندازیم."

#. (itstool) path: sect3/screen
#: book.translate.xml:2153
#, no-wrap
msgid ""
"(gdb) <userinput>up</userinput>\t\t\t\t\t<lineannotation>Move up call stack</lineannotation>\n"
"#1  0x1625 in main () at temp.c:11\t\t<lineannotation>gdb displays stack frame</lineannotation>\n"
"(gdb) <userinput>p i</userinput>\t\t\t\t\t<lineannotation>Show us the value of i</lineannotation>\n"
"$1 = 4231\t\t\t\t\t<lineannotation>gdb displays 4231</lineannotation>"
msgstr ""
"(gdb) <userinput>up</userinput>\t\t\t\t\t<lineannotation>Move up call "
"stack</lineannotation>\n"
"#1  0x1625 in main () at temp.c:11\t\t<lineannotation>gdb displays stack "
"frame</lineannotation>\n"
"(gdb) <userinput>p i</userinput>\t\t\t\t\t<lineannotation>Show us the value "
"of i</lineannotation>\n"
"$1 = 4231\t\t\t\t\t<lineannotation>gdb displays 4231</lineannotation>"

#. (itstool) path: sect3/para
#: book.translate.xml:2169
msgid ""
"but we left the <literal>i=5;</literal> line out. As we did not initialize "
"<symbol>i</symbol>, it had whatever number happened to be in that area of "
"memory when the program ran, which in this case happened to be "
"<literal>4231</literal>."
msgstr ""
"اما خط <literal>i=5;</literal> را جا انداختیم. از آنجا که <symbol>i</symbol> "
"را مقداردهی نکردیم، عددی احتمالی در آن فضا از حافظه را به‌هنگام اجرا به خود "
"گرفت، که در این مورد <literal>4231</literal> بود."

#. (itstool) path: note/para
#: book.translate.xml:2176
msgid ""
"The <command>gdb</command> command displays the stack frame every time we go "
"into or out of a function, even if we are using <command>up</command> and "
"<command>down</command> to move around the call stack. This shows the name "
"of the function and the values of its arguments, which helps us keep track "
"of where we are and what is going on. (The stack is a storage area where the "
"program stores information about the arguments passed to functions and where "
"to go when it returns from a function call.)"
msgstr ""
"دستور <command>gdb</command> چارچوب پشته را هر زمان که به داخل یا بیرون از "
"یک تابع می‌رویم نمایش می‌دهد، حتی اگر داریم از <command>up</command> و "
"<command>down</command> برای حرکت پیرامون پشتهٔ فراخوان استفاده می‌کنیم. این "
"نام تابع و مقدار براهین آن را نشان می‌دهد، که این امر به ما کمک می‌کند تا "
"جایی که هستیم و اتفاقی که دارد می‌افتد را دنبال کنیم. (پشته یک فضای ذخیره‌"
"سازی است که برنامه اطلاعات مربوط به براهین منتقل شده به توابع و جایی که بعد "
"از اجرای یک تابع باید برود را ذخیره می‌کند.)"

#. (itstool) path: sect3/title
#: book.translate.xml:2189
msgid "Examining a Core File with gdb"
msgstr "بررسی پروندهٔ حافظه توسط gdb"

#. (itstool) path: sect3/para
#: book.translate.xml:2201
msgid ""
"To examine a core file, start up <command>gdb</command> in the usual way. "
"Instead of typing <command>break</command> or <command>run</command>, type"
msgstr ""
"برای بررسی یک پروندهٔ حافظه، <command>gdb</command> را به‌طور معمول اجرا "
"کنید. به جای نوشتن <command>break</command> یا <command>run</command>، "
"بنویسید"

#. (itstool) path: sect3/screen
#: book.translate.xml:2205
#, no-wrap
msgid "(gdb) <userinput>core <replaceable>progname</replaceable>.core</userinput>"
msgstr ""
"(gdb) <userinput>core <replaceable>progname</replaceable>.core</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:2207
msgid ""
"If the core file is not in the current directory, type <userinput>dir /path/"
"to/core/file</userinput> first."
msgstr ""
"اگر پروندهٔ حافظه در مسیر جاری نیست، ابتدا بنویسید <userinput>dir /path/to/"
"core/file</userinput>."

#. (itstool) path: sect3/para
#: book.translate.xml:2210
msgid "The debugger should display something like this:"
msgstr "اشکال‌زدا باید چیزی شبیه به این را نمایش دهد:"

#. (itstool) path: sect3/screen
#: book.translate.xml:2212
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>gdb <filename><replaceable>progname</replaceable></filename></userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details.\n"
"GDB 4.13 (i386-unknown-freebsd), Copyright 1994 Free Software Foundation, Inc.\n"
"(gdb) <userinput>core <filename><replaceable>progname</replaceable>.core</filename></userinput>\n"
"Core was generated by `<filename><replaceable>progname</replaceable></filename>'.\n"
"Program terminated with signal 11, Segmentation fault.\n"
"Cannot access memory at address 0x7020796d.\n"
"#0  0x164a in bazz (anint=0x5) at temp.c:17\n"
"(gdb)"
msgstr ""
"<prompt>%</prompt> <userinput>gdb "
"<filename><replaceable>progname</replaceable></filename></userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details."
"\n"
"GDB 4.13 (i386-unknown-freebsd), Copyright 1994 Free Software Foundation, "
"Inc.\n"
"(gdb) <userinput>core <filename><replaceable>progname</replaceable>."
"core</filename></userinput>\n"
"Core was generated by "
"`<filename><replaceable>progname</replaceable></filename>'.\n"
"Program terminated with signal 11, Segmentation fault.\n"
"Cannot access memory at address 0x7020796d.\n"
"#0  0x164a in bazz (anint=0x5) at temp.c:17\n"
"(gdb)"

#. (itstool) path: sect3/para
#: book.translate.xml:2224
msgid ""
"In this case, the program was called <filename><replaceable>progname</"
"replaceable></filename>, so the core file is called "
"<filename><replaceable>progname</replaceable>.core</filename>. We can see "
"that the program crashed due to trying to access an area in memory that was "
"not available to it in a function called <function>bazz</function>."
msgstr ""
"در این مورد، برنامه <filename><replaceable>progname</replaceable></filename> "
"نام داشت، پس پروندهٔ حافظه <filename><replaceable>progname</replaceable>."
"core</filename> نام دارد. می‌توانیم ببینیم که برنامه به این خاطر شکست خورد "
"که در تابعی به نام <function>bazz</function> تلاش به دسترسی به فضایی از "
"حافظه داشت که برای آن قابل دسترس نبود."

#. (itstool) path: sect3/para
#: book.translate.xml:2232
msgid ""
"Sometimes it is useful to be able to see how a function was called, as the "
"problem could have occurred a long way up the call stack in a complex "
"program. <command>bt</command> causes <command>gdb</command> to print out a "
"back-trace of the call stack:"
msgstr ""
"گاهی اوقات اینکه بتوان چگونگی فراخوانی یک تابع را دید مفید است، زیرا ممکن "
"است مشکل در پشتهٔ فراخوانِ یک برنامهٔ پیچیده رخ داده باشد. <command>bt</"
"command> باعث می‌شود تا <command>gdb</command> عقب‌گردِ پشتهٔ فراخوان را چاپ "
"کند:"

#. (itstool) path: sect3/screen
#: book.translate.xml:2238
#, no-wrap
msgid ""
"(gdb) <userinput>bt</userinput>\n"
"#0  0x164a in bazz (anint=0x5) at temp.c:17\n"
"#1  0xefbfd888 in end ()\n"
"#2  0x162c in main () at temp.c:11\n"
"(gdb)"
msgstr ""
"(gdb) <userinput>bt</userinput>\n"
"#0  0x164a in bazz (anint=0x5) at temp.c:17\n"
"#1  0xefbfd888 in end ()\n"
"#2  0x162c in main () at temp.c:11\n"
"(gdb)"

#. (itstool) path: sect3/para
#: book.translate.xml:2244
msgid ""
"The <function>end()</function> function is called when a program crashes; in "
"this case, the <function>bazz()</function> function was called from "
"<function>main()</function>."
msgstr ""
"تابع <function>end()</function> زمانی‌که یک برنامه خراب شود، فراخوان می‌شود؛ "
"در این مورد، تابع <function>bazz()</function> توسط <function>main()</"
"function> فراخوانی شد."

#. (itstool) path: sect3/title
#: book.translate.xml:2250
msgid "Attaching to a Running Program with gdb"
msgstr "پیوستن به برنامه‌ای در حال اجرا توسط gdb"

#. (itstool) path: sect3/para
#: book.translate.xml:2252
msgid ""
"One of the neatest features about <command>gdb</command> is that it can "
"attach to a program that is already running. Of course, that requires "
"sufficient permissions to do so. A common problem is stepping through a "
"program that forks and wanting to trace the child, but the debugger will "
"only trace the parent."
msgstr ""
"یکی از امکانات مهم دیگر در مورد <command>gdb</command> این است که می‌تواند "
"به برنامه‌ای از پیش در حال اجرا متصل شود. البته، این نیازمند دسترسی کافی "
"برای انجام است. یک مشکل متداول ورود به برنامه‌ای است که از انشعاب استفاده می‌"
"کند و فرزند را پیگیری می‌کند، اما اشکال‌زدا تنها فرآیند والد را دنبال می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:2259
msgid ""
"To do that, start up another <command>gdb</command>, use <command>ps</"
"command> to find the process ID for the child, and do"
msgstr ""
"برای انجام این کار، یک <command>gdb</command> دیگر اجرا کنید، از "
"<command>ps</command> برای پیدا کردن نشانی فرآیند فرزند استفاده کنید، و "
"بنویسید"

#. (itstool) path: sect3/screen
#: book.translate.xml:2263
#, no-wrap
msgid "(gdb) <userinput>attach <replaceable>pid</replaceable></userinput>"
msgstr "(gdb) <userinput>attach <replaceable>pid</replaceable></userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:2265
msgid "in <command>gdb</command>, and then debug as usual."
msgstr "در <command>gdb</command>، و سپس به‌طور معمول اشکال‌زدایی کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:2284
msgid ""
"Now all that is needed is to attach to the child, set <symbol>PauseMode</"
"symbol> to <literal>0</literal>, and wait for the <function>sleep()</"
"function> call to return!"
msgstr ""
"حال تمام آنچه که لازم است الصاق به فرزند است، <symbol>PauseMode</symbol> را "
"روی <literal>0</literal> تنظیم کنید، و منتظر فراخوانِ <function>sleep()</"
"function> بمانید تا بازگردد!"

#. (itstool) path: sect1/title
#: book.translate.xml:2292
msgid "Using Emacs as a Development Environment"
msgstr "استفاده از Emacs به‌عنوان یک محیط توسعه"

#. (itstool) path: sect2/title
#: book.translate.xml:2295
msgid "Emacs"
msgstr "Emacs"

#. (itstool) path: sect2/para
#: book.translate.xml:2297
msgid ""
"Emacs is a highly customizable editor—indeed, it has been customized to the "
"point where it is more like an operating system than an editor! Many "
"developers and sysadmins do in fact spend practically all their time working "
"inside Emacs, leaving it only to log out."
msgstr ""
"Emacs یک ویرایشگر شدیداً قابل تنظیم است - در واقع، بیشتر به‌عنوان یک سامانهٔ "
"عامل تنظیم شده است تا یک ویرایشگر. در حقیقت بسیاری از توسعه‌دهندگان و مدیران "
"سامانه تمام وقتشان را داخل Emacs کار می‌کنند و تنها برای خروج آن را ترک "
"می‌کنند."

#. (itstool) path: sect2/para
#: book.translate.xml:2304
msgid ""
"It is impossible even to summarize everything Emacs can do here, but here "
"are some of the features of interest to developers:"
msgstr ""
"حتی در اینجا خلاصه کردن تمام کارهایی که Emacs می‌تواند انجام دهد غیر ممکن "
"است، اما اینجا برخی از امکانات مورد علاقه توسعه‌دهندگان را می‌بینیم:"

#. (itstool) path: listitem/para
#: book.translate.xml:2310
msgid ""
"Very powerful editor, allowing search-and-replace on both strings and "
"regular expressions (patterns), jumping to start/end of block expression, "
"etc, etc."
msgstr ""
"ویرایشگری بسیار قدرتمند، که به شما اجازهٔ جست و جو و تعویض با هر دو رشته و "
"عبارات باقاعده (الگوها)، پرش به آغاز/پایان عبارت قطعه (بلوک)، و غیره را "
"می‌دهد."

#. (itstool) path: listitem/para
#: book.translate.xml:2316
msgid "Pull-down menus and online help."
msgstr "دریافت فهرست‌ها و کمک برخط."

#. (itstool) path: listitem/para
#: book.translate.xml:2320
msgid "Language-dependent syntax highlighting and indentation."
msgstr "مشخص‌سازی قواعد نحوی و فاصله‌گذازی وابسته به زبان."

#. (itstool) path: listitem/para
#: book.translate.xml:2325
msgid "Completely customizable."
msgstr "کاملاً قابل تنظیم."

#. (itstool) path: listitem/para
#: book.translate.xml:2329
msgid "You can compile and debug programs within Emacs."
msgstr "شما می‌توانید در Emacs برنامه‌ها را همگردانی و اشکال‌زدایی کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:2334
msgid ""
"On a compilation error, you can jump to the offending line of source code."
msgstr "به‌هنگام یک خطای همگردانی، می‌توانید به سطر مخرب در کد منبع بروید."

#. (itstool) path: listitem/para
#: book.translate.xml:2339
msgid ""
"Friendly-ish front-end to the <command>info</command> program used for "
"reading GNU hypertext documentation, including the documentation on Emacs "
"itself."
msgstr ""
"جلودار دوستانه‌ای به برنامهٔ <command>info</command> برای مطالعهٔ مستندات "
"ابرمتن GNU، از جمله مستندات خود Emacs."

#. (itstool) path: listitem/para
#: book.translate.xml:2345
msgid ""
"Friendly front-end to <command>gdb</command>, allowing you to look at the "
"source code as you step through your program."
msgstr ""
"جلودار دوستانه‌ای به برنامهٔ <command>gdb</command>، که به شما اجازه می‌دهد "
"کد منبع را به‌هنگام ورود به برنامه ببینید."

#. (itstool) path: sect2/para
#: book.translate.xml:2351
msgid "And doubtless many more that have been overlooked."
msgstr "و بی‌شک بسیاری دیگر که اشاره نشد."

#. (itstool) path: sect2/para
#: book.translate.xml:2353
msgid ""
"Emacs can be installed on FreeBSD using the <package>editors/emacs</package> "
"port."
msgstr ""
"Emacs می‌تواند بر روی FreeBSD از طریق پورت <package>editors/emacs</package> "
"نصب شود."

#. (itstool) path: sect2/para
#: book.translate.xml:2357
msgid ""
"Once it is installed, start it up and do <literal>C-h t</literal> to read an "
"Emacs tutorial—that means hold down <keycap>control</keycap>, press "
"<keycap>h</keycap>, let go of <keycap>control</keycap>, and then press "
"<keycap>t</keycap>. (Alternatively, you can use the mouse to select "
"<guimenuitem>Emacs Tutorial</guimenuitem> from the <guimenu>Help</guimenu> "
"menu.)"
msgstr ""
"هنگامی‌که نصب شد، آن را اجرا کنید و به‌منظور مطالعهٔ آموزه‌ای از آن، "
"<literal>C-h t2</literal> را بزنید—یعنی <keycap>control</keycap> را نگه "
"دارید، <keycap>h</keycap> را فشار دهید، <keycap>control</keycap> را رها کنید،"
" و سپس <keycap>t</keycap> را فشار دهید. (همچنین، می‌توانید با موشواره گزینهٔ "
"<guimenuitem>Emacs Tutorial</guimenuitem> را از فهرست <guimenu>Help</"
"guimenu> انتخاب کنید.)"

#. (itstool) path: sect2/para
#: book.translate.xml:2365
msgid ""
"Although Emacs does have menus, it is well worth learning the key bindings, "
"as it is much quicker when you are editing something to press a couple of "
"keys than to try to find the mouse and then click on the right place. And, "
"when you are talking to seasoned Emacs users, you will find they often "
"casually throw around expressions like <quote><literal>M-x replace-s RET foo "
"RET bar RET</literal></quote> so it is useful to know what they mean. And in "
"any case, Emacs has far too many useful functions for them to all fit on the "
"menu bars."
msgstr ""
"گرچه Emacs دارای فهرست انتخاب هست، اما یادگیری کلید‌های ترکیبی بسیار ارزشمند "
"است، زیرا فشردن چند کلید در هنگام ویرایش بسیار سریع‌تر از تلاش برای یافتن "
"موشواره و سپس تلیک بر روی مکان درست است. و، هنگامی‌که در حال صحبت با کاربران "
"باتجربهٔ Emacs هستید، شما متوجه می‌شوید که آنها اغلب جملاتی چون "
"<quote><literal>M-x replace-s RET foo RET bar RET</literal></quote> را به‌"
"کار می‌برند، از این رو فهمیدن منظور آنها بسیار مفید خواهد بود. و در هر حال، "
"Emacs کارکردهای فراوانی دارد که نمی‌توان همهٔ آنها را در فهرست جای داد."

#. (itstool) path: sect2/para
#: book.translate.xml:2376
msgid ""
"Fortunately, it is quite easy to pick up the key-bindings, as they are "
"displayed next to the menu item. My advice is to use the menu item for, say, "
"opening a file until you understand how it works and feel confident with it, "
"then try doing C-x C-f. When you are happy with that, move on to another "
"menu command."
msgstr ""
"خوشبختانه، استفاده از ترکیب کلیدها بسیار ساده است، چنانکه در کنار فهرست اجزا "
"نشان داده شده‌اند. پیشنهاد من به استفادهٔ فهرست اجزا است، بر فرض، برای باز "
"کردن یک پرونده تا نحوه کارکردش را به درستی درک کنید و با آن احساس راحتی کنید،"
" سپس C-x C-f را امتحان کنید. زمانی که راضی بودید، بروید به دستور دیگری از "
"فهرست."

#. (itstool) path: sect2/para
#: book.translate.xml:2383
msgid ""
"If you cannot remember what a particular combination of keys does, select "
"<guimenuitem>Describe Key</guimenuitem> from the <guimenu>Help</guimenu> "
"menu and type it in—Emacs will tell you what it does. You can also use the "
"<guimenuitem>Command Apropos</guimenuitem> menu item to find out all the "
"commands which contain a particular word in them, with the key binding next "
"to it."
msgstr ""
"اگر به یاد نمی‌آورید که ترکیب خاصی از کلیدها چه انجام می‌دهد، "
"<guimenuitem>Describe Key</guimenuitem> را از فهرست <guimenu>Help</guimenu> "
"انتخاب کنید و آن را بنویسید - Emacs کاربرد آن را به شما می‌گوید. همچنین می‌"
"توانید از فهرست <guimenuitem>Command Apropos</guimenuitem> تمام دستوراتی که "
"دارای واژه‌ای خاص هستند را به‌همراه ترکیب کلید مربوط به آنها در کنارش پیدا "
"کنید."

#. (itstool) path: sect2/para
#: book.translate.xml:2391
msgid ""
"By the way, the expression above means hold down the <keysym>Meta</keysym> "
"key, press <keysym>x</keysym>, release the <keysym>Meta</keysym> key, type "
"<userinput>replace-s</userinput> (short for <literal>replace-string</literal>"
"—another feature of Emacs is that you can abbreviate commands), press the "
"<keysym>return</keysym> key, type <userinput>foo</userinput> (the string you "
"want replaced), press the <keysym>return</keysym> key, type bar (the string "
"you want to replace <literal>foo</literal> with) and press <keysym>return</"
"keysym> again. Emacs will then do the search-and-replace operation you have "
"just requested."
msgstr ""
"به هر حال، منظور از جملهٔ بالا این است که کلید <keysym>Meta</keysym> را نگه "
"دارید، <keysym>x</keysym> را فشار دهید، کلید <keysym>Meta</keysym> را رها "
"کنید، وارد کنید <userinput>replace-s</userinput> (کوتاه‌شدهٔ <literal"
">replace-string</literal>—از دیگر امکانات Emacs کوتاه‌کردن دستورات است)، "
"کلید <keysym>return</keysym> را فشار دهید، وارد کنید <userinput>foo</"
"userinput> (رشته‌ای را که می‌خواهید جایگزین کنید)، کلید <keysym>return</"
"keysym> را فشار دهید، بنویسید bar (رشته‌ای که می‌خواهید <literal>foo</"
"literal> را با آن جایگزین کنید) و دوباره <keysym>return</keysym> را فشار "
"دهید. سپس Emacs عملیات جست‌و‌جو و جایگزین را که شما درخواست کرده‌اید انجام "
"می‌دهد."

#. (itstool) path: sect2/para
#: book.translate.xml:2404
msgid ""
"If you are wondering what on earth <keysym>Meta</keysym> is, it is a special "
"key that many <trademark class=\"registered\">UNIX</trademark> workstations "
"have. Unfortunately, PC's do not have one, so it is usually <keycap>alt</"
"keycap> (or if you are unlucky, the <keysym>escape</keysym> key)."
msgstr ""
"اگر تعجب کرده‌اید که <keysym>Meta</keysym> چیست، این یک کلید ویژه است که "
"بسیاری از ایستگاه‌کارهای <trademark class=\"registered\">UNIX</trademark> آن "
"را دارند. متأسفانه، رایانه‌های شخصی فاقد این کلید هستند، از این رو معمولاً "
"کلید <keycap>alt</keycap> (یا اگر بدشانس باشید، کلید <keysym>escape</keysym>)"
" معادل آن هست."

#. (itstool) path: sect2/para
#: book.translate.xml:2410
msgid ""
"Oh, and to get out of Emacs, do <command>C-x C-c</command> (that means hold "
"down the <keysym>control</keysym> key, press <keysym>x</keysym>, press "
"<keysym>c</keysym> and release the <keysym>control</keysym> key). If you "
"have any unsaved files open, Emacs will ask you if you want to save them. "
"(Ignore the bit in the documentation where it says <command>C-z</command> is "
"the usual way to leave Emacs—that leaves Emacs hanging around in the "
"background, and is only really useful if you are on a system which does not "
"have virtual terminals)."
msgstr ""
"اوه، و برای خروج از Emacs، بزنید <command>C-x C-c</command> (یعنی کلید "
"<keysym>control</keysym> را نگه دارید، <keysym>x</keysym> را فشار دهید، "
"<keysym>c</keysym> را فشار دهید و در نهایت کلید <keysym>control</keysym> را "
"رها کنید). اگر پروندهٔ باز و ذخیره‌نشده دارید، Emacs جهت ذخیرهٔ آنها از شما "
"خواهد پرسید. (آن بخش از مستندات که ذکر کرده است <command>C-z</command> روش "
"معمول برای خروج از Emacs است را نادیده بگیرید—این کار Emacs را در پس‌زمینه "
"نگه می‌دارد، و تنها زمانی‌که شما بر روی سامانه‌ای فاقد پایانه‌های مجازی "
"هستید کاربرد خواهد داشت)."

#. (itstool) path: sect2/title
#: book.translate.xml:2423
msgid "Configuring Emacs"
msgstr "پیکربندی Emacs"

#. (itstool) path: sect2/para
#: book.translate.xml:2425
msgid ""
"Emacs does many wonderful things; some of them are built in, some of them "
"need to be configured."
msgstr ""
"Emacs کارهای فوق‌العادهٔ بسیاری انجام می‌دهد؛ برخی ذاتی هستند، و برخی "
"نیازمند پیکربندی."

#. (itstool) path: sect2/para
#: book.translate.xml:2428
msgid ""
"Instead of using a proprietary macro language for configuration, Emacs uses "
"a version of Lisp specially adapted for editors, known as Emacs Lisp. "
"Working with Emacs Lisp can be quite helpful if you want to go on and learn "
"something like Common Lisp. Emacs Lisp has many features of Common Lisp, "
"although it is considerably smaller (and thus easier to master)."
msgstr ""
"به‌جای استفاده از یک زبان ماکروی اختصاصی برای پیکربندی، Emacs از نسخهٔ "
"مخصوصاً سازگار شده‌ای از Lisp برای ویرایشگرها، به نام Emacs Lisp استفاده می‌"
"کند. کار با Emacs Lisp می‌تواند بسیار مفید باشد اگر شما می‌خواهید چیزی مانند "
"Common Lisp را یاد بگیرید. Emacs Lisp بسیاری از امکانات Common Lisp را دارد، "
"گرچه در مقیاس بسیار کوچکتر (و در نتیجه تسلط آسان‌تر)."

#. (itstool) path: sect2/para
#: book.translate.xml:2436
msgid ""
"The best way to learn Emacs Lisp is to download the <link xlink:href=\"ftp://"
"ftp.gnu.org/old-gnu/emacs/elisp-manual-19-2.4.tar.gz\">Emacs Tutorial</link>"
msgstr ""
"بهترین راه برای یادگیری Emacs Lisp دریافت <link xlink:href=\"ftp://ftp.gnu."
"org/old-gnu/emacs/elisp-manual-19-2.4.tar.gz\">آموزش Emacs</link> است"

#. (itstool) path: sect2/para
#: book.translate.xml:2439
msgid ""
"However, there is no need to actually know any Lisp to get started with "
"configuring Emacs, as I have included a sample <filename>.emacs</filename>, "
"which should be enough to get you started. Just copy it into your home "
"directory and restart Emacs if it is already running; it will read the "
"commands from the file and (hopefully) give you a useful basic setup."
msgstr ""
"گرچه، هیچ نیازی به دانستن Lisp برای پیکربندی Emacs نیست، چنانکه یک <filename>"
".emacs</filename> ساده ضمیمه شده است، و برای شروع باید کافی باشد. تنها "
"کافیست آن را در مسیر خانهٔ خود کپی کنید و Emacs را اگر در حال اجرا است، مجدد "
"راه‌اندازی کنید؛ Emacs دستورات را از روی پرونده می‌خواند و (امیدوارانه) به "
"شما تنظیماتی کاربردی و ابتدایی می‌دهد."

#. (itstool) path: sect2/title
#. (itstool) path: example/title
#: book.translate.xml:2448 book.translate.xml:2516
msgid "A Sample <filename>.emacs</filename>"
msgstr "یک نمونهٔ <filename>.emacs</filename>"

#. (itstool) path: sect2/para
#: book.translate.xml:2450
msgid ""
"Unfortunately, there is far too much here to explain it in detail; however "
"there are one or two points worth mentioning."
msgstr ""
"متأسفانه، موارد زیادی برای توضیح جزئیات وجود دارد؛ با این حال چند نکته قابل "
"ذکر است."

#. (itstool) path: listitem/para
#: book.translate.xml:2456
msgid ""
"Everything beginning with a <literal>;</literal> is a comment and is ignored "
"by Emacs."
msgstr ""
"هر چه که با <literal>;</literal> شروع شود یک یادداشت است و توسط Emacs نادیده "
"گرفته می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:2461
msgid ""
"In the first line, the <literal>-*- Emacs-Lisp -*-</literal> is so that we "
"can edit <filename>.emacs</filename> itself within Emacs and get all the "
"fancy features for editing Emacs Lisp. Emacs usually tries to guess this "
"based on the filename, and may not get it right for <filename>.emacs</"
"filename>."
msgstr ""
"در اولین خط، <literal>-*- Emacs-Lisp -*-</literal> هست تا ما بتوانیم خود "
"<filename>.emacs</filename> را داخل Emacs ویرایش کنیم و تمام امکانات پر زرق "
"و برق برای ویرایش Emacs Lisp را دریافت کنیم. به‌طور معمول Emacs سعی می‌کند "
"تا این را بر اساس نام پرونده حدس بزند، و این احتمال هست که در مورد <filename>"
".emacs</filename> دچار خطا شود."

#. (itstool) path: listitem/para
#: book.translate.xml:2471
msgid ""
"The <keysym>tab</keysym> key is bound to an indentation function in some "
"modes, so when you press the tab key, it will indent the current line of "
"code. If you want to put a <token>tab</token> character in whatever you are "
"writing, hold the <keysym>control</keysym> key down while you are pressing "
"the <keysym>tab</keysym> key."
msgstr ""
"کلید <keysym>tab</keysym> مقید به نوعی عملکرد ایجاد فرورفتگی در برخی حالات "
"است، در نتیجه زمانی‌که شما کلید tab را فشار می‌دهید، آن خط جاری از کد را فرو‌"
" می‌برد. اگر قصد دارید تا یک نویسهٔ <token>tab</token> را در هر متنی که در "
"حال نوشتنش هستید قرار دهید، زمانی‌که دارید کلید <keysym>tab</keysym> را فشار "
"می‌دهید، کلید <keysym>control</keysym> را نگه دارید."

#. (itstool) path: listitem/para
#: book.translate.xml:2481
msgid ""
"This file supports syntax highlighting for C, C++, Perl, Lisp and Scheme, by "
"guessing the language from the filename."
msgstr ""
"این پرونده از تشخیص قواعد نحوی برای C، C++، Perl، Lisp و Scheme، با حدس از "
"روی نام پرونده، پشتیبانی می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:2487
msgid ""
"Emacs already has a pre-defined function called <function>next-error</"
"function>. In a compilation output window, this allows you to move from one "
"compilation error to the next by doing <command>M-n</command>; we define a "
"complementary function, <function>previous-error</function>, that allows you "
"to go to a previous error by doing <command>M-p</command>. The nicest "
"feature of all is that <command>C-c C-c</command> will open up the source "
"file in which the error occurred and jump to the appropriate line."
msgstr ""
"Emacs به‌طور پیش تعریف شده تابعی به نام <function>next-error</function> "
"دارد. در یک پنجرهٔ خروجی همگردانی، این به شما اجازه می‌دهد تا با وارد کردن "
"<command>M-n</command> از یک خطای همگردانی به خطای دیگر بروید؛ ما یک تابع "
"مکمل را تعریف می‌کنیم، <function>previous-error</function>، که به شما این "
"امکان را می‌دهد تا با وارد کردن <command>M-p</command> به خطای پیشین بروید. "
"بهترین ویژگی این است که <command>C-c C-c</command> پروندهٔ منبعی که خطا در "
"آن رخ داده است را باز می‌کند و مستقیم سراغ خط مربوطه می‌رود."

#. (itstool) path: listitem/para
#: book.translate.xml:2500
msgid ""
"We enable Emacs's ability to act as a server, so that if you are doing "
"something outside Emacs and you want to edit a file, you can just type in"
msgstr ""
"ما قابلیت Emacs برای عمل کردن به عنوان یک کارساز را فعال می‌کنیم، پس اگر "
"بیرون Emacs کاری انجام می‌دهدید و می‌خواهید پرونده‌ای را ویرایش کنید، می‌"
"توانید تنها بنویسید"

#. (itstool) path: listitem/screen
#: book.translate.xml:2504
#, no-wrap
msgid "<prompt>%</prompt> <userinput>emacsclient <replaceable>filename</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>emacsclient "
"<replaceable>filename</replaceable></userinput>"

#. (itstool) path: footnote/para
#: book.translate.xml:2507
msgid ""
"Many Emacs users set their <envar>EDITOR</envar> environment to "
"<literal>emacsclient</literal> so this happens every time they need to edit "
"a file."
msgstr ""
"بسیاری از کاربران Emacs متغیر محیطی <envar>EDITOR</envar> را برابر با "
"<literal>emacsclient</literal> قرار می‌دهند که هر زمان نیاز به ویرایش یک "
"پرونده دارند این اتفاق بیفتد."

#. (itstool) path: listitem/para
#: book.translate.xml:2506
msgid "and then you can edit the file in your Emacs!<_:footnote-1/>"
msgstr "و سپس می‌توانید پرونده را در Emacs خود ویرایش کنید!<_:footnote-1/>"

#. (itstool) path: example/programlisting
#: book.translate.xml:2518
#, no-wrap
msgid ""
";; -*-Emacs-Lisp-*-\n"
"\n"
";; This file is designed to be re-evaled; use the variable first-time\n"
";; to avoid any problems with this.\n"
"(defvar first-time t\n"
"  \"Flag signifying this is the first time that .emacs has been evaled\")\n"
"\n"
";; Meta\n"
"(global-set-key \"\\M- \" 'set-mark-command)\n"
"(global-set-key \"\\M-\\C-h\" 'backward-kill-word)\n"
"(global-set-key \"\\M-\\C-r\" 'query-replace)\n"
"(global-set-key \"\\M-r\" 'replace-string)\n"
"(global-set-key \"\\M-g\" 'goto-line)\n"
"(global-set-key \"\\M-h\" 'help-command)\n"
"\n"
";; Function keys\n"
"(global-set-key [f1] 'manual-entry)\n"
"(global-set-key [f2] 'info)\n"
"(global-set-key [f3] 'repeat-complex-command)\n"
"(global-set-key [f4] 'advertised-undo)\n"
"(global-set-key [f5] 'eval-current-buffer)\n"
"(global-set-key [f6] 'buffer-menu)\n"
"(global-set-key [f7] 'other-window)\n"
"(global-set-key [f8] 'find-file)\n"
"(global-set-key [f9] 'save-buffer)\n"
"(global-set-key [f10] 'next-error)\n"
"(global-set-key [f11] 'compile)\n"
"(global-set-key [f12] 'grep)\n"
"(global-set-key [C-f1] 'compile)\n"
"(global-set-key [C-f2] 'grep)\n"
"(global-set-key [C-f3] 'next-error)\n"
"(global-set-key [C-f4] 'previous-error)\n"
"(global-set-key [C-f5] 'display-faces)\n"
"(global-set-key [C-f8] 'dired)\n"
"(global-set-key [C-f10] 'kill-compilation)\n"
"\n"
";; Keypad bindings\n"
"(global-set-key [up] \"\\C-p\")\n"
"(global-set-key [down] \"\\C-n\")\n"
"(global-set-key [left] \"\\C-b\")\n"
"(global-set-key [right] \"\\C-f\")\n"
"(global-set-key [home] \"\\C-a\")\n"
"(global-set-key [end] \"\\C-e\")\n"
"(global-set-key [prior] \"\\M-v\")\n"
"(global-set-key [next] \"\\C-v\")\n"
"(global-set-key [C-up] \"\\M-\\C-b\")\n"
"(global-set-key [C-down] \"\\M-\\C-f\")\n"
"(global-set-key [C-left] \"\\M-b\")\n"
"(global-set-key [C-right] \"\\M-f\")\n"
"(global-set-key [C-home] \"\\M-&lt;\")\n"
"(global-set-key [C-end] \"\\M-&gt;\")\n"
"(global-set-key [C-prior] \"\\M-&lt;\")\n"
"(global-set-key [C-next] \"\\M-&gt;\")\n"
"\n"
";; Mouse\n"
"(global-set-key [mouse-3] 'imenu)\n"
"\n"
";; Misc\n"
"(global-set-key [C-tab] \"\\C-q\\t\")\t; Control tab quotes a tab.\n"
"(setq backup-by-copying-when-mismatch t)\n"
"\n"
";; Treat 'y' or &lt;CR&gt; as yes, 'n' as no.\n"
"(fset 'yes-or-no-p 'y-or-n-p)\n"
"(define-key query-replace-map [return] 'act)\n"
"(define-key query-replace-map [?\\C-m] 'act)\n"
"\n"
";; Load packages\n"
"(require 'desktop)\n"
"(require 'tar-mode)\n"
"\n"
";; Pretty diff mode\n"
"(autoload 'ediff-buffers \"ediff\" \"Intelligent Emacs interface to diff\" t)\n"
"(autoload 'ediff-files \"ediff\" \"Intelligent Emacs interface to diff\" t)\n"
"(autoload 'ediff-files-remote \"ediff\"\n"
"  \"Intelligent Emacs interface to diff\")\n"
"\n"
"(if first-time\n"
"    (setq auto-mode-alist\n"
"\t  (append '((\"\\\\.cpp$\" . c++-mode)\n"
"\t\t    (\"\\\\.hpp$\" . c++-mode)\n"
"\t\t    (\"\\\\.lsp$\" . lisp-mode)\n"
"\t\t    (\"\\\\.scm$\" . scheme-mode)\n"
"\t\t    (\"\\\\.pl$\" . perl-mode)\n"
"\t\t    ) auto-mode-alist)))\n"
"\n"
";; Auto font lock mode\n"
"(defvar font-lock-auto-mode-list\n"
"  (list 'c-mode 'c++-mode 'c++-c-mode 'emacs-lisp-mode 'lisp-mode 'perl-mode 'scheme-mode)\n"
"  \"List of modes to always start in font-lock-mode\")\n"
"\n"
"(defvar font-lock-mode-keyword-alist\n"
"  '((c++-c-mode . c-font-lock-keywords)\n"
"    (perl-mode . perl-font-lock-keywords))\n"
"  \"Associations between modes and keywords\")\n"
"\n"
"(defun font-lock-auto-mode-select ()\n"
"  \"Automatically select font-lock-mode if the current major mode is in font-lock-auto-mode-list\"\n"
"  (if (memq major-mode font-lock-auto-mode-list)\n"
"      (progn\n"
"\t(font-lock-mode t))\n"
"    )\n"
"  )\n"
"\n"
"(global-set-key [M-f1] 'font-lock-fontify-buffer)\n"
"\n"
";; New dabbrev stuff\n"
";(require 'new-dabbrev)\n"
"(setq dabbrev-always-check-other-buffers t)\n"
"(setq dabbrev-abbrev-char-regexp \"\\\\sw\\\\|\\\\s_\")\n"
"(add-hook 'emacs-lisp-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) nil)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) nil)))\n"
"(add-hook 'c-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) nil)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) nil)))\n"
"(add-hook 'text-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) t)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) t)))\n"
"\n"
";; C++ and C mode...\n"
"(defun my-c++-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c++-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key c++-mode-map \"\\C-ce\" 'c-comment-edit)\n"
"  (setq c++-auto-hungry-initial-state 'none)\n"
"  (setq c++-delete-function 'backward-delete-char)\n"
"  (setq c++-tab-always-indent t)\n"
"  (setq c-indent-level 4)\n"
"  (setq c-continued-statement-offset 4)\n"
"  (setq c++-empty-arglist-indent 4))\n"
"\n"
"(defun my-c-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key c-mode-map \"\\C-ce\" 'c-comment-edit)\n"
"  (setq c-auto-hungry-initial-state 'none)\n"
"  (setq c-delete-function 'backward-delete-char)\n"
"  (setq c-tab-always-indent t)\n"
";; BSD-ish indentation style\n"
"  (setq c-indent-level 4)\n"
"  (setq c-continued-statement-offset 4)\n"
"  (setq c-brace-offset -4)\n"
"  (setq c-argdecl-indent 0)\n"
"  (setq c-label-offset -4))\n"
"\n"
";; Perl mode\n"
"(defun my-perl-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c++-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (setq perl-indent-level 4)\n"
"  (setq perl-continued-statement-offset 4))\n"
"\n"
";; Scheme mode...\n"
"(defun my-scheme-mode-hook ()\n"
"  (define-key scheme-mode-map \"\\C-m\" 'reindent-then-newline-and-indent))\n"
"\n"
";; Emacs-Lisp mode...\n"
"(defun my-lisp-mode-hook ()\n"
"  (define-key lisp-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key lisp-mode-map \"\\C-i\" 'lisp-indent-line)\n"
"  (define-key lisp-mode-map \"\\C-j\" 'eval-print-last-sexp))\n"
"\n"
";; Add all of the hooks...\n"
"(add-hook 'c++-mode-hook 'my-c++-mode-hook)\n"
"(add-hook 'c-mode-hook 'my-c-mode-hook)\n"
"(add-hook 'scheme-mode-hook 'my-scheme-mode-hook)\n"
"(add-hook 'emacs-lisp-mode-hook 'my-lisp-mode-hook)\n"
"(add-hook 'lisp-mode-hook 'my-lisp-mode-hook)\n"
"(add-hook 'perl-mode-hook 'my-perl-mode-hook)\n"
"\n"
";; Complement to next-error\n"
"(defun previous-error (n)\n"
"  \"Visit previous compilation error message and corresponding source code.\"\n"
"  (interactive \"p\")\n"
"  (next-error (- n)))\n"
"\n"
";; Misc...\n"
"(transient-mark-mode 1)\n"
"(setq mark-even-if-inactive t)\n"
"(setq visible-bell nil)\n"
"(setq next-line-add-newlines nil)\n"
"(setq compile-command \"make\")\n"
"(setq suggest-key-bindings nil)\n"
"(put 'eval-expression 'disabled nil)\n"
"(put 'narrow-to-region 'disabled nil)\n"
"(put 'set-goal-column 'disabled nil)\n"
"(if (&gt;= emacs-major-version 21)\n"
"\t(setq show-trailing-whitespace t))\n"
"\n"
";; Elisp archive searching\n"
"(autoload 'format-lisp-code-directory \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-apropos \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-retrieve \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-verify \"lispdir\" nil t)\n"
"\n"
";; Font lock mode\n"
"(defun my-make-face (face color &amp;optional bold)\n"
"  \"Create a face from a color and optionally make it bold\"\n"
"  (make-face face)\n"
"  (copy-face 'default face)\n"
"  (set-face-foreground face color)\n"
"  (if bold (make-face-bold face))\n"
"  )\n"
"\n"
"(if (eq window-system 'x)\n"
"    (progn\n"
"      (my-make-face 'blue \"blue\")\n"
"      (my-make-face 'red \"red\")\n"
"      (my-make-face 'green \"dark green\")\n"
"      (setq font-lock-comment-face 'blue)\n"
"      (setq font-lock-string-face 'bold)\n"
"      (setq font-lock-type-face 'bold)\n"
"      (setq font-lock-keyword-face 'bold)\n"
"      (setq font-lock-function-name-face 'red)\n"
"      (setq font-lock-doc-string-face 'green)\n"
"      (add-hook 'find-file-hooks 'font-lock-auto-mode-select)\n"
"\n"
"      (setq baud-rate 1000000)\n"
"      (global-set-key \"\\C-cmm\" 'menu-bar-mode)\n"
"      (global-set-key \"\\C-cms\" 'scroll-bar-mode)\n"
"      (global-set-key [backspace] 'backward-delete-char)\n"
"\t\t\t\t\t;      (global-set-key [delete] 'delete-char)\n"
"      (standard-display-european t)\n"
"      (load-library \"iso-transl\")))\n"
"\n"
";; X11 or PC using direct screen writes\n"
"(if window-system\n"
"    (progn\n"
"      ;;      (global-set-key [M-f1] 'hilit-repaint-command)\n"
"      ;;      (global-set-key [M-f2] [?\\C-u M-f1])\n"
"      (setq hilit-mode-enable-list\n"
"\t    '(not text-mode c-mode c++-mode emacs-lisp-mode lisp-mode\n"
"\t\t  scheme-mode)\n"
"\t    hilit-auto-highlight nil\n"
"\t    hilit-auto-rehighlight 'visible\n"
"\t    hilit-inhibit-hooks nil\n"
"\t    hilit-inhibit-rebinding t)\n"
"      (require 'hilit19)\n"
"      (require 'paren))\n"
"  (setq baud-rate 2400)\t\t\t; For slow serial connections\n"
"  )\n"
"\n"
";; TTY type terminal\n"
"(if (and (not window-system)\n"
"\t (not (equal system-type 'ms-dos)))\n"
"    (progn\n"
"      (if first-time\n"
"\t  (progn\n"
"\t    (keyboard-translate ?\\C-h ?\\C-?)\n"
"\t    (keyboard-translate ?\\C-? ?\\C-h)))))\n"
"\n"
";; Under UNIX\n"
"(if (not (equal system-type 'ms-dos))\n"
"    (progn\n"
"      (if first-time\n"
"\t  (server-start))))\n"
"\n"
";; Add any face changes here\n"
"(add-hook 'term-setup-hook 'my-term-setup-hook)\n"
"(defun my-term-setup-hook ()\n"
"  (if (eq window-system 'pc)\n"
"      (progn\n"
";;\t(set-face-background 'default \"red\")\n"
"\t)))\n"
"\n"
";; Restore the \"desktop\" - do this as late as possible\n"
"(if first-time\n"
"    (progn\n"
"      (desktop-load-default)\n"
"      (desktop-read)))\n"
"\n"
";; Indicate that this file has been read at least once\n"
"(setq first-time nil)\n"
"\n"
";; No need to debug anything now\n"
"\n"
"(setq debug-on-error nil)\n"
"\n"
";; All done\n"
"(message \"All done, %s%s\" (user-login-name) \".\")"
msgstr ""
";; -*-Emacs-Lisp-*-\n"
"\n"
";; This file is designed to be re-evaled; use the variable first-time\n"
";; to avoid any problems with this.\n"
"(defvar first-time t\n"
"  \"Flag signifying this is the first time that .emacs has been evaled\")\n"
"\n"
";; Meta\n"
"(global-set-key \"\\M- \" 'set-mark-command)\n"
"(global-set-key \"\\M-\\C-h\" 'backward-kill-word)\n"
"(global-set-key \"\\M-\\C-r\" 'query-replace)\n"
"(global-set-key \"\\M-r\" 'replace-string)\n"
"(global-set-key \"\\M-g\" 'goto-line)\n"
"(global-set-key \"\\M-h\" 'help-command)\n"
"\n"
";; Function keys\n"
"(global-set-key [f1] 'manual-entry)\n"
"(global-set-key [f2] 'info)\n"
"(global-set-key [f3] 'repeat-complex-command)\n"
"(global-set-key [f4] 'advertised-undo)\n"
"(global-set-key [f5] 'eval-current-buffer)\n"
"(global-set-key [f6] 'buffer-menu)\n"
"(global-set-key [f7] 'other-window)\n"
"(global-set-key [f8] 'find-file)\n"
"(global-set-key [f9] 'save-buffer)\n"
"(global-set-key [f10] 'next-error)\n"
"(global-set-key [f11] 'compile)\n"
"(global-set-key [f12] 'grep)\n"
"(global-set-key [C-f1] 'compile)\n"
"(global-set-key [C-f2] 'grep)\n"
"(global-set-key [C-f3] 'next-error)\n"
"(global-set-key [C-f4] 'previous-error)\n"
"(global-set-key [C-f5] 'display-faces)\n"
"(global-set-key [C-f8] 'dired)\n"
"(global-set-key [C-f10] 'kill-compilation)\n"
"\n"
";; Keypad bindings\n"
"(global-set-key [up] \"\\C-p\")\n"
"(global-set-key [down] \"\\C-n\")\n"
"(global-set-key [left] \"\\C-b\")\n"
"(global-set-key [right] \"\\C-f\")\n"
"(global-set-key [home] \"\\C-a\")\n"
"(global-set-key [end] \"\\C-e\")\n"
"(global-set-key [prior] \"\\M-v\")\n"
"(global-set-key [next] \"\\C-v\")\n"
"(global-set-key [C-up] \"\\M-\\C-b\")\n"
"(global-set-key [C-down] \"\\M-\\C-f\")\n"
"(global-set-key [C-left] \"\\M-b\")\n"
"(global-set-key [C-right] \"\\M-f\")\n"
"(global-set-key [C-home] \"\\M-&lt;\")\n"
"(global-set-key [C-end] \"\\M-&gt;\")\n"
"(global-set-key [C-prior] \"\\M-&lt;\")\n"
"(global-set-key [C-next] \"\\M-&gt;\")\n"
"\n"
";; Mouse\n"
"(global-set-key [mouse-3] 'imenu)\n"
"\n"
";; Misc\n"
"(global-set-key [C-tab] \"\\C-q\\t\")\t; Control tab quotes a tab.\n"
"(setq backup-by-copying-when-mismatch t)\n"
"\n"
";; Treat 'y' or &lt;CR&gt; as yes, 'n' as no.\n"
"(fset 'yes-or-no-p 'y-or-n-p)\n"
"(define-key query-replace-map [return] 'act)\n"
"(define-key query-replace-map [?\\C-m] 'act)\n"
"\n"
";; Load packages\n"
"(require 'desktop)\n"
"(require 'tar-mode)\n"
"\n"
";; Pretty diff mode\n"
"(autoload 'ediff-buffers \"ediff\" \"Intelligent Emacs interface to diff\" t)"
"\n"
"(autoload 'ediff-files \"ediff\" \"Intelligent Emacs interface to diff\" t)\n"
"(autoload 'ediff-files-remote \"ediff\"\n"
"  \"Intelligent Emacs interface to diff\")\n"
"\n"
"(if first-time\n"
"    (setq auto-mode-alist\n"
"\t  (append '((\"\\\\.cpp$\" . c++-mode)\n"
"\t\t    (\"\\\\.hpp$\" . c++-mode)\n"
"\t\t    (\"\\\\.lsp$\" . lisp-mode)\n"
"\t\t    (\"\\\\.scm$\" . scheme-mode)\n"
"\t\t    (\"\\\\.pl$\" . perl-mode)\n"
"\t\t    ) auto-mode-alist)))\n"
"\n"
";; Auto font lock mode\n"
"(defvar font-lock-auto-mode-list\n"
"  (list 'c-mode 'c++-mode 'c++-c-mode 'emacs-lisp-mode 'lisp-mode 'perl-mode "
"'scheme-mode)\n"
"  \"List of modes to always start in font-lock-mode\")\n"
"\n"
"(defvar font-lock-mode-keyword-alist\n"
"  '((c++-c-mode . c-font-lock-keywords)\n"
"    (perl-mode . perl-font-lock-keywords))\n"
"  \"Associations between modes and keywords\")\n"
"\n"
"(defun font-lock-auto-mode-select ()\n"
"  \"Automatically select font-lock-mode if the current major mode is in font-"
"lock-auto-mode-list\"\n"
"  (if (memq major-mode font-lock-auto-mode-list)\n"
"      (progn\n"
"\t(font-lock-mode t))\n"
"    )\n"
"  )\n"
"\n"
"(global-set-key [M-f1] 'font-lock-fontify-buffer)\n"
"\n"
";; New dabbrev stuff\n"
";(require 'new-dabbrev)\n"
"(setq dabbrev-always-check-other-buffers t)\n"
"(setq dabbrev-abbrev-char-regexp \"\\\\sw\\\\|\\\\s_\")\n"
"(add-hook 'emacs-lisp-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) nil)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) nil)))\n"
"(add-hook 'c-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) nil)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) nil)))\n"
"(add-hook 'text-mode-hook\n"
"\t  '(lambda ()\n"
"\t     (set (make-local-variable 'dabbrev-case-fold-search) t)\n"
"\t     (set (make-local-variable 'dabbrev-case-replace) t)))\n"
"\n"
";; C++ and C mode...\n"
"(defun my-c++-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c++-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key c++-mode-map \"\\C-ce\" 'c-comment-edit)\n"
"  (setq c++-auto-hungry-initial-state 'none)\n"
"  (setq c++-delete-function 'backward-delete-char)\n"
"  (setq c++-tab-always-indent t)\n"
"  (setq c-indent-level 4)\n"
"  (setq c-continued-statement-offset 4)\n"
"  (setq c++-empty-arglist-indent 4))\n"
"\n"
"(defun my-c-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key c-mode-map \"\\C-ce\" 'c-comment-edit)\n"
"  (setq c-auto-hungry-initial-state 'none)\n"
"  (setq c-delete-function 'backward-delete-char)\n"
"  (setq c-tab-always-indent t)\n"
";; BSD-ish indentation style\n"
"  (setq c-indent-level 4)\n"
"  (setq c-continued-statement-offset 4)\n"
"  (setq c-brace-offset -4)\n"
"  (setq c-argdecl-indent 0)\n"
"  (setq c-label-offset -4))\n"
"\n"
";; Perl mode\n"
"(defun my-perl-mode-hook ()\n"
"  (setq tab-width 4)\n"
"  (define-key c++-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (setq perl-indent-level 4)\n"
"  (setq perl-continued-statement-offset 4))\n"
"\n"
";; Scheme mode...\n"
"(defun my-scheme-mode-hook ()\n"
"  (define-key scheme-mode-map \"\\C-m\" 'reindent-then-newline-and-indent))\n"
"\n"
";; Emacs-Lisp mode...\n"
"(defun my-lisp-mode-hook ()\n"
"  (define-key lisp-mode-map \"\\C-m\" 'reindent-then-newline-and-indent)\n"
"  (define-key lisp-mode-map \"\\C-i\" 'lisp-indent-line)\n"
"  (define-key lisp-mode-map \"\\C-j\" 'eval-print-last-sexp))\n"
"\n"
";; Add all of the hooks...\n"
"(add-hook 'c++-mode-hook 'my-c++-mode-hook)\n"
"(add-hook 'c-mode-hook 'my-c-mode-hook)\n"
"(add-hook 'scheme-mode-hook 'my-scheme-mode-hook)\n"
"(add-hook 'emacs-lisp-mode-hook 'my-lisp-mode-hook)\n"
"(add-hook 'lisp-mode-hook 'my-lisp-mode-hook)\n"
"(add-hook 'perl-mode-hook 'my-perl-mode-hook)\n"
"\n"
";; Complement to next-error\n"
"(defun previous-error (n)\n"
"  \"Visit previous compilation error message and corresponding source code.\""
"\n"
"  (interactive \"p\")\n"
"  (next-error (- n)))\n"
"\n"
";; Misc...\n"
"(transient-mark-mode 1)\n"
"(setq mark-even-if-inactive t)\n"
"(setq visible-bell nil)\n"
"(setq next-line-add-newlines nil)\n"
"(setq compile-command \"make\")\n"
"(setq suggest-key-bindings nil)\n"
"(put 'eval-expression 'disabled nil)\n"
"(put 'narrow-to-region 'disabled nil)\n"
"(put 'set-goal-column 'disabled nil)\n"
"(if (&gt;= emacs-major-version 21)\n"
"\t(setq show-trailing-whitespace t))\n"
"\n"
";; Elisp archive searching\n"
"(autoload 'format-lisp-code-directory \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-apropos \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-retrieve \"lispdir\" nil t)\n"
"(autoload 'lisp-dir-verify \"lispdir\" nil t)\n"
"\n"
";; Font lock mode\n"
"(defun my-make-face (face color &amp;optional bold)\n"
"  \"Create a face from a color and optionally make it bold\"\n"
"  (make-face face)\n"
"  (copy-face 'default face)\n"
"  (set-face-foreground face color)\n"
"  (if bold (make-face-bold face))\n"
"  )\n"
"\n"
"(if (eq window-system 'x)\n"
"    (progn\n"
"      (my-make-face 'blue \"blue\")\n"
"      (my-make-face 'red \"red\")\n"
"      (my-make-face 'green \"dark green\")\n"
"      (setq font-lock-comment-face 'blue)\n"
"      (setq font-lock-string-face 'bold)\n"
"      (setq font-lock-type-face 'bold)\n"
"      (setq font-lock-keyword-face 'bold)\n"
"      (setq font-lock-function-name-face 'red)\n"
"      (setq font-lock-doc-string-face 'green)\n"
"      (add-hook 'find-file-hooks 'font-lock-auto-mode-select)\n"
"\n"
"      (setq baud-rate 1000000)\n"
"      (global-set-key \"\\C-cmm\" 'menu-bar-mode)\n"
"      (global-set-key \"\\C-cms\" 'scroll-bar-mode)\n"
"      (global-set-key [backspace] 'backward-delete-char)\n"
"\t\t\t\t\t;      (global-set-key [delete] 'delete-char)\n"
"      (standard-display-european t)\n"
"      (load-library \"iso-transl\")))\n"
"\n"
";; X11 or PC using direct screen writes\n"
"(if window-system\n"
"    (progn\n"
"      ;;      (global-set-key [M-f1] 'hilit-repaint-command)\n"
"      ;;      (global-set-key [M-f2] [?\\C-u M-f1])\n"
"      (setq hilit-mode-enable-list\n"
"\t    '(not text-mode c-mode c++-mode emacs-lisp-mode lisp-mode\n"
"\t\t  scheme-mode)\n"
"\t    hilit-auto-highlight nil\n"
"\t    hilit-auto-rehighlight 'visible\n"
"\t    hilit-inhibit-hooks nil\n"
"\t    hilit-inhibit-rebinding t)\n"
"      (require 'hilit19)\n"
"      (require 'paren))\n"
"  (setq baud-rate 2400)\t\t\t; For slow serial connections\n"
"  )\n"
"\n"
";; TTY type terminal\n"
"(if (and (not window-system)\n"
"\t (not (equal system-type 'ms-dos)))\n"
"    (progn\n"
"      (if first-time\n"
"\t  (progn\n"
"\t    (keyboard-translate ?\\C-h ?\\C-?)\n"
"\t    (keyboard-translate ?\\C-? ?\\C-h)))))\n"
"\n"
";; Under UNIX\n"
"(if (not (equal system-type 'ms-dos))\n"
"    (progn\n"
"      (if first-time\n"
"\t  (server-start))))\n"
"\n"
";; Add any face changes here\n"
"(add-hook 'term-setup-hook 'my-term-setup-hook)\n"
"(defun my-term-setup-hook ()\n"
"  (if (eq window-system 'pc)\n"
"      (progn\n"
";;\t(set-face-background 'default \"red\")\n"
"\t)))\n"
"\n"
";; Restore the \"desktop\" - do this as late as possible\n"
"(if first-time\n"
"    (progn\n"
"      (desktop-load-default)\n"
"      (desktop-read)))\n"
"\n"
";; Indicate that this file has been read at least once\n"
"(setq first-time nil)\n"
"\n"
";; No need to debug anything now\n"
"\n"
"(setq debug-on-error nil)\n"
"\n"
";; All done\n"
"(message \"All done, %s%s\" (user-login-name) \".\")"

#. (itstool) path: sect2/title
#: book.translate.xml:2805
msgid "Extending the Range of Languages Emacs Understands"
msgstr "گسترش دامنهٔ زبان‌هایی که Emacs می‌فهمد"

#. (itstool) path: sect2/para
#: book.translate.xml:2808
msgid ""
"Now, this is all very well if you only want to program in the languages "
"already catered for in <filename>.emacs</filename> (C, C++, Perl, Lisp and "
"Scheme), but what happens if a new language called <quote>whizbang</quote> "
"comes out, full of exciting features?"
msgstr ""
"حال، چنانچه تنها بخواهید با زبان‌هایی که از پیش در <filename>.emacs</"
"filename> در نظر گرفته شده است (C، C++، Perl، Lisp و Scheme) برنامه بنویسید، "
"بسیار خوب است، اما چه رخ می‌دهد اگر زبان جدیدی به نام <quote>whizbang</"
"quote> ‌همراه با کلی امکانات هیجان انگیز بیاید؟"

#. (itstool) path: sect2/para
#: book.translate.xml:2815
msgid ""
"The first thing to do is find out if whizbang comes with any files that tell "
"Emacs about the language. These usually end in <filename>.el</filename>, "
"short for <quote>Emacs Lisp</quote>. For example, if whizbang is a FreeBSD "
"port, we can locate these files by doing"
msgstr ""
"اولین کاری که باید انجام گیرد فهم این مسئله است که whizbang همراه با پرونده‌"
"هایی که به Emcas دربارهٔ زبان بگویند می‌آید یا خیر. این نوع پرونده‌ها به‌طور "
"معمول با <filename>.el</filename> پایان می‌گیرند، کوتاه‌شدهٔ <quote>Emacs "
"Lisp</quote>. برای مثال، اگر whizbang یک پورتِ FreeBSD باشد، ما می‌توانیم "
"بدین شکل این پرونده‌ها را بیابیم"

#. (itstool) path: sect2/screen
#: book.translate.xml:2821
#, no-wrap
msgid "<prompt>%</prompt> <userinput>find /usr/ports/lang/whizbang -name \"*.el\" -print</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>find /usr/ports/lang/whizbang -name \"*.el\" "
"-print</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:2823
msgid ""
"and install them by copying them into the Emacs site Lisp directory. On "
"FreeBSD, this is <filename>/usr/local/share/emacs/site-lisp</filename>."
msgstr ""
"و آنها را با کپی کردن در مسیر Emacs site Lisp نصب کنیم. در FreeBSD، این مسیر "
"<filename>/usr/local/share/emacs/site-lisp</filename> هست."

#. (itstool) path: sect2/para
#: book.translate.xml:2827
msgid "So for example, if the output from the find command was"
msgstr "به‌طور مثال، اگر خروجی دستور find چنین بود"

#. (itstool) path: sect2/screen
#: book.translate.xml:2830
#, no-wrap
msgid "/usr/ports/lang/whizbang/work/misc/whizbang.el"
msgstr "/usr/ports/lang/whizbang/work/misc/whizbang.el"

#. (itstool) path: sect2/para
#: book.translate.xml:2832
msgid "we would do"
msgstr "چنین می‌کردیم"

#. (itstool) path: sect2/screen
#: book.translate.xml:2834
#, no-wrap
msgid "<prompt>#</prompt> <userinput>cp /usr/ports/lang/whizbang/work/misc/whizbang.el /usr/local/share/emacs/site-lisp</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>cp /usr/ports/lang/whizbang/work/misc/"
"whizbang.el /usr/local/share/emacs/site-lisp</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:2836
msgid ""
"Next, we need to decide what extension whizbang source files have. Let us "
"say for the sake of argument that they all end in <filename>.wiz</filename>. "
"We need to add an entry to our <filename>.emacs</filename> to make sure "
"Emacs will be able to use the information in <filename>whizbang.el</"
"filename>."
msgstr ""
"سپس، باید بدانیم پرونده‌های منبع whizbang چه پسوندی را دارا هستند. بیایید "
"فرض بگیریم که تمام آنها با <filename>.wiz</filename> پایان می‌گیرند. ما باید "
"داده‌ای را به <filename>.emacs</filename> خودمان اضافه کنیم تا مطمئن شویم "
"Emacs می‌تواند از اطلاعات داخل <filename>whizbang.el</filename> استفاده کند."

#. (itstool) path: sect2/para
#: book.translate.xml:2843
msgid ""
"Find the <symbol>auto-mode-alist entry</symbol> in <filename>.emacs</"
"filename> and add a line for whizbang, such as:"
msgstr ""
"<symbol>ورودی auto-mode-alist</symbol> را در <filename>.emacs</filename> "
"پیدا کنید و یک خط برای whizbang اضافه کنید، مانند:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:2847
#, no-wrap
msgid ""
"<lineannotation>…</lineannotation>\n"
"(\"\\\\.lsp$\" . lisp-mode)\n"
"(\"\\\\.wiz$\" . whizbang-mode)\n"
"(\"\\\\.scm$\" . scheme-mode)\n"
"<lineannotation>…</lineannotation>"
msgstr ""
"<lineannotation>…</lineannotation>\n"
"(\"\\\\.lsp$\" . lisp-mode)\n"
"(\"\\\\.wiz$\" . whizbang-mode)\n"
"(\"\\\\.scm$\" . scheme-mode)\n"
"<lineannotation>…</lineannotation>"

#. (itstool) path: sect2/para
#: book.translate.xml:2853
msgid ""
"This means that Emacs will automatically go into <function>whizbang-mode</"
"function> when you edit a file ending in <filename>.wiz</filename>."
msgstr ""
"این بدان معناست که زمانی‌که شما پرونده‌ای را که با <filename>.wiz</filename> "
"به پایان می‌رسد را ویرایش می‌کنید، Emacs به‌طور خودکار به <function>whizbang-"
"mode</function> می‌رود."

#. (itstool) path: sect2/para
#: book.translate.xml:2857
msgid ""
"Just below this, you will find the <symbol>font-lock-auto-mode-list</symbol> "
"entry. Add <function>whizbang-mode</function> to it like so:"
msgstr ""
"درست زیر همین، شما مدخل <symbol>font-lock-auto-mode-list</symbol> را پیدا می‌"
"کنید. بدین شکل <function>whizbang-mode</function> را به آن اضافه کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:2861
#, no-wrap
msgid ""
";; Auto font lock mode\n"
"(defvar font-lock-auto-mode-list\n"
"  (list 'c-mode 'c++-mode 'c++-c-mode 'emacs-lisp-mode 'whizbang-mode 'lisp-mode 'perl-mode 'scheme-mode)\n"
"  \"List of modes to always start in font-lock-mode\")"
msgstr ""
";; Auto font lock mode\n"
"(defvar font-lock-auto-mode-list\n"
"  (list 'c-mode 'c++-mode 'c++-c-mode 'emacs-lisp-mode 'whizbang-mode 'lisp-"
"mode 'perl-mode 'scheme-mode)\n"
"  \"List of modes to always start in font-lock-mode\")"

#. (itstool) path: sect2/para
#: book.translate.xml:2866
msgid ""
"This means that Emacs will always enable <function>font-lock-mode</function> "
"(ie syntax highlighting) when editing a <filename>.wiz</filename> file."
msgstr ""
"این بدان معناست که Emacs همیشه <function>font-lock-mode</function> (به‌گفته‌"
"ای دیگر مشخص‌سازی قواعد نحوی) را به‌هنگام ویرایش یک پروندهٔ <filename>.wiz</"
"filename> فعال می‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:2870
msgid ""
"And that is all that is needed. If there is anything else you want done "
"automatically when you open up <filename>.wiz</filename>, you can add a "
"<function>whizbang-mode hook</function> (see <function>my-scheme-mode-hook</"
"function> for a simple example that adds <function>auto-indent</function>)."
msgstr ""
"و این تمام آن چیزی است که نیاز دارید. اگر کاری دیگری هست که هنگام باز کردن "
"<filename>.wiz</filename> می‌خواهید به‌طور خودکار انجام گیرد، می‌توانید یک "
"<function>whizbang-mode hook</function> اضافه کنید (<function>my-scheme-mode-"
"hook</function> را برای نمونهٔ ساده‌ای که تابع <function>auto-indent</"
"function> را اضافه می‌کند ببینید)."

#. (itstool) path: sect1/title
#: book.translate.xml:2880
msgid "Further Reading"
msgstr "مطالعهٔ بیشتر"

#. (itstool) path: sect1/para
#: book.translate.xml:2882
msgid ""
"For information about setting up a development environment for contributing "
"fixes to FreeBSD itself, please see "
"<citerefentry><refentrytitle>development</refentrytitle><manvolnum>7</"
"manvolnum></citerefentry>."
msgstr ""
"برای اطلاعات بیشتر در مورد ایجاد یک محیط توسعه به‌منظور کمک در رفع مشکلات "
"پروژهٔ FreeBSD، خواهشمند است <citerefentry><refentrytitle>development</refent"
"rytitle><manvolnum>7</manvolnum></citerefentry> را مشاهده فرمایید."

#. (itstool) path: listitem/para
#: book.translate.xml:2888
msgid ""
"Brian Harvey and Matthew Wright <emphasis>Simply Scheme</emphasis> MIT 1994. "
"ISBN 0-262-08226-8"
msgstr ""
"Brian Harvey and Matthew Wright <emphasis>Simply Scheme</emphasis> MIT 1994. "
"ISBN 0-262-08226-8"

#. (itstool) path: listitem/para
#: book.translate.xml:2895
msgid ""
"Randall Schwartz <emphasis>Learning Perl</emphasis> O'Reilly 1993 ISBN "
"1-56592-042-2"
msgstr ""
"Randall Schwartz <emphasis>Learning Perl</emphasis> O'Reilly 1993 ISBN "
"1-56592-042-2"

#. (itstool) path: listitem/para
#: book.translate.xml:2902
msgid ""
"Patrick Henry Winston and Berthold Klaus Paul Horn <emphasis>Lisp (3rd "
"Edition)</emphasis> Addison-Wesley 1989 ISBN 0-201-08319-1"
msgstr ""
"Patrick Henry Winston and Berthold Klaus Paul Horn <emphasis>Lisp (3rd "
"Edition)</emphasis> Addison-Wesley 1989 ISBN 0-201-08319-1"

#. (itstool) path: listitem/para
#: book.translate.xml:2909
msgid ""
"Brian W. Kernighan and Rob Pike <emphasis>The Unix Programming Environment</"
"emphasis> Prentice-Hall 1984 ISBN 0-13-937681-X"
msgstr ""
"Brian W. Kernighan and Rob Pike <emphasis>The Unix Programming Environment</"
"emphasis> Prentice-Hall 1984 ISBN 0-13-937681-X"

#. (itstool) path: listitem/para
#: book.translate.xml:2916
msgid ""
"Brian W. Kernighan and Dennis M. Ritchie <emphasis>The C Programming "
"Language (2nd Edition)</emphasis> Prentice-Hall 1988 ISBN 0-13-110362-8"
msgstr ""
"Brian W. Kernighan and Dennis M. Ritchie <emphasis>The C Programming "
"Language (2nd Edition)</emphasis> Prentice-Hall 1988 ISBN 0-13-110362-8"

#. (itstool) path: listitem/para
#: book.translate.xml:2923
msgid ""
"Bjarne Stroustrup <emphasis>The C++ Programming Language</emphasis> Addison-"
"Wesley 1991 ISBN 0-201-53992-6"
msgstr ""
"Bjarne Stroustrup <emphasis>The C++ Programming Language</emphasis> Addison-"
"Wesley 1991 ISBN 0-201-53992-6"

#. (itstool) path: listitem/para
#: book.translate.xml:2930
msgid ""
"W. Richard Stevens <emphasis>Advanced Programming in the Unix Environment</"
"emphasis> Addison-Wesley 1992 ISBN 0-201-56317-7"
msgstr ""
"W. Richard Stevens <emphasis>Advanced Programming in the Unix Environment</"
"emphasis> Addison-Wesley 1992 ISBN 0-201-56317-7"

#. (itstool) path: listitem/para
#: book.translate.xml:2937
msgid ""
"W. Richard Stevens <emphasis>Unix Network Programming</emphasis> Prentice-"
"Hall 1990 ISBN 0-13-949876-1"
msgstr ""
"W. Richard Stevens <emphasis>Unix Network Programming</emphasis> Prentice-"
"Hall 1990 ISBN 0-13-949876-1"

#. (itstool) path: info/title
#: book.translate.xml:2954
msgid "Secure Programming"
msgstr "برنامه‌نویسی ایمن"

#. (itstool) path: sect1/para
#: book.translate.xml:2964
msgid ""
"This chapter describes some of the security issues that have plagued "
"<trademark class=\"registered\">UNIX</trademark> programmers for decades and "
"some of the new tools available to help programmers avoid writing "
"exploitable code."
msgstr ""
"این فصل به تشریح برخی از مسائل امنیتی که برنامه‌نویسانِ <trademark class="
"\"registered\">UNIX</trademark> را برای دهه‌ها گرفتار خود کرده است و همچنین "
"به برخی از ابزارهای جدید که برای کمک به برنامه‌نویسان جهت اجتناب از نوشتن "
"کدهای قابل بهره‌برداری در دسترس است می‌پردازد."

#. (itstool) path: sect1/title
#: book.translate.xml:2970
msgid "Secure Design Methodology"
msgstr "روش‌شناسی طراحی ایمن"

#. (itstool) path: sect1/para
#: book.translate.xml:2973
msgid ""
"Writing secure applications takes a very scrutinous and pessimistic outlook "
"on life. Applications should be run with the principle of <quote>least "
"privilege</quote> so that no process is ever running with more than the bare "
"minimum access that it needs to accomplish its function. Previously tested "
"code should be reused whenever possible to avoid common mistakes that others "
"may have already fixed."
msgstr ""
"نوشتن برنامه‌های ایمن نیازمند نظرگاهی بسیار دقیق و بدبینانه نسبت به زندگی "
"است. برنامه‌ها باید با اصل <quote>کمترین امتیاز</quote> اجرا شوند تا هیچ "
"فرآیندی با بیش از حداقل دسترسی که برای دستیابی به کارکرد خود نیاز دارد اجرا "
"نشود. کدهای از پیش آزموده شده باید هرزمان که ممکن بود مجدداً مورد استفاده "
"قرار گیرند تا از اشتباهات رایجی که دیگران احتمالاً از پیش رفع کرده‌اند "
"اجتناب شود."

#. (itstool) path: sect1/para
#: book.translate.xml:2981
msgid ""
"One of the pitfalls of the <trademark class=\"registered\">UNIX</trademark> "
"environment is how easy it is to make assumptions about the sanity of the "
"environment. Applications should never trust user input (in all its forms), "
"system resources, inter-process communication, or the timing of events. "
"<trademark class=\"registered\">UNIX</trademark> processes do not execute "
"synchronously so logical operations are rarely atomic."
msgstr ""
"یکی از مشکلات موجود در محیط <trademark class=\"registered\">UNIX</trademark> "
"سادگی در گمانه‌زنی پیرامون پایداری محیط است. برنامه‌ها هرگز نباید به ورودی "
"کاربر (در تمام اشکال خود)، منابع سامانه، ارتباط بین پردازشی، یا زمانبندی "
"رویدادها اعتماد کنند. فرآیندهای <trademark class=\"registered\">UNIX</"
"trademark> به‌طور همزمان اجرا نمی‌شوند، از این رو عملیات منطقی به‌ندرت اتمی "
"هستند."

#. (itstool) path: sect1/title
#: book.translate.xml:2989
msgid "Buffer Overflows"
msgstr "سرریز میان‌گیر"

#. (itstool) path: para/indexterm
#. (itstool) path: sect3/indexterm
#: book.translate.xml:2994 book.translate.xml:3213
msgid "<primary>buffer overflow</primary>"
msgstr "<primary>سرریز میان‌گیر</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:2995
msgid "<primary>von Neumann</primary>"
msgstr "<primary>von Neumann</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3000
msgid "<primary>Morris Internet worm</primary>"
msgstr "<primary>کرم اینترنتی موریس</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:2991
msgid ""
"Buffer Overflows have been around since the very beginnings of the von "
"Neumann <xref linkend=\"COD\"/> architecture. <_:indexterm-1/> <_:"
"indexterm-2/> They first gained widespread notoriety in 1988 with the Morris "
"Internet worm. Unfortunately, the same basic attack remains <_:indexterm-3/> "
"effective today. By far the most common type of buffer overflow attack is "
"based on corrupting the stack."
msgstr ""
"سرریز میان‌گیر از ابتدای معماری فون نویمان <xref linkend=\"COD\"/> بوده است. "
"<_:indexterm-1/> <_:indexterm-2/> آنها برای اولین بار در سال ۱۹۸۸ با کرم "
"اینترنتی موریس به‌طور گسترده بدنام شدند. شوربختانه، همان حملهٔ ابتدایی تا به "
"امروز <_:indexterm-3/> مؤثر مانده است. تاکنون رایج‌ترین حملاتِ سرریز همگردان "
"بر مبنای خراب‌کردن پشته بوده است."

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3006
msgid "<primary>stack</primary>"
msgstr "<primary>پشته</primary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3007
msgid "<primary>arguments</primary>"
msgstr "<primary>براهین</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3014
msgid "<primary>LIFO</primary>"
msgstr "<primary>LIFO</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3015
msgid "<primary>process image</primary> <secondary>stack pointer</secondary>"
msgstr "<primary>تصویر پردازش</primary> <secondary>اشاره‌گر پشته</secondary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3024
msgid "<primary>stack frame</primary>"
msgstr "<primary>چارچوب پشته</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3025
msgid "<primary>stack pointer</primary>"
msgstr "<primary>اشاره‌گر پشته</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3034
msgid "<primary>frame pointer</primary>"
msgstr "<primary>اشاره‌گر چارچوب</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3035
msgid "<primary>process image</primary> <secondary>frame pointer</secondary>"
msgstr "<primary>تصویر پردازش</primary> <secondary>اشاره‌گر چارچوب</secondary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3039
msgid "<primary>return address</primary>"
msgstr "<primary>نشانی بازگشت</primary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3040
msgid "<primary>stack-overflow</primary>"
msgstr "<primary>سرریز پشته</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3009
msgid ""
"Most modern computer systems use a stack to pass arguments to procedures and "
"to store local variables. A stack is a last in first out (LIFO) buffer in "
"the high memory area of a process image. When a program invokes a function a "
"new \"stack frame\" is <_:indexterm-1/> <_:indexterm-2/> created. This stack "
"frame consists of the arguments passed to the function as well as a dynamic "
"amount of local variable space. The \"stack pointer\" is a register that "
"holds the current <_:indexterm-3/> <_:indexterm-4/> location of the top of "
"the stack. Since this value is constantly changing as new values are pushed "
"onto the top of the stack, many implementations also provide a \"frame "
"pointer\" that is located near the beginning of a stack frame so that local "
"variables can more easily be addressed relative to this value. <xref linkend="
"\"COD\"/> The return address for function <_:indexterm-5/> <_:indexterm-6/> "
"<_:indexterm-7/> <_:indexterm-8/> calls is also stored on the stack, and "
"this is the cause of stack-overflow exploits since overflowing a local "
"variable in a function can overwrite the return address of that function, "
"potentially allowing a malicious user to execute any code he or she wants."
msgstr ""
"بیشتر رایانه‌های امروزی از پشته برای تحویل براهین به رویه‌ها و نگه‌داشت "
"متغیرهای محلی استفاده می‌کنند. پشته یک میانگیر آخرین ورودی اولین خروجی در "
"بخش بالایی حافظهٔ یک تصویر پردازش است. زمانی که یک برنامه تابعی را فراخوانی "
"می‌کند، یک \"قاب پشته\" جدید <_:indexterm-1/> <_:indexterm-2/> ساخته می‌شود. "
"این \"قاب پشته\" یک ثبات (register) است که موقعیت فعلی <_:indexterm-3/> <_:"
"indexterm-4/> بالای پشته را نگه می‌دارد. از آنجا که این مقدار به‌طور مداوم "
"به‌محض گذاشته شدن مقادیر در بالای پشته در حال تغییر است، بسیاری از "
"پیاده‌سازی‌ها یک \"نشانی قاب\" ارائه می‌دهند که کنار بخش آغازین قاب پشته "
"قرار می‌گیرد، که مقادیر محلی با سهولت بیشتر به‌واسطه این مقدار می‌توانند "
"مورد خطاب قرار گیرند. <xref linkend=\"COD\"/> نشانی بازگشتی درخواست‌های تابع "
"<_:indexterm-5/> <_:indexterm-6/> <_:indexterm-7/> <_:indexterm-8/> نیز در "
"پشته نگه داشته می‌شود، و این می‌تواند دلیل بهره‌جوهای سرریز پشته باشد، چرا "
"که سرریز کردن یک متغیر محلی در یک تابع می‌تواند نشانی آن تابع را بازنویسی "
"کند، که این امر بالقوه به یک کاربر بد اندیش اجازهٔ اجرای هر کدی که بخواهد را "
"می‌دهد."

#. (itstool) path: sect1/para
#: book.translate.xml:3048
msgid ""
"Although stack-based attacks are by far the most common, it would also be "
"possible to overrun the stack with a heap-based (malloc/free) attack."
msgstr ""
"گرچه حملات مبتنی بر پشته با اختلاف رایج‌ترین آنها هستند، اما سرریز کردن پشته "
"از طریق حملهٔ مبتنی بر هیپ (malloc/free) نیز ممکن است."

#. (itstool) path: sect1/para
#: book.translate.xml:3052
msgid ""
"The C programming language does not perform automatic bounds checking on "
"arrays or pointers as many other languages do. In addition, the standard C "
"library is filled with a handful of very dangerous functions."
msgstr ""
"زبان برنامه‌نویسی C به‌طور خودکار بررسی حدود را بر روی آرایه‌ها یا اشاره‌"
"گرها چنانکه بسیاری از زبان‌ها انجام می‌دهند، انجام نمی‌دهد. همچنین، کتابخانهٔ"
" استاندارد C پر است از تعداد انگشت‌شماری از توابع بسیار خطرناک."

#. (itstool) path: row/entry
#: book.translate.xml:3060
msgid "<function>strcpy</function>(char *dest, const char *src)"
msgstr "<function>strcpy</function>(char *dest, const char *src)"

#. (itstool) path: entry/simpara
#: book.translate.xml:3062 book.translate.xml:3067
msgid "May overflow the dest buffer"
msgstr "ممکن است میان‌گیر dest سرریز شود"

#. (itstool) path: row/entry
#: book.translate.xml:3065
msgid "<function>strcat</function>(char *dest, const char *src)"
msgstr "<function>strcat</function>(char *dest, const char *src)"

#. (itstool) path: row/entry
#: book.translate.xml:3070
msgid "<function>getwd</function>(char *buf)"
msgstr "<function>getwd</function>(char *buf)"

#. (itstool) path: entry/simpara
#: book.translate.xml:3071
msgid "May overflow the buf buffer"
msgstr "ممکن است میان‌گیر buf سرریز شود"

#. (itstool) path: row/entry
#: book.translate.xml:3074
msgid "<function>gets</function>(char *s)"
msgstr "<function>gets</function>(char *s)"

#. (itstool) path: entry/simpara
#: book.translate.xml:3075
msgid "May overflow the s buffer"
msgstr "ممکن است میان‌گیر s سرریز شود"

#. (itstool) path: row/entry
#: book.translate.xml:3078
msgid "<function>[vf]scanf</function>(const char *format, ...)"
msgstr "<function>[vf]scanf</function>(const char *format, ...)"

#. (itstool) path: entry/simpara
#: book.translate.xml:3080
msgid "May overflow its arguments."
msgstr "ممکن است براهین آن سرریز شوند."

#. (itstool) path: row/entry
#: book.translate.xml:3083
msgid "<function>realpath</function>(char *path, char resolved_path[])"
msgstr "<function>realpath</function>(char *path, char resolved_path[])"

#. (itstool) path: entry/simpara
#: book.translate.xml:3085
msgid "May overflow the path buffer"
msgstr "ممکن است میان‌گیر path سرریز شود"

#. (itstool) path: row/entry
#: book.translate.xml:3088
msgid "<function>[v]sprintf</function>(char *str, const char *format, ...)"
msgstr "<function>[v]sprintf</function>(char *str, const char *format, ...)"

#. (itstool) path: entry/simpara
#: book.translate.xml:3090
msgid "May overflow the str buffer."
msgstr "ممکن است میان‌گیر str سرریز شود."

#. (itstool) path: sect2/title
#: book.translate.xml:3096
msgid "Example Buffer Overflow"
msgstr "سرریز میان‌گیر نمونه"

#. (itstool) path: sect2/para
#: book.translate.xml:3098
msgid ""
"The following example code contains a buffer overflow designed to overwrite "
"the return address and skip the instruction immediately following the "
"function call. (Inspired by <xref linkend=\"Phrack\"/>)"
msgstr ""
"نمونه کد پیش رو حاوی یک سرریز میان‌گیر است که به‌منظور جانویسی نشانی بازگشت "
"و پرش از دستور‌العمل‌ بلافاصله پس از فراخوانی تابع طراحی شده است. (الهام "
"گرفته از <xref linkend=\"Phrack\"/>)"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3103
#, no-wrap
msgid ""
"#include &lt;stdio.h&gt;\n"
"\n"
"void manipulate(char *buffer) {\n"
"  char newbuffer[80];\n"
"  strcpy(newbuffer,buffer);\n"
"}\n"
"\n"
"int main() {\n"
"  char ch,buffer[4096];\n"
"  int i=0;\n"
"\n"
"  while ((buffer[i++] = getchar()) != '\\n') {};\n"
"\n"
"  i=1;\n"
"  manipulate(buffer);\n"
"  i=2;\n"
"  printf(\"The value of i is : %d\\n\",i);\n"
"  return 0;\n"
"}"
msgstr ""
"#include &lt;stdio.h&gt;\n"
"\n"
"void manipulate(char *buffer) {\n"
"  char newbuffer[80];\n"
"  strcpy(newbuffer,buffer);\n"
"}\n"
"\n"
"int main() {\n"
"  char ch,buffer[4096];\n"
"  int i=0;\n"
"\n"
"  while ((buffer[i++] = getchar()) != '\\n"
"') {};\n"
"\n"
"  i=1;\n"
"  manipulate(buffer);\n"
"  i=2;\n"
"  printf(\"The value of i is : %d\\n"
"\",i);\n"
"  return 0;\n"
"}"

#. (itstool) path: sect2/para
#: book.translate.xml:3123
msgid ""
"Let us examine what the memory image of this process would look like if we "
"were to input 160 spaces into our little program before hitting return."
msgstr ""
"بگذارید بررسی کنیم نمای حافظهٔ این پردازش به چه شکل می‌شد چنانچه قرار بود "
"۱۶۰ فاصله درون برنامهٔ کوچک خود وارد کنیم، قبل از زدن کلید return."

#. (itstool) path: sect2/para
#: book.translate.xml:3127
msgid "[XXX figure here!]"
msgstr "[XXX figure here!]"

#. (itstool) path: sect2/para
#: book.translate.xml:3129
msgid ""
"Obviously more malicious input can be devised to execute actual compiled "
"instructions (such as exec(/bin/sh))."
msgstr ""
"بدیهی است که ورودی‌های مخرب بیشتری می‌توان استفاده کرد که دستورالعمل‌های "
"همگردانی شده واقعی (مانند exec(/bin/sh)) را اجرا کنند."

#. (itstool) path: sect2/title
#: book.translate.xml:3133
msgid "Avoiding Buffer Overflows"
msgstr "جلوگیری از سرریز میان‌گیر"

#. (itstool) path: para/indexterm
#: book.translate.xml:3140
msgid "<primary>string copy functions</primary> <secondary>strncpy</secondary>"
msgstr "<primary>توابع کپی‌کردن رشته</primary> <secondary>strncpy</secondary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3144
msgid "<primary>string copy functions</primary> <secondary>strncat</secondary>"
msgstr "<primary>توابع کپی‌کردن رشته</primary> <secondary>strncat</secondary>"

#. (itstool) path: para/indexterm
#: book.translate.xml:3156
msgid "<primary>NUL termination</primary>"
msgstr "<primary>پایانهٔ NUL</primary>"

#. (itstool) path: sect2/para
#: book.translate.xml:3135
msgid ""
"The most straightforward solution to the problem of stack-overflows is to "
"always use length restricted memory and string copy functions. "
"<function>strncpy</function> and <function>strncat</function> are part of "
"the standard C library. <_:indexterm-1/> <_:indexterm-2/> These functions "
"accept a length value as a parameter which should be no larger than the size "
"of the destination buffer. These functions will then copy up to `length' "
"bytes from the source to the destination. However there are a number of "
"problems with these functions. Neither function guarantees NUL termination "
"if the size of the input buffer is as large as the <_:indexterm-3/> "
"destination. The length parameter is also used inconsistently between "
"strncpy and strncat so it is easy for programmers to get confused as to "
"their proper usage. There is also a significant performance loss compared to "
"<function>strcpy</function> when copying a short string into a large buffer "
"since <function>strncpy</function> NUL fills up the size specified."
msgstr ""
"ساده‌ترین راه‌حل برای مشکلات سرریزی پشته این است که همیشه از حافظه محدود و "
"توابع کپی کردن رشته استفاده کنید. توابع <function>strncpy</function> و "
"<function>strncat</function> بخشی از کتابخانهٔ استاندارد C هستند. <_:"
"indexterm-1/> <_:indexterm-2/> این توابع یک مقدار طول به‌عنوان پارامتر "
"دریافت می‌کند که نباید بزرگتر از اندازهٔ میانگیر مقصد باشد. این توابع سپس به "
"اندازهٔ آن مقدار بایت از مبدأ به مقصد کپی می‌کنند. با این حال این توابع هم "
"مشکلاتی دارند. هیچ کدام پایان‌دهی NUL را در صورتی که اندازه میانگیر ورودی به "
"بزرگی خروجی <_:indexterm-3/> باشد تضمین نمی‌کنند. همچنین پارامتر طول بین "
"strncpy و strncat به یک شکل استفاده نمی‌شود، از این رو برنامه‌نویسان در خصوص "
"استفاده درست آنها به سادگی گیج می‌شوند. همچنین به نسبت <function>strcpy</"
"function> از دست دهی عملکرد قابل توجهی به‌هنگام کپی کردن یک رشته کوتاه به یک "
"میانگیر بزرگ وجود دارد، چرا که NUL مختص به <function>strncpy</function> کل "
"اندازه مشخص شده را پر می‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:3166
msgid ""
"Another memory copy implementation exists to get around these problems. The "
"<function>strlcpy</function> and <function>strlcat</function> functions "
"guarantee that they will always null terminate the destination string when "
"given a non-zero length argument."
msgstr ""
"پیاده‌سازی دیگری از کپی‌برداری حافظه برای مدیریت این مشکلات وجود دارد. توابع "
"<function>strlcpy</function> و <function>strlcat</function> تضمین می‌کنند که "
"همیشه رشتهٔ مقصد را به‌هنگام داده شدن برهانی به اندازهٔ غیر صفر، پایان‌دهیِ "
"پوچ کند."

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3172
msgid "<primary>string copy functions</primary> <secondary>strlcpy</secondary>"
msgstr "<primary>توابع کپی‌کردن رشته</primary> <secondary>strlcpy</secondary>"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3177
msgid "<primary>string copy functions</primary> <secondary>strlcat</secondary>"
msgstr "<primary>توابع کپی‌کردن رشته</primary> <secondary>strlcat</secondary>"

#. (itstool) path: sect3/title
#: book.translate.xml:3182
msgid "Compiler based run-time bounds checking"
msgstr "بررسی حدود زمان اجرا بر پایهٔ همگردان"

#. (itstool) path: sect3/indexterm
#: book.translate.xml:3184
msgid ""
"<primary>bounds checking</primary> <secondary>compiler-based</secondary>"
msgstr "<primary>بررسی حدود</primary> <secondary>بر پایهٔ همگردان</secondary>"

#. (itstool) path: sect3/para
#: book.translate.xml:3187
msgid ""
"Unfortunately there is still a very large assortment of code in public use "
"which blindly copies memory around without using any of the bounded copy "
"routines we just discussed. Fortunately, there is a way to help prevent such "
"attacks — run-time bounds checking, which is implemented by several C/C++ "
"compilers."
msgstr ""
"شوربختانه، هنوز هم گسترهٔ بسیار بزرگی از کد در دسترس عموم هست که کورکورانه "
"بدون رعایت روال کپی‌‌برداریِ محدود که پیش‌تر در موردش بحث کردیم از حافظه کپی‌"
"برداری می‌کند. خوشبختانه، راهی برای پیشگیری از چنین حملاتی وجود دارد — بررسی "
"حدود زمان اجرا، که توسط چندین همگردان C/C++ پیاده‌سازی شده است."

#. (itstool) path: sect3/indexterm
#: book.translate.xml:3194
msgid "<primary>ProPolice</primary>"
msgstr "<primary>ProPolice</primary>"

#. (itstool) path: sect3/indexterm
#: book.translate.xml:3195
msgid "<primary>StackGuard</primary>"
msgstr "<primary>StackGuard</primary>"

#. (itstool) path: sect3/indexterm
#: book.translate.xml:3196
msgid "<primary>gcc</primary>"
msgstr "<primary>gcc</primary>"

#. (itstool) path: sect3/para
#: book.translate.xml:3198
msgid ""
"ProPolice is one such compiler feature, and is integrated into "
"<citerefentry><refentrytitle>gcc</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> versions 4.1 and later. It replaces and extends the earlier "
"StackGuard <citerefentry><refentrytitle>gcc</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry> extension."
msgstr ""
"ProPolice از همان نوع همگردان‌هاست، و در نسخه‌های ۴.۱ از "
"<citerefentry><refentrytitle>gcc</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> و بعدتر ادغام شده است. این پسوند قدیمیِ StackGuard "
"<citerefentry><refentrytitle>gcc</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> را جایگزین می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:3202
msgid ""
"ProPolice helps to protect against stack-based buffer overflows and other "
"attacks by laying pseudo-random numbers in key areas of the stack before "
"calling any function. When a function returns, these <quote>canaries</quote> "
"are checked and if they are found to have been changed the executable is "
"immediately aborted. Thus any attempt to modify the return address or other "
"variable stored on the stack in an attempt to get malicious code to run is "
"unlikely to succeed, as the attacker would have to also manage to leave the "
"pseudo-random canaries untouched."
msgstr ""
"ProPolice با قرار دادن اعداد شبه تصادفی در نقاط کلیدی پشته قبل از فراخوانی "
"هرگونه تابع، به محافظت در برابر سرریزهای میان‌گیر مبتنی‌بر پشته و سایر حملات "
"کمک می‌کند. زمانی‌که یک تابع برمی‌گردد، این <quote>هشدارها</quote> بررسی می‌"
"شوند و چنانچه دچار تغییر شده باشند، پروندهٔ اجراپذیر به‌سرعت پایان می‌یابد. "
"از این رو هر تلاشی در راستای تغییر نشانی بازگشت یا سایر متغیرهای ذخیره شده "
"در پشته به‌منظور اجرای کد مخرب نافرجام خواهد بود، زیرا مهاجم مجبور می‌شود تا "
"هشدارهای شبه تصادفی را هم دست‌نخورده بگذارد."

#. (itstool) path: sect3/para
#: book.translate.xml:3215
msgid ""
"Recompiling your application with ProPolice is an effective means of "
"stopping most buffer-overflow attacks, but it can still be compromised."
msgstr ""
"همگردانی مجدد برنامهٔ خود با ProPolice شیوه‌ای مؤثر برای متوقف کردن بیشتر "
"حملات سرریز میان‌گیر است، گرچه هنوز هم می‌تواند در معرض خطر قرار گیرد."

#. (itstool) path: sect3/title
#: book.translate.xml:3221
msgid "Library based run-time bounds checking"
msgstr "بررسی حدود زمان اجرا بر پایهٔ کتابخانه"

#. (itstool) path: sect3/indexterm
#: book.translate.xml:3223
msgid "<primary>bounds checking</primary> <secondary>library-based</secondary>"
msgstr "<primary>بررسی حدود</primary> <secondary>بر پایهٔ کتابخانه</secondary>"

#. (itstool) path: sect3/para
#: book.translate.xml:3228
msgid ""
"Compiler-based mechanisms are completely useless for binary-only software "
"for which you cannot recompile. For these situations there are a number of "
"libraries which re-implement the unsafe functions of the C-library "
"(<function>strcpy</function>, <function>fscanf</function>, <function>getwd</"
"function>, etc..) and ensure that these functions can never write past the "
"stack pointer."
msgstr ""
"سازوکارهای مبتنی‌بر همگردان برای نرم‌افزار فقط دودویی که قابلیت همگردانی "
"مجدد را ندارد سراسر بیهوده هستند. در چنین شرایطی چندین کتابخانه هستند که "
"توابع ناامن کتابخانهٔ C را مجدد پیاده‌سازی می‌کنند "
"(<function>strcpy</function>، <function>fscanf</function>، <function>getwd</"
"function> و غیره ...) و اطمینان پیدا می‌کنند که این توابع هرگز نتوانند فراتر "
"از اشاره‌گر پشته بنویسند."

#. (itstool) path: listitem/simpara
#: book.translate.xml:3237
msgid "libsafe"
msgstr "libsafe"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3238
msgid "libverify"
msgstr "libverify"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3239
msgid "libparanoia"
msgstr "libparanoia"

#. (itstool) path: sect3/para
#: book.translate.xml:3242
msgid ""
"Unfortunately these library-based defenses have a number of shortcomings. "
"These libraries only protect against a very small set of security related "
"issues and they neglect to fix the actual problem. These defenses may fail "
"if the application was compiled with -fomit-frame-pointer. Also, the "
"LD_PRELOAD and LD_LIBRARY_PATH environment variables can be overwritten/"
"unset by the user."
msgstr ""
"شوربختانه این دست محافظت‌های مبتنی‌بر کتابخانه دارای کاستی‌هایی هستند. این "
"کتابخانه‌ها تنها در برابر تعداد بسیار کمی از مسائل امنیتی محافظت می‌کنند و "
"در رفع مشکل اصلی ناتوان هستند. این دفاعیات ممکن است چنانچه برنامه با -fomit-"
"frame-pointer همگردان شده باشد شکست بخورند. همچنین، متغیرهای محیطی ِ"
"LD_PRELOAD و LD_LIBRARY_PATH می‌توانند توسط کاربر رونوشت/بازنشانده شوند."

#. (itstool) path: sect1/title
#: book.translate.xml:3254
msgid "SetUID issues"
msgstr "مشکلات SetUID"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3256
msgid "<primary>seteuid</primary>"
msgstr "<primary>seteuid</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3258
msgid ""
"There are at least 6 different IDs associated with any given process. "
"Because of this you have to be very careful with the access that your "
"process has at any given time. In particular, all seteuid applications "
"should give up their privileges as soon as it is no longer required."
msgstr ""
"حداقل شش شناسه مختلف مرتبط با هر فرآیند داده شده وجود دارد. ازین رو شما باید "
"مراقب بسیار دسترسی‌ای که فرآیند شما در هر زمان معین دارد باشید. به‌طور خاص، "
"تمام برنامه‌های seteuid باید از امتیازات خود به محض این که دیگر لازم نباشد "
"صرف‌نظر کنند."

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3264
msgid "<primary>user IDs</primary> <secondary>real user ID</secondary>"
msgstr ""
"<primary>شناسه‌های کاربر</primary> <secondary>شناسهٔ کاربر حقیقی</secondary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3268
msgid "<primary>user IDs</primary> <secondary>effective user ID</secondary>"
msgstr ""
"<primary>شناسه‌های کاربر</primary> <secondary>شناسهٔ کاربر مؤثر</secondary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3273
msgid ""
"The real user ID can only be changed by a superuser process. The "
"<application>login</application> program sets this when a user initially "
"logs in and it is seldom changed."
msgstr ""
"شناسهٔ کاربر حقیقی تنها توسط فرآیند مرتبط با ابرکاربر قابل تغییر هست. برنامهٔ"
" <application>login</application> زمانی‌که یک کاربر ابتدا وارد سامانه می‌شود "
"این را مقرر می‌کند و این به‌ندرت تغییر می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:3277
msgid ""
"The effective user ID is set by the <function>exec()</function> functions if "
"a program has its seteuid bit set. An application can call "
"<function>seteuid()</function> at any time to set the effective user ID to "
"either the real user ID or the saved set-user-ID. When the effective user ID "
"is set by <function>exec()</function> functions, the previous value is saved "
"in the saved set-user-ID."
msgstr ""
"درصورتی‌که seteuid برای یک برنامه تنظیم شده باشد، شناسهٔ کاربر مؤثر توسط "
"توابع <function>exec()</function> تنظیم می‌شود. یک برنامه می‌تواند "
"<function>seteuid()</function> را هر زمان فراخوانی کند تا شناسهٔ کاربر مؤثر "
"را یا روی شناسهٔ کاربر حقیقی یا روی مقدار ذخیره‌شدهٔ set-user-ID تنظیم کند. "
"هنگامی‌که شناسهٔ کاربر مؤثر توسط توابع <function>exec()</function> تنظیم "
"می‌شود، مقدار قبلی در set-user-ID ذخیره‌شده ذخیره می‌شود."

#. (itstool) path: sect1/title
#: book.translate.xml:3287
msgid "Limiting your program's environment"
msgstr "محدودسازی محیط برنامه"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3289
msgid "<primary>chroot()</primary>"
msgstr "<primary>chroot()</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3291
msgid ""
"The traditional method of restricting a process is with the "
"<function>chroot()</function> system call. This system call changes the root "
"directory from which all other paths are referenced for a process and any "
"child processes. For this call to succeed the process must have execute "
"(search) permission on the directory being referenced. The new environment "
"does not actually take effect until you <function>chdir()</function> into "
"your new environment. It should also be noted that a process can easily "
"break out of a chroot environment if it has root privilege. This could be "
"accomplished by creating device nodes to read kernel memory, attaching a "
"debugger to a process outside of the <citerefentry><refentrytitle>chroot</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> environment, or in "
"many other creative ways."
msgstr ""
"روش سنتی محدود کردنِ یک فرآیند با فراخوان سامانهٔ <function>chroot()</"
"function> همراه است. این فراخوان سامانه، مسیر ریشه‌ای را که تمام مسیرهای یک "
"فرآیند و هرگونه فرآیند فرزند برای آن ارجاع داده شده است را تغییر می‌دهد. "
"برای آنکه این فراخوان موفق شود، فرآیند باید اجازهٔ اجرا (جست‌و‌جو) در مسیری "
"که بدان ارجاع داده می‌شود را داشته باشد. محیط جدید در واقع تا زمانی‌که شما "
"به محیط جدید <function>chdir()</function> بدهید ، تأثیر نمی‌پذیرد. همچنین "
"لازم به اشاره است که یک فرآیند چنانچه دارای امتیاز ریشه باشد به‌آسانی می‌"
"تواند از محیط chroot خارج شود. این می‌تواند با ساختن گره‌های دستگاه برای "
"خواندن حافظهٔ هسته، الصاق اشکال‌زدا به فرآیندی خارج از محیطِ <citerefentry><r"
"efentrytitle>chroot</refentrytitle><manvolnum>8</manvolnum></citerefentry>، "
"یا بسیاری روش‌های خلاقانهٔ دیگر انجام گیرد."

#. (itstool) path: sect1/para
#: book.translate.xml:3306
msgid ""
"The behavior of the <function>chroot()</function> system call can be "
"controlled somewhat with the kern.chroot_allow_open_directories "
"<command>sysctl</command> variable. When this value is set to 0, "
"<function>chroot()</function> will fail with EPERM if there are any "
"directories open. If set to the default value of 1, then <function>chroot()</"
"function> will fail with EPERM if there are any directories open and the "
"process is already subject to a <function>chroot()</function> call. For any "
"other value, the check for open directories will be bypassed completely."
msgstr ""
"عملکرد فراخوان سامانهٔ <function>chroot()</function> می‌تواند تاحدی توسط "
"متغیر <command>sysctl</command>، یعنی kern.chroot_allow_open_directories، "
"نظارت شود. هنگامی‌که این مقدار بر روی صفر قرار گیرد و چنانچه مسیری باز وجود "
"داشته باشد، <function>chroot()</function> و EPERM ناکام می‌مانند. اگر بر روی "
"مقدار پیش‌فرض ۱ قرار گیرد، در صورتی‌که مسیری باز باشد و فرآیند از قبل با "
"<function>chroot()</function> در ارتباط باشد، <function>chroot()</function> "
"و EPERM شکست می‌خورند. برای مقادیر دیگر، بررسی برای مسیرهای باز با موفقیت "
"انجام می‌شود."

#. (itstool) path: sect2/title
#: book.translate.xml:3317
msgid "FreeBSD's jail functionality"
msgstr "عملکرد زندان FreeBSD"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3319
msgid "<primary>jail</primary>"
msgstr "<primary>jail</primary>"

#. (itstool) path: sect2/para
#: book.translate.xml:3321
msgid ""
"The concept of a Jail extends upon the <function>chroot()</function> by "
"limiting the powers of the superuser to create a true `virtual server'. Once "
"a prison is set up all network communication must take place through the "
"specified IP address, and the power of \"root privilege\" in this jail is "
"severely constrained."
msgstr ""
"مفهوم زندان بر روی <function>chroot()</function> و با محدود کردن قدرت "
"ابرکاربر در ساخت 'کارساز مجازی' گسترش می‌یابد. هنگامی‌که زندان ساخته می‌شود، "
"تمام ارتباطات شبکه باید از طریق نشانی IP مشخص شده آغاز شوند، و قدرت \"امتیاز "
"ریشه\" در این زندان به‌شدت محدود می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:3328
msgid ""
"While in a prison, any tests of superuser power within the kernel using the "
"<function>suser()</function> call will fail. However, some calls to "
"<function>suser()</function> have been changed to a new interface "
"<function>suser_xxx()</function>. This function is responsible for "
"recognizing or denying access to superuser power for imprisoned processes."
msgstr ""
"زمانی‌که در زندان هستید، هر آزمونی برای حصول قدرت ابرکاربر در محدودهٔ هسته "
"توسط فراخوان <function>suser()</function> نافرجام خواهد بود. گرچه، برخی "
"فراخوان‌ها به <function>suser()</function>، به یک رابط جدید "
"<function>suser_xxx()</function> تغییر یافته‌اند. این تابع مسئول تشخیص یا "
"انکار دسترسی به قدرت ابرکاربری برای فرآیندهای محبوس شده است."

#. (itstool) path: sect2/para
#: book.translate.xml:3335
msgid "A superuser process within a jailed environment has the power to:"
msgstr "یک پردازش ابرکاربر در محیطی زندانی شده قدرت انجام موارد پیش‌رو را دارد:"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3339
msgid ""
"Manipulate credential with <function>setuid</function>, <function>seteuid</"
"function>, <function>setgid</function>, <function>setegid</function>, "
"<function>setgroups</function>, <function>setreuid</function>, "
"<function>setregid</function>, <function>setlogin</function>"
msgstr ""
"دستکاری کردن اعتبار با <function>setuid</function>، "
"<function>seteuid</function>، <function>setgid</function>، "
"<function>setegid</function>، <function>setgroups</function>، "
"<function>setreuid</function>، <function>setregid</function>، "
"<function>setlogin</function>"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3344
msgid "Set resource limits with <function>setrlimit</function>"
msgstr "تنظیم کردن منابع با <function>setrlimit</function>"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3345
msgid "Modify some sysctl nodes (kern.hostname)"
msgstr "ویرایش کردن برخی از گره‌های sysctl (kern.hostname)"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3347
msgid "<function>chroot()</function>"
msgstr "<function>chroot()</function>"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3348
msgid ""
"Set flags on a vnode: <function>chflags</function>, <function>fchflags</"
"function>"
msgstr ""
"تنظیم کردن نشان بر روی یک vnode: <function>chflags</function>، "
"<function>fchflags</function>"

#. (itstool) path: listitem/simpara
#: book.translate.xml:3351
msgid ""
"Set attributes of a vnode such as file permission, owner, group, size, "
"access time, and modification time."
msgstr ""
"نتظیم کردن صفات یک vnode مانند مجوز پرونده، مالک، گروه، اندازه، زمان دسترسی، "
"زمان ویرایش."

#. (itstool) path: listitem/simpara
#: book.translate.xml:3354
msgid "Bind to privileged ports in the Internet domain (ports &lt; 1024)"
msgstr "اتصال به درگاه‌های مجاز در حوزه اینترنت (ports &lt; 1024)"

#. (itstool) path: sect2/para
#: book.translate.xml:3358
msgid ""
"<function>Jail</function> is a very useful tool for running applications in "
"a secure environment but it does have some shortcomings. Currently, the IPC "
"mechanisms have not been converted to the <function>suser_xxx</function> so "
"applications such as MySQL cannot be run within a jail. Superuser access may "
"have a very limited meaning within a jail, but there is no way to specify "
"exactly what \"very limited\" means."
msgstr ""
"<function>Jail</function> یک ابزار بسیار مفید برای راه‌اندازی برنامه‌ها در "
"یک محیط ایمن است، اما کاستی‌هایی نیز دارد. هم‌اکنون، سازوکارهای IPC به "
"<function>suser_xxx</function> تبدیل نشده‌اند، از این رو برنامه‌های چون "
"MySQL نمی‌توانند درون زندان اجرا شوند. دسترسی ابرکاربری می‌تواند مفهومی "
"بسیار محدود درون زندان داشته باشد، اما هیچ راهی برای تشخیص دقیق مفهوم \"بسیار"
" محدود\" وجود ندارد."

#. (itstool) path: sect2/title
#: book.translate.xml:3367
msgid ""
"<trademark class=\"registered\">POSIX</trademark>.1e Process Capabilities"
msgstr "توانایی‌های فرآیند <trademark class=\"registered\">POSIX</trademark>.1e"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3369
msgid "<primary>POSIX.1e Process Capabilities</primary>"
msgstr "<primary>توانایی‌های فرآیند </primary>POSIX.1e"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3370
msgid "<primary>TrustedBSD</primary>"
msgstr "<primary>TrustedBSD</primary>"

#. (itstool) path: sect2/para
#: book.translate.xml:3372
msgid ""
"<trademark class=\"registered\">POSIX</trademark> has released a working "
"draft that adds event auditing, access control lists, fine grained "
"privileges, information labeling, and mandatory access control."
msgstr ""
"<trademark class=\"registered\">POSIX</trademark> پیش‌نویسی منتشر کرده است "
"که رسیدگی به رویداد، فهرست‌های نظارت دسترسی، امتیاز‌های بسیار دقیق، برچسب‌"
"گذاری اطلاعات، و نظارت دسترسی اجباری را اضافه می‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:3375
msgid ""
"This is a work in progress and is the focus of the <link xlink:href=\"http://"
"www.trustedbsd.org/\">TrustedBSD</link> project. Some of the initial work "
"has been committed to FreeBSD-CURRENT (cap_set_proc(3))."
msgstr ""
"این یک کار در حال انجام است و تمرکز پروژهٔ <link xlink:href=\"http://www."
"trustedbsd.org/\">TrustedBSD</link> است. برخی کارهای ابتدایی بر روی FreeBSD-"
"CURRENT (cap_set_proc(3)) ثبت شده‌اند."

#. (itstool) path: sect1/title
#: book.translate.xml:3383
msgid "Trust"
msgstr "اعتماد"

#. (itstool) path: sect1/para
#: book.translate.xml:3385
msgid ""
"An application should never assume that anything about the users environment "
"is sane. This includes (but is certainly not limited to): user input, "
"signals, environment variables, resources, IPC, mmaps, the filesystem "
"working directory, file descriptors, the # of open files, etc."
msgstr ""
"یک برنامه هرگز نباید فرض کند که هر چیزی در ارتباط با محیط کاربران عاقلانه "
"است. این شامل (اما مطمئناً نه محدود به): ورودی کاربر، سیگنال‌ها، متغیرهای "
"محیطی، منابع، IPC، mmaps، مسیر کاری سامانهٔ پرونده، توصیف‌گرهای پرونده، # در "
"پرونده‌های باز، و غیره است."

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3391
msgid "<primary>positive filtering</primary>"
msgstr "<primary>پالایش مثبت</primary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3392
msgid "<primary>data validation</primary>"
msgstr "<primary>اعتبارسنجی داده</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3394
msgid ""
"You should never assume that you can catch all forms of invalid input that a "
"user might supply. Instead, your application should use positive filtering "
"to only allow a specific subset of inputs that you deem safe. Improper data "
"validation has been the cause of many exploits, especially with CGI scripts "
"on the world wide web. For filenames you need to be extra careful about "
"paths (\"../\", \"/\"), symbolic links, and shell escape characters."
msgstr ""
"هرگز نباید فرض کنید که می‌توانید تمام اشکال ورودی نامعتبری که ممکن است کاربر "
"عرضه کند را بگیرید. در عوض، برنامه شما باید از فیلتری قطعی برای قبول کردن "
"مجموعهٔ خاص ورودی‌هایی که شما ایمن می‌دانید استفاده کند. اعتبارسنجی نامناسب "
"دلیل سوءاستفاده‌های بسیاری بوده است، به‌ویژه اجرانامه‌های CGI بر روی تارِ "
"جهان‌گستر. برای اسامی پرونده‌ها نیاز به دقت بسیار در مورد مسیرها (\"../\", \""
"/\")، پیوندهای نمادین، و نویسه‌های رهایی پوسته دارید."

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3403
msgid "<primary>Perl Taint mode</primary>"
msgstr "<primary>حالت Taint در Perl</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3405
msgid ""
"Perl has a really cool feature called \"Taint\" mode which can be used to "
"prevent scripts from using data derived outside the program in an unsafe "
"way. This mode will check command line arguments, environment variables, "
"locale information, the results of certain syscalls (<function>readdir()</"
"function>, <function>readlink()</function>, <function>getpwxxx()</"
"function>), and all file input."
msgstr ""
"Perl امکان بسیار جالبی به نام \"Taint\" دارد که می‌تواند برای جلوگیری از به‌"
"کاربردن داده‌های به‌دست آمدهٔ خارج از برنامه توسط اجرانامه‌ها به‌روشی ناامن "
"مورد استفاده قرار گیرد. این حالت براهین خط فرمان، متغیرهای محیطی، اطلاعات "
"محلی، نتایج برخی فراخوان‌های سامانه (<function>readdir()</function>, "
"<function>readlink()</function>, <function>getpwxxx()</function>)، و تمام "
"ورودی‌های پرونده را بررسی می‌کند."

#. (itstool) path: sect1/title
#: book.translate.xml:3416
msgid "Race Conditions"
msgstr "حالات تسابق"

#. (itstool) path: sect1/para
#: book.translate.xml:3418
msgid ""
"A race condition is anomalous behavior caused by the unexpected dependence "
"on the relative timing of events. In other words, a programmer incorrectly "
"assumed that a particular event would always happen before another."
msgstr ""
"حالت تسابق، رفتار نامعمول برانگیخته از وابستگی نابه‌هنگام به زمان‌بندی نسبی "
"رویدادها است. به بیان دیگر، یک برنامه‌نویس به اشتباه می‌پنداشت که یک رویداد "
"بخصوص همیشه قبل از دیگری روی می‌دهد."

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3423
msgid "<primary>race conditions</primary> <secondary>signals</secondary>"
msgstr "<primary>حالات تسابق</primary> <secondary>سیگنال‌ها</secondary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3426
msgid "<primary>race conditions</primary> <secondary>access checks</secondary>"
msgstr "<primary>حالات تسابق</primary> <secondary>بررسی‌های دسترسی</secondary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3429
msgid "<primary>race conditions</primary> <secondary>file opens</secondary>"
msgstr "<primary>حالات تسابق</primary> <secondary>پرونده‌های باز</secondary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3432
msgid ""
"Some of the common causes of race conditions are signals, access checks, and "
"file opens. Signals are asynchronous events by nature so special care must "
"be taken in dealing with them. Checking access with <function>access(2)</"
"function> then <function>open(2)</function> is clearly non-atomic. Users can "
"move files in between the two calls. Instead, privileged applications should "
"<function>seteuid()</function> and then call <function>open()</function> "
"directly. Along the same lines, an application should always set a proper "
"umask before <function>open()</function> to obviate the need for spurious "
"<function>chmod()</function> calls."
msgstr ""
"برخی از علل حالات تسابق شامل سیگنال‌ها، بررسی دسترسی، و پرونده‌های باز "
"هستند. سیگنال‌ها به‌طور طبیعی رویدادهایی ناهمزمان هستند، از این رو باید "
"مراقبت‌های ویژه‌ای در قبال آنها انجام گیرد. بررسی دسترسی توسط "
"<function>access(2)</function> و سپس <function>open(2)</function> آشکارا "
"غیراتمی است. کاربران می‌توانند پرونده‌ها را در بین دو سلول حرکت دهند. در عوض،"
" برنامه‌های امتیازدار باید <function>seteuid()</function> کنند و سپس "
"<function>open()</function> را به‌طور مستقیم فراخوانی کنند. در امتداد همان "
"خطوط، یک برنامه همیشه باید یک umask مناسب قبل از <function>open()</function> "
"قرار دهد تا نیازمندی برای فراخوان‌های نامعتبرِ <function>chmod()</function> "
"را برطرف کند."

#. (itstool) path: chapter/title
#: book.translate.xml:3455
msgid "Localization and Internationalization - L10N and I18N"
msgstr "بین‌المللی‌سازی و محلی‌سازی - L10N و I18N"

#. (itstool) path: sect1/title
#: book.translate.xml:3458
msgid "Programming I18N Compliant Applications"
msgstr "برنامه‌نویسی سازگار با I18N"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3459
msgid "<primary>Qt</primary>"
msgstr "<primary>Qt</primary>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3460
msgid "<primary>GTK</primary>"
msgstr "<primary>GTK</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3461
msgid ""
"To make your application more useful for speakers of other languages, we "
"hope that you will program I18N compliant. The GNU gcc compiler and GUI "
"libraries like QT and GTK support I18N through special handling of strings. "
"Making a program I18N compliant is very easy. It allows contributors to port "
"your application to other languages quickly. Refer to the library specific "
"I18N documentation for more details."
msgstr ""
"برای آنکه برنامهٔ خود را برای زبان‌های دیگر کاربردی‌تر کنید، ما امیدواریم که "
"شما سازگار با I18N برنامه‌نویسی کنید. همگرادان GNU gcc و کتابخانه‌های GUI "
"همچون QT و GTK از طریق بررسی ویژهٔ رشته‌ها از I18N پشتیبانی می‌کنند. "
"سازگارسازی یک برنامه با I18N بسیار آسان است. این اجازه را می‌دهد تا مشارکت‌"
"کنندگان برنامهٔ شما را به‌سرعت به زبان‌های دیگر پورت کنند. برای جزئیات بیشتر "
"به مستندات مخصوص کتابخانهٔ I18N رجوع کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:3469
msgid ""
"In contrast with common perception, I18N compliant code is easy to write. "
"Usually, it only involves wrapping your strings with library specific "
"functions. In addition, please be sure to allow for wide or multibyte "
"character support."
msgstr ""
"برخلاف برداشت‌های رایج، نوشتن کد سازگار با I18N آسان است. به‌طور معمول، تنها "
"شامل پیچیدن رشته‌های شما با توابع مخصوص کتابخانه است. به‌علاوه، خواهشمند است "
"از پشتیبانی نویسه‌های بسیط یا چندبایتی اطمینان پیدا کنید."

#. (itstool) path: sect2/title
#: book.translate.xml:3475
msgid "A Call to Unify the I18N Effort"
msgstr "فراخوانی برای متحد کردن اهتمام I18N"

#. (itstool) path: sect2/para
#: book.translate.xml:3477
msgid ""
"It has come to our attention that the individual I18N/L10N efforts for each "
"country has been repeating each others' efforts. Many of us have been "
"reinventing the wheel repeatedly and inefficiently. We hope that the various "
"major groups in I18N could congregate into a group effort similar to the "
"Core Team's responsibility."
msgstr ""
"این مسئله که تلاش‌های مستقلِ I18N/L10N برای هر کشور تکرار کارهای یکدیگر است "
"توجه ما را به خود جلب کرده است. بسیاری از ما در حال اختراع دوباره و ناکارآمد "
"چرج بوده‌ایم. امیدواریم که گروه‌های بزرگ مختلف در I18N بتوانند در یک گروه "
"شبیه به وظایف تیم اصلی جمع شوند."

#. (itstool) path: sect2/para
#: book.translate.xml:3484
msgid ""
"Currently, we hope that, when you write or port I18N programs, you would "
"send it out to each country's related FreeBSD mailing list for testing. In "
"the future, we hope to create applications that work in all the languages "
"out-of-the-box without dirty hacks."
msgstr ""
"در حال حاضر، امیدواریم زمانی‌که شما برنامه‌های I18N را می‌نویسید یا پورت "
"می‌کنید، آن را جداگانه برای آزمایش به فهرست پست‌سپاریِ FreeBSD مرتبط با همان "
"کشور ارسال کنید. در آینده، امیدواریم برنامه‌هایی بسازیم تا آماده و بدون نیاز "
"به کثیف‌کاری در تمام زبان‌ها کار کنند."

#. (itstool) path: sect2/para
#: book.translate.xml:3490
msgid ""
"The <link xlink:href=\"http://lists.FreeBSD.org/mailman/listinfo/freebsd-i18n"
"\">FreeBSD internationalization mailing list</link> has been established. If "
"you are an I18N/L10N developer, please send your comments, ideas, questions, "
"and anything you deem related to it."
msgstr ""
"<link xlink:href=\"http://lists.FreeBSD.org/mailman/listinfo/freebsd-i18n\""
">فهرست پست‌سپاری بین‌المللی‌سازی FreeBSD</link> ایجاد شده است. اگر شما یک "
"توسعه‌دهندهٔ I18N/L10N هستید، خواهشمند است نظرات، ایده‌ها، سوالات، و هر آنچه "
"که به نظرتان مرتبط با آن هست را برای ما ارسال کنید."

#. (itstool) path: sect2/title
#: book.translate.xml:3496
msgid "Perl and Python"
msgstr "Perl و Python"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3497
msgid "<primary>Perl</primary>"
msgstr "<primary>Perl</primary>"

#. (itstool) path: sect2/indexterm
#: book.translate.xml:3500
msgid "<primary>Python</primary>"
msgstr "<primary>Python</primary>"

#. (itstool) path: sect2/para
#: book.translate.xml:3504
msgid ""
"Perl and Python have I18N and wide character handling libraries. Please use "
"them for I18N compliance."
msgstr ""
"Perl و Python کتابخانه‌های رسیدگی به I18N و نویسه‌های بسیط دارند. خواهشمند "
"است برای سازگاری با I18N از آنها استفاده کنید."

#. (itstool) path: info/title
#: book.translate.xml:3510
msgid "Localized Messages with POSIX.1 Native Language Support (NLS)"
msgstr "پیام‌های بومی‌شده با پشتیبانی زبان بومی (NLS) POSIX.1"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3512
msgid ""
"<personname><firstname>Gábor</firstname><surname>Kövesdán</surname></"
"personname><contrib>Contributed by </contrib>"
msgstr ""
"<personname><firstname>Gábor</firstname><surname>Kövesdán</surname></"
"personname><contrib>نوشته شده توسط </contrib>"

#. (itstool) path: sect1/para
#: book.translate.xml:3518
msgid ""
"Beyond the basic I18N functions, like supporting various input encodings or "
"supporting national conventions, such as the different decimal separators, "
"at a higher level of I18N, it is possible to localize the messages written "
"to the output by the various programs. A common way of doing this is using "
"the POSIX.1 NLS functions, which are provided as a part of the FreeBSD base "
"system."
msgstr ""
"فراتر از کارکردهای ابتدایی I18N، مانند پشتیبانی کدگذاری‌های ورودی یا "
"قراردادهای ملی، شامل جداکننده‌های دهدهی گوناگون، در مرحلهٔ بالاتری از I18N، "
"بومی‌سازی پیام‌های نوشته شده در خروجی توسط برنامه‌های مختلف ممکن است. یکی از "
"راه‌های متداول برای انجام آن استفاده از توابع POSIX.1 NLS است، که به‌عنون "
"بخشی از سامانهٔ پایهٔ FreeBSD ارائه می‌شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:3526
msgid "Organizing Localized Messages into Catalog Files"
msgstr "ساماندهی پیام‌های محلی‌شده درون پرونده‌های فهرست"

#. (itstool) path: sect2/para
#: book.translate.xml:3528
msgid ""
"POSIX.1 NLS is based on catalog files, which contain the localized messages "
"in the desired encoding. The messages are organized into sets and each "
"message is identified by an integer number in the containing set. The "
"catalog files are conventionally named after the locale they contain "
"localized messages for, followed by the <literal>.msg</literal> extension. "
"For instance, the Hungarian messages for ISO8859-2 encoding should be stored "
"in a file called <filename>hu_HU.ISO8859-2</filename>."
msgstr ""
"POSIX.1 NLS بر مبنای پرونده‌های فهرست است، که شامل پیام‌های بومی‌شده در "
"کدگذاری مورد نظر هست. پیام‌ها در مجموعه‌هایی مرتب شده‌اند و هر پیام توسط یک "
"عدد صحیح در مجموعهٔ مشمول قابل شناسایی است. پرونده‌های فهرست به‌طور معمول از "
"روی پرونده‌های بومی که حاوی پیام‌های بومی‌شده برای آنها هستند نام‌گذاری "
"شده‌اند، به‌همراه پسوند <literal>.msg</literal>. برای مثال، پیام‌های "
"مجارستانی برای کدگذاری ISO8859-2 باید در پرونده‌ای به نام <filename>hu_HU."
"ISO8859-2</filename> ذخیره شوند."

#. (itstool) path: sect2/para
#: book.translate.xml:3537
msgid ""
"These catalog files are common text files that contain the numbered "
"messages. It is possible to write comments by starting the line with a "
"<literal>$</literal> sign. Set boundaries are also separated by special "
"comments, where the keyword <literal>set</literal> must directly follow the "
"<literal>$</literal> sign. The <literal>set</literal> keyword is then "
"followed by the set number. For example:"
msgstr ""
"این پرونده‌های فهرست پرونده‌های نوشتاری متداولی هستند که شامل پیام‌های شماره‌"
"گذاری شده هستند. این امکان وجود دارد تا نکات را با نشانهٔ <literal>$</"
"literal> شروع کنیم. همچنین حدود تعیین شده توسط نکات ویژه جدا شده‌اند، جایی‌"
"که واژهٔ کلیدی <literal>set</literal> باید به‌طور مستقیم نشانهٔ <literal>$</"
"literal> را دنبال کند. سپس واژهٔ کلیدی <literal>set</literal> توسط عدد تعیین "
"شده همراه می‌شود. برای مثال:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3544
#, no-wrap
msgid "$set 1"
msgstr "$set 1"

#. (itstool) path: sect2/para
#: book.translate.xml:3546
msgid ""
"The actual message entries start with the message number and followed by the "
"localized message. The well-known modifiers from "
"<citerefentry><refentrytitle>printf</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> are accepted:"
msgstr ""
"ورودی‌های پیام‌ فعلی با شمارهٔ پیام آغاز می‌شوند و با پیام‌های بومی‌شده "
"همراه می‌شوند. پیراینده‌های شناخته شدهٔ "
"<citerefentry><refentrytitle>printf</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> پذیرفته شده‌اند:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3550
#, no-wrap
msgid "15 \"File not found: %s\\n\""
msgstr ""
"15 \"File not found: %s\\n"
"\""

#. (itstool) path: sect2/para
#: book.translate.xml:3552
msgid ""
"The language catalog files have to be compiled into a binary form before "
"they can be opened from the program. This conversion is done with the "
"<citerefentry><refentrytitle>gencat</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> utility. Its first argument is the filename of the compiled "
"catalog and its further arguments are the input catalogs. The localized "
"messages can also be organized into more catalog files and then all of them "
"can be processed with <citerefentry><refentrytitle>gencat</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry>."
msgstr ""
"پرونده‌های فهرست زبان قبل از آنکه توسط برنامه باز شوند ابتدا باید در قالب "
"دودویی همگردان شوند. این تبدیل با ابزار "
"<citerefentry><refentrytitle>gencat</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> انجام می‌گیرد. اولین برهان آن نام پروندهٔ فهرست همگردان‌شده و "
"براهین بعدی آن فهرست‌های ورودی هستند. پیام‌های بومی‌شده می‌توانند داخل "
"پرونده‌های فهرست بیشتری مرتب شوند و سپس تمام آنها می‌توانند با "
"<citerefentry><refentrytitle>gencat</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> پردازش شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:3562
msgid "Using the Catalog Files from the Source Code"
msgstr "استفاده از پرونده‌های فهرست از کد منبع"

#. (itstool) path: sect2/para
#: book.translate.xml:3564
msgid ""
"Using the catalog files is simple. To use the related functions, "
"<filename>nl_types.h</filename> must be included. Before using a catalog, it "
"has to be opened with <citerefentry><refentrytitle>catopen</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry>. The function takes "
"two arguments. The first parameter is the name of the installed and compiled "
"catalog. Usually, the name of the program is used, such as "
"<application>grep</application>. This name will be used when looking for the "
"compiled catalog file. The <citerefentry><refentrytitle>catopen</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> call looks for this "
"file in <filename>/usr/share/nls/<replaceable>locale</replaceable>/"
"<replaceable>catname</replaceable></filename> and in <filename>/usr/local/"
"share/nls/<replaceable>locale</replaceable>/<replaceable>catname</"
"replaceable></filename>, where <literal>locale</literal> is the locale set "
"and <literal>catname</literal> is the catalog name being discussed. The "
"second parameter is a constant, which can have two values:"
msgstr ""
"به‌کاربردن پرونده‌های فهرست آسان است. برای استفاده از توابع مرتبط، "
"<filename>nl_types.h</filename> باید اضافه گردد. پیش از استفاده از فهرست، "
"لازم است آن را با <citerefentry><refentrytitle>catopen</refentrytitle><manvol"
"num>3</manvolnum></citerefentry> باز کرد. این تابع دو برهان را در بر می‌"
"گیرد. اولین مؤلفه نام فهرست نصب شده و همگردان شده است. به‌طور معمول، نام "
"برنامه مورد استفاده قرار گرفته است، مانند <application>grep</application>. "
"این نام زمانی‌که به‌دنبال پروندهٔ فهرست همگردانی‌شده است استفاده می‌شود. "
"فراخوان <citerefentry><refentrytitle>catopen</refentrytitle><manvolnum>3</man"
"volnum></citerefentry> در <filename>/usr/share/nls/"
"<replaceable>locale</replaceable>/<replaceable>catname</replaceable></"
"filename> و <filename>/usr/local/share/nls/"
"<replaceable>locale</replaceable>/<replaceable>catname</replaceable></"
"filename> به‌دنبال این پرونده می‌گردد، آنجاکه <literal>locale</literal> "
"مجموعهٔ بومی است و <literal>catname</literal> نام فهرستی است که از آن سخن می‌"
"گوییم. دومین مؤلفه ثابت است، که می‌تواند دارای دو مقدار باشد:"

#. (itstool) path: listitem/para
#: book.translate.xml:3581
msgid ""
"<literal>NL_CAT_LOCALE</literal>, which means that the used catalog file "
"will be based on <envar>LC_MESSAGES</envar>."
msgstr ""
"<literal>NL_CAT_LOCALE</literal>، این بدین معناست که پروندهٔ فهرست استفاده "
"شده بر مبنای <envar>LC_MESSAGES</envar> قرار خواهد گرفت."

#. (itstool) path: listitem/para
#: book.translate.xml:3586
msgid ""
"<literal>0</literal>, which means that <envar>LANG</envar> has to be used to "
"open the proper catalog."
msgstr ""
"<literal>0</literal>، این بدان معناست که <envar>LANG</envar> باید برای باز "
"کردن فهرست مناسب مورد استفاده قرار گیرد."

#. (itstool) path: sect2/para
#: book.translate.xml:3592
msgid ""
"The <citerefentry><refentrytitle>catopen</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> call returns a catalog identifier of type "
"<literal>nl_catd</literal>. Please refer to the manual page for a list of "
"possible returned error codes."
msgstr ""
"فراخوان <citerefentry><refentrytitle>catopen</refentrytitle><manvolnum>3</man"
"volnum></citerefentry> یک شناسهٔ فهرست از نوع <literal>nl_catd</literal> را "
"بازگردانی می‌کند. برای فهرستی از کدهای خطای احتمالی لطفاً به صفحهٔ راهنما "
"رجوع کنید."

#. (itstool) path: sect2/para
#: book.translate.xml:3596
msgid ""
"After opening a catalog <citerefentry><refentrytitle>catgets</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> can be used to "
"retrieve a message. The first parameter is the catalog identifier returned "
"by <citerefentry><refentrytitle>catopen</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>, the second one is the number of the set, the "
"third one is the number of the messages, and the fourth one is a fallback "
"message, which will be returned if the requested message cannot be retrieved "
"from the catalog file."
msgstr ""
"پس از باز کردن یک فهرست، می‌توان <citerefentry><refentrytitle>catgets</refent"
"rytitle><manvolnum>3</manvolnum></citerefentry> را برای بازیابی یک پیام به‌"
"کار برد. اولین پارامتر شناسهٔ فهرستی است که توسط <citerefentry><refentrytitle"
">catopen</refentrytitle><manvolnum>3</manvolnum></citerefentry> برگشت داده "
"می‌شود، دومین پارامتر شمارهٔ مجموعه هست، سومین پارامتر شمارهٔ پیام‌هاست، و "
"چهارمین پارامتر یک پیام جایگزین است، که چنانچه پیام درخواستی نتواند از "
"پروندهٔ فهرست دریافت شود، بازگشت داده می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:3603
msgid ""
"After using the catalog file, it must be closed by calling "
"<citerefentry><refentrytitle>catclose</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>, which has one argument, the catalog id."
msgstr ""
"پس از استفاده از پروندهٔ فهرست، باید با فراخوانیِ <citerefentry><refentrytitl"
"e>catclose</refentrytitle><manvolnum>3</manvolnum></citerefentry>، که یک "
"برهان به نام شناسهٔ فهرست دارد، بسته شود."

#. (itstool) path: sect2/title
#: book.translate.xml:3608
msgid "A Practical Example"
msgstr "یک مثال کاربردی"

#. (itstool) path: sect2/para
#: book.translate.xml:3610
msgid ""
"The following example will demonstrate an easy solution on how to use NLS "
"catalogs in a flexible way."
msgstr ""
"مثال پیش‌رو راه حلی ساده برای استفاده از فهرست‌های NLS را به‌طریقی انعطاف‌"
"پذیر نشان می‌دهد."

#. (itstool) path: sect2/para
#: book.translate.xml:3613
msgid ""
"The below lines need to be put into a common header file of the program, "
"which is included into all source files where localized messages are "
"necessary:"
msgstr ""
"سطور پیش‌رو باید در یک پروندهٔ سرایند مشترک از برنامه قرار بگیرند، چیزی که "
"در تمامی پرونده‌های منبع در جایی که پیامهای محلی‌سازی شده لازم است شامل "
"می‌شود:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3617
#, no-wrap
msgid ""
"\n"
"#ifdef WITHOUT_NLS\n"
"#define getstr(n)\t nlsstr[n]\n"
"#else\n"
"#include &lt;nl_types.h&gt;\n"
"\n"
"extern nl_catd\t\t catalog;\n"
"#define getstr(n)\t catgets(catalog, 1, n, nlsstr[n])\n"
"#endif\n"
"\n"
"extern char\t\t*nlsstr[];"
msgstr ""
"\n"
"#ifdef WITHOUT_NLS\n"
"#define getstr(n)\t nlsstr[n]\n"
"#else\n"
"#include &lt;nl_types.h&gt;\n"
"\n"
"extern nl_catd\t\t catalog;\n"
"#define getstr(n)\t catgets(catalog, 1, n, nlsstr[n])\n"
"#endif\n"
"\n"
"extern char\t\t*nlsstr[];"

#. (itstool) path: sect2/para
#: book.translate.xml:3629
msgid ""
"Next, put these lines into the global declaration part of the main source "
"file:"
msgstr "سپس، این خطوط را در بخش متغیر سراسریِ پروندهٔ منبع اصلی قرار دهید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3632
#, no-wrap
msgid ""
"\n"
"#ifndef WITHOUT_NLS\n"
"#include &lt;nl_types.h&gt;\n"
"nl_catd\t catalog;\n"
"#endif\n"
"\n"
"/*\n"
" * Default messages to use when NLS is disabled or no catalog\n"
" * is found.\n"
" */\n"
"char    *nlsstr[] = {\n"
"        \"\",\n"
"/* 1*/  \"some random message\",\n"
"/* 2*/  \"some other message\"\n"
"};"
msgstr ""
"\n"
"#ifndef WITHOUT_NLS\n"
"#include &lt;nl_types.h&gt;\n"
"nl_catd\t catalog;\n"
"#endif\n"
"\n"
"/*\n"
" * Default messages to use when NLS is disabled or no catalog\n"
" * is found.\n"
" */\n"
"char    *nlsstr[] = {\n"
"        \"\",\n"
"/* 1*/  \"some random message\",\n"
"/* 2*/  \"some other message\"\n"
"};"

#. (itstool) path: sect2/para
#: book.translate.xml:3648
msgid ""
"Next come the real code snippets, which open, read, and close the catalog:"
msgstr ""
"سپس نوبت به تکه کدهای واقعی می‌رسد، که فهرست را باز می‌کند، می‌خواند و "
"می‌بندد:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3651
#, no-wrap
msgid ""
"\n"
"#ifndef WITHOUT_NLS\n"
"\tcatalog = catopen(\"myapp\", NL_CAT_LOCALE);\n"
"#endif\n"
"\n"
"...\n"
"\n"
"printf(getstr(1));\n"
"\n"
"...\n"
"\n"
"#ifndef WITHOUT_NLS\n"
"\tcatclose(catalog);\n"
"#endif"
msgstr ""
"\n"
"#ifndef WITHOUT_NLS\n"
"\tcatalog = catopen(\"myapp\", NL_CAT_LOCALE);\n"
"#endif\n"
"\n"
"...\n"
"\n"
"printf(getstr(1));\n"
"\n"
"...\n"
"\n"
"#ifndef WITHOUT_NLS\n"
"\tcatclose(catalog);\n"
"#endif"

#. (itstool) path: sect3/title
#: book.translate.xml:3667
msgid "Reducing Strings to Localize"
msgstr "کاستن رشته‌ها به محلی‌سازی"

#. (itstool) path: sect3/para
#: book.translate.xml:3669
msgid ""
"There is a good way of reducing the strings that need to be localized by "
"using <application>libc</application> error messages. This is also useful to "
"just avoid duplication and provide consistent error messages for the common "
"errors that can be encountered by a great many of programs."
msgstr ""
"روشی مناسب برای کاستن رشته‌هایی که نیاز به محلی‌سازی دارند با استفاده از "
"پیام‌های خطای <application>libc</application> وجود دارد. این همچنین برای "
"اجتناب از تکرار مفید است و پیام‌های خطای یکپارچه‌ای را برای خطاهای رایجی که "
"ممکن است برنامه‌های بسیاری با آنها مواجه شوند ارائه می‌دهد."

#. (itstool) path: sect3/para
#: book.translate.xml:3675
msgid ""
"First, here is an example that does not use <application>libc</application> "
"error messages:"
msgstr ""
"نخست، نمونه‌ای است که از پیام‌های خطای <application>libc</application> "
"استفاده نمی‌کند:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:3678
#, no-wrap
msgid ""
"\n"
"#include &lt;err.h&gt;\n"
"...\n"
"if (!S_ISDIR(st.st_mode))\n"
"\terrx(1, \"argument is not a directory\");\n"
"\t  "
msgstr ""
"\n"
"#include &lt;err.h&gt;\n"
"...\n"
"if (!S_ISDIR(st.st_mode))\n"
"\terrx(1, \"argument is not a directory\");\n"
"\t  "

#. (itstool) path: sect3/para
#: book.translate.xml:3685
msgid ""
"This can be transformed to print an error message by reading <varname>errno</"
"varname> and printing an error message accordingly:"
msgstr ""
"این می‌تواند برای چاپ یک پیام خطا با خواندن <varname>errno</varname> و نمایش "
"یک پیام خطا بر این اساس تبدیل شود:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:3689
#, no-wrap
msgid ""
"\n"
"#include &lt;err.h&gt;\n"
"#include &lt;errno.h&gt;\n"
"...\n"
"if (!S_ISDIR(st.st_mode)) {\n"
"\terrno = ENOTDIR;\n"
"\terr(1, NULL);\n"
"}\n"
"\t  "
msgstr ""
"\n"
"#include &lt;err.h&gt;\n"
"#include &lt;errno.h&gt;\n"
"...\n"
"if (!S_ISDIR(st.st_mode)) {\n"
"\terrno = ENOTDIR;\n"
"\terr(1, NULL);\n"
"}\n"
"\t  "

#. (itstool) path: sect3/para
#: book.translate.xml:3699
msgid ""
"In this example, the custom string is eliminated, thus translators will have "
"less work when localizing the program and users will see the usual "
"<quote>Not a directory</quote> error message when they encounter this error. "
"This message will probably seem more familiar to them. Please note that it "
"was necessary to include <filename>errno.h</filename> in order to directly "
"access <varname>errno</varname>."
msgstr ""
"در این مثال، رشتهٔ سفارشی حذف شده است، از این رو مترجمین هنگام بومی‌سازی "
"برنامه کار کمتری انجام خواهند داد و کاربران پیام خطای متداول <quote>Not a "
"directory</quote> را در مواجه با این خطا مشاهده می‌کنند. این پیام احتمالاً "
"برای آنها آشناتر خواهد بود. لطفاً توجه داشته باشید برشمردن <filename>errno."
"h</filename> به‌منظور دسترسی مستقیم به <varname>errno</varname> لازم بود."

#. (itstool) path: sect3/para
#: book.translate.xml:3707
msgid ""
"It is worth to note that there are cases when <varname>errno</varname> is "
"set automatically by a preceding call, so it is not necessary to set it "
"explicitly:"
msgstr ""
"شایان ذکر است مواردی وجود دارد که <varname>errno</varname> به‌طور خودکار "
"توسط یک فراخوان قبلی تنظیم شده است، پس نیازی به تنظیم مبرهن آن نیست:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:3711
#, no-wrap
msgid ""
"\n"
"#include &lt;err.h&gt;\n"
"...\n"
"if ((p = malloc(size)) == NULL)\n"
"\terr(1, NULL);\n"
"\t  "
msgstr ""
"\n"
"#include &lt;err.h&gt;\n"
"...\n"
"if ((p = malloc(size)) == NULL)\n"
"\terr(1, NULL);\n"
"\t  "

#. (itstool) path: sect2/title
#: book.translate.xml:3721
msgid "Making use of <filename>bsd.nls.mk</filename>"
msgstr "استفاده از <filename>bsd.nls.mk</filename>"

#. (itstool) path: sect2/para
#: book.translate.xml:3723
msgid ""
"Using the catalog files requires few repeatable steps, such as compiling the "
"catalogs and installing them to the proper location. In order to simplify "
"this process even more, <filename>bsd.nls.mk</filename> introduces some "
"macros. It is not necessary to include <filename>bsd.nls.mk</filename> "
"explicitly, it is pulled in from the common Makefiles, such as <filename>bsd."
"prog.mk</filename> or <filename>bsd.lib.mk</filename>."
msgstr ""
"استفاده از پرونده‌های فهرست مستلزم چند قدم تکراری است، مانند همگردانی فهرست‌"
"ها و نصب آنها در مکان مناسب. برای آنکه این فرآیند ساده‌تر شود، <filename>bsd."
"nls.mk</filename> تعدادی ماکرو را معرفی می‌کند. برشمردن <filename>bsd.nls."
"mk</filename> به‌طور صریح ضرورتی ندارد، زیرا از Makefiles های رایج برداشته "
"می‌شود، مانند <filename>bsd.prog.mk</filename> یا <filename>bsd.lib."
"mk</filename>."

#. (itstool) path: sect2/para
#: book.translate.xml:3732
msgid ""
"Usually it is enough to define <varname>NLSNAME</varname>, which should have "
"the catalog name mentioned as the first argument of "
"<citerefentry><refentrytitle>catopen</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and list the catalog files in <varname>NLS</"
"varname> without their <literal>.msg</literal> extension. Here is an "
"example, which makes it possible to to disable NLS when used with the code "
"examples before. The <varname>WITHOUT_NLS</varname> "
"<citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> variable has to be defined in order to build the program "
"without NLS support."
msgstr ""
"تعریف <varname>NLSNAME</varname> به‌طور معمول کافیست، که باید نام فهرست را "
"به‌عنوان اولین برهانِ <citerefentry><refentrytitle>catopen</refentrytitle><ma"
"nvolnum>3</manvolnum></citerefentry> ذکر کند و پرونده‌های فهرست را بدون "
"پسوندِ <literal>.msg</literal> آنها در <varname>NLS</varname> فهرست کند. در "
"اینجا مثالی آمده است که غیرفعال کردن NLS را هنگامی‌که از قبل با کدهای نمونه "
"استفاده شده باشد ممکن می‌سازد. متغیر <varname>WITHOUT_NLS</varname> "
"<citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> باید تعریف شود تا برنامه بدون پشتیبانی از NLS ساخته شود."

#. (itstool) path: sect2/programlisting
#: book.translate.xml:3742
#, no-wrap
msgid ""
"\n"
".if !defined(WITHOUT_NLS)\n"
"NLS=\tes_ES.ISO8859-1\n"
"NLS+=\thu_HU.ISO8859-2\n"
"NLS+=\tpt_BR.ISO8859-1\n"
".else\n"
"CFLAGS+=\t-DWITHOUT_NLS\n"
".endif"
msgstr ""
"\n"
".if !defined(WITHOUT_NLS)\n"
"NLS=\tes_ES.ISO8859-1\n"
"NLS+=\thu_HU.ISO8859-2\n"
"NLS+=\tpt_BR.ISO8859-1\n"
".else\n"
"CFLAGS+=\t-DWITHOUT_NLS\n"
".endif"

#. (itstool) path: sect2/para
#: book.translate.xml:3751
msgid ""
"Conventionally, the catalog files are placed under the <filename>nls</"
"filename> subdirectory and this is the default behavior of <filename>bsd.nls."
"mk</filename>. It is possible, though to override the location of the "
"catalogs with the <varname>NLSSRCDIR</varname> "
"<citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> variable. The default name of the precompiled catalog files "
"also follow the naming convention mentioned before. It can be overridden by "
"setting the <varname>NLSNAME</varname> variable. There are other options to "
"fine tune the processing of the catalog files but usually it is not needed, "
"thus they are not described here. For further information on <filename>bsd."
"nls.mk</filename>, please refer to the file itself, it is short and easy to "
"understand."
msgstr ""
"به‌طور معمول، پرونده‌های فهرست در زیر مسیر زیرینِ <filename>nls</filename> "
"قرار گرفته‌اند و این رفتارِ پیش‌فرضِ <filename>bsd.nls.mk</filename> است. "
"گرچه، این امکان هست تا مکان فهرست‌ها را با متغیر <varname>NLSSRCDIR</"
"varname> "
"<citerefentry><refentrytitle>make</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> باطل کرد. نام پیش‌فرض پرونده‌های از پیش همگردان‌شده نیز همان "
"رویهٔ نام‌گذاری که پیش‌تر ذکر شد را دنبال می‌کند و می‌تواند با قرار دادن "
"متغیر <varname>NLSNAME</varname> باطل شود. گزینه‌های دیگری نیز برای تنظیم "
"دقیق پردازش پرونده‌های فهرست وجود دارد اما معمولاً لازم نیست، از این رو آنها "
"را توضیح نمی‌دهیم. برای اطلاعات بیشتر در مورد <filename>bsd.nls."
"mk</filename>، لطفاً به خود پرونده رجوع کنید، که کوتاه و آسان‌فهم است."

#. (itstool) path: info/title
#: book.translate.xml:3776
msgid "Source Tree Guidelines and Policies"
msgstr "رهنمودها و سیاست‌های درخت منبع"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3779 book.translate.xml:3874
msgid ""
"<personname> <firstname>Poul-Henning</firstname> <surname>Kamp</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname> <firstname>Poul-Henning</firstname> <surname>Kamp</surname> </"
"personname> <contrib>نوشته شده توسط </contrib>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3786
msgid ""
"<personname> <firstname>Giorgos</firstname> <surname>Keramidas</surname> </"
"personname>"
msgstr ""
"<personname> <firstname>Giorgos</firstname> <surname>Keramidas</surname> "
"</personname>"

#. (itstool) path: chapter/para
#: book.translate.xml:3795
msgid ""
"This chapter documents various guidelines and policies in force for the "
"FreeBSD source tree."
msgstr ""
"این فصل رهنمودها و سیاست‌های گوناگون حاکم در درخت منبع FreeBSD را مستند "
"می‌کند."

#. (itstool) path: sect1/title
#: book.translate.xml:3799
msgid "Style Guidelines"
msgstr "رهنمودهای سبکی"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3801
msgid "<primary>style</primary>"
msgstr "<primary>style</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3803
msgid ""
"Consistent coding style is extremely important, particularly with large "
"projects like FreeBSD. Code should follow the FreeBSD coding styles "
"described in <citerefentry><refentrytitle>style</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>style.Makefile</"
"refentrytitle><manvolnum>5</manvolnum></citerefentry>."
msgstr ""
"برنامه‌نویسی به سبک همخوان بسیار مهم است، بخصوص با پروژه‌های بزرگی چون "
"FreeBSD. کد باید سبک برنامه‌نویسی در FreeBSD را که در "
"<citerefentry><refentrytitle>style</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry> و <citerefentry><refentrytitle>style."
"Makefile</refentrytitle><manvolnum>5</manvolnum></citerefentry> توضیح داده "
"شده است دنبال کند."

#. (itstool) path: sect1/title
#: book.translate.xml:3810
msgid "<varname>MAINTAINER</varname> on Makefiles"
msgstr "<varname>MAINTAINER</varname> در Makefiles"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3812
msgid "<primary>ports maintainer</primary>"
msgstr "<primary>نگهدارندهٔ پورت‌ها</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3814
msgid ""
"If a particular portion of the FreeBSD <filename>src/</filename> "
"distribution is being maintained by a person or group of persons, this is "
"communicated through an entry in <filename>src/MAINTAINERS</filename>. "
"Maintainers of ports within the Ports Collection express their "
"maintainership to the world by adding a <varname>MAINTAINER</varname> line "
"to the <filename>Makefile</filename> of the port in question:"
msgstr ""
"اگر بخش خاصی از توزیع <filename>src/</filename> در FreeBSD توسط یک شخص یا "
"گروهی از اشخاص نگهداری می‌شود، این امر از طریق یک ورودی در <filename>src/"
"MAINTAINERS</filename> برقرار می‌شود. نگهدارنگان پورت‌ها در مجموعه پورت‌ها "
"حق نگهداری خود را با اضافه کردن خط <varname>MAINTAINER</varname> در "
"<filename>Makefile</filename> اعلام می‌کنند:"

#. (itstool) path: sect1/programlisting
#: book.translate.xml:3823
#, no-wrap
msgid "<varname>MAINTAINER</varname>= <replaceable>email-addresses</replaceable>"
msgstr ""
"<varname>MAINTAINER</varname>= <replaceable>email-addresses</replaceable>"

#. (itstool) path: tip/para
#: book.translate.xml:3826
msgid ""
"For other parts of the repository, or for sections not listed as having a "
"maintainer, or when you are unsure who the active maintainer is, try looking "
"at the recent commit history of the relevant parts of the source tree. It is "
"quite often the case that a maintainer is not explicitly named, but the "
"people who are actively working in a part of the source tree for, say, the "
"last couple of years are interested in reviewing changes. Even if this is "
"not specifically mentioned in the documentation or the source itself, asking "
"for a review as a form of courtesy is a very reasonable thing to do."
msgstr ""
"برای بخش‌های دیگر مخزن، یا بخش‌هایی که با نگهدارنده فهرست نشده‌اند، یا زمانی‌"
"که شما نمی‌دانید نگه‌دارندهٔ فعال کیست، به‌دنبال تاریخچهٔ ثبت اخیر بخش‌های "
"مرتبط با درخت منبع باشید. گاهی چنین بوده است که یک نگهدارنده به‌طور مستقیم "
"نام‌گذاری نشده است، اما افرادی که فعالانه مشغول به کار در بخشی از درخت منبع "
"هستند، برای چند سال گذشته، علاقه‌مند به بازبینی تغییرات هستند. حتی اگر به‌"
"طور مستقیم در مستندات یا خود منبع ذکر نشده باشد، درخواست بازبینی از روی حسن "
"نیت کار بسیار عقلانی است."

#. (itstool) path: sect1/para
#: book.translate.xml:3838
msgid "The role of the maintainer is as follows:"
msgstr "نقش نگهدارنده بدین شکل است:"

#. (itstool) path: listitem/para
#: book.translate.xml:3842
msgid ""
"The maintainer owns and is responsible for that code. This means that he or "
"she is responsible for fixing bugs and answering problem reports pertaining "
"to that piece of the code, and in the case of contributed software, for "
"tracking new versions, as appropriate."
msgstr ""
"نگهدارنده مالک و مسئول آن کد است. این بدان معناست که او مسئول رفع اشکال‌ها و "
"پاسخ‌گویی به مشکلات گزارش شدهٔ مربوط به آن تکه کد است، و در مورد نرم‌"
"افزارهای اعطا شده، در صورت لزوم، مسئول پیگردی نسخه‌های جدید است."

#. (itstool) path: listitem/para
#: book.translate.xml:3850
msgid ""
"Changes to directories which have a maintainer defined shall be sent to the "
"maintainer for review before being committed. Only if the maintainer does "
"not respond for an unacceptable period of time, to several emails, will it "
"be acceptable to commit changes without review by the maintainer. However, "
"it is suggested that you try to have the changes reviewed by someone else if "
"at all possible."
msgstr ""
"تغییرات اعمال شده بر روی مسیرهایی که نگهدارنده‌ای تعریف‌شده دارند قبل از "
"آنکه ثبت شوند جهت بازبینی به نگهدارنگان ارسال می‌شوند. تنها درصورتی‌که "
"نگهدارنده برای مدت غیرقابل قبولی پاسخ ایمیل‌ها را ندهد، ثبت تغییرات بدون "
"بازبینی توسط نگهدارنده پذیرفته خواهد بود. گرچه، پیشنهاد می‌شود که در صورت "
"امکان تغییرات را مورد بازبینی شخص دیگری قرار دهید."

#. (itstool) path: listitem/para
#: book.translate.xml:3861
msgid ""
"It is of course not acceptable to add a person or group as maintainer unless "
"they agree to assume this duty. On the other hand it does not have to be a "
"committer and it can easily be a group of people."
msgstr ""
"بی‌شک اضافه کردن یک شخص یا گروه به‌عنوان نگهدارنده قابل قبول نیست، مگر آنها "
"این وظیفه را برعهده گیرند. از طرفی لزومی ندارد یک ثبت‌کننده باشد و به‌راحتی "
"می‌تواند گروهی از مردم باشد."

#. (itstool) path: info/title
#: book.translate.xml:3871
msgid "Contributed Software"
msgstr "نرم‌افزارهای اعطا شده"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3881 book.translate.xml:4289
msgid ""
"<personname> <firstname>David</firstname> <surname>O'Brien</surname> </"
"personname>"
msgstr ""
"<personname> <firstname>David</firstname> <surname>O'Brien</surname> "
"</personname>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3887
msgid ""
"<personname> <firstname>Gavin</firstname> <surname>Atkinson</surname> </"
"personname>"
msgstr ""
"<personname> <firstname>Gavin</firstname> <surname>Atkinson</surname> "
"</personname>"

#. (itstool) path: sect1/indexterm
#: book.translate.xml:3896
msgid "<primary>contributed software</primary>"
msgstr "<primary>نرم‌افزارهای اعطا شده</primary>"

#. (itstool) path: sect1/para
#: book.translate.xml:3898
msgid ""
"Some parts of the FreeBSD distribution consist of software that is actively "
"being maintained outside the FreeBSD project. For historical reasons, we "
"call this <emphasis>contributed</emphasis> software. Some examples are "
"<application>sendmail</application>, <application>gcc</application> and "
"<application>patch</application>."
msgstr ""
"برخی بخش‌های توزیع FreeBSD متشکل از نرم‌افزارهایی است که به‌طور فعال خارج از "
"پروژهٔ FreeBSD نگهداری می‌شوند. به‌دلایل تاریخی، ما این را نرم‌فزار "
"<emphasis>اعطا شده</emphasis> می‌نامیم. برخی نمونه‌ها شامل "
"<application>sendmail</application>، <application>gcc</application> و "
"<application>patch</application> هستند."

#. (itstool) path: sect1/para
#: book.translate.xml:3906
msgid ""
"Over the last couple of years, various methods have been used in dealing "
"with this type of software and all have some number of advantages and "
"drawbacks. No clear winner has emerged."
msgstr ""
"طی سال‌های اخیر، روش‌های گوناگونی در مواجه با اینگونه نرم‌افزارها به‌کار "
"رفته است و تمامی آنها دارای تعدادی برتری‌ها و ایراداتی هستند. هیچ برنده‌ای "
"به‌طور مشخص پدیدار نشده است."

#. (itstool) path: sect1/para
#: book.translate.xml:3911
msgid ""
"Since this is the case, after some debate one of these methods has been "
"selected as the <quote>official</quote> method and will be required for "
"future imports of software of this kind. Furthermore, it is strongly "
"suggested that existing contributed software converge on this model over "
"time, as it has significant advantages over the old method, including the "
"ability to easily obtain diffs relative to the <quote>official</quote> "
"versions of the source by everyone (even without direct repository access). "
"This will make it significantly easier to return changes to the primary "
"developers of the contributed software."
msgstr ""
"نظر به اینکه مورد ما چنین است، پس از کمی گفت و گو یکی از همین روش‌ها به‌"
"عنوان روش <quote>رسمی</quote> انتخاب شده و برای درون‌بُرد‌های بعدی نرم‌"
"افزارهای از این دست مورد استفاده قرار می‌گیرد. افزون بر این، به‌شدت توصیه می‌"
"شود نرم‌افزارهای اعطا شدهٔ فعلی با گذر زمان بر روی همین نمونه همگرا شوند، "
"زیرا نسبت به روش قدیمی دارای امتیازات قابل توجهی هست، مانند امکان به‌دست "
"آوردن diff ها نسبت به نسخه‌های <quote>رسمی</quote> منبع توسط همه (حتی بدون "
"دسترسی مستقیم به مخزن). این کار به‌طور قابل توجهی برگرداندن تغییرات به "
"توسعه‌‌دهندگان اصلی نرم‌افزارهای اعطا شده را آسان‌تر می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:3923
msgid ""
"Ultimately, however, it comes down to the people actually doing the work. If "
"using this model is particularly unsuited to the package being dealt with, "
"exceptions to these rules may be granted only with the approval of the core "
"team and with the general consensus of the other developers. The ability to "
"maintain the package in the future will be a key issue in the decisions."
msgstr ""
"در نهایت، به‌هر حال، این برمی‌گردد به افرادی که در حقیقت کار را انجام می‌"
"دهند. چنانچه استفاده از این نمونه به‌ویژه برای بسته‌ای که با آن سر و کار "
"داریم نامناسب باشد، ممکن است تنها با موافقت تیم اصلی و با موافقت عمومی دیگر "
"توسعه‌دهندگان استثنائاتی برای این قوائد صورت گیرد. امکان حفظ بسته در آینده "
"یک مسئلهٔ کلیدی در تصمیمات خواهد بود."

#. (itstool) path: note/para
#: book.translate.xml:3932
msgid ""
"Because it makes it harder to import future versions minor, trivial and/or "
"cosmetic changes are <emphasis>strongly discouraged</emphasis> on files that "
"are still tracking the vendor branch."
msgstr ""
"از آنجا که وارد کردن نسخه‌های بعدی را سخت‌تر می‌کند، تغییرات جزئی، کم اهمیت "
"و/یا سطحی بر روی پرونده‌هایی که هنوز در حال دنبال کردن شاخهٔ توزیع‌کننده "
"هستند <emphasis>به‌شدت اجتناب می‌شوند</emphasis>."

#. (itstool) path: info/title
#: book.translate.xml:3940
msgid "Vendor Imports with SVN"
msgstr "درون‌بُردهای توزیع‌کننده با SVN"

#. (itstool) path: authorgroup/author
#: book.translate.xml:3943
msgid ""
"<personname> <firstname>Dag-Erling</firstname> <surname>Smørgrav</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname> <firstname>Dag-Erling</firstname> <surname>Smørgrav</surname> </"
"personname> <contrib>نوشته شده توسط </contrib>"

#. (itstool) path: sect2/para
#: book.translate.xml:3953
msgid ""
"This section describes the vendor import procedure with "
"<application>Subversion</application> in details."
msgstr ""
"این بخش رویهٔ درون‌بُرد توزیع‌کننده با <application>Subversion</application> "
"را به تفصیل شرح می‌دهد."

#. (itstool) path: step/title
#: book.translate.xml:3958
msgid "Preparing the Tree"
msgstr "آماده‌سازی درخت"

#. (itstool) path: step/para
#: book.translate.xml:3960
msgid ""
"If this is your first import after the switch to <acronym>SVN</acronym>, you "
"will have to flatten and clean up the vendor tree, and bootstrap merge "
"history in the main tree. If not, you can safely omit this step."
msgstr ""
"اگر این اولین درون‌بُرد شما پس از تغییر به <acronym>SVN</acronym> هست، شما "
"باید درخت توزیع را پالایش و تمیز کنید، و تاریخ ادغام را در درخت اصلی بوت‌"
"استرپ کنید. اگر چنین نیست، می‌توانید به‌راحتی این مرحله را نادیده بگیرید."

#. (itstool) path: step/para
#: book.translate.xml:3965
msgid ""
"During the conversion from <acronym>CVS</acronym> to <acronym>SVN</acronym>, "
"vendor branches were imported with the same layout as the main tree. For "
"example, the <application>foo</application> vendor sources ended up in "
"<filename>vendor/<replaceable>foo</replaceable>/dist/contrib/"
"<replaceable>foo</replaceable></filename>, but it is pointless and rather "
"inconvenient. What we really want is to have the vendor source directly in "
"<filename>vendor/<replaceable>foo</replaceable>/dist</filename>, like this:"
msgstr ""
"حین تبدیل <acronym>CVS</acronym> به <acronym>SVN</acronym>، انشعابات vendor "
"با همان طرح‌بندی درخت اصلی وارد شده بودند. برای مثال، منابع توزیع‌کنندهٔ "
"<application>foo</application> سر از <filename>vendor/"
"<replaceable>foo</replaceable>/dist/contrib/<replaceable>foo</replaceable></"
"filename> در آوردند، گرچه این امر بیهوده و نسبتاً ناخوشایند است. آنچه که ما "
"واقعاً می‌خواهیم داشتن منبع vendor به‌طور مستقیم در <filename>vendor/"
"<replaceable>foo</replaceable>/dist</filename> است، مانند:"

#. (itstool) path: step/screen
#: book.translate.xml:3975
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cd vendor/<replaceable>foo</replaceable>/dist/contrib/<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn move $(svn list) ../..</userinput>\n"
"<prompt>%</prompt> <userinput>cd ../..</userinput>\n"
"<prompt>%</prompt> <userinput>svn remove contrib</userinput>\n"
"<prompt>%</prompt> <userinput>svn propdel -R svn:mergeinfo</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cd vendor/<replaceable>foo</replaceable>/dist/"
"contrib/<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn move $(svn list) ../..</userinput>\n"
"<prompt>%</prompt> <userinput>cd ../..</userinput>\n"
"<prompt>%</prompt> <userinput>svn remove contrib</userinput>\n"
"<prompt>%</prompt> <userinput>svn propdel -R svn:mergeinfo</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:3982
msgid ""
"Note that, the <literal>propdel</literal> bit is necessary because starting "
"with 1.5, Subversion will automatically add <literal>svn:mergeinfo</literal> "
"to any directory you copy or move. In this case, you will not need this "
"information, since you are not going to merge anything from the tree you "
"deleted."
msgstr ""
"توجه داشته باشید، بخش <literal>propdel</literal> ضروری است زیرا پس از نسخهٔ 1"
".5، Subversion به‌طور خودکار <literal>svn:mergeinfo</literal> را به هر مسیری "
"که شما کپی یا انتقال می‌دهید اضافه می‌کند. در این مورد، شما به این اطلاعات "
"نیازی نخواهید داشت، از آنجا که نمی‌خواهید چیزی را از درختی که پاک کرده‌اید "
"ادغام کنید."

#. (itstool) path: note/para
#: book.translate.xml:3990
msgid ""
"You may want to flatten the tags as well. The procedure is exactly the same. "
"If you do this, put off the commit until the end."
msgstr ""
"ممکن است شما بخواهید برچسب‌ها را هم پالایش و تمیز کنید. روش دقیقاً یکسان "
"است. اگر این کار را انجام دادید، ثبت را تا آخر به‌تعویق بیندازید."

#. (itstool) path: step/para
#: book.translate.xml:3995
msgid ""
"Check the <filename>dist</filename> tree and perform any cleanup that is "
"deemed to be necessary. You may want to disable keyword expansion, as it "
"makes no sense on unmodified vendor code. In some cases, it can be even be "
"harmful."
msgstr ""
"درخت <filename>dist</filename> را بررسی کنید و هر پالایشی که به‌نظر لازم است "
"را انجام دهید. شاید بخواهید انبساط واژهٔ کلیدی را غیرفعال کنید، زیرا در "
"کدهای اصلاح‌نشده هیچ منطقی ندارد، حتی می‌تواند زیان‌آور هم باشد."

#. (itstool) path: step/screen
#: book.translate.xml:4001
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>svn propdel svn:keywords -R .</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>svn propdel svn:keywords -R .</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4004
msgid ""
"Bootstrapping of <literal>svn:mergeinfo</literal> on the target directory "
"(in the main tree) to the revision that corresponds to the last change was "
"made to the vendor tree prior to importing new sources is also needed:"
msgstr ""
"بوت‌استرپ از <literal>svn:mergeinfo</literal> بر روی مسیر مورد نظر (در درخت "
"اصلی) به بازبینی که منطبق با آخرین تغییر است که پیش از وارد کردن منابع جدید "
"در درخت vendor ایجاد شده نیز مورد نیاز است:"

#. (itstool) path: step/screen
#: book.translate.xml:4009
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cd head/contrib/<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn merge --record-only ^/vendor/<replaceable>foo</replaceable>/dist@<replaceable>12345678</replaceable> .</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cd head/contrib/"
"<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn merge --record-only ^/vendor/"
"<replaceable>foo</replaceable>/dist@<replaceable>12345678</replaceable> "
".</userinput>\n"
"<prompt>%</prompt> <userinput>svn commit</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4013
msgid ""
"With some shells, the <literal>^</literal> in the above command may need to "
"be escaped with a backslash."
msgstr ""
"با برخی پوسته‌ها، علامت <literal>^</literal> در دستور بالا ممکن است نیاز به "
"رهایی توسط یک backslash داشته باشد."

#. (itstool) path: step/title
#: book.translate.xml:4019
msgid "Importing New Sources"
msgstr "وارد کردن منابع جدید"

#. (itstool) path: step/para
#: book.translate.xml:4021
msgid ""
"Prepare a full, clean tree of the vendor sources. With <acronym>SVN</"
"acronym>, we can keep a full distribution in the vendor tree without "
"bloating the main tree. Import everything but merge only what is needed."
msgstr ""
"یک درخت کامل و تمیز از منابع vendor را آماده کنید. با <acronym>SVN</acronym> "
"می‌توانیم یک توزیع کامل در درخت vendor نگه داریم، بی‌آنکه درخت اصلی را باد "
"کنیم. همه چیز را وارد کنید اما فقط آنچه که لازم است را ادغام کنید."

#. (itstool) path: step/para
#: book.translate.xml:4027
msgid ""
"Note that you will need to add any files that were added since the last "
"vendor import, and remove any that were removed. To facilitate this, you "
"should prepare sorted lists of the contents of the vendor tree and of the "
"sources you are about to import:"
msgstr ""
"توجه کنید که شما نیاز دارید هر پرونده‌ای را که از زمان آخرین ورود vendor "
"اضافه شده‌اند را اضافه کنید، و هر آنچه که حذف شده است را حذف کنید. برای "
"تسهیل این امر، شما باید فهرست‌های مرتب‌شده‌ای از محتویات درخت vendor و از "
"منابعی که قرار است وارد کنید را تهیه کنید:"

#. (itstool) path: step/screen
#: book.translate.xml:4033
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cd vendor/<replaceable>foo</replaceable>/dist</userinput>\n"
"<prompt>%</prompt> <userinput>svn list -R | grep -v '/$' | sort &gt; ../<replaceable>old</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>cd ../<replaceable>foo-9.9</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>find . -type f | cut -c 3- | sort &gt; ../<replaceable>new</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cd vendor/"
"<replaceable>foo</replaceable>/dist</userinput>\n"
"<prompt>%</prompt> <userinput>svn list -R | grep -v '/$' | sort &gt; "
"../<replaceable>old</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>cd ../<replaceable>foo-9."
"9</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>find . -type f | cut -c 3- | sort &gt; "
"../<replaceable>new</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4038
msgid ""
"With these two files, the following command will list removed files (files "
"only in <filename><replaceable>old</replaceable></filename>):"
msgstr ""
"با این دو پرونده، دستور پیش‌رو پرونده‌های حذف شده را فهرست می‌کند (پرونده‌"
"هایی که تنها در <filename><replaceable>old</replaceable></filename> هستند):"

#. (itstool) path: step/screen
#: book.translate.xml:4042
#, no-wrap
msgid "<prompt>%</prompt> <userinput>comm -23 ../<replaceable>old</replaceable> ../<replaceable>new</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>comm -23 ../<replaceable>old</replaceable> "
"../<replaceable>new</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4044
msgid ""
"While the command below will list added files (files only in "
"<filename><replaceable>new</replaceable></filename>):"
msgstr ""
"در حالی که دستور زیر پرونده‌های اضافه شده را فهرست می‌کند (پرونده‌هایی که "
"تنها در <filename><replaceable>new</replaceable></filename> هستند):"

#. (itstool) path: step/screen
#: book.translate.xml:4048
#, no-wrap
msgid "<prompt>%</prompt> <userinput>comm -13 ../<replaceable>old</replaceable> ../<replaceable>new</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>comm -13 ../<replaceable>old</replaceable> "
"../<replaceable>new</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4050
msgid "Let us put this together:"
msgstr "بگذارید این را در کنار هم قرار دهیم:"

#. (itstool) path: step/screen
#: book.translate.xml:4052
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cd vendor/<replaceable>foo</replaceable>/<replaceable>foo-9.9</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>tar cf - . | tar xf - -C ../dist</userinput>\n"
"<prompt>%</prompt> <userinput>cd ../dist</userinput>\n"
"<prompt>%</prompt> <userinput>comm -23 ../<replaceable>old</replaceable> ../<replaceable>new</replaceable> | xargs svn remove</userinput>\n"
"<prompt>%</prompt> <userinput>comm -13 ../<replaceable>old</replaceable> ../<replaceable>new</replaceable> | xargs svn add</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cd vendor/"
"<replaceable>foo</replaceable>/<replaceable>foo-9.9</replaceable></userinput>"
"\n"
"<prompt>%</prompt> <userinput>tar cf - . | tar xf - -C ../dist</userinput>\n"
"<prompt>%</prompt> <userinput>cd ../dist</userinput>\n"
"<prompt>%</prompt> <userinput>comm -23 ../<replaceable>old</replaceable> "
"../<replaceable>new</replaceable> | xargs svn remove</userinput>\n"
"<prompt>%</prompt> <userinput>comm -13 ../<replaceable>old</replaceable> "
"../<replaceable>new</replaceable> | xargs svn add</userinput>"

#. (itstool) path: warning/para
#: book.translate.xml:4059
msgid ""
"If there are new directories in the new distribution, the last command will "
"fail. You will have to add the directories, and run it again. Conversely, if "
"any directories were removed, you will have to remove them manually."
msgstr ""
"اگر در توزیع جدید مسیرهای جدیدی وجود داشته باشند، دستور آخر شکست می‌خورد. "
"ناچار خواهید بود مسیر‌ها را اضافه کنید، و دستور را دوباره اجرا کنید. اگر هم "
"برعکس، مسیری حذف شده باشد، باید آن‌ها را دستی حذف کنید."

#. (itstool) path: step/para
#: book.translate.xml:4066
msgid "Check properties on any new files:"
msgstr "خصایص پرونده‌های جدید را بررسی کنید:"

#. (itstool) path: listitem/para
#: book.translate.xml:4070
msgid ""
"All text files should have <literal>svn:eol-style</literal> set to "
"<literal>native</literal>."
msgstr ""
"تمامی پرونده‌های متنی باید <literal>svn:eol-style</literal> را برابر با "
"<literal>native</literal> داشته باشند."

#. (itstool) path: listitem/para
#: book.translate.xml:4076
msgid ""
"All binary files should have <literal>svn:mime-type</literal> set to "
"<literal>application/octet-stream</literal>, unless there is a more "
"appropriate media type."
msgstr ""
"تمامی پرونده‌های دو-دویی باید <literal>svn:mime-type</literal> را برابر با "
"<literal>application/octet-stream</literal> داشته باشند، مگر نوع رسانهٔ "
"مناسب‌تری موجود باشد."

#. (itstool) path: listitem/para
#: book.translate.xml:4083
msgid ""
"Executable files should have <literal>svn:executable</literal> set to "
"<literal>*</literal>."
msgstr ""
"پرونده‌های اجراپذیر باید <literal>svn:executable</literal> را برابر با "
"<literal>*</literal> داشته باشند."

#. (itstool) path: listitem/para
#: book.translate.xml:4089
msgid "There should be no other properties on any file in the tree."
msgstr "هیچ خاصیت دیگری بر روی دیگر پرونده‌های درخت نباید باشد."

#. (itstool) path: note/para
#: book.translate.xml:4095
msgid ""
"You are ready to commit, but you should first check the output of "
"<command>svn stat</command> and <command>svn diff</command> to make sure "
"everything is in order."
msgstr ""
"آمادهٔ ثبت هستید، اما ابتدا باید خروجی <command>svn stat</command> و "
"<command>svn diff</command> را بررسی کنید تا از مرتب بودن همه‌چیز مطمئن شوید."

#. (itstool) path: step/para
#: book.translate.xml:4101
msgid ""
"Once you have committed the new vendor release, you should tag it for future "
"reference. The best and quickest way is to do it directly in the repository:"
msgstr ""
"پس از آنکه توزیع vendor جدید را ثبت کردید، لازم است آن را برای ارجاعات بعدی "
"برچسب‌گذاری کنید. بهترین و سریع‌ترین راه انجام مستقیم آن در مخزن است:"

#. (itstool) path: step/screen
#: book.translate.xml:4105
#, no-wrap
msgid "<prompt>%</prompt> <userinput>svn copy ^/vendor/<replaceable>foo</replaceable>/dist <replaceable>svn_base</replaceable>/vendor/<replaceable>foo</replaceable>/<replaceable>9.9</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>svn copy ^/vendor/"
"<replaceable>foo</replaceable>/dist <replaceable>svn_base</replaceable>/"
"vendor/<replaceable>foo</replaceable>/<replaceable>9."
"9</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4107
msgid ""
"To get the new tag, you can update your working copy of <filename>vendor/"
"<replaceable>foo</replaceable></filename>."
msgstr ""
"برای به‌دست آوردن برچسب جدید، می‌توانید نسخهٔ کاری خودتان از <filename>"
"vendor/<replaceable>foo</replaceable></filename> را به روز کنید."

#. (itstool) path: note/para
#: book.translate.xml:4112
msgid ""
"If you choose to do the copy in the checkout instead, do not forget to "
"remove the generated <literal>svn:mergeinfo</literal> as described above."
msgstr ""
"اگر به‌جای آن تصمیم گرفتید تا کپی‌برداری را در وارسی انجام دهید، فراموش "
"نکنید <literal>svn:mergeinfo</literal> ایجاد شده را همانطورکه در بالا توضیح "
"داده شد حذف کنید."

#. (itstool) path: step/title
#: book.translate.xml:4120
msgid "Merging to <emphasis>-HEAD</emphasis>"
msgstr "ادغام با <emphasis>-HEAD</emphasis>"

#. (itstool) path: step/para
#: book.translate.xml:4122
msgid ""
"After you have prepared your import, it is time to merge. Option <option>--"
"accept=postpone</option> tells <acronym>SVN</acronym> not to handle merge "
"conflicts yet, because they will be taken care of manually:"
msgstr ""
"پس از آنکه درون‌بُرد خود را آماده کردید، زمان ادغام کردن فرا می‌رسد. گزینهٔ "
"<option>--accept=postpone</option> به <acronym>SVN</acronym> می‌گوید که هنوز "
"به تداخل‌های ادغام کردن رسیدگی نکند، زیرا آنها به‌طور دستی انجام نمی‌گیرند:"

#. (itstool) path: step/screen
#: book.translate.xml:4127
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cd head/contrib/<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn update</userinput>\n"
"<prompt>%</prompt> <userinput>svn merge --accept=postpone ^/vendor/<replaceable>foo</replaceable>/dist</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>cd head/contrib/"
"<replaceable>foo</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>svn update</userinput>\n"
"<prompt>%</prompt> <userinput>svn merge --accept=postpone ^/vendor/"
"<replaceable>foo</replaceable>/dist</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4131
msgid ""
"Resolve any conflicts, and make sure that any files that were added or "
"removed in the vendor tree have been properly added or removed in the main "
"tree. It is always a good idea to check differences against the vendor "
"branch:"
msgstr ""
"هرگونه تعارضی را حل کنید و اطمینان حاصل کنید که پرونده‌های اضافه یا حذف شده "
"در درخت vendor به درستی در درخت اصلی اضافه یا حذف شده باشند. همیشه فکر خوبی "
"است که تفاوت‌ها در شاخه vendor را بررسی کنید:"

#. (itstool) path: step/screen
#: book.translate.xml:4137
#, no-wrap
msgid "<prompt>%</prompt> <userinput>svn diff --no-diff-deleted --old=^/vendor/<replaceable>foo</replaceable>/dist --new=.</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>svn diff --no-diff-deleted --old=^/vendor/"
"<replaceable>foo</replaceable>/dist --new=.</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:4139
msgid ""
"<option>--no-diff-deleted</option> tells <acronym>SVN</acronym> not to check "
"files that are in the vendor tree but not in the main tree."
msgstr ""
"<option>--no-diff-deleted</option> به <acronym>SVN</acronym> می‌گوید که "
"پرونده‌هایی که در درخت vendor موجود هستند اما در درخت اصلی نیستند را بررسی "
"نکند."

#. (itstool) path: note/para
#: book.translate.xml:4144
msgid ""
"With <acronym>SVN</acronym>, there is no concept of on or off the vendor "
"branch. If a file that previously had local modifications no longer does, "
"just remove any left-over cruft, such as FreeBSD version tags, so it no "
"longer shows up in diffs against the vendor tree."
msgstr ""
"با <acronym>SVN</acronym>، هیچ مفهموی از ماندن یا نماندن در شاخهٔ vendor "
"وجود ندارد. اگر پرونده‌ای که پیش‌تر اصلاحات بومی داشته است دیگر فاقد آنها "
"باشد، تنها تکه‌کدهای باقی‌مانده را حدف کنید، مانند برچسب‌های نسخهٔ FreeBSD، "
"در نتیجه دیگر در diff ها در تقابل با درخت vendor حاضر نمی‌شود."

#. (itstool) path: step/para
#: book.translate.xml:4151
msgid ""
"If any changes are required for the world to build with the new sources, "
"make them now — and test until you are satisfied that everything build and "
"runs correctly."
msgstr ""
"چنانچه هر تغییری برای ساخت world با منابع جدید ضروری باشد، آنها را همین حالا "
"بسازید — و تا زمانی‌که متقاعد شده‌اید همه‌چیز به‌درستی build و اجرا می‌شود "
"بیازمایید."

#. (itstool) path: step/title
#: book.translate.xml:4158
msgid "Commit"
msgstr "ثبت (Commit)"

#. (itstool) path: step/para
#: book.translate.xml:4160
msgid ""
"Now, you are ready to commit. Make sure you get everything in one go. "
"Ideally, you would have done all steps in a clean tree, in which case you "
"can just commit from the top of that tree. That is the best way to avoid "
"surprises. If you do it properly, the tree will move atomically from a "
"consistent state with the old code to a consistent state with the new code."
msgstr ""
"اکنون، شما آمادهٔ ثبت‌کردن هستید. مطمئن شوید که همه چیز را در یک حرکت انجام "
"دهید. در حالت ایده‌آل، تمامی مراحل را در یک درخت تمیز انجام می‌دادید، که "
"بتوانید از بالای آن درخت ثبت کنید. این بهترین راه برای جلوگیری از غافلگیری "
"است. اگر به درستی انجامش دهید، درخت به‌طور خودکار از یک حالت ثابت با کد قدیم "
"به یک حالت ثابت با کد جدید تغییر خواهد کرد."

#. (itstool) path: sect1/title
#: book.translate.xml:4173
msgid "Encumbered Files"
msgstr "پرونده‌های محدود"

#. (itstool) path: sect1/para
#: book.translate.xml:4175
msgid ""
"It might occasionally be necessary to include an encumbered file in the "
"FreeBSD source tree. For example, if a device requires a small piece of "
"binary code to be loaded to it before the device will operate, and we do not "
"have the source to that code, then the binary file is said to be encumbered. "
"The following policies apply to including encumbered files in the FreeBSD "
"source tree."
msgstr ""
"ممکن است گاهی اوقات اضافه کردن یک پروندهٔ محدود در درخت منبع FreeBSD ضروری "
"باشد. برای مثال، اگر یک دستگاه قبل از آنکه کار کند نیازمند بار‌شدن تکهٔ "
"کوچکی از کد دودویی در آن باشد، و ما منبع آن کد را نداشته باشیم، سپس گفته می‌"
"شود که آن پروندهٔ دودویی محدود شده است. سیاست‌های پیش رو بر پرونده‌های محدود "
"موجود در درخت منبع FreeBSD اعمال می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:4185
msgid ""
"Any file which is interpreted or executed by the system CPU(s) and not in "
"source format is encumbered."
msgstr ""
"هر پرونده‌ای که تفسیر شده یا توسط پردازنده(های) سامانه اجرا شده باشد و در "
"قالب منبع نباشد محدودشده است."

#. (itstool) path: listitem/para
#: book.translate.xml:4190
msgid "Any file with a license more restrictive than BSD or GNU is encumbered."
msgstr "هر فایلی با پرونده‌ای محدودتر از BSD یا GNU محدود خوانده می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:4195
msgid ""
"A file which contains downloadable binary data for use by the hardware is "
"not encumbered, unless (1) or (2) apply to it. It must be stored in an "
"architecture neutral ASCII format (file2c or uuencoding is recommended)."
msgstr ""
"پرونده‌ای که شامل داده‌های دودویی قابل بارگیری برای استفاده توسط سخت‌افزار "
"باشد محدود نیست، مگر (۱) و (۲) روی آن اعمال شود. آن باید درون یک قالب ASCII "
"معماری خنثی ذخیره شود (file2c یا uuencoding پیشنهاد می‌شود)."

#. (itstool) path: listitem/para
#: book.translate.xml:4202
msgid ""
"Any encumbered file requires specific approval from the <link xlink:href="
"\"@@URL_RELPREFIX@@/administration.html#t-core\">Core Team</link> before it "
"is added to the repository."
msgstr ""
"هر پروندهٔ محدودی نیاز به اجازهٔ ویژه از طرف <link xlink:href=\""
"@@URL_RELPREFIX@@/administration.html#t-core\">تیم اصلی</link> قبل از آنکه "
"در مخزن اضافه گردد را دارد."

#. (itstool) path: listitem/para
#: book.translate.xml:4208
msgid ""
"Encumbered files go in <filename>src/contrib</filename> or <filename>src/sys/"
"contrib</filename>."
msgstr ""
"پرونده‌های محدود در <filename>src/contrib</filename> یا <filename>src/sys/"
"contrib</filename> می‌روند."

#. (itstool) path: listitem/para
#: book.translate.xml:4213
msgid ""
"The entire module should be kept together. There is no point in splitting "
"it, unless there is code-sharing with non-encumbered code."
msgstr ""
"تمام اجزای ماژول باید کنار یکدیگر قرار گیرند. هیچ فایده‌ای در جداکردن آنها "
"نیست، مگر آنکه اشتراک‌گذاری کد با کد محدود نشده وجود داشته باشد."

#. (itstool) path: listitem/para
#: book.translate.xml:4219
msgid ""
"Object files are named <filename><replaceable>arch</replaceable>/"
"<replaceable>filename</replaceable>.o.uu&gt;</filename>."
msgstr ""
"پرونده‌های هدف "
"<filename><replaceable>arch</replaceable>/<replaceable>filename</replaceable>"
".o.uu&gt;</filename> نام‌گذاری شده‌اند."

#. (itstool) path: listitem/para
#: book.translate.xml:4224
msgid "Kernel files:"
msgstr "پرونده‌های هسته:"

#. (itstool) path: listitem/para
#: book.translate.xml:4228
msgid ""
"Should always be referenced in <filename>conf/files.*</filename> (for build "
"simplicity)."
msgstr ""
"همیشه باید در <filename>conf/files.*</filename> (برای سادگی در ساخت) ارجاع "
"شوند."

#. (itstool) path: listitem/para
#: book.translate.xml:4234
msgid ""
"Should always be in <filename>LINT</filename>, but the <link xlink:href="
"\"@@URL_RELPREFIX@@/administration.html#t-core\">Core Team</link> decides "
"per case if it should be commented out or not. The <link xlink:href="
"\"@@URL_RELPREFIX@@/administration.html#t-core\">Core Team</link> can, of "
"course, change their minds later on."
msgstr ""
"همیشه باید در <filename>LINT</filename> باشند، گرچه <link xlink:href=\""
"@@URL_RELPREFIX@@/administration.html#t-core\">تیم اصلی</link> به ازای هر "
"مورد تصمیم می‌گیرد چنانچه آن باید حذف شود یا خیر. البته <link xlink:href=\""
"@@URL_RELPREFIX@@/administration.html#t-core\">تیم اصلی</link> مطمئناً می‌"
"تواند نظر خود را در آینده تغییر دهد."

#. (itstool) path: listitem/para
#: book.translate.xml:4243
msgid ""
"The <firstterm>Release Engineer</firstterm> decides whether or not it goes "
"into the release."
msgstr ""
"<firstterm>مهندس نشر</firstterm> تصمیم می‌گیرد که وارد نسخهٔ نشر بشود یا خیر."

#. (itstool) path: listitem/para
#: book.translate.xml:4250
msgid "User-land files:"
msgstr "پرونده‌های محیط کاربر:"

#. (itstool) path: para/indexterm
#: book.translate.xml:4255
msgid "<primary>core team</primary>"
msgstr "<primary>تیم اصلی</primary>"

#. (itstool) path: listitem/para
#: book.translate.xml:4254
msgid ""
"The <link xlink:href=\"@@URL_RELPREFIX@@/administration.html#t-core\">Core "
"team</link><_:indexterm-1/> decides if the code should be part of "
"<command>make world</command>."
msgstr ""
"<link xlink:href=\"@@URL_RELPREFIX@@/administration.html#t-core\">تیم "
"اصلی</link><_:indexterm-1/> تصمیم می‌گیرد اگر کد باید بخشی از <command>make "
"world</command> باشد یا خیر."

#. (itstool) path: para/indexterm
#: book.translate.xml:4262
msgid "<primary>release engineering</primary>"
msgstr "<primary>مهندسی نشر</primary>"

#. (itstool) path: listitem/para
#: book.translate.xml:4261
msgid ""
"The <link xlink:href=\"@@URL_RELPREFIX@@/administration.html#t-re\">Release "
"Engineering</link><_:indexterm-1/> decides if it goes into the release."
msgstr ""
"<link xlink:href=\"@@URL_RELPREFIX@@/administration.html#t-re\">مهندسی "
"نشر</link><_:indexterm-1/> تصمیم می‌گیرد اگر جزوی از نسخهٔ نشر شود یا خیر."

#. (itstool) path: info/title
#: book.translate.xml:4273
msgid "Shared Libraries"
msgstr "کتابخانه‌های اشتراکی"

#. (itstool) path: authorgroup/author
#: book.translate.xml:4276
msgid ""
"<personname> <firstname>Satoshi</firstname> <surname>Asami</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname> <firstname>Satoshi</firstname> <surname>Asami</surname> </"
"personname> <contrib>نوشته شده توسط </contrib>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:4283
msgid ""
"<personname> <firstname>Peter</firstname> <surname>Wemm</surname> </"
"personname>"
msgstr ""
"<personname> <firstname>Peter</firstname> <surname>Wemm</surname> "
"</personname>"

#. (itstool) path: sect1/para
#: book.translate.xml:4298
msgid ""
"If you are adding shared library support to a port or other piece of "
"software that does not have one, the version numbers should follow these "
"rules. Generally, the resulting numbers will have nothing to do with the "
"release version of the software."
msgstr ""
"اگر دارید پشتیبانی برای کتابخانهٔ مشترک را به یک پورت یا نرم‌افزاری که فاقد "
"آن است اضافه می‌کنید، شماره‌های نسخه باید قوائد آمده در زیر را دنبال کنند. "
"به‌طور کلی، شماره‌های بدست‌آمده ربطی به شماره نسخهٔ نرم‌افزار ندارند."

#. (itstool) path: sect1/para
#: book.translate.xml:4304
msgid "The three principles of shared library building are:"
msgstr "سه اصل ساختمان کتابخانهٔ مشترک چنین هستند:"

#. (itstool) path: listitem/para
#: book.translate.xml:4308
msgid "Start from <literal>1.0</literal>"
msgstr "از <literal>1.0</literal> آغاز کنید"

#. (itstool) path: listitem/para
#: book.translate.xml:4312
msgid ""
"If there is a change that is backwards compatible, bump minor number (note "
"that ELF systems ignore the minor number)"
msgstr ""
"اگر تغییری وجود دارد که همسازی وارونه باشد، نسخهٔ فرعی را افزایش دهید (توجه "
"داشته باشید سامانه‌های ELF نسخهٔ فرعی را نادیده می‌گیرد)"

#. (itstool) path: listitem/para
#: book.translate.xml:4318
msgid "If there is an incompatible change, bump major number"
msgstr "اگر تغییری ناهمساز باشد، نسخهٔ اصلی را افزایش دهید"

#. (itstool) path: sect1/para
#: book.translate.xml:4323
msgid ""
"For instance, added functions and bugfixes result in the minor version "
"number being bumped, while deleted functions, changed function call syntax, "
"etc. will force the major version number to change."
msgstr ""
"برای مثال، توابع و اِشکال‌زدایی‌های اضافه‌شده موجب بالارفتنِ شماره نسخهٔ "
"فرعی می‌شوند، درحالی‌که توابع پاک‌شده، قواعد نحوی فراخوان تابع تغییریافته، و "
"غیره ... شماره نسخهٔ اصلی را مجبور به تغییر می‌کنند."

#. (itstool) path: sect1/para
#: book.translate.xml:4328
msgid ""
"Stick to version numbers of the form major.minor (<replaceable>x</"
"replaceable>.<replaceable>y</replaceable>). Our a.out dynamic linker does "
"not handle version numbers of the form <replaceable>x</replaceable>."
"<replaceable>y</replaceable>.<replaceable>z</replaceable> well. Any version "
"number after the <replaceable>y</replaceable> (i.e., the third digit) is "
"totally ignored when comparing shared lib version numbers to decide which "
"library to link with. Given two shared libraries that differ only in the "
"<quote>micro</quote> revision, <command>ld.so</command> will link with the "
"higher one. That is, if you link with <filename>libfoo.so.3.3.3</filename>, "
"the linker only records <literal>3.3</literal> in the headers, and will link "
"with anything starting with <replaceable>libfoo.so.3</replaceable>."
"<replaceable>(anything &gt;= 3)</replaceable>.<replaceable>(highest "
"available)</replaceable>."
msgstr ""
"با شماره‌های نسخهٔ قالب اصلی.فرعی "
"(<replaceable>x</replaceable>.<replaceable>y</replaceable>) بمانید. "
"پیوند‌دهندهٔ پویای a.out شماره‌های نسخهٔ قالب "
"<replaceable>x</replaceable>.<replaceable>y</replaceable>.<replaceable>z</"
"replaceable> را به‌خوبی مدیریت نمی‌کند. هر شماره نسخه‌ای که پس از "
"<replaceable>y</replaceable> (برای مثال، رقم سوم) قرار دارد زمانی‌که با "
"شماره‌های نسخهٔ کتابخانهٔ مشترک مقایسه می‌شود، به‌طور کلی نادیده گرفته می‌"
"شود تا تصمیم گرفته‌شود کدام کتابخانه را پیوند دهد. با توجه به دو کتابخانهٔ "
"مشترک که تنها در بازبینی <quote>micro</quote> تفاوت دارند، <command>ld.so</"
"command> با بالاتر از خود پیوند می‌دهد. از این رو، اگر با <filename>libfoo.so"
".3.3.3</filename> پیوند می‌دهید، پیوند‌دهنده تنها <literal>3.3</literal> را "
"در سرآیندها ذخیره می‌کند، و با هر چیزی که با <replaceable>libfoo.so."
"3</replaceable>.<replaceable>(هرچیزی &gt;= 3)</replaceable>.<replaceable>("
"بالاترین مقدار موجود)</replaceable> شروع شود پیوند می‌دهد."

#. (itstool) path: note/para
#: book.translate.xml:4347
msgid ""
"<command>ld.so</command> will always use the highest <quote>minor</quote> "
"revision. For instance, it will use <filename>libc.so.2.2</filename> in "
"preference to <filename>libc.so.2.0</filename>, even if the program was "
"initially linked with <filename>libc.so.2.0</filename>."
msgstr ""
"<command>ld.so</command> همیشه از آخرین بازبینی <quote>فرعی</quote> استفاده "
"می‌کند. برای مثال، <filename>libc.so.2.2</filename> را به‌جای <filename>libc."
"so.2.0</filename> استفاده می‌کند، حتی اگر این برنامه در ابتدا با "
"<filename>libc.so.2.0</filename> پیوند یافته باشد."

#. (itstool) path: sect1/para
#: book.translate.xml:4354
msgid ""
"In addition, our ELF dynamic linker does not handle minor version numbers at "
"all. However, one should still specify a major and minor version number as "
"our <filename>Makefile</filename>s <quote>do the right thing</quote> based "
"on the type of system."
msgstr ""
"افزون بر آن، پیونده‌دهندهٔ پویای ELF هرگز به شماره نسخهٔ فرعی رسیدگی نمی‌"
"کند. به هر حال، چنانکه <filename>Makefile</filename> های ما <quote>کار درست "
"را</quote> بر اساس نوع سامانه انجام می‌دهند، هنوز باید شماره نسخهٔ اصلی و "
"فرعی را تعیین نمود."

#. (itstool) path: sect1/para
#: book.translate.xml:4360
msgid ""
"For non-port libraries, it is also our policy to change the shared library "
"version number only once between releases. In addition, it is our policy to "
"change the major shared library version number only once between major OS "
"releases (i.e., from 6.0 to 7.0). When you make a change to a system library "
"that requires the version number to be bumped, check the <filename>Makefile</"
"filename>'s commit logs. It is the responsibility of the committer to ensure "
"that the first such change since the release will result in the shared "
"library version number in the <filename>Makefile</filename> to be updated, "
"and any subsequent changes will not."
msgstr ""
"برای کتابخانه‌های پورت نشده، نیز سیاست ما تغییر شماره نسخهٔ کتابخانه آن هم "
"تنها یک بار در بین توزیع‌ها است. افزون بر آن، تغییر شماره نسخهٔ کتابخانهٔ "
"اصلی مشترک تنها یک بار در بین توزیع‌های اصلی سامانهٔ عامل (برای مثال، از 6.0 "
"به 7.0) نیز جزو سیاست‌های ما است. وقتی شما تغییری در کتابخانهٔ سامانه ایجاد "
"می‌کنید که نیازمند بالارفتن شمارهٔ نسخه هست، لاگ‌های ثبت <filename>Makefile</"
"filename> را بررسی کنید. این مسئولیت ثبت‌کننده است که مطمئن شود نخستین تغییر "
"از این دست از زمان توزیع، سبب شود تا شماره نسخهٔ کتابخانهٔ مشترک واقع در "
"<filename>Makefile</filename> به‌روزرسانی شود، و هر نوع تغییر متقاعبی چنین "
"نشود."

#. (itstool) path: chapter/title
#: book.translate.xml:4381
msgid "Regression and Performance Testing"
msgstr "آزمون پسرفت (رگرسیون) و عملکرد"

#. (itstool) path: chapter/para
#: book.translate.xml:4383
msgid ""
"Regression tests are used to exercise a particular bit of the system to "
"check that it works as expected, and to make sure that old bugs are not "
"reintroduced."
msgstr ""
"از آزمون‌های پسرفت برای استفاده از بخشی از یک سامانه در جهت بررسی عملکرد "
"مورد انتظار آن و حصول اطمینان از عدم پیدایش دوبارهٔ مشکلات قبلی استفاده "
"می‌شود."

#. (itstool) path: chapter/para
#: book.translate.xml:4387
msgid ""
"The FreeBSD regression testing tools can be found in the FreeBSD source tree "
"in the directory <filename>src/tools/regression</filename>."
msgstr ""
"ادوات آزمون پسرفتِ FreeBSD را می‌توان در درخت منبع FreeBSD در مسیر <filename>"
"src/tools/regression</filename> پیدا کرد."

#. (itstool) path: section/title
#: book.translate.xml:4392
msgid "Micro Benchmark Checklist"
msgstr "مستلزمات ریز-محک‌زنی"

#. (itstool) path: section/para
#: book.translate.xml:4394
msgid ""
"This section contains hints for doing proper micro-benchmarking on FreeBSD "
"or of FreeBSD itself."
msgstr ""
"این بخش شامل رهنمودهای لازم برای انجام صحیح ریز-محک‌زنی (micro-benchmarking) "
"بر روی FreeBSD یا برای خود FreeBSD است."

#. (itstool) path: section/para
#: book.translate.xml:4397
msgid ""
"It is not possible to use all of the suggestions below every single time, "
"but the more used, the better the benchmark's ability to test small "
"differences will be."
msgstr ""
"ممکن نیست از تمامی پیشنهادات زیر همیشه استفاده کرد، اما هرچه بیشتر استفاده "
"شوند، توانایی محک‌زنی در آزمایشِ اختلافات ریز بهتر خواهد بود."

#. (itstool) path: listitem/para
#: book.translate.xml:4403
msgid ""
"Disable <acronym>APM</acronym> and any other kind of clock fiddling "
"(<acronym>ACPI</acronym> ?)."
msgstr ""
"<acronym>APM</acronym> و هرگونه دست‌کاری کردن ساعت (<acronym>ACPI</acronym> "
"?) را غیرفعال کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4408
msgid ""
"Run in single user mode. E.g., <citerefentry><refentrytitle>cron</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>, and other daemons "
"only add noise. The <citerefentry><refentrytitle>sshd</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> daemon can also cause "
"problems. If ssh access is required during testing either disable the SSHv1 "
"key regeneration, or kill the parent <command>sshd</command> daemon during "
"the tests."
msgstr ""
"وارد حالت تک کاربر شوید. برای مثال، <citerefentry><refentrytitle>cron</refent"
"rytitle><manvolnum>8</manvolnum></citerefentry>، و دیمِن‌های دیگر تنها باعث "
"اختلال می‌شوند. دیمِن "
"<citerefentry><refentrytitle>sshd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> نیز می‌تواند موجب اختلالات شود. اگر دسترسی ssh در حین آزمایش "
"ضروری است، یا بازسازی کلید SSHv1 را غیرفعال کنید، یا دیمِنِ والدِ "
"<command>sshd</command> را در حین آزمایشات از بین ببرید."

#. (itstool) path: listitem/para
#: book.translate.xml:4417
msgid ""
"Do not run <citerefentry><refentrytitle>ntpd</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>."
msgstr ""
"<citerefentry><refentrytitle>ntpd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> را اجرا نکنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4421
msgid ""
"If <citerefentry><refentrytitle>syslog</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> events are generated, run "
"<citerefentry><refentrytitle>syslogd</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> with an empty <filename>/etc/syslogd.conf</"
"filename>, otherwise, do not run it."
msgstr ""
"اگر رویدادهای "
"<citerefentry><refentrytitle>syslog</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> ساخته شده باشند، <citerefentry><refentrytitle>syslogd</refentry"
"title><manvolnum>8</manvolnum></citerefentry> را با یک <filename>/etc/syslogd"
".conf</filename> خالی اجرا کنید، در غیر اینصورت، آن را اجرا نکنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4428
msgid "Minimize disk-I/O, avoid it entirely if possible."
msgstr ""
"دیسک-I/O را به‌حداقل برسانید، در صورت امکان آن را به‌طور کامل نادیده بگیرید."

#. (itstool) path: listitem/para
#: book.translate.xml:4432
msgid "Do not mount file systems that are not needed."
msgstr "سامانه پرونده‌هایی که نیاز نیستند را سوار نکنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4436
msgid ""
"Mount <filename>/</filename>, <filename>/usr</filename>, and any other file "
"system as read-only if possible. This removes atime updates to disk (etc.) "
"from the I/O picture."
msgstr ""
"سامانهٔ پرونده‌های <filename>/</filename>، <filename>/usr</filename>، و "
"هرآنچه دیگر را حتی‌المقدور به‌حالت فقط-خواندنی سوار کنید. این امر به‌روز "
"رسانی‌های atime به دیسک (و غیره) را از تصویز I/O حذف می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:4443
msgid ""
"Reinitialize the read/write test file system with "
"<citerefentry><refentrytitle>newfs</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> and populate it from a <citerefentry><refentrytitle>tar</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry> or "
"<citerefentry><refentrytitle>dump</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> file before every run. Unmount and mount it before starting "
"the test. This results in a consistent file system layout. For a worldstone "
"test this would apply to <filename>/usr/obj</filename> (just reinitialize "
"with <command>newfs</command> and mount). To get 100% reproducibility, "
"populate the file system from a <citerefentry><refentrytitle>dd</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry> file (i.e.: "
"<command>dd if=myimage of=/dev/ad0s1h bs=1m</command>)"
msgstr ""
"سامانهٔ پروندهٔ خواندن/نوشتن را با "
"<citerefentry><refentrytitle>newfs</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> مجدد راه‌اندازی کنید و آن را قبل از هر اجرا از "
"<citerefentry><refentrytitle>tar</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> یا پروندهٔ "
"<citerefentry><refentrytitle>dump</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> پر کنید. آن را قبل از هر آزمایش قطع کرده و سوار کنید. حاصل، یک "
"طرح‌بندی سامانهٔ پروندهٔ استوار است. برای یک آزمایش مطمئن این امر بر روی "
"<filename>/usr/obj</filename> اعمال می‌شود (تنها کافیست با <command>newfs</"
"command> مجدد راه‌اندازی کنید و آن را سوار کنید). برای بدست آوردن توانایی "
"بازتولیدِ ۱۰۰ درصدی، سامانهٔ عامل را از پروندهٔ "
"<citerefentry><refentrytitle>dd</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> پر کنید (برای مثال: <command>dd if=myimage of=/dev/ad0s1h "
"bs=1m</command>)"

#. (itstool) path: listitem/para
#: book.translate.xml:4457
msgid ""
"Use malloc backed or preloaded <citerefentry><refentrytitle>md</"
"refentrytitle><manvolnum>4</manvolnum></citerefentry> partitions."
msgstr ""
"از محفظه‌هایی با پشتبانی malloc یا محفظه‌های از پیش‌بارگذاری شدهٔ "
"<citerefentry><refentrytitle>md</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> استفاده کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4462
msgid ""
"Reboot between individual iterations of the test, this gives a more "
"consistent state."
msgstr ""
"بین هر تکرار در آزمایش، برای حالتی با ثبات بیشتر، سامانهٔ خود را بازراه‌"
"اندازی (ریبوت) کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4467
msgid ""
"Remove all non-essential device drivers from the kernel. For instance if USB "
"is not needed for the test, do not put USB in the kernel. Drivers which "
"attach often have timeouts ticking away."
msgstr ""
"تمام درایورهای مختص به دستگاه‌های غیرضروری را از هسته حذف کنید. برای مثال، "
"اگر برای آزمایش USB نیاز نیست، USB را در هسته نگذارید. درایورهایی که اضافه "
"می‌شوند بعضاً به مرور زمان وقفه‌هایی دارند."

#. (itstool) path: listitem/para
#: book.translate.xml:4474
msgid ""
"Unconfigure hardware that are not in use. Detach disks with "
"<citerefentry><refentrytitle>atacontrol</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>camcontrol</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> if the disks are not "
"used for the test."
msgstr ""
"سخت‌افزارهایی که استفاده‌ای ندارند را غیرپیکربندی کنید. دیسک‌ها را چنانچه "
"برای آزمایش مورد استفاده قرار نگرفته‌اند با <citerefentry><refentrytitle>atac"
"ontrol</refentrytitle><manvolnum>8</manvolnum></citerefentry> و <citerefentry"
"><refentrytitle>camcontrol</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> جدا کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4480
msgid ""
"Do not configure the network unless it is being tested, or wait until after "
"the test has been performed to ship the results off to another computer."
msgstr ""
"شبکه را پیکربندی نکنید مگر آنکه آزمایش شود، یا برای انتقال نتایج به رایانه‌"
"ای دیگر تا اتمام آزمایش صبر کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4484
msgid ""
"If the system must be connected to a public network, watch out for spikes of "
"broadcast traffic. Even though it is hardly noticeable, it will take up CPU "
"cycles. Multicast has similar caveats."
msgstr ""
"اگر قرار باشد سامانه به یک شبکهٔ عمومی متصل گردد، مراقب ضربات ترافیک انتشار "
"باشید. گرچه به‌سختی قابل مشاهده است، چرخه‌های CPU را اشغال می‌کند. Multicast "
"دارای هشدارهای مشابه است."

#. (itstool) path: listitem/para
#: book.translate.xml:4491
msgid ""
"Put each file system on its own disk. This minimizes jitter from head-seek "
"optimizations."
msgstr ""
"هر سامانهٔ پرونده را بر روی دیسک مخصوص به خود قرار دهید. این jitter را از "
"بهینه‌سازی‌های head-seek به‌حداقل می‌رساند."

#. (itstool) path: listitem/para
#: book.translate.xml:4496
msgid ""
"Minimize output to serial or VGA consoles. Running output into files gives "
"less jitter. (Serial consoles easily become a bottleneck.) Do not touch "
"keyboard while the test is running, even <keycap>space</keycap> or "
"<keycap>back-space</keycap> shows up in the numbers."
msgstr ""
"خروجی به سری یا پیشانه‌های VGA را به حداقل برسانید. اجرای خروجی درون پرونده‌"
"ها jitter کمتری به‌دست می‌دهد. (پیشانه‌های سری به‌راحتی تبدیل به گلوگاه "
"می‌شوند.) هنگام اجرای آزمایش به صفحه کلید دست نزنید، حتی <keycap>space</"
"keycap> یا <keycap>back-space</keycap> در شماره‌ها نمایش داده می‌شوند."

#. (itstool) path: listitem/para
#: book.translate.xml:4504
msgid ""
"Make sure the test is long enough, but not too long. If the test is too "
"short, timestamping is a problem. If it is too long temperature changes and "
"drift will affect the frequency of the quartz crystals in the computer. Rule "
"of thumb: more than a minute, less than an hour."
msgstr ""
"مطمئن شوید آزمایش به‌اندازه کافی طولانی باشد، اما نه خیلی طولانی. اگر خیلی "
"کوتاه باشد، مشکل از نشان‌گر زمان است. اگر خیلی طولانی باشد، تغییرات در درجه "
"و خروجی مدار بر روی فرکانس کریستال‌های کوارتز در رایانه تأثیر می‌گذارد. "
"قانون کلی: بیش از یک دقیقه، کمتر از یک ساعت."

#. (itstool) path: listitem/para
#: book.translate.xml:4512
msgid ""
"Try to keep the temperature as stable as possible around the machine. This "
"affects both quartz crystals and disk drive algorithms. To get real stable "
"clock, consider stabilized clock injection. E.g., get a OCXO + PLL, inject "
"output into clock circuits instead of motherboard xtal. Contact Poul-Henning "
"Kamp <email>phk@FreeBSD.org</email> for more information about this."
msgstr ""
"سعی کنید تا درجهٔ اطراف دستگاه را تا جای ممکن ثابت نگه دارید. این هم کریستال‌"
"های کوارتز و هم الگوریتم‌های درایو دیسک را تحت تأثیر می‌گذارد. به‌منظور "
"دریافت ساعت بسیار دقیق، تزریق ساعت تثبیت‌شده را در نظر بگیرید. برای مثال، یک "
"OCXO + PLL بگیرید، خروجی را به‌جای برد اصلی xtal داخل مدارهای ساعت تزریق "
"کنید. برای اطلاعات بیشتر در این مورد با Poul-Henning Kamp <email>phk@FreeBSD."
"org</email> در تماس باشید."

#. (itstool) path: listitem/para
#: book.translate.xml:4522
msgid ""
"Run the test at least 3 times but it is better to run more than 20 times "
"both for <quote>before</quote> and <quote>after</quote> code. Try to "
"interleave if possible (i.e.: do not run 20 times before then 20 times "
"after), this makes it possible to spot environmental effects. Do not "
"interleave 1:1, but 3:3, this makes it possible to spot interaction effects."
msgstr ""
"این آزمایش را حداقل سه بار انجام دهید اما بهتر آن است تا بیش از ۲۰ بار هم "
"برای <quote>قبل</quote> و هم <quote>بعد</quote> از کد اجرا شود. سعی کنید تا "
"اگر مقدور است آن را تقسیم کنید (برای مثال: ۲۰ بار قبل سپس ۲۰ بار بعد اجرا "
"نکنید)، این باعث می‌شود تا تأثیرات محیطی را ببینید. به جز 3:3، 1:1 را تقسیم "
"نکنید، این باعث می‌شود تا اثرات متقابل را ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:4530
msgid ""
"A good pattern is: <literal>bababa{bbbaaa}*</literal>. This gives hint after "
"the first 1+1 runs (so it is possible to stop the test if it goes entirely "
"the wrong way), a standard deviation after the first 3+3 (gives a good "
"indication if it is going to be worth a long run) and trending and "
"interaction numbers later on."
msgstr ""
"یک الگوی خوب چنین است: <literal>bababa{bbbaaa}*</literal>. این پس از اجرای "
"اولین 1+1 راهنما می‌دهد (پس ممکن است آزمایش را متوقف کرد چنانچه به‌طور کل "
"اشتباه شود)، یک انحراف استاندارد پس از اولین 3+3 (نشانه‌ای خوب از اینکه ارزش "
"اجرای طولانی را داشته باشد) و رویه و شماره‌های برهم‌کنش در ادامه."

#. (itstool) path: listitem/para
#: book.translate.xml:4539
msgid ""
"Use <citerefentry><refentrytitle>ministat</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry> to see if the numbers are significant. Consider "
"buying <quote>Cartoon guide to statistics</quote> ISBN: 0062731025, highly "
"recommended, if you have forgotten or never learned about standard deviation "
"and Student's T."
msgstr ""
"از <citerefentry><refentrytitle>ministat</refentrytitle><manvolnum>1</manvoln"
"um></citerefentry> استفاده کنید تا ببینید اگر شماره‌ها مهم هستند. خرید "
"<quote>Cartoon guide to statistics</quote> ISBN: 0062731025 را در نظر بگیرید،"
" چنانچه دربارهٔ انحراف معیار و Student's T فراموش کرده‌اید یا هیچ‌وقت یاد "
"نگرفته‌اید، به‌شدت پیشنهاد می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:4548
msgid ""
"Do not use background <citerefentry><refentrytitle>fsck</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> unless the test is a "
"benchmark of background <command>fsck</command>. Also, disable "
"<varname>background_fsck</varname> in <filename>/etc/rc.conf</filename> "
"unless the benchmark is not started at least 60+<quote><command>fsck</"
"command> runtime</quote> seconds after the boot, as "
"<citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> wakes up and checks if <command>fsck</command> needs to run on "
"any file systems when background <command>fsck</command> is enabled. "
"Likewise, make sure there are no snapshots lying around unless the benchmark "
"is a test with snapshots."
msgstr ""
"هرگز از "
"<citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> در پس‌زمینه استفاده نکنید مگر اینکه آزمایش محکی از "
"<command>fsck</command> در پس‌زمینه باشد. همچنین، <varname>background_fsck</"
"varname> را در <filename>/etc/rc.conf</filename> غیرفعال کنید مگر اینکه "
"آزمون محک حداقل 60+<quote><command>fsck</command> runtime</quote> ثانیه پس "
"از راه‌اندازی (بوت) شروع نشود، زیرا "
"<citerefentry><refentrytitle>rc</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> فعال می‌شود و بررسی می‌کند اگر <command>fsck</command> نیاز "
"دارد تا بر روی هر سامانهٔ پرونده‌ای اجرا شود هنگامی‌که <command>fsck</"
"command> در پس‌زمینه فعال شده است. همچنین، مطمئن شوید برگرفتی وجود نداشته "
"باشد مگر اینکه محک آزمونی با برگرفت‌ها باشد."

#. (itstool) path: listitem/para
#: book.translate.xml:4562
msgid ""
"If the benchmark show unexpected bad performance, check for things like high "
"interrupt volume from an unexpected source. Some versions of <acronym>ACPI</"
"acronym> have been reported to <quote>misbehave</quote> and generate excess "
"interrupts. To help diagnose odd test results, take a few snapshots of "
"<command>vmstat -i</command> and look for anything unusual."
msgstr ""
"چناچه محک‌زنی به‌طور غیرمنتظره کارایی بدی از خود نشان دهد، چیزهایی چون ظرفیت "
"وقفهٔ بالا از منبعی نامشخص را بررسی کنید. گزارش شده است که برخی نسخه‌های "
"<acronym>ACPI</acronym> دچار <quote>رفتارهای نادرست</quote> شده‌اند و وقفه‌"
"های بسیار زیادی ایجاد می‌کنند. برای تشخیص نتایج غیرعادی آزمایش، تعدادی تصویر "
"از <command>vmstat -i</command> بگیرید و به‌دنبال هرچیز نامعمولی باشید."

#. (itstool) path: listitem/para
#: book.translate.xml:4572
msgid ""
"Make sure to be careful about optimization parameters for kernel and "
"userspace, likewise debugging. It is easy to let something slip through and "
"realize later the test was not comparing the same thing."
msgstr ""
"مطمئن شوید مراقب بهینه‌سازی مؤلفه‌های هسته و فضای کاربر باشید، همچنین اشکال‌"
"زدایی. این آسان است که اجازه دهید خطایی رخ دهد و بعد متوجه شوید که آزمایش "
"همان مورد را مقایسه نمی‌کرده است."

#. (itstool) path: listitem/para
#: book.translate.xml:4579
msgid ""
"Do not ever benchmark with the <literal>WITNESS</literal> and "
"<literal>INVARIANTS</literal> kernel options enabled unless the test is "
"interested to benchmarking those features. <literal>WITNESS</literal> can "
"cause 400%+ drops in performance. Likewise, userspace "
"<citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> parameters default differently in -CURRENT from the way they "
"ship in production releases."
msgstr ""
"هرگز با گزینه‌های هستهٔ <literal>WITNESS</literal> و <literal>INVARIANTS</"
"literal> در حالت فعال محک نزنید مگر اینکه خود آزمایش مشتاق به محک‌زنی آن "
"امکانات باشد. <literal>WITNESS</literal> می‌تواند باعث کاهش بیش از ۴۰۰ درصدی "
"در کارایی شود. همچنین، مؤلفه‌های محیط کاربری "
"<citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> نسبت به حالتی‌که در توزیع‌های تولیدی تحویل داده می‌شوند پیش‌"
"فرض متفاوتی در -CURRENT دارند."

#. (itstool) path: section/title
#: book.translate.xml:4591
msgid "The FreeBSD Source Tinderbox"
msgstr "Tinderbox منبع در FreeBSD"

#. (itstool) path: section/para
#: book.translate.xml:4593
msgid "The source Tinderbox consists of:"
msgstr "Tinderbox منبع متشکل است از:"

#. (itstool) path: listitem/para
#: book.translate.xml:4597
msgid ""
"A build script, <filename>tinderbox</filename>, that automates checking out "
"a specific version of the FreeBSD source tree and building it."
msgstr ""
"یک اجرانامهٔ ساخت (build)، <filename>tinderbox</filename>، که روند بررسی یک "
"نسخهٔ بخصوص از درخت منبع FreeBSD و ساختن آن را خودکار می‌سازد."

#. (itstool) path: listitem/para
#: book.translate.xml:4602
msgid ""
"A supervisor script, <filename>tbmaster</filename>, that monitors individual "
"Tinderbox instances, logs their output, and emails failure notices."
msgstr ""
"اجرانامهٔ سرپرست، <filename>tbmaster</filename>، که بر نمونه‌های مستقل "
"Tinderbox نظارت می‌کند، خروجی آنها را ثبت می‌کند، و هشدارهای خرابی را در "
"قالب نامهٔ الکترونیکی ارسال می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:4607
msgid ""
"A <acronym>CGI</acronym> script named <filename>index.cgi</filename> that "
"reads a set of tbmaster logs and presents an easy-to-read <acronym>HTML</"
"acronym> summary of them."
msgstr ""
"یک اجرانامهٔ <acronym>CGI</acronym> تحت عنوان <filename>index.cgi</filename> "
"که مجموعی از موارد ثبت‌شدهٔ tbmaster را می‌خواند و خلاصه‌ای آسان‌خوان در "
"قالب <acronym>HTML</acronym> ارائه می‌دهد."

#. (itstool) path: listitem/para
#: book.translate.xml:4613
msgid ""
"A set of build servers that continually test the tip of the most important "
"FreeBSD code branches."
msgstr ""
"مجموعی از کارسازهای build که رأس مهم‌ترین انشعابات کد FreeBSD را به‌طور مکرر "
"مورد آزمایش قرار می‌دهد."

#. (itstool) path: listitem/para
#: book.translate.xml:4617
msgid ""
"A webserver that keeps a complete set of Tinderbox logs and displays an up-"
"to-date summary."
msgstr ""
"یک کارساز وب که مجموعه‌ای کامل ازموارد ثبت‌شدهٔ Tinderbox را نگه می‌دارد و "
"خلاصه‌ای به‌روز شده را نمایش می‌دهد."

#. (itstool) path: section/para
#: book.translate.xml:4622
msgid ""
"The scripts are maintained and were developed by Dag-Erling Smørgrav "
"<email>des@FreeBSD.org</email>, and are now written in Perl, a move on from "
"their original incarnation as shell scripts. All scripts and configuration "
"files are kept in <link xlink:href=\"https://www.freebsd.org/cgi/cvsweb.cgi/"
"projects/tinderbox/\">/projects/tinderbox/</link>."
msgstr ""
"اجرانامه‌ها توسط Dag-Erling Smørgrav <email>des@FreeBSD.org</email> نگه‌داری "
"و توسعه یافته‌اند، و اکنون با Perl نوشته شده‌اند، تغییری در شکل اصلی آنها به‌"
"عنوان اجرانامه‌های پوسته. تمام اجرانامه‌ها و پرونده‌های پیکربندی در <link "
"xlink:href=\"https://www.freebsd.org/cgi/cvsweb.cgi/projects/tinderbox/\">/"
"projects/tinderbox/</link> نگه داشته می‌شوند."

#. (itstool) path: section/para
#: book.translate.xml:4627
msgid ""
"For more information about the tinderbox and tbmaster scripts at this stage, "
"see their respective man pages: tinderbox(1) and tbmaster(1)."
msgstr ""
"برای اطلاعات بیشتر در مورد اجرانامه‌های tinderbox و tbmaster در این مرحله، "
"صفحات راهنمای آنها را ببینید: tinderbox(1) و tbmaster(1)."

#. (itstool) path: section/title
#: book.translate.xml:4632
msgid "The <filename>index.cgi</filename> Script"
msgstr "اجرانامهٔ <filename>index.cgi</filename>"

#. (itstool) path: section/para
#: book.translate.xml:4634
msgid ""
"The <filename>index.cgi</filename> script generates the <acronym>HTML</"
"acronym> summary of tinderbox and tbmaster logs. Although originally "
"intended to be used as a <acronym>CGI</acronym> script, as indicated by its "
"name, this script can also be run from the command line or from a "
"<citerefentry><refentrytitle>cron</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> job, in which case it will look for logs in the directory "
"where the script is located. It will automatically detect context, "
"generating <acronym>HTTP</acronym> headers when it is run as a <acronym>CGI</"
"acronym> script. It conforms to <acronym>XHTML</acronym> standards and is "
"styled using <acronym>CSS</acronym>."
msgstr ""
"اجرانامهٔ <filename>index.cgi</filename> خلاصه‌ای از لاگ‌های tinderbox و "
"tbmaster در قالب <acronym>HTML</acronym> ایجاد می‌کند. گرچه در اصل بنا بود "
"تا به‌عنوان اجرانامهٔ <acronym>CGI</acronym> از آن استفاده شود، همانطور که "
"از نامش پیداست. این اجرانامه می‌تواند توسط خط فرمان یا یک "
"<citerefentry><refentrytitle>cron</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> job نیز اجرا شود، که در این‌صورت در مسیری که اجرانامه‌ها قرار "
"دارند به‌دنبال لاگ‌ها می‌گردد. به‌طور خودکار متن را تشخیص می‌دهد، و وقتی‌که "
"به‌عنوان اجرانامهٔ <acronym>CGI</acronym> اجرا می‌شود سرآیند‌هایی در قالب "
"<acronym>HTTP</acronym> ایجاد می‌کند. که منطبق بر استانداردهای "
"<acronym>XHTML</acronym> است و با استفاده از <acronym>CSS</acronym> ظاهرسازی "
"شده است."

#. (itstool) path: section/para
#: book.translate.xml:4646
msgid ""
"The script starts in the <function>main()</function> block by attempting to "
"verify that it is running on the official Tinderbox website. If it is not, a "
"page indicating it is not an official website is produced, and a "
"<acronym>URL</acronym> to the official site is provided."
msgstr ""
"اجرانامه در قطعهٔ <function>main()</function> با اقدام به تایید این مسئله که "
"در حال اجرا در وبگاه رسمی Tinderbox است شروع می‌شود. اگر چنین نباشد، صفحه‌ای "
"به‌نشان رسمی نبودن این وبگاه ایجاد می‌شود، و یک <acronym>URL</acronym> به "
"وبگاه رسمی ارائه می‌شود."

#. (itstool) path: section/para
#: book.translate.xml:4652
msgid ""
"Next, it scans the log directory to get an inventory of configurations, "
"branches and architectures for which log files exist, to avoid hard-coding a "
"list into the script and potentially ending up with blank rows or columns. "
"This information is derived from the names of the log files matching the "
"following pattern:"
msgstr ""
"سپس، مسیر لاگ ها را بررسی می‌کند تا فهرستی از پیکربندی‌ها، انشعاب‌ها و "
"معماری‌هایی را که برای آنها پرونده‌های لاگ وجود دارند بدست آورد، و جلوی سخت‌"
"نویسی (hard-coding) فهرست در اجرانامه و به‌طور بالقوه منتهی شدن به ردیف‌ها و "
"ستون‌های خالی را بگیرد. این اطلاعات از نام‌های پرونده‌های لاگی که با الگوهای "
"زیر همخوانی دارند دریافت شده است:"

#. (itstool) path: section/programlisting
#: book.translate.xml:4659
#, no-wrap
msgid "tinderbox-$config-$branch-$arch-$machine.{brief,full}"
msgstr "tinderbox-$config-$branch-$arch-$machine.{brief,full}"

#. (itstool) path: section/para
#: book.translate.xml:4661
msgid ""
"The configurations used on the official Tinderbox build servers are named "
"for the branches they build. For example, the <literal>releng_8</literal> "
"configuration is used to build <literal>RELENG_8</literal> as well as all "
"still-supported release branches."
msgstr ""
"پیکربندی‌هایی که در کارسازهای build رسمیِ Tinderbox استفاده شده‌اند از روی "
"انشعاباتی که می‌سازند نام‌گذاری می‌شوند. برای مثال، پیکربندی "
"<literal>releng_8</literal> در کنار انشعابات توزیعی که هنوز پشتیبانی می‌شوند "
"برای ساخت <literal>RELENG_8</literal> مورد استفاده قرار می‌گیرد."

#. (itstool) path: section/para
#: book.translate.xml:4667
msgid ""
"Once all of this startup procedure has been successfully completed, "
"<function>do_config()</function> is called for each configuration."
msgstr ""
"پس از آنکه تمام این مراحل راه‌اندازی با موفقیت انجام شدند، برای هر پیکربندی "
"<function>do_config()</function> فراخوانده می‌شود."

#. (itstool) path: section/para
#: book.translate.xml:4671
msgid ""
"The <function>do_config()</function> function generates <acronym>HTML</"
"acronym> for a single Tinderbox configuration."
msgstr ""
"تابع <function>do_config()</function> یک <acronym>HTML</acronym> برای "
"پیکربندیِ Tinderbox واحد ایجاد می‌کند."

#. (itstool) path: section/para
#: book.translate.xml:4675
msgid ""
"It works by first generating a header row, then iterating over each branch "
"build with the specified configuration, producing a single row of results "
"for each in the following manner:"
msgstr ""
"این کار ابتدا با ایجاد یک ردیف سرآمد انجام می‌شود، سپس روی هر build انشعاب "
"با پیکربندی بخصوص تکرار می‌شود، و یک ردیف از نتایج برای هر کدام از انشعاب‌ها "
"طبق روش زیر ایجاد می‌کند:"

#. (itstool) path: listitem/para
#: book.translate.xml:4682
msgid "For each item:"
msgstr "به‌ازای هر مورد:"

#. (itstool) path: listitem/para
#: book.translate.xml:4685
msgid "For each machine within that architecture:"
msgstr "به‌ازای هر دستگاه داخل آن معماری:"

#. (itstool) path: listitem/para
#: book.translate.xml:4688
msgid "If a brief log file exists, then:"
msgstr "اگر یک پروندهٔ لاگ مختصر وجود داشته باشد، سپس:"

#. (itstool) path: listitem/para
#: book.translate.xml:4691
msgid ""
"Call <function>success()</function> to determine the outcome of the build."
msgstr ""
"<function>success()</function> را فراخوانی کنید تا نتیجهٔ build را تعیین "
"کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:4695
msgid "Output the modification size."
msgstr "اندازهٔ تغییرات را ارائه دهید."

#. (itstool) path: listitem/para
#: book.translate.xml:4698
msgid ""
"Output the size of the brief log file with a link to the log file itself."
msgstr "اندازهٔ پروندهٔ لاگ مختصر را به‌همراه پیوند به خود پرونده ارائه دهید."

#. (itstool) path: listitem/para
#: book.translate.xml:4702
msgid "If a full log file also exists, then:"
msgstr "اگر یک پروندهٔ لاگ کامل نیز وجود دارد، سپس:"

#. (itstool) path: listitem/para
#: book.translate.xml:4706
msgid ""
"Output the size of the full log file with a link to the log file itself."
msgstr "اندازهٔ پروندهٔ لاگ کامل را به‌همراه پیوند به خود پرونده ارائه دهید."

#. (itstool) path: listitem/para
#: book.translate.xml:4714
msgid "Otherwise:"
msgstr "در غیر اینصورت:"

#. (itstool) path: listitem/para
#: book.translate.xml:4717
msgid "No output."
msgstr "خروجی ندارد."

#. (itstool) path: section/para
#: book.translate.xml:4727
msgid ""
"The <function>success()</function> function mentioned above scans a brief "
"log file for the string <quote>tinderbox run completed</quote> in order to "
"determine whether the build was successful."
msgstr ""
"تابع <function>success()</function> که بالاتر بدان اشاره شد یک پروندهٔ لاگ "
"مختصر را برای رشتهٔ <quote>tinderbox run completed</quote> بررسی می‌کند تا "
"موفقیت‌آمیز بودن build را معین کند."

#. (itstool) path: section/para
#: book.translate.xml:4732
msgid ""
"Configurations and branches are sorted according to their branch rank. This "
"is computed as follows:"
msgstr ""
"پیکربندی‌ها و انشعاب‌ها با توجه به رتبه‌بندی انشعابشان مرتب می‌شوند. این "
"چنین محاسبه می‌شود:"

#. (itstool) path: listitem/para
#: book.translate.xml:4737
msgid "<literal>HEAD</literal> and <literal>CURRENT</literal> have rank 9999."
msgstr ""
"<literal>HEAD</literal> و <literal>CURRENT</literal> دارای مرتبهٔ 9999 هستند."

#. (itstool) path: listitem/para
#: book.translate.xml:4741
msgid ""
"<literal>RELENG_<replaceable>x</replaceable></literal> has rank "
"<replaceable>xx</replaceable>99."
msgstr ""
"<literal>RELENG_<replaceable>x</replaceable></literal> دارای مرتبهٔ "
"<replaceable>xx</replaceable>99 است."

#. (itstool) path: listitem/para
#: book.translate.xml:4745
msgid ""
"<literal>RELENG_<replaceable>x</replaceable>_<replaceable>y</replaceable></"
"literal> has rank <replaceable>xxyy</replaceable>."
msgstr ""
"<literal>RELENG_<replaceable>x</replaceable>_<replaceable>y</replaceable></"
"literal> دارای مرتبهٔ <replaceable>xxyy</replaceable> است."

#. (itstool) path: section/para
#: book.translate.xml:4750
msgid ""
"This means that <literal>HEAD</literal> always ranks highest, and "
"<literal>RELENG</literal> branches are ranked in numerical order, with each "
"<literal>STABLE</literal> branch ranking higher than the release branches "
"forked off of it. For instance, for FreeBSD 8, the order from highest to "
"lowest would be:"
msgstr ""
"این بدان معناست که <literal>HEAD</literal> همیشه دارای بالاترین مرتبه است، و "
"انشعاب‌های <literal>RELENG</literal> به ترتیب شماره رتبه‌بندی می‌شوند، و هر "
"انشعابِ <literal>STABLE</literal> بالاتر از انشعاب‌های توزیعِ منشعب‌شده از "
"آن رتبه‌بندی شده‌اند. برای مثال، برای FreeBSD 8، ترتیب از بالاترین به پایین‌"
"ترین بدین گونه است:"

#. (itstool) path: listitem/para
#: book.translate.xml:4759
msgid "<literal>RELENG_8</literal> (branch rank 899)."
msgstr "<literal>RELENG_8</literal> (رتبه انشعاب 899)."

#. (itstool) path: listitem/para
#: book.translate.xml:4762
msgid "<literal>RELENG_8_3</literal> (branch rank 803)."
msgstr "<literal>RELENG_8_3</literal> (رتبه انشعاب 803)."

#. (itstool) path: listitem/para
#: book.translate.xml:4766
msgid "<literal>RELENG_8_2</literal> (branch rank 802)."
msgstr "<literal>RELENG_8_2</literal> (رتبه انشعاب 802)."

#. (itstool) path: listitem/para
#: book.translate.xml:4770
msgid "<literal>RELENG_8_1</literal> (branch rank 801)."
msgstr "<literal>RELENG_8_1</literal> (رتبه انشعاب 801)."

#. (itstool) path: listitem/para
#: book.translate.xml:4774
msgid "<literal>RELENG_8_0</literal> (branch rank 800)."
msgstr "<literal>RELENG_8_0</literal> (رتبه انشعاب 800)."

#. (itstool) path: section/para
#: book.translate.xml:4779
msgid ""
"The colors that Tinderbox uses for each cell in the table are defined by "
"<acronym>CSS</acronym>. Successful builds are displayed with green text; "
"unsuccessful builds are displayed with red text. The color fades as time "
"passes since the corresponding build, with every half an hour bringing the "
"color closer to grey."
msgstr ""
"رنگ‌هایی که Tinderbox برای هر خانه در جدول استفاده می‌کند توسط <acronym>CSS</"
"acronym> تعریف شده‌اند. build های موفق با رنگ سبز نمایش داده می‌شوند؛ build "
"های ناموفق با رنگ قرمز نمایش داده می‌شوند. رنگ با گذر زمان محو می‌شود از "
"آنجاکه build مربوطه، هر نیم ساعت رنگ را به خاکستری نزدیک‌تر می‌کند."

#. (itstool) path: section/title
#: book.translate.xml:4788
msgid "Official Build Servers"
msgstr "کارسازهای ساخت (build) رسمی"

#. (itstool) path: section/para
#: book.translate.xml:4790
msgid ""
"The official Tinderbox build servers are hosted by <link xlink:href=\"http://"
"www.sentex.ca\">Sentex Data Communications</link>, who also host the FreeBSD "
"Netperf Cluster."
msgstr ""
"کارسازهای ساخت رسمی Tinderbox توسط <link xlink:href=\"http://www.sentex.ca\""
">Sentex Data Communications</link> میزبانی می‌شوند، که FreeBSD Netperf "
"Cluster را نیز میزبانی می‌کنند."

#. (itstool) path: section/para
#: book.translate.xml:4794
msgid "Three build servers currently exist:"
msgstr "سه کارساز ساخت در حال حاضر وجود دارند:"

#. (itstool) path: section/para
#: book.translate.xml:4796
msgid "<emphasis>freebsd-current.sentex.ca</emphasis> builds:"
msgstr "ساخت‌های <emphasis>freebsd-current.sentex.ca</emphasis>:"

#. (itstool) path: listitem/para
#: book.translate.xml:4801
msgid ""
"<literal>HEAD</literal> for amd64, arm, i386, i386/pc98, ia64, mips, "
"powerpc, powerpc64, and sparc64."
msgstr ""
"<literal>HEAD</literal> برای amd64، arm، i386، i386/pc98، ia64، mips، "
"powerpc، powerpc64، و sparc64."

#. (itstool) path: listitem/para
#: book.translate.xml:4806
msgid ""
"<literal>RELENG_9</literal> and supported 9.<replaceable>X</replaceable> "
"branches for amd64, arm, i386, i386/pc98, ia64, mips, powerpc, powerpc64, "
"and sparc64."
msgstr ""
"<literal>RELENG_9</literal> و انشعاب‌های 9.<replaceable>X</replaceable> "
"پشتیبانی‌شده برای amd64، arm، i386، i386/pc98، ia64، mips، powerpc، "
"powerpc64، and sparc64."

#. (itstool) path: section/para
#: book.translate.xml:4813
msgid "<emphasis>freebsd-stable.sentex.ca</emphasis> builds:"
msgstr "ساخت‌های <emphasis>freebsd-stable.sentex.ca</emphasis>:"

#. (itstool) path: listitem/para
#: book.translate.xml:4818
msgid ""
"<literal>RELENG_8</literal> and supported 8.<replaceable>X</replaceable> "
"branches for amd64, i386, i386/pc98, ia64, mips, powerpc and sparc64."
msgstr ""
"<literal>RELENG_8</literal> و انشعاب‌های 8.<replaceable>X</replaceable> "
"پشتیبانی‌شده برای amd64، i386، i386/pc98، ia64، mips، powerpc و sparc64."

#. (itstool) path: section/para
#: book.translate.xml:4824
msgid "<emphasis>freebsd-legacy.sentex.ca</emphasis> builds:"
msgstr "ساخت‌های <emphasis>freebsd-legacy.sentex.ca</emphasis>:"

#. (itstool) path: listitem/para
#: book.translate.xml:4829
msgid ""
"<literal>RELENG_7</literal> and supported 7.<replaceable>X</replaceable> "
"branches for amd64, i386, i386/pc98, ia64, powerpc, and sparc64."
msgstr ""
"<literal>RELENG_7</literal> و انشعاب‌های 7.<replaceable>X</replaceable> "
"پشتیبانی‌شده برای amd64، i386، i386/pc98، ia64، powerpc و sparc64."

#. (itstool) path: section/title
#: book.translate.xml:4837
msgid "Official Summary Site"
msgstr "پایگاه خلاصهٔ رسمی"

#. (itstool) path: section/para
#: book.translate.xml:4839
msgid ""
"Summaries and logs from the official build servers are available online at "
"<link xlink:href=\"http://tinderbox.FreeBSD.org\">http://tinderbox.FreeBSD."
"org</link>, hosted by Dag-Erling Smørgrav <email>des@FreeBSD.org</email> and "
"set up as follows:"
msgstr ""
"خلاصه‌ها و لاگ‌های کارسازهای ساخت (build) رسمی به‌طور برخط در <link "
"xlink:href=\"http://tinderbox.FreeBSD.org\">http://tinderbox.FreeBSD.org</"
"link> در دسترس هستند، و توسط Dag-Erling Smørgrav <email>des@FreeBSD.org</"
"email> میزبانی می‌شوند و بدین ترتیب راه‌اندازی می‌شوند:"

#. (itstool) path: listitem/para
#: book.translate.xml:4845
msgid ""
"A <citerefentry><refentrytitle>cron</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> job checks the build servers at regular intervals and "
"downloads any new log files using <citerefentry vendor=\"ports"
"\"><refentrytitle>rsync</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry>."
msgstr ""
"یک "
"<citerefentry><refentrytitle>cron</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> job در فواصل منظم کارسازهای ساخت را بررسی می‌کند و هر پروندهٔ "
"لاگ جدیدی را به‌کمک <citerefentry vendor=\"ports\""
"><refentrytitle>rsync</refentrytitle><manvolnum>1</manvolnum></citerefentry> "
"بارگیری می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:4850
msgid ""
"Apache is set up to use <filename>index.cgi</filename> as "
"<literal>DirectoryIndex</literal>."
msgstr ""
"Apache به‌گونه‌ای تنظیم شده است تا از <filename>index.cgi</filename> به‌"
"عنوان <literal>DirectoryIndex</literal> استفاده کند."

#. (itstool) path: part/title
#: book.translate.xml:4861
msgid "Interprocess Communication"
msgstr "ارتباط بین پردازشی"

#. (itstool) path: info/title
#: book.translate.xml:4871
msgid "Sockets"
msgstr "سوکت‌ها"

#. (itstool) path: authorgroup/author
#: book.translate.xml:4874
msgid ""
"<personname> <firstname>G. Adam</firstname> <surname>Stanislav</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname> <firstname>G. Adam</firstname> <surname>Stanislav</surname> </"
"personname> <contrib>نوشته شده توسط </contrib>"

#. (itstool) path: sect1/para
#: book.translate.xml:4887
msgid ""
"<acronym>BSD</acronym> sockets take interprocess communications to a new "
"level. It is no longer necessary for the communicating processes to run on "
"the same machine. They still <emphasis>can</emphasis>, but they do not have "
"to."
msgstr ""
"سوکت‌های <acronym>BSD</acronym> ارتباطات بین پردازشی را به سطح جدیدی منتقل "
"می‌کنند. دیگر نیاز نیست که پردازش‌های ارتباطی بر روی یک دستگاه اجرا شوند. "
"همچنان <emphasis>می‌توانند</emphasis>، اما مجبور نیستند."

#. (itstool) path: sect1/para
#: book.translate.xml:4892
msgid ""
"Not only do these processes not have to run on the same machine, they do not "
"have to run under the same operating system. Thanks to <acronym>BSD</"
"acronym> sockets, your FreeBSD software can smoothly cooperate with a "
"program running on a <trademark class=\"registered\">Macintosh</trademark>, "
"another one running on a <trademark>Sun</trademark> workstation, yet another "
"one running under <trademark class=\"registered\">Windows</trademark> 2000, "
"all connected with an Ethernet-based local area network."
msgstr ""
"نه تنها لازم نیست این پردازش‌ها بر روی یک دستگاه اجرا شوند، بلکه لازم نیست "
"تحت سامانهٔ عاملی یکسان باشند. به لطف سوکت‌های <acronym>BSD</acronym>، نرم‌"
"افزار FreeBSD شما می‌تواند به راحتی می‌تواند با برنامه‌ای بر روی یک "
"<trademark class=\"registered\">Macintosh</trademark>، برنامهٔ دیگری بر روی "
"یک ایستگاه کاربری <trademark>Sun</trademark>، حتی برنامهٔ دیگری که تحت "
"<trademark class=\"registered\">Windows</trademark> 2000 اجرا شده است، همه "
"وصل شده به یک شبکهٔ داخلی متکی بر Ethernet، همکاری کند."

#. (itstool) path: sect1/para
#: book.translate.xml:4900
msgid ""
"But your software can equally well cooperate with processes running in "
"another building, or on another continent, inside a submarine, or a space "
"shuttle."
msgstr ""
"به همین ترتیب برنامهٔ شما می‌تواند با یک پردازش‌های در حال اجرا در ساختمانی "
"دیگر، یا در قاره‌ای دیگر، در یک زیردریایی، یا یک شاتل فضایی همکاری کند."

#. (itstool) path: sect1/para
#: book.translate.xml:4904
msgid ""
"It can also cooperate with processes that are not part of a computer (at "
"least not in the strict sense of the word), but of such devices as printers, "
"digital cameras, medical equipment. Just about anything capable of digital "
"communications."
msgstr ""
"همچنین می‌تواند با پردازش‌هایی که جزئی از رایانه نیستند (حداقل نه به شکل "
"اصلی واژه) و بخشی از چاپگرها، دوربین‌های دیجیتال، یا تجهیزات پزشکی هستند "
"همکاری کند. تقریباً در مورد هر چیزی که قادر به ارتباطات دیجیتال باشد."

#. (itstool) path: sect1/title
#: book.translate.xml:4912
msgid "Networking and Diversity"
msgstr "شبکه‌سازی و گوناگونی"

#. (itstool) path: sect1/para
#: book.translate.xml:4914
msgid ""
"We have already hinted on the <emphasis>diversity</emphasis> of networking. "
"Many different systems have to talk to each other. And they have to speak "
"the same language. They also have to <emphasis>understand</emphasis> the "
"same language the same way."
msgstr ""
"ما پیشتر به <emphasis>گوناگونی</emphasis> در شبکه اشاره کرده‌ایم. بسیاری از "
"سامانه‌های مختلف باید با یک‌دیگر صحبت کنند. و باید به زبانی یکسان صحبت کنند. "
"همچنین باید آن زبان یکسان را به شیوه‌ای یکسان <emphasis>بفهمند</emphasis>."

#. (itstool) path: sect1/para
#: book.translate.xml:4920
msgid ""
"People often think that <emphasis>body language</emphasis> is universal. But "
"it is not. Back in my early teens, my father took me to Bulgaria. We were "
"sitting at a table in a park in Sofia, when a vendor approached us trying to "
"sell us some roasted almonds."
msgstr ""
"مردم اغلب فکر می‌کنند که <emphasis>زبان بدن</emphasis> جهانی است. اما اینطور "
"نیست. در اوایل نوجوانی، پدرم مرا به بلغارستان برد. ما در پارکی در صوفیه سر "
"میزی نشسته بودیم که فروشنده‌ای به ما نزدیک شد و خواست تا مقداری بادام برشته "
"شده به ما بفروشد."

#. (itstool) path: sect1/para
#: book.translate.xml:4926
msgid ""
"I had not learned much Bulgarian by then, so, instead of saying no, I shook "
"my head from side to side, the <quote>universal</quote> body language for "
"<emphasis>no</emphasis>. The vendor quickly started serving us some almonds."
msgstr ""
"من تا آن زمان بلغاری زیادی یاد نگرفته بودم، بنابراین به‌جای نه گفتن، سرم را "
"از طرفی به طرف دیگر تکان دادم، زبان بدنیِ <quote>جهانی</quote> برای "
"<emphasis>پاسخ منفی</emphasis>. فروشنده به‌سرعت شروع کرد به سرو کردن مقداری "
"بادام."

#. (itstool) path: sect1/para
#: book.translate.xml:4932
msgid ""
"I then remembered I had been told that in Bulgaria shaking your head "
"sideways meant <emphasis>yes</emphasis>. Quickly, I started nodding my head "
"up and down. The vendor noticed, took his almonds, and walked away. To an "
"uninformed observer, I did not change the body language: I continued using "
"the language of shaking and nodding my head. What changed was the "
"<emphasis>meaning</emphasis> of the body language. At first, the vendor and "
"I interpreted the same language as having completely different meaning. I "
"had to adjust my own interpretation of that language so the vendor would "
"understand."
msgstr ""
"بعد به یاد آوردم که در بلغارستان تکان دادن سر به طرفین به معنی "
"<emphasis>پاسخ مثبت</emphasis> است. به‌سرعت شروع به تکان دادن سرم به بالا و "
"پایین کردم. فروشنده متوجه شد، بادام‌هایش را برداشت، و رفت. برای یک ناظر "
"ناآگاه، من زبان بدن را تغییر ندادم: به استفاده از زبان تکان دادن سرم ادامه "
"دادم. چیزی که تغییر کرده بود، <emphasis>معنای</emphasis> زبان بدن بود. در "
"ابتدا، فروشنده و من هر دو یک زبان را با معانی کاملاً متفاوت تفسیر کردیم. من "
"باید تفسیر خود را از آن زبان به‌گونه‌ای تنظیم می‌کردم تا فروشنده درک کند."

#. (itstool) path: sect1/para
#: book.translate.xml:4944
msgid ""
"It is the same with computers: The same symbols may have different, even "
"outright opposite meaning. Therefore, for two computers to understand each "
"other, they must not only agree on the same <emphasis>language</emphasis>, "
"but on the same <emphasis>interpretation</emphasis> of the language."
msgstr ""
"در مورد رایانه‌ها نیز همینطور است: نمادهای مشابه می‌توانند معانی متفاوت، یا "
"حتی کاملاً مخالف داشته باشند. بنابراین، برای اینکه دو رایانه همدیگر را "
"بفهمند، آنها نه تنها باید بر روی یک <emphasis>زبان</emphasis> یکسان، بلکه بر "
"روی <emphasis>تفسیر</emphasis> یکسان از آن زبان اتفاق داشته باشند."

#. (itstool) path: sect1/title
#: book.translate.xml:4952
msgid "Protocols"
msgstr "قرارداد‌ها (پروتکل‌ها)"

#. (itstool) path: sect1/para
#: book.translate.xml:4954
msgid ""
"While various programming languages tend to have complex syntax and use a "
"number of multi-letter reserved words (which makes them easy for the human "
"programmer to understand), the languages of data communications tend to be "
"very terse. Instead of multi-byte words, they often use individual "
"<emphasis>bits</emphasis>. There is a very convincing reason for it: While "
"data travels <emphasis>inside</emphasis> your computer at speeds approaching "
"the speed of light, it often travels considerably slower between two "
"computers."
msgstr ""
"در حالی که زبان‌های مختلف برنامه‌نویسی دارای قواعد نحوی پیچیده‌ای هستند و از "
"تعدادی واژگان چند حرفی رزرو شده استفاده می‌کنند (که درک آنها را برای انسان "
"برنامه‌نویس آسان می‌کند)، زبان‌های ارتباطات داده بسیار مختصر هستند. به جای "
"واژگان چند-بایتی، اغلب از <emphasis>بیت‌های</emphasis> منفرد استفاده می‌"
"کنند. یک دلیل بسیار قانع کننده برای آن وجود دارد: در حالی که داده "
"<emphasis>داخل</emphasis> رایانهٔ شما با سرعتی نزدیک به سرعت نور حرکت می‌کند،"
" غالباً بین دو رایانه به‌طور قابل توجهی کندتر حرکت می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:4964
msgid ""
"Because the languages used in data communications are so terse, we usually "
"refer to them as <emphasis>protocols</emphasis> rather than languages."
msgstr ""
"از آن رو که زبان‌های استفاده شده در ارتباطات داده بسیار مختصرند، ما به‌طور "
"معمول به آنها به جای زبان‌ها، به‌عنوان <emphasis>قراردادها</emphasis> "
"(protocols) اشاره می‌کنیم."

#. (itstool) path: sect1/para
#: book.translate.xml:4968
msgid ""
"As data travels from one computer to another, it always uses more than one "
"protocol. These protocols are <emphasis>layered</emphasis>. The data can be "
"compared to the inside of an onion: You have to peel off several layers of "
"<quote>skin</quote> to get to the data. This is best illustrated with a "
"picture:"
msgstr ""
"وقتی داده از رایانه‌ای به رایانه‌ای دیگر حرکت می‌کند، همیشه از بیش از یک "
"قرارداد استفاده می‌کند. این قراردادها <emphasis>لایه‌لایه</emphasis> هستند. "
"داده را می‌توان با داخل یک پیاز قیاس کرد: باید رسیدن به داده، باید چند لایه "
"از <quote>پوست</quote> را جدا کنید. این موضوع بهتر است با یک تصویر تشریح شود:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:4977
msgctxt "_"
msgid "external ref='sockets/layers' md5='__failed__'"
msgstr "external ref='sockets/layers' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:4981
#, no-wrap
msgid ""
"+----------------+\n"
"|    Ethernet    |\n"
"|+--------------+|\n"
"||      IP      ||\n"
"||+------------+||\n"
"|||     TCP    |||\n"
"|||+----------+|||\n"
"||||   HTTP   ||||\n"
"||||+--------+||||\n"
"|||||   PNG  |||||\n"
"|||||+------+|||||\n"
"|||||| Data ||||||\n"
"|||||+------+|||||\n"
"||||+--------+||||\n"
"|||+----------+|||\n"
"||+------------+||\n"
"|+--------------+|\n"
"+----------------+"
msgstr ""
"+----------------+\n"
"|    Ethernet    |\n"
"|+--------------+|\n"
"||      IP      ||\n"
"||+------------+||\n"
"|||     TCP    |||\n"
"|||+----------+|||\n"
"||||   HTTP   ||||\n"
"||||+--------+||||\n"
"|||||   PNG  |||||\n"
"|||||+------+|||||\n"
"|||||| Data ||||||\n"
"|||||+------+|||||\n"
"||||+--------+||||\n"
"|||+----------+|||\n"
"||+------------+||\n"
"|+--------------+|\n"
"+----------------+"

#. (itstool) path: sect1/mediaobject
#: book.translate.xml:4975
msgid ""
"<imageobject> <imagedata fileref=\"sockets/layers\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>Protocol Layers</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/layers\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>لایه‌"
"های قرارداد</phrase> </textobject>"

#. (itstool) path: sect1/para
#: book.translate.xml:5006
msgid ""
"In this example, we are trying to get an image from a web page we are "
"connected to via an Ethernet."
msgstr ""
"در این مثال، ما خواهان دریافت یک عکس از صفحهٔ وبی هستیم که توسط یک Ethernet "
"به آن وصل شده‌ایم."

#. (itstool) path: sect1/para
#: book.translate.xml:5009
msgid ""
"The image consists of raw data, which is simply a sequence of <acronym>RGB</"
"acronym> values that our software can process, i.e., convert into an image "
"and display on our monitor."
msgstr ""
"این عکس متشکل از دادهٔ خام است، که در حقیقت دنباله‌ای از مقادیر "
"<acronym>RGB</acronym> هستند که نرم‌افزار ما آن را می‌تواند پردازش کند، "
"به‌گفته‌ای دیگر، به عکسی قابل نمایش بر روی صفحه نمایش ما تبدیل کند."

#. (itstool) path: sect1/para
#: book.translate.xml:5013
msgid ""
"Alas, our software has no way of knowing how the raw data is organized: Is "
"it a sequence of <acronym>RGB</acronym> values, or a sequence of grayscale "
"intensities, or perhaps of <acronym>CMYK</acronym> encoded colors? Is the "
"data represented by 8-bit quanta, or are they 16 bits in size, or perhaps 4 "
"bits? How many rows and columns does the image consist of? Should certain "
"pixels be transparent?"
msgstr ""
"افسوس، نرم‌افزار ما هیچ راهی برای تشخیص نحوهٔ سازماندهی داده‌های خام ندارد: "
"آیا این یک دنبالهٔ مقادیر <acronym>RGB</acronym> است، یا دنباله‌ای از شدت "
"طیف خاکستری‌ها، یا شاید هم رنگ‌های کدگذاری شدهٔ <acronym>CMYK</acronym>؟ این "
"داده‌ها توسط ذرات هشت بیتی نمایش داده شده‌اند، یا اندازهٔ آنها شانزده بیت، و "
"یا شاید چهار بیت است؟ تصویر متشکل از چند ردیف و ستون است؟ آیا پیکسل‌های خاصی "
"باید شفاف باشند؟"

#. (itstool) path: sect1/para
#: book.translate.xml:5021
msgid "I think you get the picture..."
msgstr "به گمانم که درک کردید..."

#. (itstool) path: sect1/para
#: book.translate.xml:5023
msgid ""
"To inform our software how to handle the raw data, it is encoded as a "
"<acronym>PNG</acronym> file. It could be a <acronym>GIF</acronym>, or a "
"<acronym>JPEG</acronym>, but it is a <acronym>PNG</acronym>."
msgstr ""
"برای مطلع‌سازی نرم‌افزار ما از نحوهٔ مدیریت داده‌های خام، تصویر به‌عنوان یک "
"پروندهٔ <acronym>PNG</acronym> کدگذاری شده‌است. می‌توانست یک "
"<acronym>GIF</acronym>، یا یک <acronym>JPEG</acronym> باشد، اما یک "
"<acronym>PNG</acronym> است."

#. (itstool) path: sect1/para
#: book.translate.xml:5028
msgid "And <acronym>PNG</acronym> is a protocol."
msgstr "و <acronym>PNG</acronym> یک قرارداد است."

#. (itstool) path: sect1/para
#: book.translate.xml:5030
msgid ""
"At this point, I can hear some of you yelling, <emphasis><quote>No, it is "
"not! It is a file format!</quote></emphasis>"
msgstr ""
"در این مرحله، می‌توانم برخی از شما را بشنوم که دارید فریاد می‌زنید، "
"<emphasis><quote>نه، اینطور نیست! این یک قالب پرونده است!</quote></emphasis>"

#. (itstool) path: sect1/para
#: book.translate.xml:5034
msgid ""
"Well, of course it is a file format. But from the perspective of data "
"communications, a file format is a protocol: The file structure is a "
"<emphasis>language</emphasis>, a terse one at that, communicating to our "
"<emphasis>process</emphasis> how the data is organized. Ergo, it is a "
"<emphasis>protocol</emphasis>."
msgstr ""
"البته که این یک قالب پرونده است. اما از منظر ارتباطات داده، یک قالب پرونده "
"یک قرارداد است. ساختار پرونده یک <emphasis>زبان</emphasis> است، یک زبان "
"مختصر، که <emphasis>فرآیند</emphasis> ما را در روند سازمان‌دهی داده مطلع می‌"
"سازد. بنابراین، یک <emphasis>قرارداد</emphasis> است."

#. (itstool) path: sect1/para
#: book.translate.xml:5041
msgid ""
"Alas, if all we received was the <acronym>PNG</acronym> file, our software "
"would be facing a serious problem: How is it supposed to know the data is "
"representing an image, as opposed to some text, or perhaps a sound, or what "
"not? Secondly, how is it supposed to know the image is in the <acronym>PNG</"
"acronym> format as opposed to <acronym>GIF</acronym>, or <acronym>JPEG</"
"acronym>, or some other image format?"
msgstr ""
"آوخ، اگر تمام چیزی که ما دریافت کردیم پروندهٔ <acronym>PNG</acronym> بود، "
"نرم‌افزار ما با مشکل سختی مواجه می‌شد: از کجا باید می‌دانست که داده نمایانگر "
"یک تصویر است، و نه مقداری متن، و شاید یک صدا، و نه چیزی دیگر؟ دومی، چطور "
"باید بداند که تصویر یک <acronym>PNG</acronym> است و نه "
"<acronym>GIF</acronym>، یا <acronym>JPEG</acronym>، یا گونه‌ای دیگر از تصویر؟"

#. (itstool) path: sect1/para
#: book.translate.xml:5049
msgid ""
"To obtain that information, we are using another protocol: <acronym>HTTP</"
"acronym>. This protocol can tell us exactly that the data represents an "
"image, and that it uses the <acronym>PNG</acronym> protocol. It can also "
"tell us some other things, but let us stay focused on protocol layers here."
msgstr ""
"برای بدست آوردن این اطلاعات، ما از قراردادی دیگر استفاده می‌کنیم: "
"<acronym>HTTP</acronym>. این قرارداد می‌تواند دقیقاً به ما بگوید که داده "
"نمایانگر یک تصویر است، و از قرارداد <acronym>PNG</acronym> استفاده می‌کند. "
"می‌تواند چیزهای دیگری هم به ما بگوید، اما اکنون بیایید بر روی لایه‌های "
"قرارداد متمرکز بمانیم."

#. (itstool) path: sect1/para
#: book.translate.xml:5055
msgid ""
"So, now we have some data wrapped in the <acronym>PNG</acronym> protocol, "
"wrapped in the <acronym>HTTP</acronym> protocol. How did we get it from the "
"server?"
msgstr ""
"بسیار خوب، حال مقداری دادهٔ پیچیده شده در قرارداد <acronym>PNG</acronym>، "
"پیچیده شده در قرارداد <acronym>HTTP</acronym> داریم. چطور این را از کارساز "
"گرفتیم؟"

#. (itstool) path: sect1/para
#: book.translate.xml:5060
msgid ""
"By using <acronym>TCP/IP</acronym> over Ethernet, that is how. Indeed, that "
"is three more protocols. Instead of continuing inside out, I am now going to "
"talk about Ethernet, simply because it is easier to explain the rest that "
"way."
msgstr ""
"بدین شکل، با استفاده از <acronym>TCP/IP</acronym> بر روی اِتِرنِت. صحیح، این "
"سه قرارداد دیگر است. به جای ادامهٔ از داخل به بیرون، اکنون می‌خواهم در مورد "
"اترنت صحبت کنم، چرا که ساده‌تر از مابقی می‌توان توضیحش داد."

#. (itstool) path: sect1/para
#: book.translate.xml:5065
msgid ""
"Ethernet is an interesting system of connecting computers in a "
"<emphasis>local area network</emphasis> (<acronym>LAN</acronym>). Each "
"computer has a <emphasis>network interface card</emphasis> (<acronym>NIC</"
"acronym>), which has a unique 48-bit <acronym>ID</acronym> called its "
"<emphasis>address</emphasis>. No two Ethernet <acronym>NIC</acronym>s in the "
"world have the same address."
msgstr ""
"اترنت یک سامانهٔ جالب برای ارتباط رایانه‌ها در یک <emphasis>شبکهٔ محلی</"
"emphasis> (<acronym>LAN</acronym>) است. هر رایانه یک <emphasis>کارت شبکه</"
"emphasis> (<acronym>NIC</acronym>) دارد، که یک <acronym>ID</acronym> ۴۸-بیتی "
"منحصر به فرد به عنوان <emphasis>نشانی</emphasis> خود دارد. هیچ دو "
"<acronym>NIC</acronym> در دنیا یک نشانی مشترک ندارند."

#. (itstool) path: sect1/para
#: book.translate.xml:5074
msgid ""
"These <acronym>NIC</acronym>s are all connected with each other. Whenever "
"one computer wants to communicate with another in the same Ethernet "
"<acronym>LAN</acronym>, it sends a message over the network. Every "
"<acronym>NIC</acronym> sees the message. But as part of the Ethernet "
"<emphasis>protocol</emphasis>, the data contains the address of the "
"destination <acronym>NIC</acronym> (among other things). So, only one of all "
"the network interface cards will pay attention to it, the rest will ignore "
"it."
msgstr ""
"این <acronym>NIC</acronym> ها همه با یکدیگر مرتبط هستند. هر زمان که یک "
"رایانه می‌خواهد با رایانه‌ای دیگر در یک اترنت <acronym>LAN</acronym> صحبت "
"کند، پیامی بر روی شبکه ارسال می‌کند. تمام <acronym>NIC</acronym> ها پیام را "
"می‌بینند. اما به‌عنوان بخشی از <emphasis>قرارداد</emphasis> اترنت، داده حاوی "
"نشانیِ <acronym>NIC</acronym> مقصد (میان دیگران) است. بنابراین، تنها یکی از "
"تمام کارت شبکه‌ها به آن توجه می‌کند، مابقی آن را نادیده می‌گیرند."

#. (itstool) path: sect1/para
#: book.translate.xml:5084
msgid ""
"But not all computers are connected to the same network. Just because we "
"have received the data over our Ethernet does not mean it originated in our "
"own local area network. It could have come to us from some other network "
"(which may not even be Ethernet based) connected with our own network via "
"the Internet."
msgstr ""
"اما همهٔ رایانه‌ها به یک شبکه وصل نیستند. اینکه ما داده را از طریق اترنت "
"دریافت کردیم به این معنا نیست که خاستگاه آن شبکه محلی خودمان است. می‌تواند "
"از شبکهٔ دیگری (که حتی ممکن است مبتنی بر اترنت نباشد) که به واسطهٔ اینترنت "
"با ما ارتباط دارد به سمت ما آمده باشد."

#. (itstool) path: sect1/para
#: book.translate.xml:5091
msgid ""
"All data is transferred over the Internet using <acronym>IP</acronym>, which "
"stands for <emphasis>Internet Protocol</emphasis>. Its basic role is to let "
"us know where in the world the data has arrived from, and where it is "
"supposed to go to. It does not <emphasis>guarantee</emphasis> we will "
"receive the data, only that we will know where it came from <emphasis>if</"
"emphasis> we do receive it."
msgstr ""
"تمامی داده‌ها بر روی اینترنت به واسطهٔ <acronym>IP</acronym> منتقل می‌شوند، "
"که مخفف <emphasis>قرارداد اینترنت</emphasis> است. نقش اساسی آن آگاه ساختن ما "
"از خاستگاه یک داده در دنیا و مقصد آن است. این <emphasis>تضمین</emphasis> نمی‌"
"کند که ما داده را دریافت می‌کنیم، تنها اینکه می‌دانیم داده از کجا آمده است "
"را تضمین می‌کند، البته <emphasis>اگر</emphasis> که دریافتش کنیم."

#. (itstool) path: sect1/para
#: book.translate.xml:5099
msgid ""
"Even if we do receive the data, <acronym>IP</acronym> does not guarantee we "
"will receive various chunks of data in the same order the other computer has "
"sent it to us. So, we can receive the center of our image before we receive "
"the upper left corner and after the lower right, for example."
msgstr ""
"حتی اگر داده را دریافت کنیم، <acronym>IP</acronym> تضمینی نمی‌کند که تکه‌های "
"مختلف را به همان ترتیب که از رایانهٔ دیگر ارسال شده است دریافت کنیم. "
"بنابراین، به‌طور مثال می‌توانیم مرکز تصویر را قبل از گوشهٔ بالا سمت چپ و بعد "
"از پایین سمت راست تصویر دریافت کنیم."

#. (itstool) path: sect1/para
#: book.translate.xml:5105
msgid ""
"It is <acronym>TCP</acronym> (<emphasis>Transmission Control Protocol</"
"emphasis>) that asks the sender to resend any lost data and that places it "
"all into the proper order."
msgstr ""
"این <acronym>TCP</acronym> (<emphasis>قرارداد هدایت انتقال</emphasis>) است "
"که از فرستنده درخواست ارسال مجدد هر دادهٔ گم‌شده را می‌کند و تمام آن را در "
"ترتیب درست قرار می‌دهد."

#. (itstool) path: sect1/para
#: book.translate.xml:5109
msgid ""
"All in all, it took <emphasis>five</emphasis> different protocols for one "
"computer to communicate to another what an image looks like. We received the "
"data wrapped into the <acronym>PNG</acronym> protocol, which was wrapped "
"into the <acronym>HTTP</acronym> protocol, which was wrapped into the "
"<acronym>TCP</acronym> protocol, which was wrapped into the <acronym>IP</"
"acronym> protocol, which was wrapped into the <acronym>Ethernet</acronym> "
"protocol."
msgstr ""
"در مجموع، <emphasis>پنج</emphasis> قرارداد مختلف استفاده شد تا یک رایانه "
"رایانه‌ای دیگر از ظاهر یک تصویر مطلع سازد. ما داده را پیچیده شده در قرارداد "
"<acronym>PNG</acronym> دریافت کردیم، که خود پیچیده شده در قرارداد "
"<acronym>HTTP</acronym> بود، که آن پیچیده شده در قرارداد <acronym>TCP</"
"acronym> بود، که پیچیده شده در قرارداد <acronym>IP</acronym> بود، که آن هم "
"پیچیده شده در قرارداد <acronym>اترنت</acronym> بود."

#. (itstool) path: sect1/para
#: book.translate.xml:5118
msgid ""
"Oh, and by the way, there probably were several other protocols involved "
"somewhere on the way. For example, if our <acronym>LAN</acronym> was "
"connected to the Internet through a dial-up call, it used the <acronym>PPP</"
"acronym> protocol over the modem which used one (or several) of the various "
"modem protocols, et cetera, et cetera, et cetera..."
msgstr ""
"اوه،‌راستی، احتمالاً چند قراداد دیگر هم جایی در مسیر درگیر بودند. برای مثال، "
"اگر <acronym>LAN</acronym> ما به اینترنت توسط یک تماس dial-up وصل شده بود، "
"از قرارداد <acronym>PPP</acronym> بر روی مُودم استفاده می‌کرد که خود از یکی ("
"یا چندتا) از قراردادهای مختلف مرتبط با مودم استفاده می‌کرد، و غیره، و غیره، "
"و غیره..."

#. (itstool) path: sect1/para
#: book.translate.xml:5125
msgid ""
"As a developer you should be asking by now, <emphasis><quote>How am I "
"supposed to handle it all?</quote></emphasis>"
msgstr ""
"به‌عنوان یک توسعه‌دهنده، این سؤال باید برایتان پیش آمده باشد که "
"<emphasis><quote>چطور باید همهٔ این را مدیریت کنم؟</quote></emphasis>"

#. (itstool) path: sect1/para
#: book.translate.xml:5129
msgid ""
"Luckily for you, you are <emphasis>not</emphasis> supposed to handle it all. "
"You <emphasis>are</emphasis> supposed to handle some of it, but not all of "
"it. Specifically, you need not worry about the physical connection (in our "
"case Ethernet and possibly <acronym>PPP</acronym>, etc). Nor do you need to "
"handle the Internet Protocol, or the Transmission Control Protocol."
msgstr ""
"خوشبختانه، شما بنا <emphasis>نیست</emphasis> تماما این فرآیند را مدیریت "
"کنید. شما <emphasis>بناست</emphasis> بخشی از آن را مدیریت کنید، اما نه همهٔ "
"آن را. به‌طور مشخص، شما نیازی نیست نگران ارتباط فیزیکی (در این مثال اترنت و "
"احتمالاً <acronym>PPP</acronym>، و غیره) باشید. همچنین نیاز نیست قرارداد "
"اینترنت، یا قرارداد هدایت انتقال را مدیریت کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:5137
msgid ""
"In other words, you do not have to do anything to receive the data from the "
"other computer. Well, you do have to <emphasis>ask</emphasis> for it, but "
"that is almost as simple as opening a file."
msgstr ""
"به‌گفته‌ای دیگر، برای دریافت داده از رایانه‌ای دیگر شما نیاز نیست هیچ کاری "
"کنید. در حقیقت، شما باید برای آن <emphasis>تقاضا</emphasis> کنید، اما این به "
"سادگی باز کردن یک پرونده است."

#. (itstool) path: sect1/para
#: book.translate.xml:5142
msgid ""
"Once you have received the data, it is up to you to figure out what to do "
"with it. In our case, you would need to understand the <acronym>HTTP</"
"acronym> protocol and the <acronym>PNG</acronym> file structure."
msgstr ""
"به محض اینکه داده را دریافت کنید، دیگر به شما مربوط است که بفهمید با آن چه "
"باید کنید. در مثال ما، شما نیاز به درک قرارداد <acronym>HTTP</acronym> و "
"ساختار پروندهٔ <acronym>PNG</acronym> دارید."

#. (itstool) path: sect1/para
#: book.translate.xml:5147
msgid ""
"To use an analogy, all the internetworking protocols become a gray area: Not "
"so much because we do not understand how it works, but because we are no "
"longer concerned about it. The sockets interface takes care of this gray "
"area for us:"
msgstr ""
"برای استفاده از یک تشبیه، تمام قراردادهای اینترنت به یک فضای خاکستری بدل "
"می‌شوند: نه به این دلیل که نمی‌فهمیم چطور کار می‌کنند، بلکه به این دلیل که "
"دیگر نگرانشان نیستیم. سوکت‌ها از این فضاهای خاکستری برایمان مراقبت می‌کنند:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5154
msgctxt "_"
msgid "external ref='sockets/slayers' md5='__failed__'"
msgstr "external ref='sockets/slayers' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5158
#, no-wrap
msgid ""
"+----------------+\n"
"|xxxxEthernetxxxx|\n"
"|+--------------+|\n"
"||xxxxxxIPxxxxxx||\n"
"||+------------+||\n"
"|||xxxxxTCPxxxx|||\n"
"|||+----------+|||\n"
"||||   HTTP   ||||\n"
"||||+--------+||||\n"
"|||||   PNG  |||||\n"
"|||||+------+|||||\n"
"|||||| Data ||||||\n"
"|||||+------+|||||\n"
"||||+--------+||||\n"
"|||+----------+|||\n"
"||+------------+||\n"
"|+--------------+|\n"
"+----------------+"
msgstr ""
"+----------------+\n"
"|xxxxEthernetxxxx|\n"
"|+--------------+|\n"
"||xxxxxxIPxxxxxx||\n"
"||+------------+||\n"
"|||xxxxxTCPxxxx|||\n"
"|||+----------+|||\n"
"||||   HTTP   ||||\n"
"||||+--------+||||\n"
"|||||   PNG  |||||\n"
"|||||+------+|||||\n"
"|||||| Data ||||||\n"
"|||||+------+|||||\n"
"||||+--------+||||\n"
"|||+----------+|||\n"
"||+------------+||\n"
"|+--------------+|\n"
"+----------------+"

#. (itstool) path: sect1/mediaobject
#: book.translate.xml:5152
msgid ""
"<imageobject> <imagedata fileref=\"sockets/slayers\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>Sockets "
"Covered Protocol Layers</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/slayers\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>لایه‌"
"های قراردادی تحت پوشش سوکت‌ها</phrase> </textobject>"

#. (itstool) path: sect1/para
#: book.translate.xml:5183
msgid ""
"We only need to understand any protocols that tell us how to "
"<emphasis>interpret the data</emphasis>, not how to <emphasis>receive</"
"emphasis> it from another process, nor how to <emphasis>send</emphasis> it "
"to another process."
msgstr ""
"ما تنها لازم است قراردادهایی که به ما از نحوهٔ چگونه <emphasis>تفسیر کردن "
"داده</emphasis> می‌گویند را بدانیم، نه چگونه <emphasis>دریافت کردن</"
"emphasis> آن از فرآیندی دیگر را، و نه حتی چگونه <emphasis>ارسال کردن</"
"emphasis> آن به فرآیند دیگری را."

#. (itstool) path: sect1/title
#: book.translate.xml:5191
msgid "The Sockets Model"
msgstr "پیکر سوکت‌ها"

#. (itstool) path: sect1/para
#: book.translate.xml:5193
msgid ""
"<acronym>BSD</acronym> sockets are built on the basic <trademark class="
"\"registered\">UNIX</trademark> model: <emphasis>Everything is a file.</"
"emphasis> In our example, then, sockets would let us receive an "
"<emphasis>HTTP file</emphasis>, so to speak. It would then be up to us to "
"extract the <emphasis><acronym>PNG</acronym> file</emphasis> from it."
msgstr ""
"سوکت‌های <acronym>BSD</acronym> بر روی الگوی اساسی <trademark class="
"\"registered\">UNIX</trademark> ساخته شده‌اند: <emphasis>همه چیز پرونده "
"است.</emphasis> از این رو، در مثال ما، سوکت‌ها برای ما امکان دریافت یک "
"<emphasis>پروندهٔ HTTP</emphasis> را برای صحبت فراهم می‌کنند. و سپس، استخراج "
"<emphasis>پروندهٔ <acronym>PNG</acronym></emphasis> از آن به عهدهٔ ماست."

#. (itstool) path: sect1/para
#: book.translate.xml:5200
msgid ""
"Because of the complexity of internetworking, we cannot just use the "
"<function role=\"syscall\">open</function> system call, or the "
"<function>open()</function> C function. Instead, we need to take several "
"steps to <quote>opening</quote> a socket."
msgstr ""
"به دلیل پیچیدگی اینترنت، ما نمی‌توانیم تنها از فراخوان سیستمیِ <function "
"role=\"syscall\">open</function>، یا تابع <function>open()</function> در "
"زبان C استفاده کنیم. بلکه، به طی کردن چندین مرحله برای <quote>باز کردن</"
"quote> یک سوکت نیاز داریم."

#. (itstool) path: sect1/para
#: book.translate.xml:5205
msgid ""
"Once we do, however, we can start treating the <emphasis>socket</emphasis> "
"the same way we treat any <emphasis>file descriptor</emphasis>: We can "
"<function>read</function> from it, <function>write</function> to it, "
"<function>pipe</function> it, and, eventually, <function>close</function> it."
msgstr ""
"پس از انجام، می‌توانیم با <emphasis>سوکت</emphasis> همانند هر "
"<emphasis>توصیف‌گر پروندهٔ</emphasis> دیگری رفتار کنیم: می‌توانیم با تابع "
"<function>read</function> از آن بخوانیم، با تابع <function>write</function> "
"در آن بنویسیم، آن را <function>pipe</function> کنیم، و، در نهایت، آن را با "
"تابع <function>close</function> ببندیم."

#. (itstool) path: sect1/title
#: book.translate.xml:5215
msgid "Essential Socket Functions"
msgstr "توابع ضروری سوکت"

#. (itstool) path: sect1/para
#: book.translate.xml:5217
msgid ""
"While FreeBSD offers different functions to work with sockets, we only "
"<emphasis>need</emphasis> four to <quote>open</quote> a socket. And in some "
"cases we only need two."
msgstr ""
"اگرچه FreeBSD توابع متنوعی را برای کار با سوکت‌ها در اختیار می‌گذارد، ما "
"تنها به چهار تابع برای <quote>باز کردن</quote> یک سوکت <emphasis>نیاز</"
"emphasis> داریم. و در برخی مواقع هم تنها به دو تابع نیاز داریم."

#. (itstool) path: sect2/title
#: book.translate.xml:5223
msgid "The Client-Server Difference"
msgstr "تفاوت کارخواه-کارساز"

#. (itstool) path: sect2/para
#: book.translate.xml:5225
msgid ""
"Typically, one of the ends of a socket-based data communication is a "
"<emphasis>server</emphasis>, the other is a <emphasis>client</emphasis>."
msgstr ""
"به‌طور معمول، یکی از دو سر ارتباطات دادهٔ سوکت محور یک <emphasis>کارساز</"
"emphasis> است و دیگری یک <emphasis>کارخواه</emphasis> است."

#. (itstool) path: sect3/title
#: book.translate.xml:5230
msgid "The Common Elements"
msgstr "عناصر متداور"

#. (itstool) path: sect4/title
#: book.translate.xml:5233
msgid "<function>socket</function>"
msgstr "<function>socket</function>"

#. (itstool) path: sect4/para
#: book.translate.xml:5235
msgid ""
"The one function used by both, clients and servers, is "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry>. It is declared this way:"
msgstr ""
"یک تابع استفاده شده توسط هر دو، کارخواه‌ها و کارسازها، "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> است. بدین ترتیب تعریف می‌شود:"

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5238
#, no-wrap
msgid "int socket(int domain, int type, int protocol);"
msgstr "int socket(int domain, int type, int protocol);"

#. (itstool) path: sect4/para
#: book.translate.xml:5240
msgid ""
"The return value is of the same type as that of <function>open</function>, "
"an integer. FreeBSD allocates its value from the same pool as that of file "
"handles. That is what allows sockets to be treated the same way as files."
msgstr ""
"نوع مقدار بازگشتی از همان نوع مقدار بازگشتی تابع <function>open</function> "
"است، یک عدد صحیح. FreeBSD مقدار خود را از همان فضای مشترک با file handle ها "
"تخصیص می‌دهد. این چیزی است که باعث می‌شود با سوکت‌ها همانند پرونده‌ها رفتار "
"شود."

#. (itstool) path: sect4/para
#: book.translate.xml:5246
msgid ""
"The <varname>domain</varname> argument tells the system what "
"<emphasis>protocol family</emphasis> you want it to use. Many of them exist, "
"some are vendor specific, others are very common. They are declared in "
"<filename>sys/socket.h</filename>."
msgstr ""
"برهان <varname>domain</varname> به سامانه می‌گوید که شما از کدام "
"<emphasis>protocol family</emphasis> می‌خواهید استفاده کنید. تعداد زیادی از "
"آنها موجود است، برخی سازمان-محور هستند، و مابقی مشترک. آنها در <filename>sys/"
"socket.h</filename> تعریف شده‌اند."

#. (itstool) path: sect4/para
#: book.translate.xml:5252
msgid ""
"Use <constant>PF_INET</constant> for <acronym>UDP</acronym>, <acronym>TCP</"
"acronym> and other Internet protocols (<acronym>IP</acronym>v4)."
msgstr ""
"از <constant>PF_INET</constant> برای <acronym>UDP</acronym>، <acronym>TCP</"
"acronym> و دیگر قراردادهای اینترنت (<acronym>IP</acronym>v4) استفاده کنید."

#. (itstool) path: sect4/para
#: book.translate.xml:5256
msgid ""
"Five values are defined for the <varname>type</varname> argument, again, in "
"<filename>sys/socket.h</filename>. All of them start with "
"<quote><constant>SOCK_</constant></quote>. The most common one is "
"<constant>SOCK_STREAM</constant>, which tells the system you are asking for "
"a <emphasis>reliable stream delivery service</emphasis> (which is "
"<acronym>TCP</acronym> when used with <constant>PF_INET</constant>)."
msgstr ""
"پنج مقدار برای برهان <varname>type</varname> تعریف شده‌اند، دگربار در "
"<filename>sys/socket.h</filename>. تمام آنها با "
"<quote><constant>SOCK_</constant></quote> آغاز می‌شوند. متداول‌ترین آنها "
"<constant>SOCK_STREAM</constant> است، که به سامانه می‌گوید شما خواهان یک "
"<emphasis>سرویس تحویل خدمات قابل اعتماد</emphasis> هستید (که به هنگام "
"استفاده با <constant>PF_INET</constant> همان <acronym>TCP</acronym> است)."

#. (itstool) path: sect4/para
#: book.translate.xml:5266
msgid ""
"If you asked for <constant>SOCK_DGRAM</constant>, you would be requesting a "
"<emphasis>connectionless datagram delivery service</emphasis> (in our case, "
"<acronym>UDP</acronym>)."
msgstr ""
"اگر برای <constant>SOCK_DGRAM</constant> تقاضا کرده بودید، یک "
"<emphasis>سرویس تحویل داده‌نگار بدون اتصال</emphasis> را می‌خواستید (در مورد "
"ما، <acronym>UDP</acronym>)."

#. (itstool) path: sect4/para
#: book.translate.xml:5271
msgid ""
"If you wanted to be in charge of the low-level protocols (such as "
"<acronym>IP</acronym>), or even network interfaces (e.g., the Ethernet), you "
"would need to specify <constant>SOCK_RAW</constant>."
msgstr ""
"اگر می‌خواستید قراردادهای لایه پایین را مدیریت کنید (مانند "
"<acronym>IP</acronym>)، یا حتی رابط‌های شبکه را (به‌طور مثال اترنت)، نیاز به "
"تعریف <constant>SOCK_RAW</constant> داشتید."

#. (itstool) path: sect4/para
#: book.translate.xml:5276
msgid ""
"Finally, the <varname>protocol</varname> argument depends on the previous "
"two arguments, and is not always meaningful. In that case, use <constant>0</"
"constant> for its value."
msgstr ""
"سرانجام، برهان <varname>protocol</varname> که وابسته به دو برهان پیشین است، "
"و همیشه معنادار نیست. در آن صورت، از <constant>0</constant> به‌عنوان مقدار "
"آن استفاده کنید."

#. (itstool) path: note/title
#: book.translate.xml:5282
msgid "The Unconnected Socket"
msgstr "سوکت نامتصل"

#. (itstool) path: note/para
#: book.translate.xml:5284
msgid ""
"Nowhere, in the <function>socket</function> function have we specified to "
"what other system we should be connected. Our newly created socket remains "
"<emphasis>unconnected</emphasis>."
msgstr ""
"هیچ‌کجای تابع <function>socket</function> مشخص نکردیم که به چه سامانهٔ دیگری "
"باید متصل شویم. سوکت تازه ایجاد شدهٔ ما <emphasis>نامتصل</emphasis> باقی "
"می‌ماند."

#. (itstool) path: note/para
#: book.translate.xml:5289
msgid ""
"This is on purpose: To use a telephone analogy, we have just attached a "
"modem to the phone line. We have neither told the modem to make a call, nor "
"to answer if the phone rings."
msgstr ""

#. (itstool) path: sect4/title
#: book.translate.xml:5298
msgid "<varname>sockaddr</varname>"
msgstr "<varname>sockaddr</varname>"

#. (itstool) path: sect4/para
#: book.translate.xml:5300
msgid ""
"Various functions of the sockets family expect the address of (or pointer "
"to, to use C terminology) a small area of the memory. The various C "
"declarations in the <filename>sys/socket.h</filename> refer to it as "
"<varname>struct sockaddr</varname>. This structure is declared in the same "
"file:"
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5307
#, no-wrap
msgid ""
"/*\n"
" * Structure used by kernel to store most\n"
" * addresses.\n"
" */\n"
"struct sockaddr {\n"
"\tunsigned char\tsa_len;\t\t/* total length */\n"
"\tsa_family_t\tsa_family;\t/* address family */\n"
"\tchar\t\tsa_data[14];\t/* actually longer; address value */\n"
"};\n"
"#define\tSOCK_MAXADDRLEN\t255\t\t/* longest possible addresses */"
msgstr ""
"/*\n"
" * Structure used by kernel to store most\n"
" * addresses.\n"
" */\n"
"struct sockaddr {\n"
"\tunsigned char\tsa_len;\t\t/* total length */\n"
"\tsa_family_t\tsa_family;\t/* address family */\n"
"\tchar\t\tsa_data[14];\t/* actually longer; address value */\n"
"};\n"
"#define\tSOCK_MAXADDRLEN\t255\t\t/* longest possible addresses */"

#. (itstool) path: sect4/para
#: book.translate.xml:5318
msgid ""
"Please note the <emphasis>vagueness</emphasis> with which the "
"<varname>sa_data</varname> field is declared, just as an array of "
"<constant>14</constant> bytes, with the comment hinting there can be more "
"than <constant>14</constant> of them."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5324
msgid ""
"This vagueness is quite deliberate. Sockets is a very powerful interface. "
"While most people perhaps think of it as nothing more than the Internet "
"interface—and most applications probably use it for that nowadays—sockets "
"can be used for just about <emphasis>any</emphasis> kind of interprocess "
"communications, of which the Internet (or, more precisely, <acronym>IP</"
"acronym>) is only one."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5333
msgid ""
"The <filename>sys/socket.h</filename> refers to the various types of "
"protocols sockets will handle as <emphasis>address families</emphasis>, and "
"lists them right before the definition of <varname>sockaddr</varname>:"
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5339
#, no-wrap
msgid ""
"/*\n"
" * Address families.\n"
" */\n"
"#define\tAF_UNSPEC\t0\t\t/* unspecified */\n"
"#define\tAF_LOCAL\t1\t\t/* local to host (pipes, portals) */\n"
"#define\tAF_UNIX\t\tAF_LOCAL\t/* backward compatibility */\n"
"#define\tAF_INET\t\t2\t\t/* internetwork: UDP, TCP, etc. */\n"
"#define\tAF_IMPLINK\t3\t\t/* arpanet imp addresses */\n"
"#define\tAF_PUP\t\t4\t\t/* pup protocols: e.g. BSP */\n"
"#define\tAF_CHAOS\t5\t\t/* mit CHAOS protocols */\n"
"#define\tAF_NS\t\t6\t\t/* XEROX NS protocols */\n"
"#define\tAF_ISO\t\t7\t\t/* ISO protocols */\n"
"#define\tAF_OSI\t\tAF_ISO\n"
"#define\tAF_ECMA\t\t8\t\t/* European computer manufacturers */\n"
"#define\tAF_DATAKIT\t9\t\t/* datakit protocols */\n"
"#define\tAF_CCITT\t10\t\t/* CCITT protocols, X.25 etc */\n"
"#define\tAF_SNA\t\t11\t\t/* IBM SNA */\n"
"#define AF_DECnet\t12\t\t/* DECnet */\n"
"#define AF_DLI\t\t13\t\t/* DEC Direct data link interface */\n"
"#define AF_LAT\t\t14\t\t/* LAT */\n"
"#define\tAF_HYLINK\t15\t\t/* NSC Hyperchannel */\n"
"#define\tAF_APPLETALK\t16\t\t/* Apple Talk */\n"
"#define\tAF_ROUTE\t17\t\t/* Internal Routing Protocol */\n"
"#define\tAF_LINK\t\t18\t\t/* Link layer interface */\n"
"#define\tpseudo_AF_XTP\t19\t\t/* eXpress Transfer Protocol (no AF) */\n"
"#define\tAF_COIP\t\t20\t\t/* connection-oriented IP, aka ST II */\n"
"#define\tAF_CNT\t\t21\t\t/* Computer Network Technology */\n"
"#define pseudo_AF_RTIP\t22\t\t/* Help Identify RTIP packets */\n"
"#define\tAF_IPX\t\t23\t\t/* Novell Internet Protocol */\n"
"#define\tAF_SIP\t\t24\t\t/* Simple Internet Protocol */\n"
"#define\tpseudo_AF_PIP\t25\t\t/* Help Identify PIP packets */\n"
"#define\tAF_ISDN\t\t26\t\t/* Integrated Services Digital Network*/\n"
"#define\tAF_E164\t\tAF_ISDN\t\t/* CCITT E.164 recommendation */\n"
"#define\tpseudo_AF_KEY\t27\t\t/* Internal key-management function */\n"
"#define\tAF_INET6\t28\t\t/* IPv6 */\n"
"#define\tAF_NATM\t\t29\t\t/* native ATM access */\n"
"#define\tAF_ATM\t\t30\t\t/* ATM */\n"
"#define pseudo_AF_HDRCMPLT 31\t\t/* Used by BPF to not rewrite headers\n"
"\t\t\t\t\t * in interface output routine\n"
"\t\t\t\t\t */\n"
"#define\tAF_NETGRAPH\t32\t\t/* Netgraph sockets */\n"
"#define\tAF_SLOW\t\t33\t\t/* 802.3ad slow protocol */\n"
"#define\tAF_SCLUSTER\t34\t\t/* Sitara cluster protocol */\n"
"#define\tAF_ARP\t\t35\n"
"#define\tAF_BLUETOOTH\t36\t\t/* Bluetooth sockets */\n"
"#define\tAF_MAX\t\t37"
msgstr ""
"/*\n"
" * Address families.\n"
" */\n"
"#define\tAF_UNSPEC\t0\t\t/* unspecified */\n"
"#define\tAF_LOCAL\t1\t\t/* local to host (pipes, portals) */\n"
"#define\tAF_UNIX\t\tAF_LOCAL\t/* backward compatibility */\n"
"#define\tAF_INET\t\t2\t\t/* internetwork: UDP, TCP, etc. */\n"
"#define\tAF_IMPLINK\t3\t\t/* arpanet imp addresses */\n"
"#define\tAF_PUP\t\t4\t\t/* pup protocols: e.g. BSP */\n"
"#define\tAF_CHAOS\t5\t\t/* mit CHAOS protocols */\n"
"#define\tAF_NS\t\t6\t\t/* XEROX NS protocols */\n"
"#define\tAF_ISO\t\t7\t\t/* ISO protocols */\n"
"#define\tAF_OSI\t\tAF_ISO\n"
"#define\tAF_ECMA\t\t8\t\t/* European computer manufacturers */\n"
"#define\tAF_DATAKIT\t9\t\t/* datakit protocols */\n"
"#define\tAF_CCITT\t10\t\t/* CCITT protocols, X.25 etc */\n"
"#define\tAF_SNA\t\t11\t\t/* IBM SNA */\n"
"#define AF_DECnet\t12\t\t/* DECnet */\n"
"#define AF_DLI\t\t13\t\t/* DEC Direct data link interface */\n"
"#define AF_LAT\t\t14\t\t/* LAT */\n"
"#define\tAF_HYLINK\t15\t\t/* NSC Hyperchannel */\n"
"#define\tAF_APPLETALK\t16\t\t/* Apple Talk */\n"
"#define\tAF_ROUTE\t17\t\t/* Internal Routing Protocol */\n"
"#define\tAF_LINK\t\t18\t\t/* Link layer interface */\n"
"#define\tpseudo_AF_XTP\t19\t\t/* eXpress Transfer Protocol (no AF) */\n"
"#define\tAF_COIP\t\t20\t\t/* connection-oriented IP, aka ST II */\n"
"#define\tAF_CNT\t\t21\t\t/* Computer Network Technology */\n"
"#define pseudo_AF_RTIP\t22\t\t/* Help Identify RTIP packets */\n"
"#define\tAF_IPX\t\t23\t\t/* Novell Internet Protocol */\n"
"#define\tAF_SIP\t\t24\t\t/* Simple Internet Protocol */\n"
"#define\tpseudo_AF_PIP\t25\t\t/* Help Identify PIP packets */\n"
"#define\tAF_ISDN\t\t26\t\t/* Integrated Services Digital Network*/\n"
"#define\tAF_E164\t\tAF_ISDN\t\t/* CCITT E.164 recommendation */\n"
"#define\tpseudo_AF_KEY\t27\t\t/* Internal key-management function */\n"
"#define\tAF_INET6\t28\t\t/* IPv6 */\n"
"#define\tAF_NATM\t\t29\t\t/* native ATM access */\n"
"#define\tAF_ATM\t\t30\t\t/* ATM */\n"
"#define pseudo_AF_HDRCMPLT 31\t\t/* Used by BPF to not rewrite headers\n"
"\t\t\t\t\t * in interface output routine\n"
"\t\t\t\t\t */\n"
"#define\tAF_NETGRAPH\t32\t\t/* Netgraph sockets */\n"
"#define\tAF_SLOW\t\t33\t\t/* 802.3ad slow protocol */\n"
"#define\tAF_SCLUSTER\t34\t\t/* Sitara cluster protocol */\n"
"#define\tAF_ARP\t\t35\n"
"#define\tAF_BLUETOOTH\t36\t\t/* Bluetooth sockets */\n"
"#define\tAF_MAX\t\t37"

#. (itstool) path: sect4/para
#: book.translate.xml:5386
msgid ""
"The one used for <acronym>IP</acronym> is <symbol>AF_INET</symbol>. It is a "
"symbol for the constant <constant>2</constant>."
msgstr ""
"حالت استفاده شده برای <acronym>IP</acronym> معادل <symbol>AF_INET</symbol> "
"است. این یک نماد برای مقدار ثابت <constant>2</constant> است."

#. (itstool) path: sect4/para
#: book.translate.xml:5390
msgid ""
"It is the <emphasis>address family</emphasis> listed in the "
"<varname>sa_family</varname> field of <varname>sockaddr</varname> that "
"decides how exactly the vaguely named bytes of <varname>sa_data</varname> "
"will be used."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5396
msgid ""
"Specifically, whenever the <emphasis>address family</emphasis> is "
"<symbol>AF_INET</symbol>, we can use <varname>struct sockaddr_in</varname> "
"found in <filename>netinet/in.h</filename>, wherever <varname>sockaddr</"
"varname> is expected:"
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5402
#, no-wrap
msgid ""
"/*\n"
" * Socket address, internet style.\n"
" */\n"
"struct sockaddr_in {\n"
"\tuint8_t\t\tsin_len;\n"
"\tsa_family_t\tsin_family;\n"
"\tin_port_t\tsin_port;\n"
"\tstruct\tin_addr sin_addr;\n"
"\tchar\tsin_zero[8];\n"
"};"
msgstr ""
"/*\n"
" * Socket address, internet style.\n"
" */\n"
"struct sockaddr_in {\n"
"\tuint8_t\t\tsin_len;\n"
"\tsa_family_t\tsin_family;\n"
"\tin_port_t\tsin_port;\n"
"\tstruct\tin_addr sin_addr;\n"
"\tchar\tsin_zero[8];\n"
"};"

#. (itstool) path: sect4/para
#: book.translate.xml:5413
msgid "We can visualize its organization this way:"
msgstr "می‌توانیم سازمانش را بدین شکل به تصویر بکشیم:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5417
msgctxt "_"
msgid "external ref='sockets/sain' md5='__failed__'"
msgstr "external ref='sockets/sain' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5421
#, no-wrap
msgid ""
"        0        1        2       3\n"
"   +--------+--------+-----------------+\n"
" 0 |    0   | Family |       Port      |\n"
"   +--------+--------+-----------------+\n"
" 4 |             IP Address            |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"
msgstr ""
"        0        1        2       3\n"
"   +--------+--------+-----------------+\n"
" 0 |    0   | Family |       Port      |\n"
"   +--------+--------+-----------------+\n"
" 4 |             IP Address            |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5415
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sain\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/sain\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in</phrase> </textobject>"

#. (itstool) path: sect4/para
#: book.translate.xml:5438
msgid ""
"The three important fields are <varname>sin_family</varname>, which is byte "
"1 of the structure, <varname>sin_port</varname>, a 16-bit value found in "
"bytes 2 and 3, and <varname>sin_addr</varname>, a 32-bit integer "
"representation of the <acronym>IP</acronym> address, stored in bytes 4-7."
msgstr ""
"بخش‌های مهم <varname>sin_family</varname>، در بایت اول ساختار، "
"<varname>sin_port</varname>، مقداری ۱۶-بیتی در بایت‌های دوم و سوم، و "
"<varname>sin_addr</varname>، عدد صحیحی ۳۲-بیتی به نیابت نشانی "
"<acronym>IP</acronym>، ذخیره شده در بایت‌های چهار تا هفت، هستند."

#. (itstool) path: sect4/para
#: book.translate.xml:5445
msgid ""
"Now, let us try to fill it out. Let us assume we are trying to write a "
"client for the <emphasis>daytime</emphasis> protocol, which simply states "
"that its server will write a text string representing the current date and "
"time to port 13. We want to use <acronym>TCP/IP</acronym>, so we need to "
"specify <constant>AF_INET</constant> in the address family field. "
"<constant>AF_INET</constant> is defined as <constant>2</constant>. Let us "
"use the <acronym>IP</acronym> address of <systemitem class=\"ipaddress"
"\">192.43.244.18</systemitem>, which is the time server of US federal "
"government (<systemitem class=\"fqdomainname\">time.nist.gov</systemitem>)."
msgstr ""

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5459
msgctxt "_"
msgid "external ref='sockets/sainfill' md5='__failed__'"
msgstr "external ref='sockets/sainfill' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5463
#, no-wrap
msgid ""
"        0        1        2       3\n"
"   +--------+--------+-----------------+\n"
" 0 |    0   |   2    |        13       |\n"
"   +-----------------+-----------------+\n"
" 4 |           192.43.244.18           |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"
msgstr ""
"        0        1        2       3\n"
"   +--------+--------+-----------------+\n"
" 0 |    0   |   2    |        13       |\n"
"   +-----------------+-----------------+\n"
" 4 |           192.43.244.18           |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5457
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainfill\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>Specific example of sockaddr_in</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/sainfill\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>مثال "
"ویژهٔ sockaddr_in</phrase> </textobject>"

#. (itstool) path: sect4/para
#: book.translate.xml:5480
msgid ""
"By the way the <varname>sin_addr</varname> field is declared as being of the "
"<varname>struct in_addr</varname> type, which is defined in "
"<filename>netinet/in.h</filename>:"
msgstr ""
"ضمناً بخش <varname>sin_addr</varname> به‌عنوان عضوی از حالت <varname>struct "
"in_addr</varname> اعلان می‌شود، که خود در <filename>netinet/in.h</filename> "
"تعریف شده است:"

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5485
#, no-wrap
msgid ""
"/*\n"
" * Internet address (a structure for historical reasons)\n"
" */\n"
"struct in_addr {\n"
"\tin_addr_t s_addr;\n"
"};"
msgstr ""
"/*\n"
" * Internet address (a structure for historical reasons)\n"
" */\n"
"struct in_addr {\n"
"\tin_addr_t s_addr;\n"
"};"

#. (itstool) path: sect4/para
#: book.translate.xml:5492
msgid "In addition, <varname>in_addr_t</varname> is a 32-bit integer."
msgstr "افزون بر این، <varname>in_addr_t</varname> یک عدد صحیح ۳۲-بیتی است."

#. (itstool) path: sect4/para
#: book.translate.xml:5495
msgid ""
"The <systemitem class=\"ipaddress\">192.43.244.18</systemitem> is just a "
"convenient notation of expressing a 32-bit integer by listing all of its 8-"
"bit bytes, starting with the <emphasis>most significant</emphasis> one."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5500
msgid ""
"So far, we have viewed <varname>sockaddr</varname> as an abstraction. Our "
"computer does not store <varname>short</varname> integers as a single 16-bit "
"entity, but as a sequence of 2 bytes. Similarly, it stores 32-bit integers "
"as a sequence of 4 bytes."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5506
msgid "Suppose we coded something like this:"
msgstr "فرض کنید چیزی شبیه به این کد زدیم:"

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5508
#, no-wrap
msgid ""
"sa.sin_family      = AF_INET;\n"
"sa.sin_port        = 13;\n"
"sa.sin_addr.s_addr = (((((192 &lt;&lt; 8) | 43) &lt;&lt; 8) | 244) &lt;&lt; 8) | 18;"
msgstr ""
"sa.sin_family      = AF_INET;\n"
"sa.sin_port        = 13;\n"
"sa.sin_addr.s_addr = (((((192 &lt;&lt; 8) | 43) &lt;&lt; 8) | 244) &lt;&lt; "
"8) | 18;"

#. (itstool) path: sect4/para
#: book.translate.xml:5512
msgid "What would the result look like?"
msgstr "نتیجه چطور خواهد بود؟"

#. (itstool) path: sect4/para
#: book.translate.xml:5514
msgid ""
"Well, that depends, of course. On a <trademark class=\"registered\">Pentium</"
"trademark>, or other x86, based computer, it would look like this:"
msgstr ""
"البته که بستگی دارد. بر روی یک <trademark class=\"registered\">Pentium</"
"trademark> یا هر رایانهٔ x86 دیگری، چنین خواهد بود:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5519 book.translate.xml:5639
msgctxt "_"
msgid "external ref='sockets/sainlsb' md5='__failed__'"
msgstr "external ref='sockets/sainlsb' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5523 book.translate.xml:5643
#, no-wrap
msgid ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |   13   |   0    |\n"
"   +--------+--------+--------+--------+\n"
" 4 |   18   |  244   |   43   |  192   |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"
msgstr ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |   13   |   0    |\n"
"   +--------+--------+--------+--------+\n"
" 4 |   18   |  244   |   43   |  192   |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5517
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainlsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in on an Intel system</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/sainlsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in بر روی سامانهٔ Intel</phrase> </textobject>"

#. (itstool) path: sect4/para
#: book.translate.xml:5540
msgid "On a different system, it might look like this:"
msgstr "بر روی یک سامانهٔ دیگر، ممکن است چنین باشد:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5544 book.translate.xml:5666
msgctxt "_"
msgid "external ref='sockets/sainmsb' md5='__failed__'"
msgstr "external ref='sockets/sainmsb' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5548 book.translate.xml:5670
#, no-wrap
msgid ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |    0   |   13   |\n"
"   +--------+--------+--------+--------+\n"
" 4 |   192  |   43   |   244  |   18   |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"
msgstr ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |    0   |   13   |\n"
"   +--------+--------+--------+--------+\n"
" 4 |   192  |   43   |   244  |   18   |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5542
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainmsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in on an MSB system</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/sainmsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>sockaddr_in بر روی یک سامانهٔ MSB</phrase> </textobject>"

#. (itstool) path: sect4/para
#: book.translate.xml:5565
msgid ""
"And on a PDP it might look different yet. But the above two are the most "
"common ways in use today."
msgstr ""
"به همین ترتیب بر روی یک PDP هم ممکن است متفاوت باشد. اما امروزه دو حالت "
"مذکور در بالا رایج‌ترین حالات به شمار می‌آیند."

#. (itstool) path: sect4/para
#: book.translate.xml:5568
msgid ""
"Ordinarily, wanting to write portable code, programmers pretend that these "
"differences do not exist. And they get away with it (except when they code "
"in assembly language). Alas, you cannot get away with it that easily when "
"coding for sockets."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5574
msgid "Why?"
msgstr "چرا؟"

#. (itstool) path: sect4/para
#: book.translate.xml:5576
msgid ""
"Because when communicating with another computer, you usually do not know "
"whether it stores data <emphasis>most significant byte</emphasis> "
"(<acronym>MSB</acronym>) or <emphasis>least significant byte</emphasis> "
"(<acronym>LSB</acronym>) first."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5582
msgid ""
"You might be wondering, <emphasis><quote>So, will sockets not handle it for "
"me?</quote></emphasis>"
msgstr ""
"ممکن است بپرسید، <emphasis><quote>با این حساب، سوکت‌ها این رو برای من مدیریت "
"نخواهند کرد؟</quote></emphasis>"

#. (itstool) path: sect4/para
#: book.translate.xml:5586
msgid "It will not."
msgstr "نخواهد کرد."

#. (itstool) path: sect4/para
#: book.translate.xml:5588
msgid ""
"While that answer may surprise you at first, remember that the general "
"sockets interface only understands the <varname>sa_len</varname> and "
"<varname>sa_family</varname> fields of the <varname>sockaddr</varname> "
"structure. You do not have to worry about the byte order there (of course, "
"on FreeBSD <varname>sa_family</varname> is only 1 byte anyway, but many "
"other <trademark class=\"registered\">UNIX</trademark> systems do not have "
"<varname>sa_len</varname> and use 2 bytes for <varname>sa_family</varname>, "
"and expect the data in whatever order is native to the computer)."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5599
msgid ""
"But the rest of the data is just <varname>sa_data[14]</varname> as far as "
"sockets goes. Depending on the <emphasis>address family</emphasis>, sockets "
"just forwards that data to its destination."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5604
msgid ""
"Indeed, when we enter a port number, it is because we want the other "
"computer to know what service we are asking for. And, when we are the "
"server, we read the port number so we know what service the other computer "
"is expecting from us. Either way, sockets only has to forward the port "
"number as data. It does not interpret it in any way."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5612
msgid ""
"Similarly, we enter the <acronym>IP</acronym> address to tell everyone on "
"the way where to send our data to. Sockets, again, only forwards it as data."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5616
msgid ""
"That is why, we (the <emphasis>programmers</emphasis>, not the "
"<emphasis>sockets</emphasis>) have to distinguish between the byte order "
"used by our computer and a conventional byte order to send the data in to "
"the other computer."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5622
msgid ""
"We will call the byte order our computer uses the <emphasis>host byte order</"
"emphasis>, or just the <emphasis>host order</emphasis>."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5626
msgid ""
"There is a convention of sending the multi-byte data over <acronym>IP</"
"acronym> <emphasis><acronym>MSB</acronym> first</emphasis>. This, we will "
"refer to as the <emphasis>network byte order</emphasis>, or simply the "
"<emphasis>network order</emphasis>."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5633
msgid ""
"Now, if we compiled the above code for an Intel based computer, our "
"<emphasis>host byte order</emphasis> would produce:"
msgstr ""

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5637
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainlsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>Host "
"byte order on an Intel system</phrase> </textobject>"
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5660
msgid ""
"But the <emphasis>network byte order</emphasis> requires that we store the "
"data <acronym>MSB</acronym> first:"
msgstr ""

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5664
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainmsb\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>Network "
"byte order</phrase> </textobject>"
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5687
msgid ""
"Unfortunately, our <emphasis>host order</emphasis> is the exact opposite of "
"the <emphasis>network order</emphasis>."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5691
msgid ""
"We have several ways of dealing with it. One would be to <emphasis>reverse</"
"emphasis> the values in our code:"
msgstr ""
"راه‌های متعددی برای مقابله با این داریم. یکی از این راه‌ها <emphasis>معکوس</"
"emphasis> کردن مقادیر در کُدمان است:"

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5695
#, no-wrap
msgid ""
"sa.sin_family      = AF_INET;\n"
"sa.sin_port        = 13 &lt;&lt; 8;\n"
"sa.sin_addr.s_addr = (((((18 &lt;&lt; 8) | 244) &lt;&lt; 8) | 43) &lt;&lt; 8) | 192;"
msgstr ""
"sa.sin_family      = AF_INET;\n"
"sa.sin_port        = 13 &lt;&lt; 8;\n"
"sa.sin_addr.s_addr = (((((18 &lt;&lt; 8) | 244) &lt;&lt; 8) | 43) &lt;&lt; 8)"
" | 192;"

#. (itstool) path: sect4/para
#: book.translate.xml:5699
msgid ""
"This will <emphasis>trick</emphasis> our compiler into storing the data in "
"the <emphasis>network byte order</emphasis>. In some cases, this is exactly "
"the way to do it (e.g., when programming in assembly language). In most "
"cases, however, it can cause a problem."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5706
msgid ""
"Suppose, you wrote a sockets-based program in C. You know it is going to run "
"on a <trademark class=\"registered\">Pentium</trademark>, so you enter all "
"your constants in reverse and force them to the <emphasis>network byte "
"order</emphasis>. It works well."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5712
msgid ""
"Then, some day, your trusted old <trademark class=\"registered\">Pentium</"
"trademark> becomes a rusty old <trademark class=\"registered\">Pentium</"
"trademark>. You replace it with a system whose <emphasis>host order</"
"emphasis> is the same as the <emphasis>network order</emphasis>. You need to "
"recompile all your software. All of your software continues to perform well, "
"except the one program you wrote."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5719
msgid ""
"You have since forgotten that you had forced all of your constants to the "
"opposite of the <emphasis>host order</emphasis>. You spend some quality time "
"tearing out your hair, calling the names of all gods you ever heard of (and "
"some you made up), hitting your monitor with a nerf bat, and performing all "
"the other traditional ceremonies of trying to figure out why something that "
"has worked so well is suddenly not working at all."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5728
msgid ""
"Eventually, you figure it out, say a couple of swear words, and start "
"rewriting your code."
msgstr ""
"سرانجام، مشکل را می‌فهمید، مقداری ناسزا می‌گویید، و شروع به بازنویسی کد "
"می‌کنید."

#. (itstool) path: sect4/para
#: book.translate.xml:5731
msgid ""
"Luckily, you are not the first one to face the problem. Someone else has "
"created the <citerefentry><refentrytitle>htons</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>htonl</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> C functions to convert "
"a <varname>short</varname> and <varname>long</varname> respectively from the "
"<emphasis>host byte order</emphasis> to the <emphasis>network byte order</"
"emphasis>, and the <citerefentry><refentrytitle>ntohs</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> and "
"<citerefentry><refentrytitle>ntohl</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> C functions to go the other way."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5740
msgid ""
"On <emphasis><acronym>MSB</acronym>-first</emphasis> systems these functions "
"do nothing. On <emphasis><acronym>LSB</acronym>-first</emphasis> systems "
"they convert values to the proper order."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5745
msgid ""
"So, regardless of what system your software is compiled on, your data will "
"end up in the correct order if you use these functions."
msgstr ""
"بنابراین، صرف نظر از اینکه برنامهٔ شما بر روی چه سامانه‌ای همگردانی شده است، "
"اگر از این توابع استفاده کنید دادهٔ شما به ترتیب درست ایجاد خواهد شد."

#. (itstool) path: sect3/title
#: book.translate.xml:5752
msgid "Client Functions"
msgstr "توابع کارخواه"

#. (itstool) path: sect3/para
#: book.translate.xml:5754
msgid ""
"Typically, the client initiates the connection to the server. The client "
"knows which server it is about to call: It knows its <acronym>IP</acronym> "
"address, and it knows the <emphasis>port</emphasis> the server resides at. "
"It is akin to you picking up the phone and dialing the number (the "
"<emphasis>address</emphasis>), then, after someone answers, asking for the "
"person in charge of wingdings (the <emphasis>port</emphasis>)."
msgstr ""

#. (itstool) path: sect4/title
#: book.translate.xml:5764
msgid "<function>connect</function>"
msgstr "<function>connect</function>"

#. (itstool) path: sect4/para
#: book.translate.xml:5766
msgid ""
"Once a client has created a socket, it needs to connect it to a specific "
"port on a remote system. It uses <citerefentry><refentrytitle>connect</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry>:"
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5770
#, no-wrap
msgid "int connect(int s, const struct sockaddr *name, socklen_t namelen);"
msgstr "int connect(int s, const struct sockaddr *name, socklen_t namelen);"

#. (itstool) path: sect4/para
#: book.translate.xml:5772
msgid ""
"The <varname>s</varname> argument is the socket, i.e., the value returned by "
"the <function>socket</function> function. The <varname>name</varname> is a "
"pointer to <varname>sockaddr</varname>, the structure we have talked about "
"extensively. Finally, <varname>namelen</varname> informs the system how many "
"bytes are in our <varname>sockaddr</varname> structure."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5780
msgid ""
"If <function>connect</function> is successful, it returns <constant>0</"
"constant>. Otherwise it returns <constant>-1</constant> and stores the error "
"code in <varname>errno</varname>."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5785
msgid ""
"There are many reasons why <function>connect</function> may fail. For "
"example, with an attempt to an Internet connection, the <acronym>IP</"
"acronym> address may not exist, or it may be down, or just too busy, or it "
"may not have a server listening at the specified port. Or it may outright "
"<emphasis>refuse</emphasis> any request for specific code."
msgstr ""

#. (itstool) path: sect4/title
#: book.translate.xml:5796
msgid "Our First Client"
msgstr "اولین کارخواه ما"

#. (itstool) path: sect4/para
#: book.translate.xml:5798
msgid ""
"We now know enough to write a very simple client, one that will get current "
"time from <systemitem class=\"ipaddress\">192.43.244.18</systemitem> and "
"print it to <filename>stdout</filename>."
msgstr ""
"اکنون برای نوشتن یک کارخواه بسیار ساده که زمان جاری را از <systemitem class="
"\"ipaddress\">192.43.244.18</systemitem> می‌گیرد و بر روی <filename>stdout</"
"filename> چاپ می‌کند به اندازهٔ کافی می‌دانیم."

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5802
#, no-wrap
msgid ""
"/*\n"
" * daytime.c\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"\n"
"int main() {\n"
"  register int s;\n"
"  register int bytes;\n"
"  struct sockaddr_in sa;\n"
"  char buffer[BUFSIZ+1];\n"
"\n"
"  if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"    perror(\"socket\");\n"
"    return 1;\n"
"  }\n"
"\n"
"  bzero(&amp;sa, sizeof sa);\n"
"\n"
"  sa.sin_family = AF_INET;\n"
"  sa.sin_port = htons(13);\n"
"  sa.sin_addr.s_addr = htonl((((((192 &lt;&lt; 8) | 43) &lt;&lt; 8) | 244) &lt;&lt; 8) | 18);\n"
"  if (connect(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"    perror(\"connect\");\n"
"    close(s);\n"
"    return 2;\n"
"  }\n"
"\n"
"  while ((bytes = read(s, buffer, BUFSIZ)) &gt; 0)\n"
"    write(1, buffer, bytes);\n"
"\n"
"  close(s);\n"
"  return 0;\n"
"}"
msgstr ""
"/*\n"
" * daytime.c\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"\n"
"int main() {\n"
"  register int s;\n"
"  register int bytes;\n"
"  struct sockaddr_in sa;\n"
"  char buffer[BUFSIZ+1];\n"
"\n"
"  if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"    perror(\"socket\");\n"
"    return 1;\n"
"  }\n"
"\n"
"  bzero(&amp;sa, sizeof sa);\n"
"\n"
"  sa.sin_family = AF_INET;\n"
"  sa.sin_port = htons(13);\n"
"  sa.sin_addr.s_addr = htonl((((((192 &lt;&lt; 8) | 43) &lt;&lt; 8) | 244) "
"&lt;&lt; 8) | 18);\n"
"  if (connect(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"    perror(\"connect\");\n"
"    close(s);\n"
"    return 2;\n"
"  }\n"
"\n"
"  while ((bytes = read(s, buffer, BUFSIZ)) &gt; 0)\n"
"    write(1, buffer, bytes);\n"
"\n"
"  close(s);\n"
"  return 0;\n"
"}"

#. (itstool) path: sect4/para
#: book.translate.xml:5842
msgid ""
"Go ahead, enter it in your editor, save it as <filename>daytime.c</"
"filename>, then compile and run it:"
msgstr ""
"بفرمایید، آن را در ویرایشگر خود وارد کنید،به‌عنوان <filename>daytime.c</"
"filename> ذخیره کنید، سپس آن را همگردانی و اجرا کنید:"

#. (itstool) path: sect4/screen
#: book.translate.xml:5846
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>cc -O3 -o daytime daytime.c</userinput>\n"
"<prompt>%</prompt> <userinput>./daytime</userinput>\n"
"\n"
"52079 01-06-19 02:29:25 50 0 1 543.9 UTC(NIST) *\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>cc -O3 -o daytime daytime.c</userinput>\n"
"<prompt>%</prompt> <userinput>./daytime</userinput>\n"
"\n"
"52079 01-06-19 02:29:25 50 0 1 543.9 UTC(NIST) *\n"
"<prompt>%</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:5852
msgid ""
"In this case, the date was June 19, 2001, the time was 02:29:25 "
"<acronym>UTC</acronym>. Naturally, your results will vary."
msgstr ""
"در این مورد، تاریخ ۱۹ ژوئن سال ۲۰۰۱، و زمان ۰۲:۲۹:۲۵ به وقت <acronym>UTC</"
"acronym> بود. طبیعتاً، نتیجهٔ شما متفاوت خواهد بود."

#. (itstool) path: sect3/title
#: book.translate.xml:5859
msgid "Server Functions"
msgstr "توابع کارساز"

#. (itstool) path: sect3/para
#: book.translate.xml:5861
msgid ""
"The typical server does not initiate the connection. Instead, it waits for a "
"client to call it and request services. It does not know when the client "
"will call, nor how many clients will call. It may be just sitting there, "
"waiting patiently, one moment, The next moment, it can find itself swamped "
"with requests from a number of clients, all calling in at the same time."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:5869
msgid "The sockets interface offers three basic functions to handle this."
msgstr "رابط سوکت‌ها سه تابع اساسی را برای مدیریت این موضوع ارائه می‌دهد."

#. (itstool) path: sect4/title
#: book.translate.xml:5873
msgid "<function>bind</function>"
msgstr "<function>bind</function>"

#. (itstool) path: sect4/para
#: book.translate.xml:5875
msgid ""
"Ports are like extensions to a phone line: After you dial a number, you dial "
"the extension to get to a specific person or department."
msgstr ""
"درگاه‌ها مانند پسوندهای خط تلفن هستند: بعد از اینکه شماره‌ای را می‌گیرید، "
"برای ارتباط با یک شخص یا بخش خاص پسوند آن را شماره‌گیری می‌کنید."

#. (itstool) path: sect4/para
#: book.translate.xml:5879
msgid ""
"There are 65535 <acronym>IP</acronym> ports, but a server usually processes "
"requests that come in on only one of them. It is like telling the phone room "
"operator that we are now at work and available to answer the phone at a "
"specific extension. We use <citerefentry><refentrytitle>bind</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> to tell sockets which "
"port we want to serve."
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5886
#, no-wrap
msgid "int bind(int s, const struct sockaddr *addr, socklen_t addrlen);"
msgstr "int bind(int s, const struct sockaddr *addr, socklen_t addrlen);"

#. (itstool) path: sect4/para
#: book.translate.xml:5888
msgid ""
"Beside specifying the port in <varname>addr</varname>, the server may "
"include its <acronym>IP</acronym> address. However, it can just use the "
"symbolic constant <symbol>INADDR_ANY</symbol> to indicate it will serve all "
"requests to the specified port regardless of what its <acronym>IP</acronym> "
"address is. This symbol, along with several similar ones, is declared in "
"<filename>netinet/in.h</filename>"
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5897
#, no-wrap
msgid "#define\tINADDR_ANY\t\t(u_int32_t)0x00000000"
msgstr "#define\tINADDR_ANY\t\t(u_int32_t)0x00000000"

#. (itstool) path: sect4/para
#: book.translate.xml:5899
msgid ""
"Suppose we were writing a server for the <emphasis>daytime</emphasis> "
"protocol over <acronym>TCP</acronym>/<acronym>IP</acronym>. Recall that it "
"uses port 13. Our <varname>sockaddr_in</varname> structure would look like "
"this:"
msgstr ""

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:5907
msgctxt "_"
msgid "external ref='sockets/sainserv' md5='__failed__'"
msgstr "external ref='sockets/sainserv' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:5911
#, no-wrap
msgid ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |    0   |   13   |\n"
"   +--------+--------+--------+--------+\n"
" 4 |                 0                 |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"
msgstr ""
"        0        1        2       3\n"
"   +--------+--------+--------+--------+\n"
" 0 |    0   |   2    |    0   |   13   |\n"
"   +--------+--------+--------+--------+\n"
" 4 |                 0                 |\n"
"   +-----------------------------------+\n"
" 8 |                 0                 |\n"
"   +-----------------------------------+\n"
"12 |                 0                 |\n"
"   +-----------------------------------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:5905
msgid ""
"<imageobject> <imagedata fileref=\"sockets/sainserv\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>Example "
"Server sockaddr_in</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/sainserv\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>نمونهٔ "
"کارساز sockaddr_in</phrase> </textobject>"

#. (itstool) path: sect4/title
#: book.translate.xml:5930
msgid "<function>listen</function>"
msgstr "<function>listen</function>"

#. (itstool) path: sect4/para
#: book.translate.xml:5932
msgid ""
"To continue our office phone analogy, after you have told the phone central "
"operator what extension you will be at, you now walk into your office, and "
"make sure your own phone is plugged in and the ringer is turned on. Plus, "
"you make sure your call waiting is activated, so you can hear the phone ring "
"even while you are talking to someone."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5940
msgid ""
"The server ensures all of that with the <citerefentry><refentrytitle>listen</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> function."
msgstr ""
"کارساز از همهٔ آن مراحل توسط تابع "
"<citerefentry><refentrytitle>listen</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> اطمینان حاصل می‌کند."

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5943
#, no-wrap
msgid "int listen(int s, int backlog);"
msgstr "int listen(int s, int backlog);"

#. (itstool) path: sect4/para
#: book.translate.xml:5945
msgid ""
"In here, the <varname>backlog</varname> variable tells sockets how many "
"incoming requests to accept while you are busy processing the last request. "
"In other words, it determines the maximum size of the queue of pending "
"connections."
msgstr ""

#. (itstool) path: sect4/title
#: book.translate.xml:5953
msgid "<function>accept</function>"
msgstr "<function>accept</function>"

#. (itstool) path: sect4/para
#: book.translate.xml:5955
msgid ""
"After you hear the phone ringing, you accept the call by answering the call. "
"You have now established a connection with your client. This connection "
"remains active until either you or your client hang up."
msgstr ""
"بعد از اینکه صدای زنگ تلفن را می‌شنوید، تماس را با پاسخ دادن به آن قبول می‌"
"کنید. اینک شما یک ارتباط با کراخواه خود برقرار کرده‌اید. این ارتباط تا زمانی "
"که توسط یا شما یا کارخواه شما خاتمه نیابد فعال باقی می‌ماند."

#. (itstool) path: sect4/para
#: book.translate.xml:5960
msgid ""
"The server accepts the connection by using the "
"<citerefentry><refentrytitle>accept</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> function."
msgstr ""
"کارساز اتصال را با استفاده از تابع "
"<citerefentry><refentrytitle>accept</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> می‌پذیرد."

#. (itstool) path: sect4/programlisting
#: book.translate.xml:5963
#, no-wrap
msgid "int accept(int s, struct sockaddr *addr, socklen_t *addrlen);"
msgstr "int accept(int s, struct sockaddr *addr, socklen_t *addrlen);"

#. (itstool) path: sect4/para
#: book.translate.xml:5965
msgid ""
"Note that this time <varname>addrlen</varname> is a pointer. This is "
"necessary because in this case it is the socket that fills out "
"<varname>addr</varname>, the <varname>sockaddr_in</varname> structure."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5970
msgid ""
"The return value is an integer. Indeed, the <function>accept</function> "
"returns a <emphasis>new socket</emphasis>. You will use this new socket to "
"communicate with the client."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:5975
msgid ""
"What happens to the old socket? It continues to listen for more requests "
"(remember the <varname>backlog</varname> variable we passed to "
"<function>listen</function>?) until we <function>close</function> it."
msgstr ""
"چه بر سر سوکت سابق می‌آید؟ به استماع برای درخواست‌های بیشتر ادامه می‌دهد ("
"متغیر <varname>backlog</varname> را که به تابع <function>listen</function> "
"دادیم به یاد دارید؟) تا ما آن را <function>close</function> کنیم."

#. (itstool) path: sect4/para
#: book.translate.xml:5980
msgid ""
"Now, the new socket is meant only for communications. It is fully connected. "
"We cannot pass it to <function>listen</function> again, trying to accept "
"additional connections."
msgstr ""

#. (itstool) path: sect4/title
#: book.translate.xml:5987
msgid "Our First Server"
msgstr "اولین کارساز ما"

#. (itstool) path: sect4/para
#: book.translate.xml:5989
msgid ""
"Our first server will be somewhat more complex than our first client was: "
"Not only do we have more sockets functions to use, but we need to write it "
"as a daemon."
msgstr ""
"اولین کارساز ما تا حدی از اولین کارخواه ما پیچیده‌تر است: نه تنها توابع سوکت "
"بیشتری برای استفاده داریم، بلکه باید به شکل یک دیمِن آن را بنویسیم."

#. (itstool) path: sect4/para
#: book.translate.xml:5994
msgid ""
"This is best achieved by creating a <emphasis>child process</emphasis> after "
"binding the port. The main process then exits and returns control to the "
"<application>shell</application> (or whatever program invoked it)."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6000
msgid ""
"The child calls <function>listen</function>, then starts an endless loop, "
"which accepts a connection, serves it, and eventually closes its socket."
msgstr ""

#. (itstool) path: sect4/programlisting
#: book.translate.xml:6004
#, no-wrap
msgid ""
"/*\n"
" * daytimed - a port 13 server\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" * June 19, 2001\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;time.h&gt;\n"
"#include &lt;unistd.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"\n"
"#define BACKLOG 4\n"
"\n"
"int main() {\n"
"    register int s, c;\n"
"    int b;\n"
"    struct sockaddr_in sa;\n"
"    time_t t;\n"
"    struct tm *tm;\n"
"    FILE *client;\n"
"\n"
"    if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"        perror(\"socket\");\n"
"        return 1;\n"
"    }\n"
"\n"
"    bzero(&amp;sa, sizeof sa);\n"
"\n"
"    sa.sin_family = AF_INET;\n"
"    sa.sin_port   = htons(13);\n"
"\n"
"    if (INADDR_ANY)\n"
"        sa.sin_addr.s_addr = htonl(INADDR_ANY);\n"
"\n"
"    if (bind(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"        perror(\"bind\");\n"
"        return 2;\n"
"    }\n"
"\n"
"    switch (fork()) {\n"
"        case -1:\n"
"            perror(\"fork\");\n"
"            return 3;\n"
"            break;\n"
"        default:\n"
"            close(s);\n"
"            return 0;\n"
"            break;\n"
"        case 0:\n"
"            break;\n"
"    }\n"
"\n"
"    listen(s, BACKLOG);\n"
"\n"
"    for (;;) {\n"
"        b = sizeof sa;\n"
"\n"
"        if ((c = accept(s, (struct sockaddr *)&amp;sa, &amp;b)) &lt; 0) {\n"
"            perror(\"daytimed accept\");\n"
"            return 4;\n"
"        }\n"
"\n"
"        if ((client = fdopen(c, \"w\")) == NULL) {\n"
"            perror(\"daytimed fdopen\");\n"
"            return 5;\n"
"        }\n"
"\n"
"        if ((t = time(NULL)) &lt; 0) {\n"
"            perror(\"daytimed time\");\n"
"\n"
"            return 6;\n"
"        }\n"
"\n"
"        tm = gmtime(&amp;t);\n"
"        fprintf(client, \"%.4i-%.2i-%.2iT%.2i:%.2i:%.2iZ\\n\",\n"
"            tm-&gt;tm_year + 1900,\n"
"            tm-&gt;tm_mon + 1,\n"
"            tm-&gt;tm_mday,\n"
"            tm-&gt;tm_hour,\n"
"            tm-&gt;tm_min,\n"
"            tm-&gt;tm_sec);\n"
"\n"
"        fclose(client);\n"
"    }\n"
"}"
msgstr ""
"/*\n"
" * daytimed - a port 13 server\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" * June 19, 2001\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;time.h&gt;\n"
"#include &lt;unistd.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"\n"
"#define BACKLOG 4\n"
"\n"
"int main() {\n"
"    register int s, c;\n"
"    int b;\n"
"    struct sockaddr_in sa;\n"
"    time_t t;\n"
"    struct tm *tm;\n"
"    FILE *client;\n"
"\n"
"    if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"        perror(\"socket\");\n"
"        return 1;\n"
"    }\n"
"\n"
"    bzero(&amp;sa, sizeof sa);\n"
"\n"
"    sa.sin_family = AF_INET;\n"
"    sa.sin_port   = htons(13);\n"
"\n"
"    if (INADDR_ANY)\n"
"        sa.sin_addr.s_addr = htonl(INADDR_ANY);\n"
"\n"
"    if (bind(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"        perror(\"bind\");\n"
"        return 2;\n"
"    }\n"
"\n"
"    switch (fork()) {\n"
"        case -1:\n"
"            perror(\"fork\");\n"
"            return 3;\n"
"            break;\n"
"        default:\n"
"            close(s);\n"
"            return 0;\n"
"            break;\n"
"        case 0:\n"
"            break;\n"
"    }\n"
"\n"
"    listen(s, BACKLOG);\n"
"\n"
"    for (;;) {\n"
"        b = sizeof sa;\n"
"\n"
"        if ((c = accept(s, (struct sockaddr *)&amp;sa, &amp;b)) &lt; 0) {\n"
"            perror(\"daytimed accept\");\n"
"            return 4;\n"
"        }\n"
"\n"
"        if ((client = fdopen(c, \"w\")) == NULL) {\n"
"            perror(\"daytimed fdopen\");\n"
"            return 5;\n"
"        }\n"
"\n"
"        if ((t = time(NULL)) &lt; 0) {\n"
"            perror(\"daytimed time\");\n"
"\n"
"            return 6;\n"
"        }\n"
"\n"
"        tm = gmtime(&amp;t);\n"
"        fprintf(client, \"%.4i-%.2i-%.2iT%.2i:%.2i:%.2iZ\\n"
"\",\n"
"            tm-&gt;tm_year + 1900,\n"
"            tm-&gt;tm_mon + 1,\n"
"            tm-&gt;tm_mday,\n"
"            tm-&gt;tm_hour,\n"
"            tm-&gt;tm_min,\n"
"            tm-&gt;tm_sec);\n"
"\n"
"        fclose(client);\n"
"    }\n"
"}"

#. (itstool) path: sect4/para
#: book.translate.xml:6093
msgid ""
"We start by creating a socket. Then we fill out the <varname>sockaddr_in</"
"varname> structure in <varname>sa</varname>. Note the conditional use of "
"<symbol>INADDR_ANY</symbol>:"
msgstr ""
"با ایجاد یک سوکت آغاز می‌کنیم. سپس، ساختار <varname>sockaddr_in</varname> را "
"در <varname>sa</varname> پر می‌کنیم. به استفادهٔ مشروط <symbol>INADDR_ANY</"
"symbol> دقت کنید:"

#. (itstool) path: sect4/programlisting
#: book.translate.xml:6098
#, no-wrap
msgid ""
"if (INADDR_ANY)\n"
"        sa.sin_addr.s_addr = htonl(INADDR_ANY);"
msgstr ""
"if (INADDR_ANY)\n"
"        sa.sin_addr.s_addr = htonl(INADDR_ANY);"

#. (itstool) path: sect4/para
#: book.translate.xml:6101
msgid ""
"Its value is <constant>0</constant>. Since we have just used "
"<function>bzero</function> on the entire structure, it would be redundant to "
"set it to <constant>0</constant> again. But if we port our code to some "
"other system where <symbol>INADDR_ANY</symbol> is perhaps not a zero, we "
"need to assign it to <varname>sa.sin_addr.s_addr</varname>. Most modern C "
"compilers are clever enough to notice that <symbol>INADDR_ANY</symbol> is a "
"constant. As long as it is a zero, they will optimize the entire conditional "
"statement out of the code."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6113
msgid ""
"After we have called <function>bind</function> successfully, we are ready to "
"become a <emphasis>daemon</emphasis>: We use <function>fork</function> to "
"create a child process. In both, the parent and the child, the <varname>s</"
"varname> variable is our socket. The parent process will not need it, so it "
"calls <function>close</function>, then it returns <constant>0</constant> to "
"inform its own parent it had terminated successfully."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6123
msgid ""
"Meanwhile, the child process continues working in the background. It calls "
"<function>listen</function> and sets its backlog to <constant>4</constant>. "
"It does not need a large value here because <emphasis>daytime</emphasis> is "
"not a protocol many clients request all the time, and because it can process "
"each request instantly anyway."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6131
msgid ""
"Finally, the daemon starts an endless loop, which performs the following "
"steps:"
msgstr ""
"سرانجام، دیمِن یک حلقه بی‌نهایت را آغاز می‌کند، که مراحل زیر را انجام می‌دهد:"

#. (itstool) path: step/para
#: book.translate.xml:6136
msgid ""
"Call <function>accept</function>. It waits here until a client contacts it. "
"At that point, it receives a new socket, <varname>c</varname>, which it can "
"use to communicate with this particular client."
msgstr ""
"فراخوانی تابع <function>accept</function>. تا زمانی که یک کارخواه اتصال "
"برقرار کند در اینجا صبر می‌کند. در آن هنگام، یک سوکت جدید دریافت می‌کند، "
"<varname>c</varname>، که از آن برای برقراری ارتباط با این کارخواه خاص می‌"
"تواند استفاده کند."

#. (itstool) path: step/para
#: book.translate.xml:6144
msgid ""
"It uses the C function <function>fdopen</function> to turn the socket from a "
"low-level <emphasis>file descriptor</emphasis> to a C-style <varname>FILE</"
"varname> pointer. This will allow the use of <function>fprintf</function> "
"later on."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:6153
msgid ""
"It checks the time, and prints it in the <emphasis><acronym>ISO</acronym> "
"8601</emphasis> format to the <varname>client</varname> <quote>file</quote>. "
"It then uses <function>fclose</function> to close the file. That will "
"automatically close the socket as well."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6163
msgid ""
"We can <emphasis>generalize</emphasis> this, and use it as a model for many "
"other servers:"
msgstr ""
"این را می‌توانیم <emphasis>تعمیم</emphasis> دهیم، و از آن به‌عنوان یک الگو "
"برای بسیاری از کارسازهای دیگر استفاده کنیم:"

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:6168
msgctxt "_"
msgid "external ref='sockets/serv' md5='__failed__'"
msgstr "external ref='sockets/serv' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:6172
#, no-wrap
msgid ""
"+-----------------+\n"
"|  Create Socket  |\n"
"+-----------------+\n"
"          |\n"
"+-----------------+\n"
"|    Bind Port    |       Daemon Process\n"
"+-----------------+\n"
"          |                 +--------+\n"
"          +-------------+--&gt;|  Init  |\n"
"          |             |   +--------+\n"
"+-----------------+     |         |\n"
"|        Exit     |     |   +--------+\n"
"+-----------------+     |   | Listen |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Accept |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Serve  |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Close  |\n"
"                        |&lt;--------+"
msgstr ""
"+-----------------+\n"
"|  Create Socket  |\n"
"+-----------------+\n"
"          |\n"
"+-----------------+\n"
"|    Bind Port    |       Daemon Process\n"
"+-----------------+\n"
"          |                 +--------+\n"
"          +-------------+--&gt;|  Init  |\n"
"          |             |   +--------+\n"
"+-----------------+     |         |\n"
"|        Exit     |     |   +--------+\n"
"+-----------------+     |   | Listen |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Accept |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Serve  |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Close  |\n"
"                        |&lt;--------+"

#. (itstool) path: sect4/mediaobject
#: book.translate.xml:6166
msgid ""
"<imageobject> <imagedata fileref=\"sockets/serv\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>Sequential Server</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/serv\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>کارساز "
"پی‌درپی</phrase> </textobject>"

#. (itstool) path: sect4/para
#: book.translate.xml:6205
msgid ""
"This flowchart is good for <emphasis>sequential servers</emphasis>, i.e., "
"servers that can serve one client at a time, just as we were able to with "
"our <emphasis>daytime</emphasis> server. This is only possible whenever "
"there is no real <quote>conversation</quote> going on between the client and "
"the server: As soon as the server detects a connection to the client, it "
"sends out some data and closes the connection. The entire operation may take "
"nanoseconds, and it is finished."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6216
msgid ""
"The advantage of this flowchart is that, except for the brief moment after "
"the parent <function>fork</function>s and before it exits, there is always "
"only one <emphasis>process</emphasis> active: Our server does not take up "
"much memory and other system resources."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6223
msgid ""
"Note that we have added <emphasis>initialize daemon</emphasis> in our "
"flowchart. We did not need to initialize our own daemon, but this is a good "
"place in the flow of the program to set up any <function>signal</function> "
"handlers, open any files we may need, etc."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6230
msgid ""
"Just about everything in the flow chart can be used literally on many "
"different servers. The <emphasis>serve</emphasis> entry is the exception. We "
"think of it as a <emphasis><quote>black box</quote></emphasis>, i.e., "
"something you design specifically for your own server, and just <quote>plug "
"it into the rest.</quote>"
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6238
msgid ""
"Not all protocols are that simple. Many receive a request from the client, "
"reply to it, then receive another request from the same client. Because of "
"that, they do not know in advance how long they will be serving the client. "
"Such servers usually start a new process for each client. While the new "
"process is serving its client, the daemon can continue listening for more "
"connections."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6246
msgid ""
"Now, go ahead, save the above source code as <filename>daytimed.c</filename> "
"(it is customary to end the names of daemons with the letter <constant>d</"
"constant>). After you have compiled it, try running it:"
msgstr ""
"اکنون، پیش بروید و کد منبع فوق را تحت عنوان <filename>daytimed.c</filename> "
"ذخیره کنید (مرسوم است که نام دیمِن‌ها به حرف <constant>d</constant> ختم شوند)"
". بعد از اینکه آن را همگردانی کردید، اجرایش کنید:"

#. (itstool) path: sect4/screen
#: book.translate.xml:6252
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>./daytimed</userinput>\n"
"bind: Permission denied\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>./daytimed</userinput>\n"
"bind: Permission denied\n"
"<prompt>%</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6256
msgid ""
"What happened here? As you will recall, the <emphasis>daytime</emphasis> "
"protocol uses port 13. But all ports below 1024 are reserved to the "
"superuser (otherwise, anyone could start a daemon pretending to serve a "
"commonly used port, while causing a security breach)."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6263
msgid "Try again, this time as the superuser:"
msgstr "دوباره امتحان کنید، این بار به‌عنوان ابرکاربر:"

#. (itstool) path: sect4/screen
#: book.translate.xml:6265
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>./daytimed</userinput>\n"
"<prompt>#</prompt>"
msgstr ""
"<prompt>#</prompt> <userinput>./daytimed</userinput>\n"
"<prompt>#</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6268
msgid "What... Nothing? Let us try again:"
msgstr "عجب... هیچ چیز؟ بگذارید مجدد امتحان کنیم:"

#. (itstool) path: sect4/screen
#: book.translate.xml:6270
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>./daytimed</userinput>\n"
"\n"
"bind: Address already in use\n"
"<prompt>#</prompt>"
msgstr ""
"<prompt>#</prompt> <userinput>./daytimed</userinput>\n"
"\n"
"bind: Address already in use\n"
"<prompt>#</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6275
msgid ""
"Every port can only be bound by one program at a time. Our first attempt was "
"indeed successful: It started the child daemon and returned quietly. It is "
"still running and will continue to run until you either kill it, or any of "
"its system calls fail, or you reboot the system."
msgstr ""

#. (itstool) path: sect4/para
#: book.translate.xml:6281
msgid ""
"Fine, we know it is running in the background. But is it working? How do we "
"know it is a proper <emphasis>daytime</emphasis> server? Simple:"
msgstr ""

#. (itstool) path: sect4/screen
#: book.translate.xml:6285
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>telnet localhost 13</userinput>\n"
"\n"
"Trying ::1...\n"
"telnet: connect to address ::1: Connection refused\n"
"Trying 127.0.0.1...\n"
"Connected to localhost.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:04:42Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>telnet localhost 13</userinput>\n"
"\n"
"Trying ::1...\n"
"telnet: connect to address ::1: Connection refused\n"
"Trying 127.0.0.1...\n"
"Connected to localhost.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:04:42Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6296
msgid ""
"<application>telnet</application> tried the new <acronym>IP</acronym>v6, and "
"failed. It retried with <acronym>IP</acronym>v4 and succeeded. The daemon "
"works."
msgstr ""
"دستور <application>telnet</application> یک <acronym>IP</acronym>v6 جدید را "
"امتحان کرد، و پیروز نشد. با <acronym>IP</acronym>v4 امتحان کرد و پیروز شد. "
"دیمِن کار می‌کند."

#. (itstool) path: sect4/para
#: book.translate.xml:6301
msgid ""
"If you have access to another <trademark class=\"registered\">UNIX</"
"trademark> system via <application>telnet</application>, you can use it to "
"test accessing the server remotely. My computer does not have a static "
"<acronym>IP</acronym> address, so this is what I did:"
msgstr ""
"اگر به یک سامانهٔ <trademark class=\"registered\">UNIX</trademark> دیگر با "
"<application>telnet</application> دسترسی دارید، می‌توانید از آن برای آزمایش "
"ارتباط از راه دور با کارساز استفاده کنید. رایانهٔ من آدرس <acronym>IP</"
"acronym> ثابت ندارد، پس این کاری است که من کردم:"

#. (itstool) path: sect4/screen
#: book.translate.xml:6307
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>who</userinput>\n"
"\n"
"whizkid          ttyp0   Jun 19 16:59   (216.127.220.143)\n"
"xxx              ttyp1   Jun 19 16:06   (xx.xx.xx.xx)\n"
"<prompt>%</prompt> <userinput>telnet 216.127.220.143 13</userinput>\n"
"\n"
"Trying 216.127.220.143...\n"
"Connected to r47.bfm.org.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:31:11Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>who</userinput>\n"
"\n"
"whizkid          ttyp0   Jun 19 16:59   (216.127.220.143)\n"
"xxx              ttyp1   Jun 19 16:06   (xx.xx.xx.xx)\n"
"<prompt>%</prompt> <userinput>telnet 216.127.220.143 13</userinput>\n"
"\n"
"Trying 216.127.220.143...\n"
"Connected to r47.bfm.org.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:31:11Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6320
msgid "Again, it worked. Will it work using the domain name?"
msgstr "باز هم کار کرد. آیا با استفاده از نام دامنه هم کار خواهد کرد؟"

#. (itstool) path: sect4/screen
#: book.translate.xml:6323
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>telnet r47.bfm.org 13</userinput>\n"
"\n"
"Trying 216.127.220.143...\n"
"Connected to r47.bfm.org.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:31:40Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>telnet r47.bfm.org 13</userinput>\n"
"\n"
"Trying 216.127.220.143...\n"
"Connected to r47.bfm.org.\n"
"Escape character is '^]'.\n"
"2001-06-19T21:31:40Z\n"
"Connection closed by foreign host.\n"
"<prompt>%</prompt>"

#. (itstool) path: sect4/para
#: book.translate.xml:6332
msgid ""
"By the way, <application>telnet</application> prints the "
"<emphasis>Connection closed by foreign host</emphasis> message after our "
"daemon has closed the socket. This shows us that, indeed, using "
"<function>fclose(client);</function> in our code works as advertised."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:6344
msgid "Helper Functions"
msgstr "توابع کمکی"

#. (itstool) path: sect1/para
#: book.translate.xml:6346
msgid ""
"FreeBSD C library contains many helper functions for sockets programming. "
"For example, in our sample client we hard coded the <systemitem class="
"\"fqdomainname\">time.nist.gov</systemitem> <acronym>IP</acronym> address. "
"But we do not always know the <acronym>IP</acronym> address. Even if we do, "
"our software is more flexible if it allows the user to enter the "
"<acronym>IP</acronym> address, or even the domain name."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:6355
msgid "<function>gethostbyname</function>"
msgstr "<function>gethostbyname</function>"

#. (itstool) path: sect2/para
#: book.translate.xml:6357
msgid ""
"While there is no way to pass the domain name directly to any of the sockets "
"functions, the FreeBSD C library comes with the "
"<citerefentry><refentrytitle>gethostbyname</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>gethostbyname2</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> functions, declared in "
"<filename>netdb.h</filename>."
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:6362
#, no-wrap
msgid ""
"struct hostent * gethostbyname(const char *name);\n"
"struct hostent * gethostbyname2(const char *name, int af);"
msgstr ""
"struct hostent * gethostbyname(const char *name);\n"
"struct hostent * gethostbyname2(const char *name, int af);"

#. (itstool) path: sect2/para
#: book.translate.xml:6365
msgid ""
"Both return a pointer to the <varname>hostent</varname> structure, with much "
"information about the domain. For our purposes, the <varname>h_addr_list[0]</"
"varname> field of the structure points at <varname>h_length</varname> bytes "
"of the correct address, already stored in the <emphasis>network byte order</"
"emphasis>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:6372
msgid ""
"This allows us to create a much more flexible—and much more useful—version "
"of our <application>daytime</application> program:"
msgstr ""
"این به ما امکان ساخت یک نسخهٔ منعطف‌تر - و بسیار مفیدتر - از برنامهٔ "
"<application>daytime</application> را می‌دهد:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:6376
#, no-wrap
msgid ""
"/*\n"
" * daytime.c\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" * 19 June 2001\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"#include &lt;netdb.h&gt;\n"
"\n"
"int main(int argc, char *argv[]) {\n"
"  register int s;\n"
"  register int bytes;\n"
"  struct sockaddr_in sa;\n"
"  struct hostent *he;\n"
"  char buf[BUFSIZ+1];\n"
"  char *host;\n"
"\n"
"  if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"    perror(\"socket\");\n"
"    return 1;\n"
"  }\n"
"\n"
"  bzero(&amp;sa, sizeof sa);\n"
"\n"
"  sa.sin_family = AF_INET;\n"
"  sa.sin_port = htons(13);\n"
"\n"
"  host = (argc &gt; 1) ? (char *)argv[1] : \"time.nist.gov\";\n"
"\n"
"  if ((he = gethostbyname(host)) == NULL) {\n"
"    herror(host);\n"
"    return 2;\n"
"  }\n"
"\n"
"  bcopy(he-&gt;h_addr_list[0],&amp;sa.sin_addr, he-&gt;h_length);\n"
"\n"
"  if (connect(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"    perror(\"connect\");\n"
"    return 3;\n"
"  }\n"
"\n"
"  while ((bytes = read(s, buf, BUFSIZ)) &gt; 0)\n"
"    write(1, buf, bytes);\n"
"\n"
"  close(s);\n"
"  return 0;\n"
"}"
msgstr ""
"/*\n"
" * daytime.c\n"
" *\n"
" * Programmed by G. Adam Stanislav\n"
" * 19 June 2001\n"
" */\n"
"#include &lt;stdio.h&gt;\n"
"#include &lt;string.h&gt;\n"
"#include &lt;sys/types.h&gt;\n"
"#include &lt;sys/socket.h&gt;\n"
"#include &lt;netinet/in.h&gt;\n"
"#include &lt;netdb.h&gt;\n"
"\n"
"int main(int argc, char *argv[]) {\n"
"  register int s;\n"
"  register int bytes;\n"
"  struct sockaddr_in sa;\n"
"  struct hostent *he;\n"
"  char buf[BUFSIZ+1];\n"
"  char *host;\n"
"\n"
"  if ((s = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\n"
"    perror(\"socket\");\n"
"    return 1;\n"
"  }\n"
"\n"
"  bzero(&amp;sa, sizeof sa);\n"
"\n"
"  sa.sin_family = AF_INET;\n"
"  sa.sin_port = htons(13);\n"
"\n"
"  host = (argc &gt; 1) ? (char *)argv[1] : \"time.nist.gov\";\n"
"\n"
"  if ((he = gethostbyname(host)) == NULL) {\n"
"    herror(host);\n"
"    return 2;\n"
"  }\n"
"\n"
"  bcopy(he-&gt;h_addr_list[0],&amp;sa.sin_addr, he-&gt;h_length);\n"
"\n"
"  if (connect(s, (struct sockaddr *)&amp;sa, sizeof sa) &lt; 0) {\n"
"    perror(\"connect\");\n"
"    return 3;\n"
"  }\n"
"\n"
"  while ((bytes = read(s, buf, BUFSIZ)) &gt; 0)\n"
"    write(1, buf, bytes);\n"
"\n"
"  close(s);\n"
"  return 0;\n"
"}"

#. (itstool) path: sect2/para
#: book.translate.xml:6428
msgid ""
"We now can type a domain name (or an <acronym>IP</acronym> address, it works "
"both ways) on the command line, and the program will try to connect to its "
"<emphasis>daytime</emphasis> server. Otherwise, it will still default to "
"<systemitem class=\"fqdomainname\">time.nist.gov</systemitem>. However, even "
"in this case we will use <function>gethostbyname</function> rather than hard "
"coding <systemitem class=\"ipaddress\">192.43.244.18</systemitem>. That way, "
"even if its <acronym>IP</acronym> address changes in the future, we will "
"still find it."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:6439
msgid ""
"Since it takes virtually no time to get the time from your local server, you "
"could run <application>daytime</application> twice in a row: First to get "
"the time from <systemitem class=\"fqdomainname\">time.nist.gov</systemitem>, "
"the second time from your own system. You can then compare the results and "
"see how exact your system clock is:"
msgstr ""

#. (itstool) path: sect2/screen
#: book.translate.xml:6445
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>daytime ; daytime localhost</userinput>\n"
"\n"
"\n"
"52080 01-06-20 04:02:33 50 0 0 390.2 UTC(NIST) *\n"
"2001-06-20T04:02:35Z\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>daytime ; daytime localhost</userinput>\n"
"\n"
"\n"
"52080 01-06-20 04:02:33 50 0 0 390.2 UTC(NIST) *\n"
"2001-06-20T04:02:35Z\n"
"<prompt>%</prompt>"

#. (itstool) path: sect2/para
#: book.translate.xml:6452
msgid ""
"As you can see, my system was two seconds ahead of the <acronym>NIST</"
"acronym> time."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:6457
msgid "<function>getservbyname</function>"
msgstr "<function>getservbyname</function>"

#. (itstool) path: sect2/para
#: book.translate.xml:6459
msgid ""
"Sometimes you may not be sure what port a certain service uses. The "
"<citerefentry><refentrytitle>getservbyname</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> function, also declared in <filename>netdb.h</"
"filename> comes in very handy in those cases:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:6464
#, no-wrap
msgid "struct servent * getservbyname(const char *name, const char *proto);"
msgstr "struct servent * getservbyname(const char *name, const char *proto);"

#. (itstool) path: sect2/para
#: book.translate.xml:6466
msgid ""
"The <varname>servent</varname> structure contains the <varname>s_port</"
"varname>, which contains the proper port, already in <emphasis>network byte "
"order</emphasis>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:6470
msgid ""
"Had we not known the correct port for the <emphasis>daytime</emphasis> "
"service, we could have found it this way:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:6474
#, no-wrap
msgid ""
"struct servent *se;\n"
"  ...\n"
"  if ((se = getservbyname(\"daytime\", \"tcp\")) == NULL {\n"
"    fprintf(stderr, \"Cannot determine which port to use.\\n\");\n"
"    return 7;\n"
"  }\n"
"  sa.sin_port = se-&gt;s_port;"
msgstr ""
"struct servent *se;\n"
"  ...\n"
"  if ((se = getservbyname(\"daytime\", \"tcp\")) == NULL {\n"
"    fprintf(stderr, \"Cannot determine which port to use.\\n"
"\");\n"
"    return 7;\n"
"  }\n"
"  sa.sin_port = se-&gt;s_port;"

#. (itstool) path: sect2/para
#: book.translate.xml:6482
msgid ""
"You usually do know the port. But if you are developing a new protocol, you "
"may be testing it on an unofficial port. Some day, you will register the "
"protocol and its port (if nowhere else, at least in your <filename>/etc/"
"services</filename>, which is where <function>getservbyname</function> "
"looks). Instead of returning an error in the above code, you just use the "
"temporary port number. Once you have listed the protocol in <filename>/etc/"
"services</filename>, your software will find its port without you having to "
"rewrite the code."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:6496
msgid "Concurrent Servers"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6498
msgid ""
"Unlike a sequential server, a <emphasis>concurrent server</emphasis> has to "
"be able to serve more than one client at a time. For example, a "
"<emphasis>chat server</emphasis> may be serving a specific client for hours—"
"it cannot wait till it stops serving a client before it serves the next one."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6504
msgid "This requires a significant change in our flowchart:"
msgstr ""

#. (itstool) path: imageobject/imagedata
#. This is a reference to an external file such as an image or video. When
#. the file changes, the md5 hash will change to let you know you need to
#. update your localized copy. The msgstr is not used at all. Set it to
#. whatever you like once you have updated your copy of the file.
#: book.translate.xml:6508
msgctxt "_"
msgid "external ref='sockets/serv2' md5='__failed__'"
msgstr "external ref='sockets/serv2' md5='__failed__'"

#. (itstool) path: textobject/literallayout
#: book.translate.xml:6512
#, no-wrap
msgid ""
"+-----------------+\n"
"|  Create Socket  |\n"
"+-----------------+\n"
"          |\n"
"+-----------------+\n"
"|    Bind Port    |       Daemon Process\n"
"+-----------------+\n"
"          |                 +--------+\n"
"          +-------------+--&gt;|  Init  |\n"
"          |             |   +--------+\n"
"+-----------------+     |         |\n"
"|        Exit     |     |   +--------+\n"
"+-----------------+     |   | Listen |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Accept |\n"
"                        |   +--------+\n"
"                        |         |       +------------------+\n"
"                        |         +------&gt;| Close Top Socket |\n"
"                        |         |       +------------------+\n"
"                        |   +--------+             |\n"
"                        |   | Close  |    +------------------+\n"
"                        |   +--------+    |     Serve        |\n"
"                        |         |       +------------------+\n"
"                        |&lt;--------+                |\n"
"                                          +------------------+\n"
"                                          | Close Acc Socket |\n"
"                            +--------+    +------------------+\n"
"                            | Signal |             |\n"
"                            +--------+    +------------------+\n"
"                                          |      Exit        |\n"
"                                          +------------------+"
msgstr ""
"+-----------------+\n"
"|  Create Socket  |\n"
"+-----------------+\n"
"          |\n"
"+-----------------+\n"
"|    Bind Port    |       Daemon Process\n"
"+-----------------+\n"
"          |                 +--------+\n"
"          +-------------+--&gt;|  Init  |\n"
"          |             |   +--------+\n"
"+-----------------+     |         |\n"
"|        Exit     |     |   +--------+\n"
"+-----------------+     |   | Listen |\n"
"                        |   +--------+\n"
"                        |         |\n"
"                        |   +--------+\n"
"                        |   | Accept |\n"
"                        |   +--------+\n"
"                        |         |       +------------------+\n"
"                        |         +------&gt;| Close Top Socket |\n"
"                        |         |       +------------------+\n"
"                        |   +--------+             |\n"
"                        |   | Close  |    +------------------+\n"
"                        |   +--------+    |     Serve        |\n"
"                        |         |       +------------------+\n"
"                        |&lt;--------+                |\n"
"                                          +------------------+\n"
"                                          | Close Acc Socket |\n"
"                            +--------+    +------------------+\n"
"                            | Signal |             |\n"
"                            +--------+    +------------------+\n"
"                                          |      Exit        |\n"
"                                          +------------------+"

#. (itstool) path: sect1/mediaobject
#: book.translate.xml:6506
msgid ""
"<imageobject> <imagedata fileref=\"sockets/serv2\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> "
"<phrase>Concurrent Server</phrase> </textobject>"
msgstr ""
"<imageobject> <imagedata fileref=\"sockets/serv2\"/> </imageobject> "
"<textobject> <_:literallayout-1/> </textobject> <textobject> <phrase>کارساز "
"هم‌رو</phrase> </textobject>"

#. (itstool) path: sect1/para
#: book.translate.xml:6552
msgid ""
"We moved the <emphasis>serve</emphasis> from the <emphasis>daemon process</"
"emphasis> to its own <emphasis>server process</emphasis>. However, because "
"each child process inherits all open files (and a socket is treated just "
"like a file), the new process inherits not only the "
"<emphasis><quote>accepted handle,</quote></emphasis> i.e., the socket "
"returned by the <function>accept</function> call, but also the <emphasis>top "
"socket</emphasis>, i.e., the one opened by the top process right at the "
"beginning."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6562
msgid ""
"However, the <emphasis>server process</emphasis> does not need this socket "
"and should <function>close</function> it immediately. Similarly, the "
"<emphasis>daemon process</emphasis> no longer needs the <emphasis>accepted "
"socket</emphasis>, and not only should, but <emphasis>must</emphasis> "
"<function>close</function> it—otherwise, it will run out of available "
"<emphasis>file descriptors</emphasis> sooner or later."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6571
msgid ""
"After the <emphasis>server process</emphasis> is done serving, it should "
"close the <emphasis>accepted socket</emphasis>. Instead of returning to "
"<function>accept</function>, it now exits."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6576
msgid ""
"Under <trademark class=\"registered\">UNIX</trademark>, a process does not "
"really <emphasis>exit</emphasis>. Instead, it <emphasis>returns</emphasis> "
"to its parent. Typically, a parent process <function>wait</function>s for "
"its child process, and obtains a return value. However, our <emphasis>daemon "
"process</emphasis> cannot simply stop and wait. That would defeat the whole "
"purpose of creating additional processes. But if it never does "
"<function>wait</function>, its children will become <emphasis>zombies</"
"emphasis>—no longer functional but still roaming around."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6587
msgid ""
"For that reason, the <emphasis>daemon process</emphasis> needs to set "
"<emphasis>signal handlers</emphasis> in its <emphasis>initialize daemon</"
"emphasis> phase. At least a <symbol>SIGCHLD</symbol> signal has to be "
"processed, so the daemon can remove the zombie return values from the system "
"and release the system resources they are taking up."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:6594
msgid ""
"That is why our flowchart now contains a <emphasis>process signals</"
"emphasis> box, which is not connected to any other box. By the way, many "
"servers also process <symbol>SIGHUP</symbol>, and typically interpret as the "
"signal from the superuser that they should reread their configuration files. "
"This allows us to change settings without having to kill and restart these "
"servers."
msgstr ""

#. (itstool) path: chapter/title
#: book.translate.xml:6611
msgid "IPv6 Internals"
msgstr "داخلی‌های IPv6"

#. (itstool) path: info/title
#: book.translate.xml:6615
msgid "IPv6/IPsec Implementation"
msgstr "پیاده‌سازی IPv6/IPsec"

#. (itstool) path: authorgroup/author
#: book.translate.xml:6618
msgid ""
"<personname> <firstname>Yoshinobu</firstname> <surname>Inoue</surname> </"
"personname> <contrib>Contributed by </contrib>"
msgstr ""
"<personname> <firstname>Yoshinobu</firstname> <surname>Inoue</surname> </"
"personname> <contrib>نوشته شده توسط </contrib>"

#. (itstool) path: sect1/para
#: book.translate.xml:6628
msgid ""
"This section should explain IPv6 and IPsec related implementation internals. "
"These functionalities are derived from <link xlink:href=\"http://www.kame."
"net/\">KAME project</link>"
msgstr ""
"این بخش باید داخلی‌های مرتبط با پیاده‌سازی IPv6 و IPsec را توضیح دهد. این "
"کارکردها از <link xlink:href=\"http://www.kame.net/\">KAME project</link> "
"مشتق شده‌اند"

#. (itstool) path: sect2/title
#: book.translate.xml:6634
msgid "IPv6"
msgstr "IPv6"

#. (itstool) path: sect3/title
#: book.translate.xml:6637
msgid "Conformance"
msgstr "انطباق"

#. (itstool) path: sect3/para
#: book.translate.xml:6639
msgid ""
"The IPv6 related functions conforms, or tries to conform to the latest set "
"of IPv6 specifications. For future reference we list some of the relevant "
"documents below (<emphasis>NOTE</emphasis>: this is not a complete list - "
"this is too hard to maintain...)."
msgstr ""
"توابع مربوط به IPv6 منطبق با، یا سعی بر تطابق با آخرین مجموعه از مشخصات IPv6 "
"دارد. برای ارجاعات بعدی برخی مستندات مرتبط را در قسمت پایین فهرست می‌کنیم "
"(<emphasis>توجه</emphasis>: این یک فهرست کامل نیست - حفظ آن بسیار سخت "
"است...)."

#. (itstool) path: sect3/para
#: book.translate.xml:6645
msgid ""
"For details please refer to specific chapter in the document, RFCs, manual "
"pages, or comments in the source code."
msgstr ""
"برای جزئیات خواهشمند است به فصل مشخص شده در مستندات، RFC ها، صفحات راهنما، "
"یا توضیحات موجود در کد منبع رجوع کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:6649
msgid ""
"Conformance tests have been performed on the KAME STABLE kit at TAHI "
"project. Results can be viewed at <uri xlink:href=\"http://www.tahi.org/"
"report/KAME/\">http://www.tahi.org/report/KAME/</uri>. We also attended "
"University of New Hampshire IOL tests (<uri xlink:href=\"http://www.iol.unh."
"edu/\">http://www.iol.unh.edu/</uri>) in the past, with our past snapshots."
msgstr ""
"آزمون‌های انطباق در پروژهٔ TAHI بر روی کیت KAME STABLE اجرا شده‌اند. نتایج "
"آن در <uri xlink:href=\"http://www.tahi.org/report/KAME/\">http://www.tahi."
"org/report/KAME/</uri> قابل مشاهده است. ما همچنین در گذشته، با تصاویر گذشتهٔ "
"خود در آزمون‌های IOL در دانشگاه نیوهمپشر (<uri xlink:href=\"http://www.iol."
"unh.edu/\">http://www.iol.unh.edu/</uri>) شرکت کردیم."

#. (itstool) path: listitem/para
#: book.translate.xml:6656
msgid "RFC1639: FTP Operation Over Big Address Records (FOOBAR)"
msgstr "RFC1639: FTP Operation Over Big Address Records (FOOBAR)"

#. (itstool) path: listitem/para
#: book.translate.xml:6660 book.translate.xml:6761
msgid ""
"RFC2428 is preferred over RFC1639. FTP clients will first try RFC2428, then "
"RFC1639 if failed."
msgstr ""
"RFC2428 به RFC1639 ترجیح داده می‌شود. کارخواهان FTP ابتدا RFC2428 را امتحان "
"می‌کنند، سپس چنانچه ناموفق بود به سراغ RFC1639 می‌روند."

#. (itstool) path: listitem/para
#: book.translate.xml:6668
msgid "RFC1886: DNS Extensions to support IPv6"
msgstr "RFC1886: پسوندهای سامانهٔ نام دامنه (DNS) برای پشتیبانی از IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6672
msgid "RFC1933: Transition Mechanisms for IPv6 Hosts and Routers"
msgstr "RFC1933: سازوکارهای انتقال برای میزبان‌ها و مسیریاب‌های IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6676
msgid "IPv4 compatible address is not supported."
msgstr "نشانی سازگار با IPv4 پشتیبانی نمی‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:6679
msgid "automatic tunneling (described in 4.3 of this RFC) is not supported."
msgstr "تونل‌زنی خودکار (توصیف شده در 4.3 از همین RFC) پشتیبانی نمی‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:6683
msgid ""
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> interface implements IPv[46]-over-IPv[46] tunnel in a generic "
"way, and it covers \"configured tunnel\" described in the spec. See <link "
"linkend=\"gif\">23.5.1.5</link> in this document for details."
msgstr ""
"رابط "
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> تونل‌های IPv[46]-over-IPv[46] را به روشی عمومی پیاده‌سازی "
"می‌کند، و \"تونل پیکربندی شده\" را که در مشخصات توصیف شده است پوشش می‌دهد. "
"<link linkend=\"gif\">23.5.1.5</link> را در همین مستند برای جزئیات بیشتر "
"ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6693
msgid "RFC1981: Path MTU Discovery for IPv6"
msgstr "RFC1981: Path MTU Discovery برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6697
msgid "RFC2080: RIPng for IPv6"
msgstr "RFC2080: RIPng برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6700
msgid "usr.sbin/route6d support this."
msgstr "usr.sbin/route6d این را پشتیبانی می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:6706
msgid "RFC2292: Advanced Sockets API for IPv6"
msgstr "RFC2292: رابط‌ برنامه‌نویسی کاربردی سوکت‌های پیشرفته برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6709
msgid ""
"For supported library functions/kernel APIs, see <filename>sys/netinet6/"
"ADVAPI</filename>."
msgstr ""
"برای رابط‌‌های برنامه‌نویسی کاربردی کتابخانهٔ توابع/هستهٔ پشتیبانی‌شده، "
"<filename>sys/netinet6/ADVAPI</filename> را ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6716
msgid "RFC2362: Protocol Independent Multicast-Sparse Mode (PIM-SM)"
msgstr "RFC2362: Protocol Independent Multicast-Sparse Mode (PIM-SM)"

#. (itstool) path: listitem/para
#: book.translate.xml:6720
msgid ""
"RFC2362 defines packet formats for PIM-SM. <filename>draft-ietf-pim-ipv6-01."
"txt</filename> is written based on this."
msgstr ""
"RFC2362 قالب‌های بسته برای PIM-SM را مشخص می‌کند. <filename>draft-ietf-pim-"
"ipv6-01.txt</filename> بر همین اساس نوشته شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:6728
msgid "RFC2373: IPv6 Addressing Architecture"
msgstr "RFC2373: معماری نشانی‌دهی IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6731
msgid ""
"supports node required addresses, and conforms to the scope requirement."
msgstr ""
"نشانی‌های نیازمند گره را پشتیبانی می‌کند، و با مطابق با نیازمندی حوزه است."

#. (itstool) path: listitem/para
#: book.translate.xml:6738
msgid "RFC2374: An IPv6 Aggregatable Global Unicast Address Format"
msgstr "RFC2374: یک قالب نشانی یونیکست جهانی قابل تجمیع IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6742
msgid "supports 64-bit length of Interface ID."
msgstr "شناسهٔ رابط با طول ۶۴ بیت را پشتیبانی می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:6748
msgid "RFC2375: IPv6 Multicast Address Assignments"
msgstr "RFC2375: تخصیص نشانی مالتی‌کست IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6751
msgid "Userland applications use the well-known addresses assigned in the RFC."
msgstr ""
"برنامه‌های محیط کاربری از نشانی‌های شناخته‌شدهٔ اختصاص داده شده در RFC "
"استفاده می‌کنند."

#. (itstool) path: listitem/para
#: book.translate.xml:6758
msgid "RFC2428: FTP Extensions for IPv6 and NATs"
msgstr "RFC2428: پسوندهای FTP برای IPv6 و NAT ها"

#. (itstool) path: listitem/para
#: book.translate.xml:6769
msgid "RFC2460: IPv6 specification"
msgstr "RFC2460: مشخصات IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6773
msgid "RFC2461: Neighbor discovery for IPv6"
msgstr "RFC2461: کشف همسایه برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6776
msgid ""
"See <link linkend=\"neighbor-discovery\">23.5.1.2</link> in this document "
"for details."
msgstr ""
"<link linkend=\"neighbor-discovery\">23.5.1.2</link> را برای جزئیات بیشتر "
"ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6783
msgid "RFC2462: IPv6 Stateless Address Autoconfiguration"
msgstr "RFC2462: پیکربندی خودکار نشانی بی‌حالت IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6787
msgid ""
"See <link linkend=\"ipv6-pnp\">23.5.1.4</link> in this document for details."
msgstr "<link linkend=\"ipv6-pnp\">23.5.1.4</link> را برای جزئیات بیشتر ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6794
msgid "RFC2463: ICMPv6 for IPv6 specification"
msgstr "RFC2463: ICMPv6 برای مشخصات IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6797
msgid ""
"See <link linkend=\"icmpv6\">23.5.1.9</link> in this document for details."
msgstr "<link linkend=\"icmpv6\">23.5.1.9</link> را برای جزئیات بیشتر ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6804
msgid "RFC2464: Transmission of IPv6 Packets over Ethernet Networks"
msgstr "RFC2464: انتقال بسته‌های IPv6 بر روی شبکه‌های Ethernet"

#. (itstool) path: listitem/para
#: book.translate.xml:6809
msgid "RFC2465: MIB for IPv6: Textual Conventions and General Group"
msgstr "RFC2465: MIB برای IPv6: قراردادهای متنی و گروه‌های عمومی"

#. (itstool) path: listitem/para
#: book.translate.xml:6813
msgid ""
"Necessary statistics are gathered by the kernel. Actual IPv6 MIB support is "
"provided as a patchkit for ucd-snmp."
msgstr ""
"مقادیر لازم توسط هسته جمع‌آوری شده‌اند. پشتیبانی فعلی برای MIB در IPv6 به‌"
"عنوان یک patchkit برای ucd-snmp ارائه شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:6821
msgid "RFC2466: MIB for IPv6: ICMPv6 group"
msgstr "RFC2466: MIB برای IPv6: گروه ICMPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6824
msgid ""
"Necessary statistics are gathered by the kernel. Actual IPv6 MIB support is "
"provided as patchkit for ucd-snmp."
msgstr ""
"مقادیر لازم توسط هسته جمع‌آوری شده‌اند. پشتیبانی فعلی برای MIB در IPv6 به‌"
"عنوان یک patchkit برای ucd-snmp ارائه شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:6832
msgid "RFC2467: Transmission of IPv6 Packets over FDDI Networks"
msgstr "RFC2467: انتقال بسته‌‌های IPv6 بر روی شبکه‌های FDDI"

#. (itstool) path: listitem/para
#: book.translate.xml:6837
msgid "RFC2497: Transmission of IPv6 packet over ARCnet Networks"
msgstr "RFC2464: انتقال بسته‌های IPv6 بر روی شبکه‌های ARCnet"

#. (itstool) path: listitem/para
#: book.translate.xml:6842
msgid "RFC2553: Basic Socket Interface Extensions for IPv6"
msgstr "RFC2553: پسوندهای رابط سوکت پایه‌ای برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6846
msgid ""
"IPv4 mapped address (3.7) and special behavior of IPv6 wildcard bind socket "
"(3.8) are supported. See <link linkend=\"ipv6-wildcard-socket\">23.5.1.12</"
"link> in this document for details."
msgstr ""
"نشانی نگاشت‌شدهٔ IPv4 (3.7) و سوکت پیوند IPv6 wildcard (3.8) پشتیبانی می‌"
"شوند. <link linkend=\"ipv6-wildcard-socket\">23.5.1.12</link> را برای جزئیات "
"بیشتر ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6855
msgid "RFC2675: IPv6 Jumbograms"
msgstr "RFC2675: Jumbogram های IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6858
msgid ""
"See <link linkend=\"ipv6-jumbo\">23.5.1.7</link> in this document for "
"details."
msgstr ""
"<link linkend=\"ipv6-jumbo\">23.5.1.7</link> را برای جزئیات بیشتر ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6865
msgid "RFC2710: Multicast Listener Discovery for IPv6"
msgstr "RFC2710: کشف شنوندهٔ مالتی‌کست برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6870
msgid "RFC2711: IPv6 router alert option"
msgstr "RFC2711: گزینهٔ هشدار مسیریابِ IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6874
msgid ""
"<filename>draft-ietf-ipngwg-router-renum-08</filename>: Router renumbering "
"for IPv6"
msgstr ""
"<filename>draft-ietf-ipngwg-router-renum-08</filename>: تجدید شماره‌گذاری "
"مسیریاب برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6879
msgid ""
"<filename>draft-ietf-ipngwg-icmp-namelookups-02</filename>: IPv6 Name "
"Lookups Through ICMP"
msgstr ""
"<filename>draft-ietf-ipngwg-icmp-namelookups-02</filename>: جستجوی نام IPv6 "
"از طریق ICMP"

#. (itstool) path: listitem/para
#: book.translate.xml:6884
msgid ""
"<filename>draft-ietf-ipngwg-icmp-name-lookups-03</filename>: IPv6 Name "
"Lookups Through ICMP"
msgstr ""
"<filename>draft-ietf-ipngwg-icmp-name-lookups-03</filename>: جستجوی نام IPv6 "
"از طریق ICMP"

#. (itstool) path: listitem/para
#: book.translate.xml:6889
msgid "<filename>draft-ietf-pim-ipv6-01.txt</filename>: PIM for IPv6"
msgstr "<filename>draft-ietf-pim-ipv6-01.txt</filename>: PIM برای IPv6"

#. (itstool) path: listitem/para
#: book.translate.xml:6893
msgid ""
"<citerefentry><refentrytitle>pim6dd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> implements dense mode. <citerefentry><refentrytitle>pim6sd</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> implements sparse mode."
msgstr ""
"<citerefentry><refentrytitle>pim6dd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> حالت متراکم را پیاده‌سازی می‌کند. "
"<citerefentry><refentrytitle>pim6sd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> حالت پراکنده را پیاده‌سازی می‌کند."

#. (itstool) path: listitem/para
#: book.translate.xml:6900
msgid ""
"<filename>draft-itojun-ipv6-tcp-to-anycast-00</filename>: Disconnecting TCP "
"connection toward IPv6 anycast address"
msgstr ""
"<filename>draft-itojun-ipv6-tcp-to-anycast-00</filename>: اتصال TCP را سمت "
"نشانی anycast در IPv6 قطع می‌کند"

#. (itstool) path: listitem/para
#: book.translate.xml:6906
msgid "<filename>draft-yamamoto-wideipv6-comm-model-00</filename>"
msgstr "<filename>draft-yamamoto-wideipv6-comm-model-00</filename>"

#. (itstool) path: listitem/para
#: book.translate.xml:6909
msgid ""
"See <link linkend=\"ipv6-sas\">23.5.1.6</link> in this document for details."
msgstr "<link linkend=\"ipv6-sas\">23.5.1.6</link> را برای جزئیات بیشتر ببینید."

#. (itstool) path: listitem/para
#: book.translate.xml:6916
msgid ""
"<filename>draft-ietf-ipngwg-scopedaddr-format-00.txt</filename>: An "
"Extension of Format for IPv6 Scoped Addresses"
msgstr ""
"<filename>draft-ietf-ipngwg-scopedaddr-format-00.txt</filename>: پسوند قالب "
"برای نشانی‌های محدود IPv6"

#. (itstool) path: sect3/title
#: book.translate.xml:6923
msgid "Neighbor Discovery"
msgstr "کشف همسایه"

#. (itstool) path: sect3/para
#: book.translate.xml:6925
msgid ""
"Neighbor Discovery is fairly stable. Currently Address Resolution, "
"Duplicated Address Detection, and Neighbor Unreachability Detection are "
"supported. In the near future we will be adding Proxy Neighbor Advertisement "
"support in the kernel and Unsolicited Neighbor Advertisement transmission "
"command as admin tool."
msgstr ""
"کشف همسایه نسبتاً پایدار است. در حال حاضر تفکیک نشانی، تشخیص نشانی تکراری، و "
"تشخیص دسترسی‌ناپذیری همسایه پشتیبانی می‌شوند. در آیندهٔ نزدیک پشتیبانی از "
"اعلان همسایهٔ پراکسی در هسته و دستور انتقال اعلان همسایهٔ ناخواسته به‌عنوان "
"ابزار سرپرست را اضافه می‌کنیم."

#. (itstool) path: sect3/para
#: book.translate.xml:6932
msgid ""
"If DAD fails, the address will be marked \"duplicated\" and message will be "
"generated to syslog (and usually to console). The \"duplicated\" mark can be "
"checked with <citerefentry><refentrytitle>ifconfig</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>. It is administrators' "
"responsibility to check for and recover from DAD failures. The behavior "
"should be improved in the near future."
msgstr ""
"چنانچه DAD (تشخیص نشانی تکراری) کار نکند، نشانی به‌عنوان \"تکراری\" علامت‌"
"گذاری می‌شود و پیام در syslog (و معمولاً در پیشانه) ایجاد می‌شود. علامت "
"\"تکراری\" می‌تواند توسط <citerefentry><refentrytitle>ifconfig</refentrytitle"
"><manvolnum>8</manvolnum></citerefentry> بررسی شود. این وظیفهٔ سرپرستان است "
"که شکست‌های DAD را بررسی و از آنها بهبود یابند. این رفتار در آینده باید "
"اصلاح شود."

#. (itstool) path: sect3/para
#: book.translate.xml:6939
msgid ""
"Some of the network driver loops multicast packets back to itself, even if "
"instructed not to do so (especially in promiscuous mode). In such cases DAD "
"may fail, because DAD engine sees inbound NS packet (actually from the node "
"itself) and considers it as a sign of duplicate. You may want to look at #if "
"condition marked \"heuristics\" in sys/netinet6/nd6_nbr.c:nd6_dad_timer() as "
"workaround (note that the code fragment in \"heuristics\" section is not "
"spec conformant)."
msgstr ""
"برخی حلقه‌های گردانندهٔ شبکه بسته‌ها را به خودشان مولتیکست می‌کنند، حتی اگر "
"به‌گونه‌ای دستور گرفته باشند که چنین نکنند (مخصوصاً در حالت بی‌قاعده). در "
"چنین مواردی ممکن است که DAD شکست بخورد، زیرا موتور DAD بسته‌های داخلی NS را ("
"در واقع از خود گره) می‌بیند و آن را به‌نشان تکراری بودن در نظر می‌گیرد. ممکن "
"است بخواهید به شرط #if که در sys/netinet6/nd6_nbr.c:nd6_dad_timer() به‌عنوان "
"راه حل جایگزین \"heuristics\" نشانه‌گذاری شده است نگاهی بیندازید (توجه کنید "
"قطعه کد واقع در بخش \"heuristics\" منطبق با مشخصات نیست)."

#. (itstool) path: sect3/para
#: book.translate.xml:6949
msgid ""
"Neighbor Discovery specification (RFC2461) does not talk about neighbor "
"cache handling in the following cases:"
msgstr ""
"مشخصات کشف همسایه (RFC2461) در موارد زیر در مورد رسیدگی به کَش همسایه صحبتی "
"نمی‌کند:"

#. (itstool) path: listitem/para
#: book.translate.xml:6954
msgid ""
"when there was no neighbor cache entry, node received unsolicited RS/NS/NA/"
"redirect packet without link-layer address"
msgstr ""
"هنگامی‌که هیچ ورودی کَش همسایه‌ای وجود نداشت، گره بسته‌های تغییر مسیر "
"ناخواستهٔ RS/NS/NA/ را بدون نشانی سطح پیوند دریافت کرد"

#. (itstool) path: listitem/para
#: book.translate.xml:6959
msgid ""
"neighbor cache handling on medium without link-layer address (we need a "
"neighbor cache entry for IsRouter bit)"
msgstr ""
"رسیدگی به کَش همسایه در حد متوسط بدون نشانی سطح پیوند (برای قسمت IsRouter ما "
"نیاز به یک ورودی کَش همسایه داریم)"

#. (itstool) path: sect3/para
#: book.translate.xml:6965
msgid ""
"For first case, we implemented workaround based on discussions on IETF "
"ipngwg mailing list. For more details, see the comments in the source code "
"and email thread started from (IPng 7155), dated Feb 6 1999."
msgstr ""
"برای اولین مورد، ما راه‌حل جایگزین را بر اساس مباحثی که در فهرست پست‌سپاری "
"IETF ipngwg صورت گرفت پیاده‌سازی کردیم. برای جزئیات بیشتر، توضیحات کد منبع و "
"بند ایمیلی را که از (IPng 7155) شروع شده است، به تاریخ ۶ فوریه ۱۹۹۹۹، ببینید."

#. (itstool) path: sect3/para
#: book.translate.xml:6970
msgid ""
"IPv6 on-link determination rule (RFC2461) is quite different from "
"assumptions in BSD network code. At this moment, no on-link determination "
"rule is supported where default router list is empty (RFC2461, section 5.2, "
"last sentence in 2nd paragraph - note that the spec misuse the word \"host\" "
"and \"node\" in several places in the section)."
msgstr ""
"قانون تعیین‌کنندگیِ on-link در IPv6 (RFC2461) کاملاً متفاوت از مفروضات در کد "
"شبکهٔ BSD است. در این لحظه، هیچ قانون تعیین‌کنندگیِ on-link در جایی‌که فهرست "
"مسیریاب خالی باشد پشتیبانی نمی‌شود (RFC2461، بخش 5.2، آخرین جلمه در پاراگراف "
"دوم - توجه داشته باشید که مشخصات در برخی قسمت‌ها کلمهٔ \"میزبان\" و \"گره\" "
"را اشتباه به‌کار می‌برد)."

#. (itstool) path: sect3/para
#: book.translate.xml:6978
msgid ""
"To avoid possible DoS attacks and infinite loops, only 10 options on ND "
"packet is accepted now. Therefore, if you have 20 prefix options attached to "
"RA, only the first 10 prefixes will be recognized. If this troubles you, "
"please ask it on FREEBSD-CURRENT mailing list and/or modify nd6_maxndopt in "
"<filename>sys/netinet6/nd6.c</filename>. If there are high demands we may "
"provide sysctl knob for the variable."
msgstr ""
"به‌منظور پیشگیری از حملات احتمالی DoS و حلقه‌های بی‌نهایت، تنها ۱۰ گزینه در "
"بستهٔ ND در حال حاضر پذیرفته می‌شود. از این رو، چنانچه شما ۲۰ گزینهٔ پیشوند "
"دارید که به RA الصاق شده‌اند، تنها ۱۰ پیشوند اولیه شناسایی می‌شوند. اگر این "
"مسئله شما را آزار می‌دهد، لطفاً‌ آن را در فهرست پست‌سپاری FREEBSD-CURRENT "
"بپرسید و/یا nd6_maxndopt را در <filename>sys/netinet6/nd6.c</filename> تغییر "
"دهید. چنانچه درخواست‌ها زیاد شوند ممکن است که یک sysctl knob برای متغیر "
"ارائه کنیم."

#. (itstool) path: sect3/title
#: book.translate.xml:6989
msgid "Scope Index"
msgstr "فهرست محدوده"

#. (itstool) path: sect3/para
#: book.translate.xml:6991
msgid ""
"IPv6 uses scoped addresses. Therefore, it is very important to specify scope "
"index (interface index for link-local address, or site index for site-local "
"address) with an IPv6 address. Without scope index, scoped IPv6 address is "
"ambiguous to the kernel, and kernel will not be able to determine the "
"outbound interface for a packet."
msgstr ""
"IPv6 از نشانی‌های محدود‌شده استفاده می‌کند. در نتیجه، تعیین فهرست محدوده با "
"یک نشانی IPv6 بسیار مهم است (فهرست رابط برای نشانی link-local، یا فهرست سایت "
"برای نشانی site-local). بدون فهرست محدوده، نشانی محدود‌شدهٔ IPv6 نسبت به "
"هسته مبهم است، و هسته قادر به تعیین رابط بیرونی برای یک بسته نخواهد بود."

#. (itstool) path: sect3/para
#: book.translate.xml:6999
msgid ""
"Ordinary userland applications should use advanced API (RFC2292) to specify "
"scope index, or interface index. For similar purpose, sin6_scope_id member "
"in sockaddr_in6 structure is defined in RFC2553. However, the semantics for "
"sin6_scope_id is rather vague. If you care about portability of your "
"application, we suggest you to use advanced API rather than sin6_scope_id."
msgstr ""
"برنامه‌های عادی محیط کاربری باید از رابط‌ برنامه‌نویسی کاربردی (API) پیشرفته "
"(RFC2292) استفاده کنند تا فهرست محدوده، یا فهرست رابط را مشخص کنند. برای "
"منظور مشابه، عضو sin6_scope_id در ساختار sockaddr_in6 در RFC2553 تعریف شده "
"است، قوائد معنایی برای sin6_scope_id به‌نسبت مبهم است. اگر به جابجایی‌پذیری "
"برنامهٔ خود اهمیت می‌دهید، پیشنهاد می‌کنیم از API های پیشرفته به جای "
"sin6_scope_id استفاده کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7007
msgid ""
"In the kernel, an interface index for link-local scoped address is embedded "
"into 2nd 16bit-word (3rd and 4th byte) in IPv6 address. For example, you may "
"see something like:"
msgstr ""
"در هسته، فهرست رابطی برای نشانی محدود‌شدهٔ link-local داخل دومین کلمهٔ ۱۶-"
"بیتی (بایت سوم و چهارم) در نشانی IPv6 جاسازی شده است. برای مثال، ممکن است "
"چیزی مانند این را مشاهده کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:7012
#, no-wrap
msgid "\tfe80:1::200:f8ff:fe01:6317"
msgstr "\tfe80:1::200:f8ff:fe01:6317"

#. (itstool) path: sect3/para
#: book.translate.xml:7014
msgid ""
"in the routing table and interface address structure (struct in6_ifaddr). "
"The address above is a link-local unicast address which belongs to a network "
"interface whose interface identifier is 1. The embedded index enables us to "
"identify IPv6 link local addresses over multiple interfaces effectively and "
"with only a little code change."
msgstr ""
"در جدول مسیرگزینی و ساختار نشانی رابط (struct in6_ifaddr). نشانی بالا یک "
"نشانی یونیکست link-local است که متعلق به یک رابط شبکه است که شناسانهٔ رابط "
"آن ۱ است. فهرست جاسازی شده این امکان را به ما می‌دهد تا نشانی‌های IPv6 link "
"local را تنها با کمی تغییر در کد نسبت به رابط‌های مختلف شناسایی کنیم."

#. (itstool) path: sect3/para
#: book.translate.xml:7021
msgid ""
"Routing daemons and configuration programs, like "
"<citerefentry><refentrytitle>route6d</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>ifconfig</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>, will need to "
"manipulate the \"embedded\" scope index. These programs use routing sockets "
"and ioctls (like SIOCGIFADDR_IN6) and the kernel API will return IPv6 "
"addresses with 2nd 16bit-word filled in. The APIs are for manipulating "
"kernel internal structure. Programs that use these APIs have to be prepared "
"about differences in kernels anyway."
msgstr ""
"دیمِن‌های مسیرگزینی و برنامه‌های پیکربندی، مانند <citerefentry><refentrytitle"
">route6d</refentrytitle><manvolnum>8</manvolnum></citerefentry> و <citerefent"
"ry><refentrytitle>ifconfig</refentrytitle><manvolnum>8</manvolnum></citerefen"
"try>، نیاز خواهند داشت تا فهرست محدودهٔ \"جاسازی شده\" را دستکاری کنند. این "
"برنامه‌ها سوکت‌های مسیرگزینی و ioctl ها (مانند SIOCGIFADDR_IN6) را استفاده "
"می‌کنند و رابط‌ برنامه‌نویسی کاربردی هسته نشانی‌های IPv6 را با کلمهٔ ۱۶ بیتی "
"دوم برمی‌گرداند. رابط‌‌های برنامه‌نویسی کاربردی برای دستکاری ساختار داخلی "
"هسته هستند. برنامه‌هایی که از این API ها استفاده می‌کنند باید برای تفاوت‌"
"هایی که در هسته وجود دارند خود رو آماده کنند."

#. (itstool) path: sect3/para
#: book.translate.xml:7030
msgid ""
"When you specify scoped address to the command line, NEVER write the "
"embedded form (such as ff02:1::1 or fe80:2::fedc). This is not supposed to "
"work. Always use standard form, like ff02::1 or fe80::fedc, with command "
"line option for specifying interface (like <command>ping6 -I ne0 ff02::1</"
"command>). In general, if a command does not have command line option to "
"specify outgoing interface, that command is not ready to accept scoped "
"address. This may seem to be opposite from IPv6's premise to support "
"\"dentist office\" situation. We believe that specifications need some "
"improvements for this."
msgstr ""
"هنگامی‌که نشانی محدود‌شده را در خط فرمان مشخص می‌کنید، هرگز در قالب تعبیه‌"
"شده (مانند ff02:1::1 یا fe80:2::fedc) ننویسید. قرار نیست کار کند. همیشه از "
"قالب استاندارد مانند ff02::1 یا fe80::fedc، به‌همراه گزینهٔ خط فرمان برای "
"تعیین کردن رابط (مانند <command>ping6 -I ne0 ff02::1</command>) استفاده "
"کنید. به‌طور کلی، اگر یک دستور گزینه‌ای برای تعیین کردن رابط بیرونی نداشته "
"باشد، آن دستور آمادهٔ پذیرش نشانی محدود‌شده نیست. این شاید برعکس این فرضیه "
"باشد که IPv6 وضعیت \"مطب دندانپزشکی\" را پشتیبانی می‌کند. ما باور داریم که "
"مشخصات نیازمند تعدادی بهسازی برای این منظور هستند."

#. (itstool) path: sect3/para
#: book.translate.xml:7042
msgid ""
"Some of the userland tools support extended numeric IPv6 syntax, as "
"documented in <filename>draft-ietf-ipngwg-scopedaddr-format-00.txt</"
"filename>. You can specify outgoing link, by using name of the outgoing "
"interface like \"fe80::1%ne0\". This way you will be able to specify link-"
"local scoped address without much trouble."
msgstr ""
"برخی ابزارهای محیط کاربری از نحو IPv6 عددی توسعه‌یافته پشتیبانی می‌کنند، که "
"در <filename>draft-ietf-ipngwg-scopedaddr-format-00.txt</filename> مستندسازی "
"شده است. می‌توانید با استفاده از یک رابط بیرونی مانند \"fe80::1%ne0\" پیوند "
"بیرونی را مشخص کنید. بدین ترتیب می‌توانید نشانی محدود‌شدهٔ link-local را "
"بدون دردسر تعیین کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7050
msgid ""
"To use this extension in your program, you will need to use "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>, and <citerefentry><refentrytitle>getnameinfo</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> with NI_WITHSCOPEID. "
"The implementation currently assumes 1-to-1 relationship between a link and "
"an interface, which is stronger than what specs say."
msgstr ""
"برای استفاده از این پسوند در برنامهٔ خود، نیاز دارید تا از <citerefentry><ref"
"entrytitle>getaddrinfo</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> و <citerefentry><refentrytitle>getnameinfo</refentrytitle><manv"
"olnum>3</manvolnum></citerefentry> به‌همراه NI_WITHSCOPEID استفاده کنید. "
"پیاده‌سازی در حال حاضر رابطهٔ ۱-به-۱ را بین یک پیوند و یک رابط در نظر "
"می‌گیرد، که قوی‌تر از آن چیزی است که مشخصات می‌گویند."

#. (itstool) path: sect3/title
#: book.translate.xml:7058
msgid "Plug and Play"
msgstr "اتصال و اجرا کردن"

#. (itstool) path: sect3/para
#: book.translate.xml:7060
msgid ""
"Most of the IPv6 stateless address autoconfiguration is implemented in the "
"kernel. Neighbor Discovery functions are implemented in the kernel as a "
"whole. Router Advertisement (RA) input for hosts is implemented in the "
"kernel. Router Solicitation (RS) output for endhosts, RS input for routers, "
"and RA output for routers are implemented in the userland."
msgstr ""
"بیشتر پیکربندی‌ خودکارِ (autoconfiguration) نشانیِ بی‌حالت در IPv6 در هسته "
"پیاده‌سازی شده است. توابع کشف همسایه به‌عنوان یک کل در هسته پیاده‌سازی شده‌"
"اند. ورودی اعلان مسیریاب (RA) برای میزبان‌ها در هسته پیاده‌سازی شده است. "
"خروجی درخواست مسیریاب (RS) برای میزبان‌های نهایی، ورودی RS برای مسیریاب‌ها، "
"و خروجی RA برای مسیریاب‌هایی در محیط کاربری پیاده‌سازی شده‌اند."

#. (itstool) path: sect4/title
#: book.translate.xml:7069
msgid "Assignment of link-local, and special addresses"
msgstr "تخصیص link-local، و نشانی‌های ویژه"

#. (itstool) path: sect4/para
#: book.translate.xml:7072
msgid ""
"IPv6 link-local address is generated from IEEE802 address (Ethernet MAC "
"address). Each of interface is assigned an IPv6 link-local address "
"automatically, when the interface becomes up (IFF_UP). Also, direct route "
"for the link-local address is added to routing table."
msgstr ""
"نشانی link-local در IPv6 توسط نشانی IEEE802 ایجاد شده است (نشانی مک Ethernet)"
". زمانی‌که رابط بالا می‌آید (IFF_UP)، هر رابط به‌طور خودکار به یک نشانی link-"
"local تخصیص داده می‌شود. همچنین، مسیر مستقیم برای نشانی link-local به جدول "
"مسیرگزینی اضافه شده است."

#. (itstool) path: sect4/para
#: book.translate.xml:7078
msgid "Here is an output of netstat command:"
msgstr "این یک خروجی از دستور netstat است:"

#. (itstool) path: sect4/screen
#: book.translate.xml:7080
#, no-wrap
msgid ""
"Internet6:\n"
"Destination                   Gateway                   Flags      Netif Expire\n"
"fe80:1::%ed0/64               link#1                    UC          ed0\n"
"fe80:2::%ep0/64               link#2                    UC          ep0"
msgstr ""
"Internet6:\n"
"Destination                   Gateway                   Flags      Netif "
"Expire\n"
"fe80:1::%ed0/64               link#1                    UC          ed0\n"
"fe80:2::%ep0/64               link#2                    UC          ep0"

#. (itstool) path: sect4/para
#: book.translate.xml:7085
msgid ""
"Interfaces that has no IEEE802 address (pseudo interfaces like tunnel "
"interfaces, or ppp interfaces) will borrow IEEE802 address from other "
"interfaces, such as Ethernet interfaces, whenever possible. If there is no "
"IEEE802 hardware attached, a last resort pseudo-random value, MD5(hostname), "
"will be used as source of link-local address. If it is not suitable for your "
"usage, you will need to configure the link-local address manually."
msgstr ""
"رابط‌هایی که نشانی IEEE802 را دارا نیستند (شبه رابط‌هایی چون رابط‌های تونل، "
"یا ppp) نشانی IEEE802 را در صورت امکان از سایر رابط‌ها قرض می‌گیرند، مانند "
"رابط‌های Ethernet. اگر هیچ سخت‌افزار IEEE802 متصل نباشد، یک مقدار شبه تصادفی "
"به‌عنوان آخرین گزینه، MD5(hostname)، به‌عنوان منبعِ نشانیِ link-local به‌کار "
"گرفته می‌شود. چنانچه برای مصرف شما مناسب نبود، لازم است تا نشانی link-local "
"را دستی پیکربندی کنید."

#. (itstool) path: sect4/para
#: book.translate.xml:7094
msgid ""
"If an interface is not capable of handling IPv6 (such as lack of multicast "
"support), link-local address will not be assigned to that interface. See "
"section 2 for details."
msgstr ""
"اگر یک رابط از عهدهٔ رسیدگی به IPv6 بر نیاید (مانند عدم پشتیبانی از "
"مولتیکست)، نشانی link-local به آن رابط تخصیص داده نمی‌شود. بخش دوم را برای "
"جزئیات بیشتر ببینید."

#. (itstool) path: sect4/para
#: book.translate.xml:7099
msgid ""
"Each interface joins the solicited multicast address and the link-local all-"
"nodes multicast addresses (e.g., fe80::1:ff01:6317 and ff02::1, "
"respectively, on the link the interface is attached). In addition to a link-"
"local address, the loopback address (::1) will be assigned to the loopback "
"interface. Also, ::1/128 and ff01::/32 are automatically added to routing "
"table, and loopback interface joins node-local multicast group ff01::1."
msgstr ""
"هر رابط به نشانی مولتیکست درخواست شده و نشانی‌های مولتیکستِ link-local all-"
"nodes می‌پیوندد (برای مثال، fe80::1:ff01:6317 و ff02::1، به‌ترتیب، در پیوندی "
"که رابط بدان متصل شده است). علاوه‌بر نشانی link-local، نشانی‌های loopback "
"مثل (::1) به رابط loopback تخصیص داده می‌شود. همچنین، ::1/128 و ff01::/32 به‌"
"طور خودکار به جدول مسیریابی اضافه می‌شوند، و رابط loopback به گروه ff01::1 "
"مولتیکست node-local می‌پیوندد."

#. (itstool) path: sect4/title
#: book.translate.xml:7110
msgid "Stateless address autoconfiguration on Hosts"
msgstr "پیکربندی خودکار نشانی بی‌حالت در میزبان‌ها"

#. (itstool) path: sect4/para
#: book.translate.xml:7112
msgid ""
"In IPv6 specification, nodes are separated into two categories: "
"<emphasis>routers</emphasis> and <emphasis>hosts</emphasis>. Routers forward "
"packets addressed to others, hosts does not forward the packets. net.inet6."
"ip6.forwarding defines whether this node is router or host (router if it is "
"1, host if it is 0)."
msgstr ""
"در مشخصات IPv6، گره‌ها به دو دسته تقسیم شده‌اند: <emphasis>مسیریاب‌ها</"
"emphasis> و <emphasis>میزبان‌ها</emphasis>. مسیریاب‌ها بسته‌های خطاب شده به "
"دیگران را ارسال می‌کنند، میزبان‌ها بسته‌ها را ارسال نمی‌کنند. "
"net.inet6.ip6.forwarding مسیریاب یا میزبان بودن این گره را معین می‌کند (1 "
"برای مسیریاب، 0 برای میزبان)."

#. (itstool) path: sect4/para
#: book.translate.xml:7120
msgid ""
"When a host hears Router Advertisement from the router, a host may "
"autoconfigure itself by stateless address autoconfiguration. This behavior "
"can be controlled by net.inet6.ip6.accept_rtadv (host autoconfigures itself "
"if it is set to 1). By autoconfiguration, network address prefix for the "
"receiving interface (usually global address prefix) is added. Default route "
"is also configured. Routers periodically generate Router Advertisement "
"packets. To request an adjacent router to generate RA packet, a host can "
"transmit Router Solicitation. To generate a RS packet at any time, use the "
"<emphasis>rtsol</emphasis> command. <citerefentry><refentrytitle>rtsold</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> daemon is also "
"available. <citerefentry><refentrytitle>rtsold</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> generates Router Solicitation whenever necessary, "
"and it works great for nomadic usage (notebooks/laptops). If one wishes to "
"ignore Router Advertisements, use sysctl to set net.inet6.ip6.accept_rtadv "
"to 0."
msgstr ""
"هنگامی‌که یک میزبان اعلان مسیریاب را از مسیریاب می‌شنود، میزبان ممکن است خود "
"را توسط پیکربندیِ خودکارِ نشانیِ بی‌حالت به‌طور خودکار پیکربندی کند "
"(autoconfiguration). این رفتار را می‌توان با net.inet6.ip6.accept_rtadv "
"کنترل کرد (میزبان چنانچه بر روی 1 تنظیم شده باشد خود را به‌طور خودکار "
"پیکربندی می‌کند). با پیکربندی خودکار، پیشوند نشانی شبکه برای رابط دریافت‌"
"کننده (معمولاً پیشوند نشانی جهانی) اضافه می‌شود. مسیر پیش‌فرض نیز پیکربندی "
"می‌شود. مسیریاب‌ها بسته‌های اعلان مسیریاب (RA) را متناوباً تولید می‌کنند. "
"برای آنکه از یک مسیریاب مجاور درخواست کنیم تا بستهٔ RA را تولید کند، یک "
"میزبان می‌تواند درخواست مسیریاب (RS) را انتقال دهد. به‌منظور تولید یک بستهٔ "
"RS در هر زمان، از دستور <emphasis>rtsol</emphasis> استفاده کنید. دیمِنِ "
"<citerefentry><refentrytitle>rtsold</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> نیز موجود است. "
"<citerefentry><refentrytitle>rtsold</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> می‌تواند درخواست مسیریاب را هر زمان که لازم بود تولید کند، و "
"برای استفادهٔ متحرک (نوت‌بوک‌ها/لپ تاپ‌ها) مناسب است. اگر کسی بخواهد اعلان "
"مسیریاب را نادیده بگیرد، می‌تواند از sysctl استفاده کند تا "
"net.inet6.ip6.accept_rtadv را روی 0 تنظیم کند."

#. (itstool) path: sect4/para
#: book.translate.xml:7138
msgid ""
"To generate Router Advertisement from a router, use the "
"<citerefentry><refentrytitle>rtadvd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> daemon."
msgstr ""
"برای ایجاد اعلان مسیریاب از یک مسیریاب، از دیمِن "
"<citerefentry><refentrytitle>rtadvd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> استفاده کنید."

#. (itstool) path: sect4/para
#: book.translate.xml:7141
msgid ""
"Note that, IPv6 specification assumes the following items, and nonconforming "
"cases are left unspecified:"
msgstr ""
"توجه داشته باشید، مشخصات IPv6 موارد پیش رو را در نظر می‌گیرد، و موارد "
"ناسازگار نامعین باقی می‌مانند:"

#. (itstool) path: listitem/para
#: book.translate.xml:7147
msgid "Only hosts will listen to router advertisements"
msgstr "تنها میزبان‌ها به اعلان‌های مسیریاب گوش می‌دهند"

#. (itstool) path: listitem/para
#: book.translate.xml:7151
msgid "Hosts have single network interface (except loopback)"
msgstr "میزبان‌ها یک رابط شبکهٔ واحد دارند (به‌جز loopback)"

#. (itstool) path: sect4/para
#: book.translate.xml:7156
msgid ""
"Therefore, this is unwise to enable net.inet6.ip6.accept_rtadv on routers, "
"or multi-interface host. A misconfigured node can behave strange "
"(nonconforming configuration allowed for those who would like to do some "
"experiments)."
msgstr ""
"از این رو، فعال کردن net.inet6.ip6.accept_rtadv در مسیریاب‌ها یا میزبان چند "
"رابط غیرعقلانیست. گره‌ای که درست پیکربندی نشده باشد ممکن است به طرز عجیبی "
"رفتار کند (پیکربندی ناسازگار برای کسانی‌که مایل به انجام چندین آزمایش هستند "
"مجاز است)."

#. (itstool) path: sect4/para
#: book.translate.xml:7162
msgid "To summarize the sysctl knob:"
msgstr "برای خلاصه کردن sysctl knob:"

#. (itstool) path: sect4/screen
#: book.translate.xml:7164
#, no-wrap
msgid ""
"\taccept_rtadv\tforwarding\trole of the node\n"
"\t---\t\t---\t\t---\n"
"\t0\t\t0\t\thost (to be manually configured)\n"
"\t0\t\t1\t\trouter\n"
"\t1\t\t0\t\tautoconfigured host\n"
"\t\t\t\t\t(spec assumes that host has single\n"
"\t\t\t\t\tinterface only, autoconfigured host\n"
"\t\t\t\t\twith multiple interface is\n"
"\t\t\t\t\tout-of-scope)\n"
"\t1\t\t1\t\tinvalid, or experimental\n"
"\t\t\t\t\t(out-of-scope of spec)"
msgstr ""
"\taccept_rtadv\tforwarding\trole of the node\n"
"\t---\t\t---\t\t---\n"
"\t0\t\t0\t\thost (to be manually configured)\n"
"\t0\t\t1\t\trouter\n"
"\t1\t\t0\t\tautoconfigured host\n"
"\t\t\t\t\t(spec assumes that host has single\n"
"\t\t\t\t\tinterface only, autoconfigured host\n"
"\t\t\t\t\twith multiple interface is\n"
"\t\t\t\t\tout-of-scope)\n"
"\t1\t\t1\t\tinvalid, or experimental\n"
"\t\t\t\t\t(out-of-scope of spec)"

#. (itstool) path: sect4/para
#: book.translate.xml:7176
msgid ""
"RFC2462 has validation rule against incoming RA prefix information option, "
"in 5.5.3 (e). This is to protect hosts from malicious (or misconfigured) "
"routers that advertise very short prefix lifetime. There was an update from "
"Jim Bound to ipngwg mailing list (look for \"(ipng 6712)\" in the archive) "
"and it is implemented Jim's update."
msgstr ""
"RFC2462 دارای قوانین اعتبارسنجی در برابر گزینهٔ اطلاعات پیشوند RA ورودی، در "
"5.5.3 (e) است. این بدین منظور است که میزبان‌‌‌ها را از مسیریاب‌های مخرب (یا "
"بد پیکربندی شده) ای که طول عمر پیشوند بسیار کوتاه را اعلان می‌کنند محافظت ‌"
"کند. به‌ روز رسانی‌ای توسط Jim Bound در فهرست پست‌سپاریِ ipngwg ایجاد شده "
"است (\"(ipng 6712)\" را ببینید در بایگانی) و به روز رسانیِ Jim پیاده‌سازی "
"شده است."

#. (itstool) path: sect4/para
#: book.translate.xml:7184
msgid ""
"See <link linkend=\"neighbor-discovery\">23.5.1.2</link> in the document for "
"relationship between DAD and autoconfiguration."
msgstr ""
"برای رابطهٔ بین DAD و پیکربندی خودکار <link linkend=\"neighbor-discovery\">23"
".5.1.2</link> را در مستندات ببینید."

#. (itstool) path: sect3/title
#: book.translate.xml:7191
msgid "Generic Tunnel Interface"
msgstr "رابط تونل عمومی"

#. (itstool) path: sect3/para
#: book.translate.xml:7193
msgid ""
"GIF (Generic InterFace) is a pseudo interface for configured tunnel. Details "
"are described in <citerefentry><refentrytitle>gif</"
"refentrytitle><manvolnum>4</manvolnum></citerefentry>. Currently"
msgstr ""
"GIF (Generic InterFace) یک شبه رابط است برای تونل پیکربندی شده. جزئیات در "
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> تشریح شده‌اند. در حال حاضر"

#. (itstool) path: listitem/para
#: book.translate.xml:7199
msgid "v6 in v6"
msgstr "v6 در v6"

#. (itstool) path: listitem/para
#: book.translate.xml:7202
msgid "v6 in v4"
msgstr "v6 در v4"

#. (itstool) path: listitem/para
#: book.translate.xml:7205
msgid "v4 in v6"
msgstr "v4 در v6"

#. (itstool) path: listitem/para
#: book.translate.xml:7208
msgid "v4 in v4"
msgstr "v4 در v4"

#. (itstool) path: sect3/para
#: book.translate.xml:7212
msgid ""
"are available. Use <citerefentry><refentrytitle>gifconfig</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> to assign physical "
"(outer) source and destination address to gif interfaces. Configuration that "
"uses same address family for inner and outer IP header (v4 in v4, or v6 in "
"v6) is dangerous. It is very easy to configure interfaces and routing tables "
"to perform infinite level of tunneling. <emphasis>Please be warned</"
"emphasis>."
msgstr ""
"در دسترس هستند. از <citerefentry><refentrytitle>gifconfig</refentrytitle><man"
"volnum>8</manvolnum></citerefentry> برای تخصیص منبع فیزیکی (خارجی) و نشانی "
"مقصد در رابط‌های gif استفاده کنید. پیکربندی که از یک خانواده نشانی برای "
"سرآیند‌ IP داخلی و خارجی (v4 در v4، یا v6 در v6) استفاده می‌کند خطرناک است. "
"پیکربندی رابط‌ها و مسیرگزینی جدول‌ها جهت اجرای بی‌نهایت مرحله تونل‌زنی بسیار "
"آسان است. <emphasis>لطفاً آگاه باشید</emphasis>."

#. (itstool) path: sect3/para
#: book.translate.xml:7220
msgid ""
"gif can be configured to be ECN-friendly. See <link linkend=\"ipsec-ecn"
"\">23.5.4.5</link> for ECN-friendliness of tunnels, and "
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> for how to configure."
msgstr ""
"gif این امکان را دارد که طوری پیکربندی شود تا دوستدار ECN باشد. <link linkend"
"=\"ipsec-ecn\">23.5.4.5</link> را برای تونل‌های دوستدار ECN ببینید، و "
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> برای نحوهٔ پیکربندی آنها."

#. (itstool) path: sect3/para
#: book.translate.xml:7223
msgid ""
"If you would like to configure an IPv4-in-IPv6 tunnel with gif interface, "
"read <citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> carefully. You will need to remove IPv6 link-local "
"address automatically assigned to the gif interface."
msgstr ""
"چنانچه علاقه‌مند به پیکربندی یک تونل IPv4 در IPv6 به‌همراه رابط gif هستید، "
"<citerefentry><refentrytitle>gif</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> را با دقت بخوانید. لازم خواهد شد نشانی IPv6 link-local را که "
"به‌طور خودکار به رابط gif تخصیص داده شده است را حذف کنید."

#. (itstool) path: sect3/title
#: book.translate.xml:7230
msgid "Source Address Selection"
msgstr "انتخاب نشانی منبع"

#. (itstool) path: sect3/para
#: book.translate.xml:7232
msgid ""
"Current source selection rule is scope oriented (there are some exceptions - "
"see below). For a given destination, a source IPv6 address is selected by "
"the following rule:"
msgstr ""
"قانون انتخاب منبع فعلی محدوده‌محور است (برخی استثناها وجود دارد - پایین را "
"ببینید). برای یک مقصد مشخص، نشانی IPv6 منبع توسط قوانین پیش رو انتخاب شده "
"است:"

#. (itstool) path: listitem/para
#: book.translate.xml:7239
msgid ""
"If the source address is explicitly specified by the user (e.g., via the "
"advanced API), the specified address is used."
msgstr ""
"چناچه نشانی منبع به‌صراحت توسط کاربر تعیین شود (برای مثال، توسط یک API "
"پیشرفته)، آن نشانی تعیین شده به‌کار برده می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:7245
msgid ""
"If there is an address assigned to the outgoing interface (which is usually "
"determined by looking up the routing table) that has the same scope as the "
"destination address, the address is used."
msgstr ""
"چنانچه نشانی‌ای به رابط بیرونی تخصیص داده شده باشد (که معمولاً‌ با بررسی "
"جدول مسیرگزینی معین می‌شود) که همان محدودهٔ نشانی مقصد را داراست، نشانی "
"استفاده شده است."

#. (itstool) path: listitem/para
#: book.translate.xml:7250
msgid "This is the most typical case."
msgstr "این معمول‌ترین حالت است."

#. (itstool) path: listitem/para
#: book.translate.xml:7254
msgid ""
"If there is no address that satisfies the above condition, choose a global "
"address assigned to one of the interfaces on the sending node."
msgstr ""
"چنانچه هیچ نشانی‌ای نباشد که شرط بالا را برآورده سازد، یک نشانی جهانی که به "
"یکی از رابط‌های موجود در گره‌های در حال ارسال اختصاص یافته است را انتخاب "
"کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:7260
msgid ""
"If there is no address that satisfies the above condition, and destination "
"address is site local scope, choose a site local address assigned to one of "
"the interfaces on the sending node."
msgstr ""
"چنانچه هیچ نشانی‌ای نباشد که شرط بالا را برآورده سازد، و نشانی مقصد در "
"محدودهٔ site local است، یک نشانی site local که به یکی از رابط‌ها در گرهٔ در "
"حال ارسال تخصیص داده شده است را انتخاب کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:7267
msgid ""
"If there is no address that satisfies the above condition, choose the "
"address associated with the routing table entry for the destination. This is "
"the last resort, which may cause scope violation."
msgstr ""
"چنانچه هیچ نشانی‌ای نباشد که شرط بالا را برآورده سازد، نشانی‌ای را که مرتبط "
"با ورودی جدول مسیرگزینیِ مقصد است انتخاب کنید. این آخرین چاره است، که ممکن "
"است باعث نقض محدوده شود."

#. (itstool) path: sect3/para
#: book.translate.xml:7274
msgid ""
"For instance, ::1 is selected for ff01::1, fe80:1::200:f8ff:fe01:6317 for "
"fe80:1::2a0:24ff:feab:839b (note that embedded interface index - described "
"in <link linkend=\"ipv6-scope-index\">23.5.1.3</link> - helps us choose the "
"right source address. Those embedded indices will not be on the wire). If "
"the outgoing interface has multiple address for the scope, a source is "
"selected longest match basis (rule 3). Suppose 2001:0DB8:808:1:200:f8ff:"
"fe01:6317 and 2001:0DB8:9:124:200:f8ff:fe01:6317 are given to the outgoing "
"interface. 2001:0DB8:808:1:200:f8ff:fe01:6317 is chosen as the source for "
"the destination 2001:0DB8:800::1."
msgstr ""
"برای مثال، ::1 برای ff01::1 انتخاب شده است، fe80:1::200:f8ff:fe01:6317 برای "
"fe80:1::2a0:24ff:feab:839b (توجه داشته باشید که فهرست رابط تعبیه شده - "
"چنانکه در <link linkend=\"ipv6-scope-index\">23.5.1.3</link> توضیح داده شده "
"است - به ما کمک می‌کند تا نشانی منبع درست را انتخاب کنیم. آن فهرست‌های تعبیه "
"شده روی خط نخواهند بود). اگر رابط بیرونی دارای نشانی‌های مختلف برای محدوده "
"باشد، یک منبع به‌منظور پایهٔ طولانی‌ترین تطابق انتخاب می‌شود (قانون سوم). "
"فرض کنید 2001:0DB8:808:1:200:f8ff:fe01:6317 و 2001:0DB8:9:124:200:f8ff:fe01:"
"6317 به رابط بیرونی داده شده‌اند. 2001:0DB8:808:1:200:f8ff:fe01:6317 به‌"
"عنوان منبع برای مقصدِ 2001:0DB8:800::1 انتخاب شده است."

#. (itstool) path: sect3/para
#: book.translate.xml:7286
msgid ""
"Note that the above rule is not documented in the IPv6 spec. It is "
"considered \"up to implementation\" item. There are some cases where we do "
"not use the above rule. One example is connected TCP session, and we use the "
"address kept in tcb as the source. Another example is source address for "
"Neighbor Advertisement. Under the spec (RFC2461 7.2.2) NA's source should be "
"the target address of the corresponding NS's target. In this case we follow "
"the spec rather than the above longest-match rule."
msgstr ""
"توجه داشته باشید که قاعدهٔ بالا در مشخصات IPv6 مستند نشده است. این یک موردِ "
"\"برای پیاده‌سازی\" محسوب می‌شود. مواردی وجود دارند که ما قاعدهٔ بالا را در "
"آنها اجرا نمی‌کنیم. یک مثال جلسهٔ TCP متصل است، و ما نشانی نگه داشته شده در "
"tcb را به‌عنوان منبع استفاده می‌کنیم. مثال دیگر نشانی منبع برای اعلان همسایه "
"است. تحت مشخصات (RFC2461 7.2.2) منبعِ NA (اعلان همسایه) باید نشانی هدف برای "
"هدفِ NS (درخواست همسایهٔ) مربوطه باشد. در این مورد ما مشخصات را به‌جای قاعدهٔ"
" طولانی‌ترین تطابق بالا دنبال می‌کنیم."

#. (itstool) path: sect3/para
#: book.translate.xml:7296
msgid ""
"For new connections (when rule 1 does not apply), deprecated addresses "
"(addresses with preferred lifetime = 0) will not be chosen as source address "
"if other choices are available. If no other choices are available, "
"deprecated address will be used as a last resort. If there are multiple "
"choice of deprecated addresses, the above scope rule will be used to choose "
"from those deprecated addresses. If you would like to prohibit the use of "
"deprecated address for some reason, configure net.inet6.ip6.use_deprecated "
"to 0. The issue related to deprecated address is described in RFC2462 5.5.4 "
"(NOTE: there is some debate underway in IETF ipngwg on how to use "
"\"deprecated\" address)."
msgstr ""
"برای اتصال‌های جدید (زمانی‌که قاعدهٔ 1 اعمال نمی‌شود)، چنانچه سایر گزینه‌ها "
"مطرح باشند نشانی‌های منسوخ شده (نشانی‌هایی با طول عمر ترجیح داده شده = 0) به‌"
"عنوان نشانی منبع انتخاب نمی‌شوند. اگر هیچ گزینهٔ دیگری نباشد، نشانی‌های "
"منسوخ شده به‌عنوان آخرین گزینه استفاده می‌شوند. چنانچه گزینه‌های مختلف برای "
"نشانی‌های منسوخ شده وجود دارند، قاعدهٔ محدودهٔ بالا برای انتخاب از بین نشانی‌"
"های منسوخ شده مورد استفاده قرار می‌گیرد. اگر می‌خواهید استفادهٔ نشانی‌های‌ "
"منسوخ شده را به هر دلیلی ممنوع کنید، مقدار net.inet6.ip6.use_deprecated را "
"روی 0 تنظیم کنید. مسائل مرتبط با نشانی منسوخ شده در RFC2462 5.5.4 تشریح شده‌"
"اند (توجه: در IETF ipngwg بحث‌هایی در مورد چگونگی به‌کار بردن نشانی \"منسوخ "
"شده\" در جریان است)."

#. (itstool) path: sect3/title
#: book.translate.xml:7311
msgid "Jumbo Payload"
msgstr "بار Jumbo"

#. (itstool) path: sect3/para
#: book.translate.xml:7313
msgid ""
"The Jumbo Payload hop-by-hop option is implemented and can be used to send "
"IPv6 packets with payloads longer than 65,535 octets. But currently no "
"physical interface whose MTU is more than 65,535 is supported, so such "
"payloads can be seen only on the loopback interface (i.e., lo0)."
msgstr ""
"گزینهٔ بار hop-by-hop در Jumbo پیاده‌سازی شده است و می‌توان به‌منظور ارسال "
"بسته‌های IPv6 با بارهایی طولانی‌تر از ۶۵٫۵۳۵ اکتاو از آن استفاده کرد. اما در "
"حال حاضر هیچ رابط فیزیکی‌ای که MTU آن بیشتر از ۶۵٫۵۳۵ باشد را پشتیبانی "
"نمی‌کند، در نتیجه چنین بارهایی را تنها می‌توان در رابط loopback (برای مثال، "
"lo0) دید."

#. (itstool) path: sect3/para
#: book.translate.xml:7319
msgid ""
"If you want to try jumbo payloads, you first have to reconfigure the kernel "
"so that the MTU of the loopback interface is more than 65,535 bytes; add the "
"following to the kernel configuration file:"
msgstr ""
"چنانچه می‌خواهید بارهای Jumbo را امتحان کنید، اول باید هستهٔ خود را طوری "
"پیکربندی کنید تا MTU در رابط loopback بیش از ۶۵٫۵۳۵ بایت باشد؛ خط پیش رو را "
"به پروندهٔ پیکربندی هسته اضافه کنید:"

#. (itstool) path: sect3/para
#: book.translate.xml:7324
msgid "<literal>options \"LARGE_LOMTU\" #To test jumbo payload</literal>"
msgstr "<literal>options \"LARGE_LOMTU\" #To test jumbo payload</literal>"

#. (itstool) path: sect3/para
#: book.translate.xml:7327
msgid "and recompile the new kernel."
msgstr "و هستهٔ جدید را دوباره همگردانی کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7329
msgid ""
"Then you can test jumbo payloads by the <citerefentry><refentrytitle>ping6</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> command with -b and -s "
"options. The -b option must be specified to enlarge the size of the socket "
"buffer and the -s option specifies the length of the packet, which should be "
"more than 65,535. For example, type as follows:"
msgstr ""
"سپس می‌توانید بارهای jumbo را توسط دستور "
"<citerefentry><refentrytitle>ping6</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> با گزینه‌های -b و -s مورد آزمون قرار دهید. گزینهٔ -b باید "
"تعیین شود تا اندازهٔ میان‌گیر سوکت را بزرگ‌تر کند و گزینهٔ -s طول بسته را "
"تعیین می‌کند، که باید بیشتر از ۶۵٫۵۳۵ باشد. برای مثال، به‌شکل زیر بنویسید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:7335
#, no-wrap
msgid "<prompt>%</prompt> <userinput>ping6 -b 70000 -s 68000 ::1</userinput>"
msgstr "<prompt>%</prompt> <userinput>ping6 -b 70000 -s 68000 ::1</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:7337
msgid ""
"The IPv6 specification requires that the Jumbo Payload option must not be "
"used in a packet that carries a fragment header. If this condition is "
"broken, an ICMPv6 Parameter Problem message must be sent to the sender. "
"specification is followed, but you cannot usually see an ICMPv6 error caused "
"by this requirement."
msgstr ""
"مشخصات IPv6 ایجاب می‌کند که گزینهٔ بارِ Jumbo نباید در بسته‌ای که حامل یک "
"سرآیند شکننده است استفاده شود. چنانچه این شرط فراهم نشود، یک پیغام مشکل "
"پارامترِ ICMPv6 باید به فرستنده ارسال شود. مشخصات به دنبال آن می‌آیند، اما "
"معمولاً نمی‌توانید خطای ICMPv6 که توسط این نیازمندی ایجاد شده باشد را مشاهده "
"کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7344
msgid ""
"When an IPv6 packet is received, the frame length is checked and compared to "
"the length specified in the payload length field of the IPv6 header or in "
"the value of the Jumbo Payload option, if any. If the former is shorter than "
"the latter, the packet is discarded and statistics are incremented. You can "
"see the statistics as output of <citerefentry><refentrytitle>netstat</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> command with `-s -p "
"ip6' option:"
msgstr ""
"زمانی‌که یک بستهٔ IPv6 دریافت شد، طول چارچوب بررسی می‌شود و با طول تعیین شده "
"در بخش طول بارِ (payload) سرآیندِ IPv6 یا در مقدارِ گزینهٔ بار Jumbo مقایسه "
"می‌شود، اگر چیزی باشد. اگر اولی کوتاه‌تر از دومی باشد، بسته حذف می‌شود و "
"آمار افزایش می‌یابند. می‌توانید آمار را در خروجی دستور <citerefentry><refentr"
"ytitle>netstat</refentrytitle><manvolnum>8</manvolnum></citerefentry> با "
"گزینهٔ `-s -p ip6' ببینید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:7352
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>netstat -s -p ip6</userinput>\n"
"\t  ip6:\n"
"\t\t(snip)\n"
"\t\t1 with data size &lt; data length"
msgstr ""
"<prompt>%</prompt> <userinput>netstat -s -p ip6</userinput>\n"
"\t  ip6:\n"
"\t\t(snip)\n"
"\t\t1 with data size &lt; data length"

#. (itstool) path: sect3/para
#: book.translate.xml:7357
msgid ""
"So, kernel does not send an ICMPv6 error unless the erroneous packet is an "
"actual Jumbo Payload, that is, its packet size is more than 65,535 bytes. As "
"described above, currently no physical interface with such a huge MTU is "
"supported, so it rarely returns an ICMPv6 error."
msgstr ""
"در نتیجه، هسته خطای ICMPv6 را ارسال نمی‌کند مگر آنکه بستهٔ اشتباه واقعاً یک "
"Jumbo Payload باشد، بدین معنا که اندازهٔ بستهٔ آن بیش از ۶۵٫۵۳۵ بایت است. "
"همانطور که در بالا توضیح داده شد، در حال حاضر هیچ رابط فیزیکی‌ای با این "
"اندازه MTU پشتیبانی نمی‌شود، از این رو به‌ندرت خطای ICMPv6 را برمی‌گرداند."

#. (itstool) path: sect3/para
#: book.translate.xml:7363
msgid ""
"TCP/UDP over jumbogram is not supported at this moment. This is because we "
"have no medium (other than loopback) to test this. Contact us if you need "
"this."
msgstr ""
"TCP/UDP در حال حاضر بر روی jumbogram پشتیبانی نمی‌شود. این بدین خاطر است که "
"ما هیچ وسیله‌ای (به غیر از loopback) برای آزمودن آن ندارم . چنانچه به چنین "
"چیزی نیاز داشتید ما را در جریان بگذارید."

#. (itstool) path: sect3/para
#: book.translate.xml:7367
msgid ""
"IPsec does not work on jumbograms. This is due to some specification twists "
"in supporting AH with jumbograms (AH header size influences payload length, "
"and this makes it real hard to authenticate inbound packet with jumbo "
"payload option as well as AH)."
msgstr ""
"IPsec با jumbogram ها کار نمی‌کند. این به‌خاطر برخی پیچیدگی‌های مشخصاتی در "
"پشتیبانی از AH با jumbogram هاست (اندازهٔ سرآیندِ AH طولِ بارِ (payload) را "
"تحت تاثیر قرار می‌دهد، و این مسئله اعتبارسنجی بستهٔ درونی را با گزینهٔ بارِ "
"jumbo و همچنین AH بسیار سخت می‌کند)."

#. (itstool) path: sect3/para
#: book.translate.xml:7373
msgid ""
"There are fundamental issues in *BSD support for jumbograms. We would like "
"to address those, but we need more time to finalize these. To name a few:"
msgstr ""
"در پشتیبانی از jumbogram ها در *BSD مسائل اساسی‌ای وجود دارد. دوست داریم "
"آنها را درست کنیم، اما نیاز به زمان بیشتر جهت نهایی کردن آنها داریم. برخی از "
"آنها عبارتند از:"

#. (itstool) path: listitem/para
#: book.translate.xml:7379
msgid ""
"mbuf pkthdr.len field is typed as \"int\" in 4.4BSD, so it will not hold "
"jumbogram with len &gt; 2G on 32bit architecture CPUs. If we would like to "
"support jumbogram properly, the field must be expanded to hold 4G + IPv6 "
"header + link-layer header. Therefore, it must be expanded to at least "
"int64_t (u_int32_t is NOT enough)."
msgstr ""
"بخش mbuf pkthdr.len در 4.4BSD مانند \"int\" نوشته می‌شود، در نتیجه jumbogram "
"را با len &gt; 2G در پردازنده‌های با معماری ۳۲ بیت نگه نمی‌دارد. اگر تمایلی "
"به پشتیبانی صحیح jumbogram داشته باشیم، این بخش باید گسترش یابد تا 4G + "
"سرآیند IPv6 +‌ سرآیندِ link-layer را نگه دارد. از این رو، باید حداقل به "
"int64_t گسترش یابد (u_int32_t کافی نیست)."

#. (itstool) path: listitem/para
#: book.translate.xml:7389
msgid ""
"We mistakingly use \"int\" to hold packet length in many places. We need to "
"convert them into larger integral type. It needs a great care, as we may "
"experience overflow during packet length computation."
msgstr ""
"ما به اشتباه از \"int\" برای نگه‌داری طول بسته‌ها در بسیاری از مکان‌ها "
"استفاده می‌کنیم. لازم است آنها را به حالت انتگرال بزرگتر تبدیل کنیم. از آنجا "
"که ممکن است هنگام محاسبهٔ طول بسته دچار سرریز میان‌گیر شویم، نیاز به مراقبت "
"فراوان دارد."

#. (itstool) path: listitem/para
#: book.translate.xml:7397
msgid ""
"We mistakingly check for ip6_plen field of IPv6 header for packet payload "
"length in various places. We should be checking mbuf pkthdr.len instead. "
"ip6_input() will perform sanity check on jumbo payload option on input, and "
"we can safely use mbuf pkthdr.len afterwards."
msgstr ""
"ما به‌اشتباه بخش ip6_plen از سرآیند IPv6 را برای طول بار بسته در مکان‌های "
"مختلف بررسی می‌کنیم. در عوض باید mbuf pkthdr.len را بررسی کنیم. ip6_input() "
"سلامتی گزینهٔ بارِ jumbo در ورودی را بررسی می‌کند، و پس از آن می‌توانیم با "
"اطمینان از mbuf pkthdr.len استفاده کنیم."

#. (itstool) path: listitem/para
#: book.translate.xml:7406
msgid "TCP code needs a careful update in bunch of places, of course."
msgstr "البته، کد TCP نیاز به یک به‌روزرسانی محتاطانه در چندین بخش دارد."

#. (itstool) path: sect3/title
#: book.translate.xml:7413
msgid "Loop Prevention in Header Processing"
msgstr "اجتناب از حلقه در پردازش سرآیند"

#. (itstool) path: sect3/para
#: book.translate.xml:7415
msgid ""
"IPv6 specification allows arbitrary number of extension headers to be placed "
"onto packets. If we implement IPv6 packet processing code in the way BSD "
"IPv4 code is implemented, kernel stack may overflow due to long function "
"call chain. sys/netinet6 code is carefully designed to avoid kernel stack "
"overflow. Because of this, sys/netinet6 code defines its own protocol switch "
"structure, as \"struct ip6protosw\" (see <filename>netinet6/ip6protosw.h</"
"filename>). There is no such update to IPv4 part (sys/netinet) for "
"compatibility, but small change is added to its pr_input() prototype. So "
"\"struct ipprotosw\" is also defined. Because of this, if you receive IPsec-"
"over-IPv4 packet with massive number of IPsec headers, kernel stack may blow "
"up. IPsec-over-IPv6 is okay. (Off-course, for those all IPsec headers to be "
"processed, each such IPsec header must pass each IPsec check. So an "
"anonymous attacker will not be able to do such an attack.)"
msgstr ""
"مشخصات IPv6 این امکان را فراهم می‌کند تا اعداد اختیاریِ سرآیند‌های پسوند "
"داخل بسته‌ها قرار گیرند. اگر ما کد پردازش بستهٔ IPv6 را همانطور که کد IPv4 "
"را در BSD پیاده‌سازی کردیم پیاده‌سازی کنیم، ممکن است پشتهٔ هسته به‌علت "
"زنجیرهٔ فراخوانی توابعِ طولانی سرریز کند. کد sys/netinet6 با دقت طراحی شده "
"است تا سرریز پشتهٔ هسته رخ ندهد. به‌همین خاطر، کد sys/netinet6 ساختار تغییرِ "
"قرارداد خودش را تعریف می‌کند، مانند \"struct ip6protosw\" (<filename>"
"netinet6/ip6protosw.h</filename> را ببینید). چنین به روز رسانی‌ای در قسمت "
"IPv4 ((sys/netinet) برای سازگاری وجود ندارد، اما تغییر کوچکی در نمونهٔ اصلیِ "
"its pr_input() آن اضافه شده است. در نتیجه \"struct ipprotosw\" نیز تعریف شده "
"است. از این رو، اگر بستهٔ IPsec بر روی IPv4 را با تعداد زیادی از سرآیندهای "
"IPsec دریافت کردید، پشتهٔ هسته ممکن است متوقف شود. IPsec بر روی IPv6 مشکلی "
"ندارد. (البته، برای تمام آن سرآیندهای IPsec که قرار است پردازش شوند، هرکدام "
"از سرآیندهای IPsec باید بررسی‌های IPsec را بگذرانند. بنابراین یک حمله‌کنندهٔ "
"ناشناس نمی‌تواند چنین حمله‌ای را صورت دهد.)"

#. (itstool) path: sect3/title
#: book.translate.xml:7436
msgid "ICMPv6"
msgstr "ICMPv6"

#. (itstool) path: sect3/para
#: book.translate.xml:7438
msgid ""
"After RFC2463 was published, IETF ipngwg has decided to disallow ICMPv6 "
"error packet against ICMPv6 redirect, to prevent ICMPv6 storm on a network "
"medium. This is already implemented into the kernel."
msgstr ""
"پس از آنکه RFC2463 منتشر شد، IETF ipngwg تصمیم گرفته است تا بستهٔ خطای "
"ICMPv6 را در مقابل تغییرمسیرِ ICMPv6 نادیده بگیرد، تا از طوفان ICMPv6 در یک "
"رسانهٔ شبکه‌ای جلوگیری شود. این امکان از قبل در هسته پیاده‌سازی شده است."

#. (itstool) path: sect3/title
#: book.translate.xml:7445
msgid "Applications"
msgstr "برنامه‌های کاربردی"

#. (itstool) path: sect3/para
#: book.translate.xml:7447
msgid ""
"For userland programming, we support IPv6 socket API as specified in "
"RFC2553, RFC2292 and upcoming Internet drafts."
msgstr ""
"برای برنامه‌نویسی در محیط کاربری، ما رابط‌ برنامه‌نویسی کاربردی سوکت IPv6 را "
"همانطور که در RFC2553، RFC2292 و پیش‌نویس‌های اینترنت در آینده مشخص شده است "
"پشتیبانی می‌کنیم."

#. (itstool) path: sect3/para
#: book.translate.xml:7451
msgid ""
"TCP/UDP over IPv6 is available and quite stable. You can enjoy "
"<citerefentry><refentrytitle>telnet</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry>, <citerefentry><refentrytitle>ftp</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>, <citerefentry><refentrytitle>rlogin</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>rsh</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry>, <citerefentry><refentrytitle>ssh</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>, etc. These applications are protocol independent. "
"That is, they automatically chooses IPv4 or IPv6 according to DNS."
msgstr ""
"TCP/UDP روی IPv6 در دسترس است و کاملاً پایدار است. می‌توانید از <citerefentry"
"><refentrytitle>telnet</refentrytitle><manvolnum>1</manvolnum></citerefentry>"
"، <citerefentry><refentrytitle>ftp</refentrytitle><manvolnum>1</manvolnum></c"
"iterefentry>، <citerefentry><refentrytitle>rlogin</refentrytitle><manvolnum>1"
"</manvolnum></citerefentry>، <citerefentry><refentrytitle>rsh</refentrytitle>"
"<manvolnum>1</manvolnum></citerefentry>، <citerefentry><refentrytitle>ssh</re"
"fentrytitle><manvolnum>1</manvolnum></citerefentry>، و غیره ... لذت ببرید. "
"این برنامه‌ها مستقل از قرارداد هستند. از این رو، آنها به‌طور خودکار IPv4 یا "
"IPv6 را مطابق با DNS انتخاب می‌کنند."

#. (itstool) path: sect3/title
#: book.translate.xml:7459
msgid "Kernel Internals"
msgstr "داخلی‌های هسته"

#. (itstool) path: sect3/para
#: book.translate.xml:7461
msgid ""
"While ip_forward() calls ip_output(), ip6_forward() directly calls "
"if_output() since routers must not divide IPv6 packets into fragments."
msgstr ""
"در حالی‌که ip_forward() فراخوانیِ ip_output() را انجام می‌دهد، ip6_forward() "
"مستقیماً if_output() را فراخوانی می‌کند زیرا مسیریاب‌ها نباید بسته‌های IPv6 "
"را به قطعات تقسیم کنند."

#. (itstool) path: sect3/para
#: book.translate.xml:7465
msgid ""
"ICMPv6 should contain the original packet as long as possible up to 1280. "
"UDP6/IP6 port unreach, for instance, should contain all extension headers "
"and the *unchanged* UDP6 and IP6 headers. So, all IP6 functions except TCP "
"never convert network byte order into host byte order, to save the original "
"packet."
msgstr ""
"ICMPv6 باید تا جای ممکن تا 1280 شامل بستهٔ اصلی باشد. برای مثال، درگاه خارج "
"از دسترسِ UDP6/IP6، باید تمام سرآیند‌های پسوند و سرآیند‌های *بدون تغییرِ* "
"UDP6 و IP6 را دارا باشد. در نتیجه، تمامی کارکردهای IP6 به‌غیر از TCP هرگز "
"ترتیب بایتِ شبکه را به ترتیب بایتِ میزبان تبدیل نمی‌کنند تا بستهٔ اصلی را "
"ذخیره کند."

#. (itstool) path: sect3/para
#: book.translate.xml:7472
msgid ""
"tcp_input(), udp6_input() and icmp6_input() can not assume that IP6 header "
"is preceding the transport headers due to extension headers. So, in6_cksum() "
"was implemented to handle packets whose IP6 header and transport header is "
"not continuous. TCP/IP6 nor UDP6/IP6 header structures do not exist for "
"checksum calculation."
msgstr ""
"tcp_input()، udp6_input() و icmp6_input() نمی‌توانند چنین فرض کنند که سرآیند "
"IP6 به‌دلیل سرآیند‌های پسوند،‌ سرآیند‌های انتقال را پشت سر می‌گذارد. در "
"نتیجه، in6_cksum() پیاده‌سازی شد تا به بسته‌هایی که سرآیند IP6 و سرآیند "
"انتقال آنها ادامه‌دار نیستند رسیدگی کند. نه ساختار سرآیند TCP/IP6 و نه UDP6/"
"IP6 برای محاسبهٔ سرجمع وجود ندارند."

#. (itstool) path: sect3/para
#: book.translate.xml:7479
msgid ""
"To process IP6 header, extension headers and transport headers easily, "
"network drivers are now required to store packets in one internal mbuf or "
"one or more external mbufs. A typical old driver prepares two internal mbufs "
"for 96 - 204 bytes data, however, now such packet data is stored in one "
"external mbuf."
msgstr ""
"برای پردازش آسانِ سرآیند IP6، سرآیند‌های پسوند و سرآیندهای انتقال، گرداننده‌"
"های شبکه اکنون ملزم به نگهداری بسته‌ها در یک mbuf داخلی یا یک یا تعداد "
"بیشتری mbuf های بیرونی هستند. یک گردانندهٔ قدیمی و معمولی دو mbuf داخلی را "
"برای داده‌های 96 - 204 بایتی آماده می‌کند، گرچه، چنین داده‌های بسته‌ای اکنون "
"در یک mbuf بیرونی ذخیره می‌شوند."

#. (itstool) path: sect3/para
#: book.translate.xml:7486
msgid ""
"<command>netstat -s -p ip6</command> tells you whether or not your driver "
"conforms such requirement. In the following example, \"cce0\" violates the "
"requirement. (For more information, refer to Section 2.)"
msgstr ""
"<command>netstat -s -p ip6</command> به شما می‌گوید گردانندهٔ شما با چنین "
"نیازمندی‌‌ای انطباق دارد یا خیر. در مثال پیش رو، \"cce0\" نیازمندی را نقض می‌"
"کند. (برای اطلاعات بیشتر، به بخش ۲ رجوع کنید.)"

#. (itstool) path: sect3/screen
#: book.translate.xml:7491
#, no-wrap
msgid ""
"Mbuf statistics:\n"
"                317 one mbuf\n"
"                two or more mbuf::\n"
"                        lo0 = 8\n"
"\t\t\tcce0 = 10\n"
"                3282 one ext mbuf\n"
"                0 two or more ext mbuf"
msgstr ""
"Mbuf statistics:\n"
"                317 one mbuf\n"
"                two or more mbuf::\n"
"                        lo0 = 8\n"
"\t\t\tcce0 = 10\n"
"                3282 one ext mbuf\n"
"                0 two or more ext mbuf"

#. (itstool) path: sect3/para
#: book.translate.xml:7499
msgid ""
"Each input function calls IP6_EXTHDR_CHECK in the beginning to check if the "
"region between IP6 and its header is continuous. IP6_EXTHDR_CHECK calls "
"m_pullup() only if the mbuf has M_LOOP flag, that is, the packet comes from "
"the loopback interface. m_pullup() is never called for packets coming from "
"physical network interfaces."
msgstr ""
"هرکدام از توابع ورودی، IP6_EXTHDR_CHECK را در ابتدا فراخوانی می‌کنند تا "
"بررسی کنند آیا ناحیهٔ بین IP6 و سرآیندش متوالی است یا خیر. IP6_EXTHDR_CHECK "
"تنها در صورتی m_pullup() را فراخوانی می‌کند که mbuf دارای نشان M_LOOP باشد، "
"از این رو، بسته از سمت رابط loopback می‌آید. m_pullup() هرگز برای بسته‌هایی "
"که از سمت رابط‌های شبکهٔ فیزیکی می‌آیند فراخوانی نمی‌شود."

#. (itstool) path: sect3/para
#: book.translate.xml:7506
msgid "Both IP and IP6 reassemble functions never call m_pullup()."
msgstr "هردو توابعِ جمع‌آوریِ IP و IP6 هرگز m_pullup() را فراخوانی نمی‌کنند."

#. (itstool) path: sect3/title
#: book.translate.xml:7511
msgid "IPv4 Mapped Address and IPv6 Wildcard Socket"
msgstr "نشانی نگاشت‌شدهٔ IPv4 و سوکت IPv6 Wildcard"

#. (itstool) path: sect3/para
#: book.translate.xml:7513
msgid ""
"RFC2553 describes IPv4 mapped address (3.7) and special behavior of IPv6 "
"wildcard bind socket (3.8). The spec allows you to:"
msgstr ""
"RFC2553 نشانی نگاشت‌شدهٔ IPv4 (3.7) و رفتار مخصوص سوکت IPv6 wildcard bind (3."
"8) را توضیح می‌دهد. مشخصات این اجازه را می‌دهند تا:"

#. (itstool) path: listitem/para
#: book.translate.xml:7518
msgid "Accept IPv4 connections by AF_INET6 wildcard bind socket."
msgstr "ارتباطات IPv4 را توسط سوکت AF_INET6 wildcard bind بپذیرید."

#. (itstool) path: listitem/para
#: book.translate.xml:7522
msgid ""
"Transmit IPv4 packet over AF_INET6 socket by using special form of the "
"address like ::ffff:10.1.1.1."
msgstr ""
"بستهٔ IPv4 را از طریق قالب ویژه‌ای از نشانی مانند ::ffff:10.1.1.1 بر روی "
"سوکت AF_INET6 منتقل کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7527
msgid ""
"but the spec itself is very complicated and does not specify how the socket "
"layer should behave. Here we call the former one \"listening side\" and the "
"latter one \"initiating side\", for reference purposes."
msgstr ""
"اما خود مشخصات بسیار پیچیده است و نحوهٔ رفتارکردن لایهٔ سوکت را مشخص نمی‌"
"کند. در اینجا ما برای اهداف مرجع اولی را \"سمت شنونده\" می‌نامیم و دومی را "
"\"سمت آغازگر\"."

#. (itstool) path: sect3/para
#: book.translate.xml:7532
msgid ""
"You can perform wildcard bind on both of the address families, on the same "
"port."
msgstr ""
"می‌توانید اتصال wildcard را بر روی هر دو خانوادهٔ نشانی اجر کنید، بر روی یک "
"پورت."

#. (itstool) path: sect3/para
#: book.translate.xml:7535
msgid "The following table show the behavior of FreeBSD 4.x."
msgstr "جدول پیش رو رفتار FreeBSD 4.x را نشان می‌دهد."

#. (itstool) path: sect3/screen
#: book.translate.xml:7538
#, no-wrap
msgid ""
"listening side          initiating side\n"
"                (AF_INET6 wildcard      (connection to ::ffff:10.1.1.1)\n"
"                socket gets IPv4 conn.)\n"
"                ---                     ---\n"
"FreeBSD 4.x     configurable            supported\n"
"                default: enabled"
msgstr ""
"listening side          initiating side\n"
"                (AF_INET6 wildcard      (connection to ::ffff:10.1.1.1)\n"
"                socket gets IPv4 conn.)\n"
"                ---                     ---\n"
"FreeBSD 4.x     configurable            supported\n"
"                default: enabled"

#. (itstool) path: sect3/para
#: book.translate.xml:7545
msgid ""
"The following sections will give you more details, and how you can configure "
"the behavior."
msgstr ""
"بخش‌های پیش رو، جزئیات بیشتر و چگونگی پیکربندی رفتار را به شما نشان می‌دهد."

#. (itstool) path: sect3/para
#: book.translate.xml:7548
msgid "Comments on listening side:"
msgstr "توضیحاتی در باب سمت شنونده:"

#. (itstool) path: sect3/para
#: book.translate.xml:7550
msgid ""
"It looks that RFC2553 talks too little on wildcard bind issue, especially on "
"the port space issue, failure mode and relationship between AF_INET/INET6 "
"wildcard bind. There can be several separate interpretation for this RFC "
"which conform to it but behaves differently. So, to implement portable "
"application you should assume nothing about the behavior in the kernel. "
"Using <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> is the safest way. Port number space and wildcard "
"bind issues were discussed in detail on ipv6imp mailing list, in mid March "
"1999 and it looks that there is no concrete consensus (means, up to "
"implementers). You may want to check the mailing list archives."
msgstr ""
"چنین به‌نظر می‌رسد که RFC2553 در مسئلهٔ پیوندِ wildcard حرف زیادی برای گفتن "
"ندارد، مخصوصاً در مسئلهٔ فضای درگاه (پورت)، حالت شکست و ارتباط بین پیوندِ "
"AF_INET/INET6 wildcard. ممکن است چندین تفسیر متفاوت برای این RFC وجود داشته "
"باشد که با آن سازگار باشد اما رفتار متفاوتی دارد. در نتیجه، برای پیاده‌سازی "
"برنامهٔ انتقال‌پذیر نباید هیچ فرضی در مورد رفتار هسته داشته باشید. استفاده "
"از <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</manv"
"olnum></citerefentry> امن‌ترین روش است. مسائل مربوط به فضای شمارهٔ درگاه و "
"پیوند wildcard به‌تفصیل در فهرست پست‌سپاریِ ipv6imp مورخ مارس ۱۹۹۹ تشریح شده "
"است، و به‌نظر می‌رسد که هیچ اجماع مشخصی وجود ندارد (یعنی، تا پیاده‌سازها). "
"شاید بخواهید بایگانیِ فهرست پست‌سپاری را نگاه بیندازید."

#. (itstool) path: sect3/para
#: book.translate.xml:7563
msgid ""
"If a server application would like to accept IPv4 and IPv6 connections, "
"there will be two alternatives."
msgstr ""
"اگر یک برنامهٔ کارساز بخواهد ارتباطات IPv4 و IPv6 را بپذیرد، دو گزینه وجود "
"خواهد داشت."

#. (itstool) path: sect3/para
#: book.translate.xml:7566
msgid ""
"One is using AF_INET and AF_INET6 socket (you will need two sockets). Use "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> with AI_PASSIVE into ai_flags, and "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> and <citerefentry><refentrytitle>bind</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> to all the addresses "
"returned. By opening multiple sockets, you can accept connections onto the "
"socket with proper address family. IPv4 connections will be accepted by "
"AF_INET socket, and IPv6 connections will be accepted by AF_INET6 socket."
msgstr ""
"یکی دارد از سوکت AF_INET و AF_INET6 استفاده می‌کند (شما به دو سوکت نیاز "
"خواهید داشت). <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvol"
"num>3</manvolnum></citerefentry> را به‌‌همراه AI_PASSIVE into ai_flags، و "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> و "
"<citerefentry><refentrytitle>bind</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> را برای تمام نشانی‌های برگشتی استفاده کنید. با باز کردن سوکت‌"
"های مختلف، می‌توانید اتصال‌های سوکت‌ را با خانوادهٔ نشانیِ مناسب بپذیرید. "
"اتصال‌های IPv4 توسط سوکتِ AF_INET، و اتصال‌های IPv6 توسط سوکت AF_INET6 "
"پذیرفته می‌شوند."

#. (itstool) path: sect3/para
#: book.translate.xml:7575
msgid ""
"Another way is using one AF_INET6 wildcard bind socket. Use "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> with AI_PASSIVE into ai_flags and with AF_INET6 "
"into ai_family, and set the 1st argument hostname to NULL. And "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> and <citerefentry><refentrytitle>bind</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> to the address "
"returned. (should be IPv6 unspecified addr). You can accept either of IPv4 "
"and IPv6 packet via this one socket."
msgstr ""
"راه دیگر این است که از سوکت پیوندِ AF_INET6 wildcard استفاده کنید. <citerefen"
"try><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> را با AI_PASSIVE داخل ai_flags و با AF_INET6 داخل ai_family "
"استفاده کنید، و نام میزبان اولین برهان را بر روی NULL تنظیم کنید. و "
"<citerefentry><refentrytitle>socket</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> و "
"<citerefentry><refentrytitle>bind</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> را بر روی نشانی بازگشتی تنظیم کنید. (باید نشانی نامعینِ IPv6 "
"باشد). می‌توانید هر کدام از بسته‌های IPv4 و IPv6 را به‌وسیلهٔ همین سوکت "
"بپذیرید."

#. (itstool) path: sect3/para
#: book.translate.xml:7583
msgid ""
"To support only IPv6 traffic on AF_INET6 wildcard binded socket portably, "
"always check the peer address when a connection is made toward AF_INET6 "
"listening socket. If the address is IPv4 mapped address, you may want to "
"reject the connection. You can check the condition by using "
"IN6_IS_ADDR_V4MAPPED() macro."
msgstr ""
"به‌منظور پشتیبانی تنها از ترافیک IPv6 در سوکت پیونده داده شدهٔ قابل حمل "
"AF_INET6 wildcard، همیشه نشانی همتا را زمانی‌که یک اتصال سمت سوکت شنوندهٔ "
"AF_INET6 ایجاد می‌شود بررسی کنید. چنانچه نشانی یک نشانی نگاشت‌شدهٔ IPv4 باشد،"
" ممکن است بخواهید اتصال را رد کنید. می‌توانید وضعیت را با استفاده از ماکروی "
"IN6_IS_ADDR_V4MAPPED() بررسی کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7590
msgid ""
"To resolve this issue more easily, there is system dependent "
"<citerefentry><refentrytitle>setsockopt</refentrytitle><manvolnum>2</"
"manvolnum></citerefentry> option, IPV6_BINDV6ONLY, used like below."
msgstr ""
"به‌منظور برطرف کردن آسان این مسئله، گزینهٔ وابسته به سامانهٔ <citerefentry><r"
"efentrytitle>setsockopt</refentrytitle><manvolnum>2</manvolnum></citerefentry"
">، IPV6_BINDV6ONLY، که بدین شکل استفاده می‌شود."

#. (itstool) path: sect3/programlisting
#. (itstool) path: sect5/programlisting
#: book.translate.xml:7594 book.translate.xml:7693
#, no-wrap
msgid ""
"\tint on;\n"
"\n"
"\tsetsockopt(s, IPPROTO_IPV6, IPV6_BINDV6ONLY,\n"
"\t\t   (char *)&amp;on, sizeof (on)) &lt; 0));"
msgstr ""
"\tint on;\n"
"\n"
"\tsetsockopt(s, IPPROTO_IPV6, IPV6_BINDV6ONLY,\n"
"\t\t   (char *)&amp;on, sizeof (on)) &lt; 0));"

#. (itstool) path: sect3/para
#: book.translate.xml:7599
msgid "When this call succeed, then this socket only receive IPv6 packets."
msgstr ""
"هنگامی‌که این فراخوان موفق می‌شود، سپس این سوکت تنها بسته‌های IPv6 را دریافت "
"می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:7602
msgid "Comments on initiating side:"
msgstr "توضیحاتی در باب سمت آغازگر:"

#. (itstool) path: sect3/para
#: book.translate.xml:7604
msgid ""
"Advise to application implementers: to implement a portable IPv6 application "
"(which works on multiple IPv6 kernels), we believe that the following is the "
"key to the success:"
msgstr ""
"توصیه برای افرادی که پیاده‌سازی برنامه انجام می‌دهند‌: برای پیاده‌سازی یک "
"برنامهٔ قابل‌حملِ IPv6 (که در هسته‌های IPv6 مختلف کار کند)، باور داریم موارد "
"پیش رو کلید موفقیت هستند:"

#. (itstool) path: listitem/para
#: book.translate.xml:7611
msgid "NEVER hardcode AF_INET nor AF_INET6."
msgstr "هرگز AF_INET یا AF_INET6 را سخت‌نویسی نکنید."

#. (itstool) path: listitem/para
#: book.translate.xml:7615
msgid ""
"Use <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>getnameinfo</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry> throughout the system. "
"Never use gethostby*(), getaddrby*(), inet_*() or getipnodeby*(). (To update "
"existing applications to be IPv6 aware easily, sometime getipnodeby*() will "
"be useful. But if possible, try to rewrite the code to use "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and <citerefentry><refentrytitle>getnameinfo</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry>.)"
msgstr ""
"از <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</manv"
"olnum></citerefentry> و <citerefentry><refentrytitle>getnameinfo</refentrytit"
"le><manvolnum>3</manvolnum></citerefentry> در سراسر سامانه استفاده کنید. "
"هرگز از gethostby*()، getaddrby*()، inet_*() یا getipnodeby*() استفاده "
"نکنید. (برای به روز رسانی و آگاه کردن برنامه‌های موجود به IPv6، گاهی اوقات "
"getipnodeby*() کاربردی خواهد بود. اما اگر امکان دارد، سعی کنید کد را به‌گونه‌"
"ای بازنویسی کنید تا از <citerefentry><refentrytitle>getaddrinfo</refentrytitl"
"e><manvolnum>3</manvolnum></citerefentry> و <citerefentry><refentrytitle>getn"
"ameinfo</refentrytitle><manvolnum>3</manvolnum></citerefentry> استفاده کند.)"

#. (itstool) path: listitem/para
#: book.translate.xml:7625
msgid ""
"If you would like to connect to destination, use "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> and try all the destination returned, like "
"<citerefentry><refentrytitle>telnet</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> does."
msgstr ""
"چنانچه می‌خواهید به مقصد متصل شوید، از <citerefentry><refentrytitle>getaddrin"
"fo</refentrytitle><manvolnum>3</manvolnum></citerefentry> استفاده کنید و "
"تمام مقصدهای بازگشت‌شده را امتحان کنید، مانند <citerefentry><refentrytitle>te"
"lnet</refentrytitle><manvolnum>1</manvolnum></citerefentry>."

#. (itstool) path: listitem/para
#: book.translate.xml:7631
msgid ""
"Some of the IPv6 stack is shipped with buggy "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>. Ship a minimal working version with your "
"application and use that as last resort."
msgstr ""
"برخی پشته‌های IPv6 با <citerefentry><refentrytitle>getaddrinfo</refentrytitle"
"><manvolnum>3</manvolnum></citerefentry> پراشکال فرستاده می‌شوند. یک نسخهٔ "
"سالم و کوچک با برنامهٔ خود بفرستید و از آن به‌عنوان آخرین گزینه استفاده کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7638
msgid ""
"If you would like to use AF_INET6 socket for both IPv4 and IPv6 outgoing "
"connection, you will need to use "
"<citerefentry><refentrytitle>getipnodebyname</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry>. When you would like to update your existing "
"application to be IPv6 aware with minimal effort, this approach might be "
"chosen. But please note that it is a temporal solution, because "
"<citerefentry><refentrytitle>getipnodebyname</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> itself is not recommended as it does not handle "
"scoped IPv6 addresses at all. For IPv6 name resolution, "
"<citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</"
"manvolnum></citerefentry> is the preferred API. So you should rewrite your "
"application to use <citerefentry><refentrytitle>getaddrinfo</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry>, when you get the time "
"to do it."
msgstr ""
"چناچه علاقه‌مند به استفاده از سوکت AF_INET6 برای ارتباطات بیرونیِ IPv4 و "
"IPv6 هستید، لازم است تا از <citerefentry><refentrytitle>getipnodebyname</refe"
"ntrytitle><manvolnum>3</manvolnum></citerefentry> استفاده کنید. هنگامی‌که می‌"
"خواهید برنامهٔ فعلیِ خود را به روز رسانی کنید تا با هزینهٔ کم نسبت به IPv6 "
"آگاه شود، این روش ممکن است انتخاب شود. اما خواهشمند است توجه داشته باشید که "
"این یک راه حل موقت است، زیرا خودِ <citerefentry><refentrytitle>getipnodebynam"
"e</refentrytitle><manvolnum>3</manvolnum></citerefentry> پیشنهاد نمی‌شود "
"چنانکه به نشانی‌های محدود شدهٔ IPv6 رسیدگی نمی‌کند. برای تفکیک‌پذیری نامِ "
"IPv6، <citerefentry><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</m"
"anvolnum></citerefentry> رابط‌ برنامه‌نویسی کاربردیِ ترجیحی است. پس زمانی‌که "
"فرصت انجامش را پیدا کردید، باید برنامهٔ خود را بازنویسی کنید تا از <citerefen"
"try><refentrytitle>getaddrinfo</refentrytitle><manvolnum>3</manvolnum></"
"citerefentry> استفاده کند."

#. (itstool) path: sect3/para
#: book.translate.xml:7650
msgid ""
"When writing applications that make outgoing connections, story goes much "
"simpler if you treat AF_INET and AF_INET6 as totally separate address "
"family. {set,get}sockopt issue goes simpler, DNS issue will be made simpler. "
"We do not recommend you to rely upon IPv4 mapped address."
msgstr ""
"وقتی‌که دارید برنامه‌هایی می‌نویسید که اتصالات بیرونی ایجاد می‌کنند، ماجرا "
"بسیار ساده‌تر می‌شود اگر AF_INET و AF_INET6 را به‌عنوان دو خانوادهٔ نشانی "
"کاملاً مستقل در نظر بگیرید. مسئلهٔ {set,get}sockopt ساده‌تر می‌شود، مسئلهٔ "
"DNS ساده‌تر خواهد شد. تکیه‌بر به نشانی نگاشت‌شدهٔ IPv4 را به شما پیشنهاد "
"نمی‌دهیم."

#. (itstool) path: sect4/title
#: book.translate.xml:7658
msgid "unified tcp and inpcb code"
msgstr "کد tcp و inpcb یکپارچه"

#. (itstool) path: sect4/para
#: book.translate.xml:7660
msgid ""
"FreeBSD 4.x uses shared tcp code between IPv4 and IPv6 (from sys/netinet/"
"tcp*) and separate udp4/6 code. It uses unified inpcb structure."
msgstr ""
"FreeBSD 4.x از کد مشترک tcp بین IPv4 و IPv4 (از sys/netinet/tcp*) و کد "
"جداگانهٔ udp4/6 استفاده می‌کند. از ساختار یکپارچهٔ inpcb استفاده می‌کند."

#. (itstool) path: sect4/para
#: book.translate.xml:7664
msgid ""
"The platform can be configured to support IPv4 mapped address. Kernel "
"configuration is summarized as follows:"
msgstr ""
"بستر می‌تواند پیکربندی شود تا نشانی‌های نگاشت‌شدهٔ IPv4 را پشتیبانی کند. "
"پیکربندی هسته بدین شکل خلاصه شده است:"

#. (itstool) path: listitem/para
#: book.translate.xml:7670
msgid ""
"By default, AF_INET6 socket will grab IPv4 connections in certain condition, "
"and can initiate connection to IPv4 destination embedded in IPv4 mapped IPv6 "
"address."
msgstr ""
"به‌طور پیش‌فرض، سوکت AF_INET6 اتصالات IPv4 را در شرایط خاصی می‌رباید، و می‌"
"تواند اتصال به مقصد IPv4 جاسازی شده در نشانی IPv6 نگاشت‌شدهٔ IPv4 را آغاز "
"کند."

#. (itstool) path: listitem/para
#: book.translate.xml:7677
msgid "You can disable it on entire system with sysctl like below."
msgstr "می‌توانید آن را بدین شکل با sysctl در کل سامانه غیرفعال کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:7680
msgid "<command>sysctl net.inet6.ip6.mapped_addr=0</command>"
msgstr "<command>sysctl net.inet6.ip6.mapped_addr=0</command>"

#. (itstool) path: sect5/title
#: book.translate.xml:7686
msgid "Listening Side"
msgstr "سمت گوش‌دادن"

#. (itstool) path: sect5/para
#: book.translate.xml:7688
msgid ""
"Each socket can be configured to support special AF_INET6 wildcard bind "
"(enabled by default). You can disable it on each socket basis with "
"<citerefentry><refentrytitle>setsockopt</refentrytitle><manvolnum>2</"
"manvolnum></citerefentry> like below."
msgstr ""
"هر سوکت را می‌‌توان پیکربندی کرد تا پیوند AF_INET6 wildcard ویژه (به‌طور پیش‌"
"فرض فعال) را پشتیبانی کند. می‌توانید بر پایهٔ هر سوکت با <citerefentry><refen"
"trytitle>setsockopt</refentrytitle><manvolnum>2</manvolnum></citerefentry> "
"آن را غیر فعال کنید، مانند زیر."

#. (itstool) path: sect5/para
#: book.translate.xml:7698
msgid ""
"Wildcard AF_INET6 socket grabs IPv4 connection if and only if the following "
"conditions are satisfied:"
msgstr ""
"سوکت Wildcard AF_INET6 اتصال IPv4 را می‌رباید چنانچه تنها شرایط پیش رو "
"برآورده شده باشد:"

#. (itstool) path: listitem/para
#: book.translate.xml:7704
msgid "there is no AF_INET socket that matches the IPv4 connection"
msgstr "هیچ سوکت AF_INET نباشد که متناسب با اتصال IPv4 باشد"

#. (itstool) path: listitem/para
#: book.translate.xml:7709
msgid ""
"the AF_INET6 socket is configured to accept IPv4 traffic, i.e., "
"getsockopt(IPV6_BINDV6ONLY) returns 0."
msgstr ""
"سوکت AF_INET6 پیکربندی شده باشد تا ترافیک IPv4 را بپذیرد، برای مثال: "
"getsockopt(IPV6_BINDV6ONLY) مقدار 0 را بازگرداند."

#. (itstool) path: sect5/para
#: book.translate.xml:7715
msgid "There is no problem with open/close ordering."
msgstr "مشکلی با ترتیب باز/بسته نیست."

#. (itstool) path: sect5/title
#: book.translate.xml:7719
msgid "Initiating Side"
msgstr "سمت آغازگر"

#. (itstool) path: sect5/para
#: book.translate.xml:7721
msgid ""
"FreeBSD 4.x supports outgoing connection to IPv4 mapped address (::"
"ffff:10.1.1.1), if the node is configured to support IPv4 mapped address."
msgstr ""
"چنانچه گره به‌گونه‌ای پیکربندی شده باشد تا نشانی نگاشت‌شدهٔ IPv4 را پشتیبانی "
"کند، FreeBSD 4.x اتصال خروجی به نشانی‌های نگاشت‌شدهٔ IPv4 مانند (::ffff:10.1."
"1.1) را پشتیبانی می‌کند."

#. (itstool) path: sect3/title
#: book.translate.xml:7729
msgid "sockaddr_storage"
msgstr "sockaddr_storage"

#. (itstool) path: sect3/para
#: book.translate.xml:7731
msgid ""
"When RFC2553 was about to be finalized, there was discussion on how struct "
"sockaddr_storage members are named. One proposal is to prepend \"__\" to the "
"members (like \"__ss_len\") as they should not be touched. The other "
"proposal was not to prepend it (like \"ss_len\") as we need to touch those "
"members directly. There was no clear consensus on it."
msgstr ""
"هنگامی‌که RFC2553 در حال تکمیل شدن بود، بحث بر سر آن بود که اعضای struct "
"sockaddr_storage چگونه نام‌گذاری شوند. یک پیشنهاد اضافه کردن \"__\" به اعضا "
"هست (مانند \"__ss_len\") چنانکه نباید مورد تماس قرار گیرند. پیشنهاد دیگر "
"اضافه نکردن آن بود (مانند \"ss_len\") چنانکه نیاز به تماس مستقیم با آن اعضا "
"را داریم. هیچ اتفاق نظری در مورد آن نبود."

#. (itstool) path: sect3/para
#: book.translate.xml:7739
msgid "As a result, RFC2553 defines struct sockaddr_storage as follows:"
msgstr "در نتیجه، RFC2553 مقدار struct sockaddr_storage را چنین تعریف می‌کند:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:7742
#, no-wrap
msgid ""
"\tstruct sockaddr_storage {\n"
"\t\tu_char\t__ss_len;\t/* address length */\n"
"\t\tu_char\t__ss_family;\t/* address family */\n"
"\t\t/* and bunch of padding */\n"
"\t};"
msgstr ""
"\tstruct sockaddr_storage {\n"
"\t\tu_char\t__ss_len;\t/* address length */\n"
"\t\tu_char\t__ss_family;\t/* address family */\n"
"\t\t/* and bunch of padding */\n"
"\t};"

#. (itstool) path: sect3/para
#: book.translate.xml:7748
msgid "On the contrary, XNET draft defines as follows:"
msgstr "برعکس، پیش‌نویس XNET بدین ترتیب تعریف می‌شود:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:7750
#, no-wrap
msgid ""
"\tstruct sockaddr_storage {\n"
"\t\tu_char\tss_len;\t\t/* address length */\n"
"\t\tu_char\tss_family;\t/* address family */\n"
"\t\t/* and bunch of padding */\n"
"\t};"
msgstr ""
"\tstruct sockaddr_storage {\n"
"\t\tu_char\tss_len;\t\t/* address length */\n"
"\t\tu_char\tss_family;\t/* address family */\n"
"\t\t/* and bunch of padding */\n"
"\t};"

#. (itstool) path: sect3/para
#: book.translate.xml:7756
msgid ""
"In December 1999, it was agreed that RFC2553bis should pick the latter "
"(XNET) definition."
msgstr ""
"در تاریخ دسامبر ۱۹۹۹، پذیرفته شد که RFC2553bis باید تعریف دومِ (XNET) را "
"انتخاب کند."

#. (itstool) path: sect3/para
#: book.translate.xml:7759
msgid ""
"Current implementation conforms to XNET definition, based on RFC2553bis "
"discussion."
msgstr "پیاده‌سازی فعلی منطبق با تعریف XNET است، برپایهٔ مباحث RFC2553bis."

#. (itstool) path: sect3/para
#: book.translate.xml:7762
msgid ""
"If you look at multiple IPv6 implementations, you will be able to see both "
"definitions. As an userland programmer, the most portable way of dealing "
"with it is to:"
msgstr ""
"چنانچه به پیاده‌سازی‌های مختلف IPv6 نگاه کنید، می‌توانید هر دو تعاریف را "
"ببینید. به‌عنوان برنامه‌نویس محیط کاربری، قابل‌حمل‌ترین راه برای مواجه با آن "
"از این قرار است:"

#. (itstool) path: listitem/para
#: book.translate.xml:7768
msgid ""
"ensure ss_family and/or ss_len are available on the platform, by using GNU "
"autoconf,"
msgstr ""
"مطمئن شوید ss_family و/یا ss_len در بستر در دسترس باشند، با استفاده از GNU "
"autoconf،"

#. (itstool) path: listitem/para
#: book.translate.xml:7773
msgid ""
"have -Dss_family=__ss_family to unify all occurrences (including header "
"file) into __ss_family, or"
msgstr ""
"-Dss_family=__ss_family تمام موارد را در __ss_family یکپارچه کند (شامل "
"پروندهٔ سرآیند)، یا"

#. (itstool) path: listitem/para
#: book.translate.xml:7779
msgid "never touch __ss_family. cast to sockaddr * and use sa_family like:"
msgstr ""
"هرگز __ss_family را دست نزنید. بریزید داخل sockaddr * و sa_family را اینگونه "
"به‌کار ببرید:"

#. (itstool) path: listitem/programlisting
#: book.translate.xml:7782
#, no-wrap
msgid ""
"\tstruct sockaddr_storage ss;\n"
"\tfamily = ((struct sockaddr *)&amp;ss)-&gt;sa_family"
msgstr ""
"\tstruct sockaddr_storage ss;\n"
"\tfamily = ((struct sockaddr *)&amp;ss)-&gt;sa_family"

#. (itstool) path: sect2/title
#: book.translate.xml:7791
msgid "Network Drivers"
msgstr "گرداننده‌های شبکه"

#. (itstool) path: sect2/para
#: book.translate.xml:7793
msgid ""
"Now following two items are required to be supported by standard drivers:"
msgstr ""
"حال نیاز است تا دو مورد پیش رو توسط گرداننده‌های استاندارد پشتیبانی شوند:"

#. (itstool) path: listitem/para
#: book.translate.xml:7798
msgid ""
"mbuf clustering requirement. In this stable release, we changed MINCLSIZE "
"into MHLEN+1 for all the operating systems in order to make all the drivers "
"behave as we expect."
msgstr ""
"نیازمندی mbuf clustering. در این نسخهٔ پایدار، ما MINCLSIZE را برای تمام "
"سامانه‌های عامل به MHLEN تغییر دادیم تا تمام گرداننده‌ها را مجاب به رفتاری "
"کنیم که انتظار داریم."

#. (itstool) path: listitem/para
#: book.translate.xml:7805
msgid ""
"multicast. If <citerefentry><refentrytitle>ifmcstat</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> yields no multicast "
"group for a interface, that interface has to be patched."
msgstr ""
"multicast. اگر <citerefentry><refentrytitle>ifmcstat</refentrytitle><manvolnu"
"m>8</manvolnum></citerefentry> هیچ گروه مولتیکستی برای رابط تولید نکند، آن "
"رابط باید تصحیح شود."

#. (itstool) path: sect2/para
#: book.translate.xml:7811
msgid ""
"If any of the drivers do not support the requirements, then the drivers "
"cannot be used for IPv6 and/or IPsec communication. If you find any problem "
"with your card using IPv6/IPsec, then, please report it to the <link xlink:"
"href=\"http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs\">FreeBSD "
"problem reports mailing list</link>."
msgstr ""
"اگر هر کدام از گرداننده‌ها نیازمندی‌ها را پشتیبانی نکنند، گرداننده‌ها نمی‌"
"توانند برای ارتباطات IPv6 و/یا IPsec استفاده شوند. اگر با استفاده از IPv6/"
"IPsec مشکلی با کارت خود پیدا کردید، سپس، خواهشمند است آن را به <link "
"xlink:href=\"http://lists.FreeBSD.org/mailman/listinfo/freebsd-bugs\""
">FreeBSD problem reports mailing list</link> گزارش دهید."

#. (itstool) path: sect2/para
#: book.translate.xml:7816
msgid ""
"(NOTE: In the past we required all PCMCIA drivers to have a call to "
"in6_ifattach(). We have no such requirement any more)"
msgstr ""
"(توجه: در گذشته نیاز داشتیم تمام گرداننده‌های PCMCIA به in6_ifattach() "
"فراخوان داشته باشند. چنین نیازمندی‌ای دیگر وجود ندارد)"

#. (itstool) path: sect2/title
#: book.translate.xml:7822
msgid "Translator"
msgstr "مترجم"

#. (itstool) path: sect2/para
#: book.translate.xml:7824
msgid "We categorize IPv4/IPv6 translator into 4 types:"
msgstr "ما مترجم IPv4/IPv6 را به ۴ نوع دسته‌بندی می‌کنیم:"

#. (itstool) path: listitem/para
#: book.translate.xml:7828
msgid ""
"<emphasis>Translator A</emphasis> --- It is used in the early stage of "
"transition to make it possible to establish a connection from an IPv6 host "
"in an IPv6 island to an IPv4 host in the IPv4 ocean."
msgstr ""
"<emphasis>مترجم A</emphasis> --- در مراحل ابتدایی انتقال استفاده می‌شود تا "
"برقراری ارتباط از یک میزبان IPv6 در یک جزیرهٔ IPv6 به یک میزبان IPv4 در "
"اقیانوس IPv4 را ممکن سازد."

#. (itstool) path: listitem/para
#: book.translate.xml:7835
msgid ""
"<emphasis>Translator B</emphasis> --- It is used in the early stage of "
"transition to make it possible to establish a connection from an IPv4 host "
"in the IPv4 ocean to an IPv6 host in an IPv6 island."
msgstr ""
"<emphasis>مترجم B</emphasis> --- در مراحل ابتدایی انتقال استفاده می‌شود تا "
"برقراری ارتباط از یک میزبان IPv4 در اقیانوس IPv4 به یک میزبان IPv6 در جزیرهٔ "
"IPv6 را ممکن سازد."

#. (itstool) path: listitem/para
#: book.translate.xml:7842
msgid ""
"<emphasis>Translator C</emphasis> --- It is used in the late stage of "
"transition to make it possible to establish a connection from an IPv4 host "
"in an IPv4 island to an IPv6 host in the IPv6 ocean."
msgstr ""
"<emphasis>مترجم C</emphasis> --- در مراحل آخر انتقال استفاده می‌شود تا "
"برقراری ارتباط از یک میزبان IPv4 در یک جزیرهٔ IPv4 به یک میزبان IPv6 در "
"اقیانوس IPv6 را ممکن سازد."

#. (itstool) path: listitem/para
#: book.translate.xml:7849
msgid ""
"<emphasis>Translator D</emphasis> --- It is used in the late stage of "
"transition to make it possible to establish a connection from an IPv6 host "
"in the IPv6 ocean to an IPv4 host in an IPv4 island."
msgstr ""
"<emphasis>مترجم D</emphasis> --- در مراحل آخر انتقال استفاده می‌شود تا "
"برقراری ارتباط از یک میزبان IPv6 در اقیانوس IPv6 به یک میزبان IPv4 در جزیرهٔ "
"IPv4 را ممکن سازد."

#. (itstool) path: sect2/title
#: book.translate.xml:7858
msgid "IPsec"
msgstr "IPsec"

#. (itstool) path: sect2/para
#: book.translate.xml:7860
msgid "IPsec is mainly organized by three components."
msgstr "IPsec به‌طور کلی توسط سه بخش تشکیل شده است."

#. (itstool) path: listitem/para
#. (itstool) path: sect3/title
#: book.translate.xml:7864 book.translate.xml:7877
msgid "Policy Management"
msgstr "مدیریت خط مشی"

#. (itstool) path: listitem/para
#. (itstool) path: sect3/title
#: book.translate.xml:7868 book.translate.xml:7892
msgid "Key Management"
msgstr "مدیریت کلید"

#. (itstool) path: listitem/para
#: book.translate.xml:7872
msgid "AH and ESP handling"
msgstr "مدیریت AH و ESP"

#. (itstool) path: sect3/para
#: book.translate.xml:7879
msgid ""
"The kernel implements experimental policy management code. There are two way "
"to manage security policy. One is to configure per-socket policy using "
"<citerefentry><refentrytitle>setsockopt</refentrytitle><manvolnum>2</"
"manvolnum></citerefentry>. In this cases, policy configuration is described "
"in <citerefentry><refentrytitle>ipsec_set_policy</"
"refentrytitle><manvolnum>3</manvolnum></citerefentry>. The other is to "
"configure kernel packet filter-based policy using PF_KEY interface, via "
"<citerefentry><refentrytitle>setkey</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry>."
msgstr ""
"هسته کد مدیریت خط مشی آزمایشی را پیاده‌سازی می‌کند. دو راه برای مدیریت خط "
"مشی امنیتی وجود دارد. یکی پیکربندی خط مشی هر سوکت با استفاده از <citerefentry"
"><refentrytitle>setsockopt</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> است. در این مورد، پیکربندی خط مشی در <citerefentry><refentrytit"
"le>ipsec_set_policy</refentrytitle><manvolnum>3</manvolnum></citerefentry> "
"توضیح داده شده است. مورد دیگر پیکربندی خط مشی مبتنی بر فیلترِ بستهٔ هسته با "
"استفاده از رابط PF_KEY است، توسط <citerefentry><refentrytitle>setkey</refentr"
"ytitle><manvolnum>8</manvolnum></citerefentry>."

#. (itstool) path: sect3/para
#: book.translate.xml:7887
msgid ""
"The policy entry is not re-ordered with its indexes, so the order of entry "
"when you add is very significant."
msgstr ""
"ورودی خط مشی با فهرست‌های خود مرتب نمی‌شود، در نتیجه ترتیب ورودی که شما "
"اضافه می‌کنید بسیار مهم است."

#. (itstool) path: sect3/para
#: book.translate.xml:7894
msgid ""
"The key management code implemented in this kit (sys/netkey) is a home-brew "
"PFKEY v2 implementation. This conforms to RFC2367."
msgstr ""
"کد مدیریت کلید که در این کیت (sys/netkey) پیاده‌سازی شده است یک پیاده‌سازیِ "
"خانگیِ PFKEY v2 است و سازگار با RFC2367 است."

#. (itstool) path: sect3/para
#: book.translate.xml:7898
msgid ""
"The home-brew IKE daemon, \"racoon\" is included in the kit (kame/kame/"
"racoon). Basically you will need to run racoon as daemon, then set up a "
"policy to require keys (like <command>ping -P 'out ipsec esp/transport//"
"use'</command>). The kernel will contact racoon daemon as necessary to "
"exchange keys."
msgstr ""
"دیمِنِ خانگیِ IKE، یعنی \"racoon\" در کیت (kame/kame/racoon) موجود است. "
"اساساً شما باید racoon را به‌عنوان دیمِن اجرا کنید، سپس خط مشی‌ای راه‌اندازی "
"کنید که نیازمند کلید باشد (مانند <command>ping -P 'out ipsec esp/transport/"
"/use'</command>). هسته با دیمِنِ racoon ارتباط برقرار می‌کند تا کلیدها را "
"تبادل کند."

#. (itstool) path: sect3/title
#: book.translate.xml:7907
msgid "AH and ESP Handling"
msgstr "مدیریت AH و ESP"

#. (itstool) path: sect3/para
#: book.translate.xml:7909
msgid ""
"IPsec module is implemented as \"hooks\" to the standard IPv4/IPv6 "
"processing. When sending a packet, ip{,6}_output() checks if ESP/AH "
"processing is required by checking if a matching SPD (Security Policy "
"Database) is found. If ESP/AH is needed, {esp,ah}{4,6}_output() will be "
"called and mbuf will be updated accordingly. When a packet is received, {esp,"
"ah}4_input() will be called based on protocol number, i.e., (*inetsw[proto])"
"(). {esp,ah}4_input() will decrypt/check authenticity of the packet, and "
"strips off daisy-chained header and padding for ESP/AH. It is safe to strip "
"off the ESP/AH header on packet reception, since we will never use the "
"received packet in \"as is\" form."
msgstr ""
"ماژول IPsec به‌عنوان \"hooks\" در پردازش استاندارد IPv4/IPv6 پیاده‌سازی شده "
"است. هنگام ارسال بسته، ip{,6}_output() با بررسی برای یافتن یک SPD (Security "
"Policy Database) منطبق بررسی می‌کند اگر پردازش ESP/AH لازم است یا خیر. اگر "
"ESP/AH مورد نیاز باشد، {esp,ah}{4,6}_output() فراخوان می‌شود و mbuf طبق آن "
"به ‌روز می‌شود. هنگام دریافت بسته، {esp,ah}4_input() بر اساس شمارهٔ قرارداد "
"فراخوان می‌شود، برای مثال، (*inetsw[proto])(). {esp,ah}4_input() اصالت بسته "
"را بررسی/رمزگشایی می‌کند، و سرآیند زنجیره‌وار و لایه‌گذاریِ ESP/AH را از بین "
"می‌برد. از میان‌بردن سرآیند ESP/AH در پذیرش بسته امن است، زیرا هرگز بستهٔ "
"دریافتی را \"چنان که هست\" استفاده نمی‌کنیم."

#. (itstool) path: sect3/para
#: book.translate.xml:7923
msgid ""
"By using ESP/AH, TCP4/6 effective data segment size will be affected by "
"extra daisy-chained headers inserted by ESP/AH. Our code takes care of the "
"case."
msgstr ""
"با استفاده از ESP/AH، اندازهٔ قطعه دادهٔ مؤثرِ TCP4/6 تحت تاثیر سرآیند‌های "
"زنجیره‌وارِ اضافی که توسط ESP/AH وارد شده است قرار می‌گیرد. کد ما به این "
"مورد رسیدگی می‌کند."

#. (itstool) path: sect3/para
#: book.translate.xml:7927
msgid ""
"Basic crypto functions can be found in directory \"sys/crypto\". ESP/AH "
"transform are listed in {esp,ah}_core.c with wrapper functions. If you wish "
"to add some algorithm, add wrapper function in {esp,ah}_core.c, and add your "
"crypto algorithm code into sys/crypto."
msgstr ""
"توابع سادهٔ رمزنگاری را می‌توانید در مسیر \"sys/crypto\" پیدا کنید. مبدل ESP/"
"AH همراه با توابع بسته‌بندی در {esp,ah}_core.c فهرست شده‌اند. اگر می‌خواهید "
"تعدادی الگوریتم اضافه کنید، تابع بسته‌بندی را در {esp,ah}_core.c اضافه کنید، "
"و کد الگوریتم رمزنگاری خود را داخل sys/crypto اضافه کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:7933
msgid ""
"Tunnel mode is partially supported in this release, with the following "
"restrictions:"
msgstr "حالت تونل تا اندازه‌ای در این نسخه پشتیبانی می‌شود، با این محدودیت‌ها:"

#. (itstool) path: listitem/para
#: book.translate.xml:7938
msgid ""
"IPsec tunnel is not combined with GIF generic tunneling interface. It needs "
"a great care because we may create an infinite loop between ip_output() and "
"tunnelifp-&gt;if_output(). Opinion varies if it is better to unify them, or "
"not."
msgstr ""
"تونل IPSec با رابط تونل‌زنی کلیِ GIF ترکیب نشده است. نیاز به مراقبت فراوان "
"دارد زیرا امکان دارد که یک حلقهٔ بی‌نهایت بین ip_output() و "
"tunnelifp-&gt;if_output() ایجاد کنیم. نظرات در مورد اینکه آنها را یکی کنیم "
"یا نه متفاوت است."

#. (itstool) path: listitem/para
#: book.translate.xml:7946
msgid ""
"MTU and Don't Fragment bit (IPv4) considerations need more checking, but "
"basically works fine."
msgstr ""
"ملاحظات MTU و بیت Don't Fragment (IPv4) نیاز به بررسی بیشتری دارند، اما "
"اساساً درست کار می‌کنند."

#. (itstool) path: listitem/para
#: book.translate.xml:7951
msgid ""
"Authentication model for AH tunnel must be revisited. We will need to "
"improve the policy management engine, eventually."
msgstr ""
"طرح اعتباربخشی برای تونل AH باید بازبینی شود. در نهایت، باید موتور مدیریت خط "
"مشی را بهبود ببخشیم."

#. (itstool) path: sect3/title
#: book.translate.xml:7959
msgid "Conformance to RFCs and IDs"
msgstr "سازگاری با RFC ها و ID ها"

#. (itstool) path: sect3/para
#: book.translate.xml:7961
msgid ""
"The IPsec code in the kernel conforms (or, tries to conform) to the "
"following standards:"
msgstr ""
"کد IPSec در هسته سازگار (یا، سعی بر سازگاری) با استانداردهای پیش رو است:"

#. (itstool) path: sect3/para
#: book.translate.xml:7964
msgid ""
"\"old IPsec\" specification documented in <filename>rfc182[5-9].txt</"
"filename>"
msgstr "مشخصات \"old IPsec\" مستند شده در <filename>rfc182[5-9].txt</filename>"

#. (itstool) path: sect3/para
#: book.translate.xml:7967
msgid ""
"\"new IPsec\" specification documented in <filename>rfc240[1-6].txt</"
"filename>, <filename>rfc241[01].txt</filename>, <filename>rfc2451.txt</"
"filename> and <filename>draft-mcdonald-simple-ipsec-api-01.txt</filename> "
"(draft expired, but you can take from <link xlink:href=\"ftp://ftp.kame.net/"
"pub/internet-drafts/\"> ftp://ftp.kame.net/pub/internet-drafts/</link>). "
"(NOTE: IKE specifications, <filename>rfc241[7-9].txt</filename> are "
"implemented in userland, as \"racoon\" IKE daemon)"
msgstr ""
"مشخصات \"new IPsec\" مستند شده در <filename>rfc240[1-6].txt</filename>، "
"<filename>rfc241[01].txt</filename>، <filename>rfc2451.txt</filename> و "
"<filename>draft-mcdonald-simple-ipsec-api-01.txt</filename> (پیش‌نویس منقضی "
"شده است، اما می‌توانید آن را از <link xlink:href=\"ftp://ftp.kame.net/pub/"
"internet-drafts/\"> ftp://ftp.kame.net/pub/internet-drafts/</link> بگیرید). "
"(توجه: مشخصات IKE، <filename>rfc241[7-9].txt</filename> در محیط کاربری پیاده‌"
"سازی شده‌اند، به‌عنوان دیمِنِ IKE یعنی \"racoon\")"

#. (itstool) path: sect3/para
#: book.translate.xml:7977
msgid "Currently supported algorithms are:"
msgstr "الگوریتم‌هایی که در حال حاضر پشتیبانی می‌شوند:"

#. (itstool) path: listitem/para
#: book.translate.xml:7980 book.translate.xml:8098
msgid "old IPsec AH"
msgstr "old IPsec AH"

#. (itstool) path: listitem/para
#: book.translate.xml:7983 book.translate.xml:8023
msgid "null crypto checksum (no document, just for debugging)"
msgstr "null crypto checksum (فاقد مستند، فقط برای اشکال‌زدایی)"

#. (itstool) path: listitem/para
#: book.translate.xml:7987
msgid ""
"keyed MD5 with 128bit crypto checksum (<filename>rfc1828.txt</filename>)"
msgstr ""
"keyed MD5 with 128bit crypto checksum (<filename>rfc1828.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:7991
msgid "keyed SHA1 with 128bit crypto checksum (no document)"
msgstr "keyed SHA1 with 128bit crypto checksum (فاقد مستند)"

#. (itstool) path: listitem/para
#: book.translate.xml:7995
msgid "HMAC MD5 with 128bit crypto checksum (<filename>rfc2085.txt</filename>)"
msgstr "HMAC MD5 with 128bit crypto checksum (<filename>rfc2085.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:7999
msgid "HMAC SHA1 with 128bit crypto checksum (no document)"
msgstr "HMAC SHA1 with 128bit crypto checksum (فاقد مستند)"

#. (itstool) path: listitem/para
#: book.translate.xml:8006
msgid "old IPsec ESP"
msgstr "old IPsec ESP"

#. (itstool) path: listitem/para
#: book.translate.xml:8009
msgid ""
"null encryption (no document, similar to <filename>rfc2410.txt</filename>)"
msgstr "null encryption (فاقد مستند، مشابه <filename>rfc2410.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8013
msgid "DES-CBC mode (<filename>rfc1829.txt</filename>)"
msgstr "حالت DES-CBC (<filename>rfc1829.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8020
msgid "new IPsec AH"
msgstr "new IPsec AH"

#. (itstool) path: listitem/para
#: book.translate.xml:8027
msgid "keyed MD5 with 96bit crypto checksum (no document)"
msgstr "keyed MD5 with 96bit crypto checksum (فاقد مستند)"

#. (itstool) path: listitem/para
#: book.translate.xml:8031
msgid "keyed SHA1 with 96bit crypto checksum (no document)"
msgstr "keyed SHA1 with 96bit crypto checksum (فاقد مستند)"

#. (itstool) path: listitem/para
#: book.translate.xml:8035
msgid "HMAC MD5 with 96bit crypto checksum (<filename>rfc2403.txt</filename>)"
msgstr "HMAC MD5 with 96bit crypto checksum (<filename>rfc2403.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8039
msgid "HMAC SHA1 with 96bit crypto checksum (<filename>rfc2404.txt</filename>)"
msgstr "HMAC SHA1 with 96bit crypto checksum (<filename>rfc2404.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8046
msgid "new IPsec ESP"
msgstr "new IPsec ESP"

#. (itstool) path: listitem/para
#: book.translate.xml:8049
msgid "null encryption (<filename>rfc2410.txt</filename>)"
msgstr "null encryption (<filename>rfc2410.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8053
msgid ""
"DES-CBC with derived IV (<filename>draft-ietf-ipsec-ciph-des-derived-01.txt</"
"filename>, draft expired)"
msgstr ""
"DES-CBC with derived IV (<filename>draft-ietf-ipsec-ciph-des-derived-01."
"txt</filename>، پیش‌نویس منقضی شده)"

#. (itstool) path: listitem/para
#: book.translate.xml:8058
msgid "DES-CBC with explicit IV (<filename>rfc2405.txt</filename>)"
msgstr "DES-CBC with explicit IV (<filename>rfc2405.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8062
msgid "3DES-CBC with explicit IV (<filename>rfc2451.txt</filename>)"
msgstr "3DES-CBC with explicit IV (<filename>rfc2451.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8066
msgid "BLOWFISH CBC (<filename>rfc2451.txt</filename>)"
msgstr "BLOWFISH CBC (<filename>rfc2451.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8070
msgid "CAST128 CBC (<filename>rfc2451.txt</filename>)"
msgstr "CAST128 CBC (<filename>rfc2451.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8074
msgid "RC5 CBC (<filename>rfc2451.txt</filename>)"
msgstr "RC5 CBC (<filename>rfc2451.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8078
msgid "each of the above can be combined with:"
msgstr "هر کدام از موارد بالا را می‌توان با موارد زیر ترکیب کرد:"

#. (itstool) path: listitem/para
#: book.translate.xml:8081
msgid "ESP authentication with HMAC-MD5(96bit)"
msgstr "اعتباربخشیِ ESP با HMAC-MD5(96bit)"

#. (itstool) path: listitem/para
#: book.translate.xml:8085
msgid "ESP authentication with HMAC-SHA1(96bit)"
msgstr "اعتباربخشیِ ESP با HMAC-SHA1(96bit)"

#. (itstool) path: sect3/para
#: book.translate.xml:8094
msgid "The following algorithms are NOT supported:"
msgstr "الگوریتم‌های پیش رو پشتیبانی نمی‌شوند:"

#. (itstool) path: listitem/para
#: book.translate.xml:8102
msgid ""
"HMAC MD5 with 128bit crypto checksum + 64bit replay prevention "
"(<filename>rfc2085.txt</filename>)"
msgstr ""
"HMAC MD5 with 128bit crypto checksum + 64bit replay prevention "
"(<filename>rfc2085.txt</filename>)"

#. (itstool) path: listitem/para
#: book.translate.xml:8107
msgid ""
"keyed SHA1 with 160bit crypto checksum + 32bit padding (<filename>rfc1852."
"txt</filename>)"
msgstr ""
"keyed SHA1 with 160bit crypto checksum + 32bit padding (<filename>rfc1852."
"txt</filename>)"

#. (itstool) path: sect3/para
#: book.translate.xml:8114
msgid ""
"IPsec (in kernel) and IKE (in userland as \"racoon\") has been tested at "
"several interoperability test events, and it is known to interoperate with "
"many other implementations well. Also, current IPsec implementation as quite "
"wide coverage for IPsec crypto algorithms documented in RFC (we cover "
"algorithms without intellectual property issues only)."
msgstr ""
"IPsec (در هسته) و IKE (در محیط کاربری به‌عنوان \"racoon\") در چندین رویداد "
"آزمایش هم‌کنش‌پذیری آزمایش شده است، و چنان شناخته شده است که با پیاده‌سازی‌"
"های دیگر به‌خوبی هم‌کنش می‌کند. همچنین، پیاده‌سازی فعلی IPsec به‌عنوان پوششی "
"کاملاً گسترده برای الگوریتم‌های رمزنگاریِ IPsec در RFC مستند شده است (ما "
"تنها الگوریتم‌های فاقد مسائل مالکیت معنوی را پوشش می‌دهیم)."

#. (itstool) path: sect3/title
#: book.translate.xml:8124
msgid "ECN Consideration on IPsec Tunnels"
msgstr "ملاحظهٔ ECN بر روی تونل‌های IPsec"

#. (itstool) path: sect3/para
#: book.translate.xml:8126
msgid ""
"ECN-friendly IPsec tunnel is supported as described in <filename>draft-ipsec-"
"ecn-00.txt</filename>."
msgstr ""
"تونل IPsec سازگار با ECN پشتیبانی می‌شود چنانکه در <filename>draft-ipsec-"
"ecn-00.txt</filename> تشریح شده است."

#. (itstool) path: sect3/para
#: book.translate.xml:8129
msgid ""
"Normal IPsec tunnel is described in RFC2401. On encapsulation, IPv4 TOS "
"field (or, IPv6 traffic class field) will be copied from inner IP header to "
"outer IP header. On decapsulation outer IP header will be simply dropped. "
"The decapsulation rule is not compatible with ECN, since ECN bit on the "
"outer IP TOS/traffic class field will be lost."
msgstr ""
"تونل IPsec معمولی در RFC2401 تشریح شده است. در کپسوله‌سازی، بخش IPv4 TOS (یا،"
" بخش کلاس ترافیک IPv6) از سرآیند IP داخلی به سرآیند IP بیرونی کپی می‌شود. در "
"کپسوله‌زدایی، سرآیند IP بیرونی به‌سادگی حذف می‌شود. قانون کپسوله‌زدایی "
"سازگار با ECN نیست، زیرا بیت ECN در بخش کلاس ترافیک/TOS نشانی IP بیرونی از "
"دست می‌رود."

#. (itstool) path: sect3/para
#: book.translate.xml:8136
msgid ""
"To make IPsec tunnel ECN-friendly, we should modify encapsulation and "
"decapsulation procedure. This is described in <link xlink:href=\"http://www."
"aciri.org/floyd/papers/draft-ipsec-ecn-00.txt\"> http://www.aciri.org/floyd/"
"papers/draft-ipsec-ecn-00.txt</link>, chapter 3."
msgstr ""
"برای آنکه تونل IPsec را سازگار با ECN کنیم، باید روند کپسوله‌سازی و کپسوله‌"
"زدایی را تغییر دهیم. این در <link xlink:href=\"http://www.aciri.org/floyd/"
"papers/draft-ipsec-ecn-00.txt\"> http://www.aciri.org/floyd/papers/draft-"
"ipsec-ecn-00.txt</link>، فصل ۳ تشریح شده است."

#. (itstool) path: sect3/para
#: book.translate.xml:8142
msgid ""
"IPsec tunnel implementation can give you three behaviors, by setting net."
"inet.ipsec.ecn (or net.inet6.ipsec6.ecn) to some value:"
msgstr ""
"پیاده‌سازی تونل IPsec با تنظیم مقدار net.inet.ipsec.ecn (یا net.inet6.ipsec6."
"ecn) ممکن است به شما سه رفتار را نشان دهد:"

#. (itstool) path: listitem/para
#: book.translate.xml:8148
msgid "RFC2401: no consideration for ECN (sysctl value -1)"
msgstr "RFC2401: هیچ ملاحظه‌ای برای ECN (sysctl value -1) نیست"

#. (itstool) path: listitem/para
#: book.translate.xml:8152
msgid "ECN forbidden (sysctl value 0)"
msgstr "ECN ممنوع (sysctl value 0)"

#. (itstool) path: listitem/para
#: book.translate.xml:8155
msgid "ECN allowed (sysctl value 1)"
msgstr "ECN مجاز (sysctl value 1)"

#. (itstool) path: sect3/para
#: book.translate.xml:8159
msgid ""
"Note that the behavior is configurable in per-node manner, not per-SA manner "
"(draft-ipsec-ecn-00 wants per-SA configuration, but it looks too much for "
"me)."
msgstr ""
"توجه داشته باشید که این رفتارها به روش هر گره قابل تنظیم هستند، نه به روش هر "
"SA (draft-ipsec-ecn-00 خواهان تنظیم کردن به روش هر SA است، اما به‌نظر خیلی "
"زیاد است)."

#. (itstool) path: sect3/para
#: book.translate.xml:8163
msgid ""
"The behavior is summarized as follows (see source code for more detail):"
msgstr ""
"این رفتارها بدین شکل خلاصه شده‌اند (کد منبع را برای جزئیات بیشتر ببینید):"

#. (itstool) path: sect3/screen
#: book.translate.xml:8166
#, no-wrap
msgid ""
"encapsulate                     decapsulate\n"
"                ---                             ---\n"
"RFC2401         copy all TOS bits               drop TOS bits on outer\n"
"                from inner to outer.            (use inner TOS bits as is)\n"
"\n"
"ECN forbidden   copy TOS bits except for ECN    drop TOS bits on outer\n"
"                (masked with 0xfc) from inner   (use inner TOS bits as is)\n"
"                to outer.  set ECN bits to 0.\n"
"\n"
"ECN allowed     copy TOS bits except for ECN    use inner TOS bits with some\n"
"                CE (masked with 0xfe) from      change.  if outer ECN CE bit\n"
"                inner to outer.                 is 1, enable ECN CE bit on\n"
"                set ECN CE bit to 0.            the inner."
msgstr ""
"کپسوله‌سازی                     کپسوله‌زدایی\n"
"                ---                             ---\n"
"RFC2401         تمام بیت‌های TOS را               بیت‌های TOS را در بیرون "
"حذف می‌کند\n"
"                از داخلی به بیرونی کپی می‌کند.            (بیت‌های درونی TOS "
"را همان‌طور که هست استفاده می‌کند)\n"
"\n"
"ECN ممنوع   بیت‌های TOS را به‌غیر از ECN    بیت‌های TOS در بیرون را حذف می‌"
"کند\n"
"                (ماسک‌شده با 0xfc) از درونی   (بیت‌های درونی TOS را همانطور "
"که هست استفاد می‌کند)\n"
"                به بیرونی کپی می‌کند.  بیت‌های ECN را روی 0 قرار دهید.\n"
"\n"
"ECN مجاز     بیت‌های TOS را به‌غیر از ECN    بیت‌های درونی TOS را با چندین\n"
"                CE (ماسک‌شده با 0xfe) از      تغییر استفاده کنید.  چنانچه "
"بیت بیرونی ECN CE\n"
"                داخلی به بیرونی کپی کنید.                 1 باشد، بیت ECN CE "
"را در داخل\n"
"                بیت ECN CE را روی 0 قرار دهید.           فعال کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:8180
msgid "General strategy for configuration is as follows:"
msgstr "راهبرد کلی برای پیکربندی چنین است:"

#. (itstool) path: listitem/para
#: book.translate.xml:8183
msgid ""
"if both IPsec tunnel endpoint are capable of ECN-friendly behavior, you "
"should better configure both end to <quote>ECN allowed</quote> (sysctl value "
"1)."
msgstr ""
"چنانچه هر دو نقطه‌های پایانیِ تونل IPsec قابلیت رفتار سازگار با ECN را داشته "
"باشند، بهتر است هر دو پایانه را روی <quote>ECN مجاز</quote> (sysctl value 1) "
"تنظیم کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:8189
msgid ""
"if the other end is very strict about TOS bit, use \"RFC2401\" (sysctl value "
"-1)."
msgstr ""
"چنانچه پایانهٔ دیگر در مورد بیت TOS بسیار سخت‌گیرانه است، از \"RFC2401\" ("
"sysctl value -1) استفاده کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:8193
msgid "in other cases, use \"ECN forbidden\" (sysctl value 0)."
msgstr "در سایر موارد، از \"ECN ممنوع\" (sysctl value 0) استفاده کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:8198
msgid "The default behavior is \"ECN forbidden\" (sysctl value 0)."
msgstr "رفتار پیش‌فرض \"ECN ممنوع\" است (sysctl value 0)."

#. (itstool) path: sect3/para
#: book.translate.xml:8201
msgid "For more information, please refer to:"
msgstr "برای اطلاعات بیشتر، لطفاً مراجعه کنید به:"

#. (itstool) path: sect3/para
#: book.translate.xml:8203
msgid ""
"<link xlink:href=\"http://www.aciri.org/floyd/papers/draft-ipsec-ecn-00.txt"
"\"> http://www.aciri.org/floyd/papers/draft-ipsec-ecn-00.txt</link>, RFC2481 "
"(Explicit Congestion Notification), src/sys/netinet6/{ah,esp}_input.c"
msgstr ""
"<link xlink:href=\"http://www.aciri.org/floyd/papers/draft-ipsec-ecn-00.txt\""
"> http://www.aciri.org/floyd/papers/draft-ipsec-ecn-00.txt</link>, RFC2481 ("
"Explicit Congestion Notification), src/sys/netinet6/{ah,esp}_input.c"

#. (itstool) path: sect3/para
#: book.translate.xml:8208
msgid ""
"(Thanks goes to Kenjiro Cho <email>kjc@csl.sony.co.jp</email> for detailed "
"analysis)"
msgstr ""
"(با تشکر از Kenjiro Cho <email>kjc@csl.sony.co.jp</email> برای تحلیل بتفصیل)"

#. (itstool) path: sect3/title
#: book.translate.xml:8214
msgid "Interoperability"
msgstr "هم‌کنش‌پذیری"

#. (itstool) path: sect3/para
#: book.translate.xml:8216
msgid ""
"Here are (some of) platforms that KAME code have tested IPsec/IKE "
"interoperability in the past. Note that both ends may have modified their "
"implementation, so use the following list just for reference purposes."
msgstr ""
"در اینجا (چندین) بستر هستند که کدِ KAME هم‌کنش‌پذیریِ IPsec/IKE را در گذشته "
"آزمایش کرده است. توجه داشته باشید که هردوی پایانه‌ها ممکن است پیاده‌سازی‌شان "
"را تغییر داده باشند، در نتیجه فهرست پیش رو را فقط برای ارجاع استفاده کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:8221
msgid ""
"Altiga, Ashley-laurent (vpcom.com), Data Fellows (F-Secure), Ericsson ACC, "
"FreeS/WAN, HITACHI, IBM <trademark class=\"registered\">AIX</trademark>, "
"IIJ, Intel, <trademark class=\"registered\">Microsoft</trademark> <trademark "
"class=\"registered\">Windows NT</trademark>, NIST (linux IPsec + plutoplus), "
"Netscreen, OpenBSD, RedCreek, Routerware, SSH, Secure Computing, Soliton, "
"Toshiba, VPNet, Yamaha RT100i"
msgstr ""
"Altiga، Ashley-laurent (vpcom.com)، Data Fellows (F-Secure)، Ericsson ACC، "
"FreeS/WAN، HITACHI، IBM <trademark class=\"registered\">AIX</trademark>، "
"IIJ, Intel، <trademark class=\"registered\">Microsoft</trademark><trademark "
"class=\"registered\">Windows NT</trademark>، NIST (linux IPsec + plutoplus)، "
"Netscreen، OpenBSD، RedCreek، Routerware، SSH، Secure Computing، Soliton، "
"Toshiba، VPNet، Yamaha RT100i"

#. (itstool) path: part/title
#: book.translate.xml:8236
msgid "Kernel"
msgstr "هسته"

#. (itstool) path: chapter/title
#: book.translate.xml:8245
msgid "Building and Installing a FreeBSD Kernel"
msgstr "ساخت و نصب هستهٔ FreeBSD"

#. (itstool) path: chapter/para
#: book.translate.xml:8247
msgid ""
"Being a kernel developer requires understanding of the kernel build process. "
"To debug the FreeBSD kernel it is required to be able to build one. There "
"are two known ways to do so:"
msgstr ""
"توسعه‌دهندهٔ هسته بودن نیازمند فهم فرآیند ساخت هسته است. برای اشکال‌زدایی "
"هستهٔ FreeBSD لازم است که بتوانید یکی را بسازید. دو راه برای این منظور وجود "
"دارد:"

#. (itstool) path: chapter/para
#: book.translate.xml:8251
msgid ""
"The supported procedure to build and install a kernel is documented in the "
"<link xlink:href=\"../handbook/kernelconfig-building.html\">Building and "
"Installing a Custom Kernel</link> chapter of the FreeBSD Handbook."
msgstr ""
"روند پشتیبانی‌شده برای ساخت و نصب یک هسته در فصل <link xlink:href=\"../"
"handbook/kernelconfig-building.html\">ساخت و نصب یک هستهٔ سفارشی</link> واقع "
"در کتاب راهنمای FreeBSD مستند شده است."

#. (itstool) path: note/para
#: book.translate.xml:8257
msgid ""
"It is supposed that the reader of this chapter is familiar with the "
"information described in the <link xlink:href=\"../handbook/kernelconfig-"
"building.html\">Building and Installing a Custom Kernel</link> chapter of "
"the FreeBSD Handbook. If this is not the case, please read through the above "
"mentioned chapter to understand how the build process works."
msgstr ""
"چنین فرض می‌شود که خوانندهٔ این فصل با اطلاعات توضیح داده شده در فصل <link "
"xlink:href=\"../handbook/kernelconfig-building.html\">ساخت و نصب یک هستهٔ "
"سفارشی</link> از کتاب راهنمای FreeBSD آشنا باشد. اگر چنین نیست، خواهشمند است "
"فصل ذکر شده را مطالعه کنید تا نحوهٔ کارکرد فرآیند ساخت را درک کنید."

#. (itstool) path: sect1/title
#: book.translate.xml:8266
msgid "Building the Faster but Brittle Way"
msgstr "ساختن از راه سریع‌تر اما شکننده"

#. (itstool) path: sect1/para
#: book.translate.xml:8268
msgid ""
"Building the kernel this way may be useful when working on the kernel code "
"and it may actually be faster than the documented procedure when only a "
"single option or two were tweaked in the kernel configuration file. On the "
"other hand, it might lead to unexpected kernel build breakage."
msgstr ""
"ساختن هسته به این روش ممکن است به‌هنگام کار بر روی کد هسته مفید باشد و در "
"واقع ممکن است سریع‌تر از روند مستند شده زمانی‌که تنها یک یا دو گزینه در "
"پروندهٔ پیکربندی هسته تغییر یافته‌اند باشد. از سوی دیگر، ممکن است منجر به "
"خراب شدن غیرمنتظرهٔ روند ساخت هسته شود."

#. (itstool) path: step/para
#: book.translate.xml:8277
msgid ""
"Run <citerefentry><refentrytitle>config</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> to generate the kernel source code:"
msgstr ""
"<citerefentry><refentrytitle>config</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> را اجرا کنید تا کد منبع هسته را تولید کنید:"

#. (itstool) path: step/screen
#: book.translate.xml:8280
#, no-wrap
msgid "<prompt>#</prompt> <userinput>/usr/sbin/config <replaceable>MYKERNEL</replaceable></userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>/usr/sbin/config "
"<replaceable>MYKERNEL</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:8284
msgid ""
"Change into the build directory. <citerefentry><refentrytitle>config</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> will print the name of "
"this directory after being run as above."
msgstr ""
"مسیر خود را به مسیر ساخت تغییر دهید. دستور "
"<citerefentry><refentrytitle>config</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> نام این مسیر را پس از اجرا مانند بالا چاپ می‌کند."

#. (itstool) path: step/screen
#: book.translate.xml:8288
#, no-wrap
msgid "<prompt>#</prompt> <userinput>cd ../compile/<replaceable>MYKERNEL</replaceable></userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>cd ../compile/"
"<replaceable>MYKERNEL</replaceable></userinput>"

#. (itstool) path: step/para
#: book.translate.xml:8292
msgid "Compile the kernel:"
msgstr "هسته را همگردانی کنید:"

#. (itstool) path: step/screen
#: book.translate.xml:8294
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>make depend</userinput>\n"
"<prompt>#</prompt> <userinput>make</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>make depend</userinput>\n"
"<prompt>#</prompt> <userinput>make</userinput>"

#. (itstool) path: step/para
#: book.translate.xml:8299
msgid "Install the new kernel:"
msgstr "هستهٔ جدید را نصب کنید:"

#. (itstool) path: step/screen
#: book.translate.xml:8301
#, no-wrap
msgid "<prompt>#</prompt> <userinput>make install</userinput>"
msgstr "<prompt>#</prompt> <userinput>make install</userinput>"

#. (itstool) path: info/title
#: book.translate.xml:8315
msgid "Kernel Debugging"
msgstr "اشکال‌زدایی هسته"

#. (itstool) path: authorgroup/author
#: book.translate.xml:8317
msgid ""
"<personname><firstname>Paul</firstname><surname>Richards</surname></"
"personname><contrib>Contributed by </contrib>"
msgstr ""
"<personname><firstname>Paul</firstname><surname>Richards</surname></"
"personname><contrib>نوشته شده توسط </contrib>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:8318
msgid ""
"<personname><firstname>Jörg</firstname><surname>Wunsch</surname></personname>"
msgstr ""
"<personname><firstname>Jörg</firstname><surname>Wunsch</surname></personname>"

#. (itstool) path: authorgroup/author
#: book.translate.xml:8319
msgid ""
"<personname><firstname>Robert</firstname><surname>Watson</surname></"
"personname>"
msgstr ""
"<personname><firstname>Robert</firstname><surname>Watson</surname></personnam"
"e>"

#. (itstool) path: sect1/title
#: book.translate.xml:8326
msgid "Obtaining a Kernel Crash Dump"
msgstr "دست‌یابی به روگرفت خرابی هسته"

#. (itstool) path: sect1/para
#: book.translate.xml:8328
msgid ""
"When running a development kernel (e.g., FreeBSD-CURRENT), such as a kernel "
"under extreme conditions (e.g., very high load averages, tens of thousands "
"of connections, exceedingly high number of concurrent users, hundreds of "
"<citerefentry><refentrytitle>jail</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry>s, etc.), or using a new feature or device driver on FreeBSD-"
"STABLE (e.g., <acronym>PAE</acronym>), sometimes a kernel will panic. In the "
"event that it does, this chapter will demonstrate how to extract useful "
"information out of a crash."
msgstr ""
"هنگام اجرای یک هستهٔ درحال توسعه (مانند FreeBSD-CURRENT)، مانند هسته‌ای که "
"تحت شرایط سخت است (برای مثال، میانگین بار بسیار زیاد، ده‌ها هزار اتصال، "
"تعداد بیش از اندازهٔ کاربران همزمان، صدها <citerefentry><refentrytitle>jail</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>، و غیره)، یا استفاده "
"از یک ویژگی جدید یا گردانندهٔ دستگاه در FreeBSD-STABLE (مانند "
"<acronym>PAE</acronym>)، برخی مواقع هسته دچار وحشت می‌شود. در صورت وقوع چنین "
"اتفاقی، این فصل نحوهٔ استخراج اطلاعات مفید از یک خرابی را ترسیم می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:8337
msgid ""
"A system reboot is inevitable once a kernel panics. Once a system is "
"rebooted, the contents of a system's physical memory (<acronym>RAM</"
"acronym>) is lost, as well as any bits that are on the swap device before "
"the panic. To preserve the bits in physical memory, the kernel makes use of "
"the swap device as a temporary place to store the bits that are in RAM "
"across a reboot after a crash. In doing this, when FreeBSD boots after a "
"crash, a kernel image can now be extracted and debugging can take place."
msgstr ""
"بازراه‌‌اندازیِ سامانه در هنگام وقوع وحشت هسته اجتناب ناپذیر است. هنگامی‌که "
"سامانه بازراه‌‌اندازی می‌شود، محتوای حافظهٔ فیزیکیِ سامانه "
"(<acronym>RAM</acronym>) و همچنین هر بیتی که قبل از وقوع وحشت در دستگاهِ "
"swap موجود بوده است از دست می‌رود. برای حفظ بیت‌ها در حافظهٔ فیزیکی، هسته "
"دستگاهِ swap را به‌عنوان مکان موقتی برای حفظ بیت‌های موجود در RAM که در وسط "
"بازراه‌‌اندازیِ پس از خرابی هستند به‌کار می‌برد. در این راه، هنگامی‌که "
"FreeBSD پس از خرابی راه‌اندازی (بوت) می‌شود، حال تصویر هسته را می‌توان "
"استخراج کرد و اشکال‌زدایی آغاز می‌شود."

#. (itstool) path: note/para
#: book.translate.xml:8347
msgid ""
"A swap device that has been configured as a dump device still acts as a swap "
"device. Dumps to non-swap devices (such as tapes or CDRWs, for example) are "
"not supported at this time. A <quote>swap device</quote> is synonymous with "
"a <quote>swap partition.</quote>"
msgstr ""
"یک دستگاه swap که مانند یک دستگاه روگرفت پیکربندی شده است هنوز مانند دستگاه "
"swap عمل می‌کند. روبرداری در دستگاه‌های غیر از swap (مانند نوارها یا CDRW ها)"
" در این لحظه پشتیبانی نمی‌شود. یک <quote>دستگاه swap</quote> مترادف با یک "
"<quote>محفظهٔ swap</quote> است."

#. (itstool) path: sect1/para
#: book.translate.xml:8353
msgid "Several types of kernel crash dumps are available:"
msgstr "برخی از انواع روگرفت‌های خرابی هسته موجود هستند:"

#. (itstool) path: varlistentry/term
#: book.translate.xml:8356
msgid "Full memory dumps"
msgstr "روگرفت‌های حافظهٔ کامل"

#. (itstool) path: listitem/para
#: book.translate.xml:8359
msgid "Hold the complete contents of physical memory."
msgstr "محتوای کامل حافظهٔ فیزیکی را نگه می‌دارد."

#. (itstool) path: varlistentry/term
#: book.translate.xml:8365
msgid "Minidumps"
msgstr "روگرفت‌های کوچک (Minidumps)"

#. (itstool) path: listitem/para
#: book.translate.xml:8368
msgid "Hold only memory pages in use by the kernel (FreeBSD 6.2 and higher)."
msgstr ""
"تنها صفحات حافظه‌ای که توسط هسته در حال استفاده هستند را نگه می‌دارد ("
"FreeBSD 6.2 و بالاتر)."

#. (itstool) path: varlistentry/term
#: book.translate.xml:8374
msgid "Textdumps"
msgstr "روگرفت‌های نوشتاری (Textdumps)"

#. (itstool) path: listitem/para
#: book.translate.xml:8377
msgid ""
"Hold captured, scripted, or interactive debugger output (FreeBSD 7.1 and "
"higher)."
msgstr ""
"خروجی اشکال‌زدای گرفته‌شده، نوشته‌شده، یا تعاملی را نگه می‌دارد (FreeBSD 7.1 "
"و بالاتر)."

#. (itstool) path: sect1/para
#: book.translate.xml:8383
msgid ""
"Minidumps are the default dump type as of FreeBSD 7.0, and in most cases "
"will capture all necessary information present in a full memory dump, as "
"most problems can be isolated only using kernel state."
msgstr ""
"روگرفت‌های کوچک (Minidumps) پس از FreeBSD 7.0 حالت پیش‌فرضِ روگرفت هستند، و "
"در اکثر موارد تمامی اطلاعات ضروریِ ارائه شده در یک روگرفت کامل را می‌گیرد، "
"چنانکه بیشتر مشکلات ممکن است تنها با استفاده از حالت هسته مجزا شوند."

#. (itstool) path: sect2/title
#: book.translate.xml:8389
msgid "Configuring the Dump Device"
msgstr "پیکربندی دستگاه روگرفت"

#. (itstool) path: sect2/para
#: book.translate.xml:8391
msgid ""
"Before the kernel will dump the contents of its physical memory to a dump "
"device, a dump device must be configured. A dump device is specified by "
"using the <citerefentry><refentrytitle>dumpon</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> command to tell the kernel where to save kernel "
"crash dumps. The <citerefentry><refentrytitle>dumpon</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> program must be called "
"after the swap partition has been configured with "
"<citerefentry><refentrytitle>swapon</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry>. This is normally handled by setting the <varname>dumpdev</"
"varname> variable in <citerefentry><refentrytitle>rc.conf</"
"refentrytitle><manvolnum>5</manvolnum></citerefentry> to the path of the "
"swap device (the recommended way to extract a kernel dump) or <literal>AUTO</"
"literal> to use the first configured swap device. The default for "
"<varname>dumpdev</varname> is <literal>AUTO</literal> in HEAD, and changed "
"to <literal>NO</literal> on RELENG_* branches (except for RELENG_7, which "
"was left set to <literal>AUTO</literal>). On FreeBSD 9.0-RELEASE and later "
"versions, <application>bsdinstall</application> will ask whether crash dumps "
"should be enabled on the target system during the install process."
msgstr ""
"دستگاهِ روگرفت باید قبل از آنکه هسته محتوای حافظهٔ فیزیکیِ خود را در یک "
"دستگاه swap روبردای کند، پیکربندی شود. دستگاه روگرفت با استفاده از دستور "
"<citerefentry><refentrytitle>dumpon</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> تعیین می‌شود، که به هسته، محل ذخیره‌کردن روگرفت‌های خرابیِ "
"هسته را می‌گوید. پس از آنکه محفظهٔ swap با "
"<citerefentry><refentrytitle>swapon</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> پیکربندی شد، برنامهٔ "
"<citerefentry><refentrytitle>dumpon</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> باید فراخوانی شود. به‌طور معمول، این امر با تنظیم کردن متغیرِ "
"<varname>dumpdev</varname> به آدرس دستگاه روگرفت در "
"<citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> (روش پیشنهاد شده "
"برای استخراج یک روگرفت هسته) یا <literal>AUTO</literal> برای استفاده از "
"اولین دستگاه پیکربندی شدهٔ swap انجام می‌گیرد. پیش‌فرضِ <varname>dumpdev</"
"varname> در HEAD <literal>AUTO</literal> است، و در انشعاب‌های RELENG_* به "
"<literal>NO</literal> تغییر می‌کند (به غیر از RELENG_7، که از قبل بر روی "
"<literal>AUTO</literal> تنظیم شده بود). در FreeBSD 9.0-RELEASE و نسخه‌های "
"بعد‌تر، <application>bsdinstall</application> می‌پرسد آیا روگرفت‌های خرابی "
"در حین فرآیند نصب باید در سامانهٔ هدف فعال شوند یا خیر."

#. (itstool) path: tip/para
#: book.translate.xml:8409
msgid ""
"Check <filename>/etc/fstab</filename> or "
"<citerefentry><refentrytitle>swapinfo</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> for a list of swap devices."
msgstr ""
"<filename>/etc/fstab</filename> یا <citerefentry><refentrytitle>swapinfo</ref"
"entrytitle><manvolnum>8</manvolnum></citerefentry> را برای فهرستی از دستگاه‌"
"های مبادله (swap) بررسی کنید."

#. (itstool) path: important/para
#: book.translate.xml:8412
msgid ""
"Make sure the <varname>dumpdir</varname> specified in "
"<citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</"
"manvolnum></citerefentry> exists before a kernel crash!"
msgstr ""
"اطمینان حاصل کنید که مقدار تعیین شدهٔ <varname>dumpdir</varname> در "
"<citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> قبل از خرابی "
"هسته وجود داشته باشد!"

#. (itstool) path: important/screen
#: book.translate.xml:8416
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>mkdir /var/crash</userinput>\n"
"<prompt>#</prompt> <userinput>chmod 700 /var/crash</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>mkdir /var/crash</userinput>\n"
"<prompt>#</prompt> <userinput>chmod 700 /var/crash</userinput>"

#. (itstool) path: important/para
#: book.translate.xml:8419
msgid ""
"Also, remember that the contents of <filename>/var/crash</filename> is "
"sensitive and very likely contains confidential information such as "
"passwords."
msgstr ""
"همچنین، به یاد داشته باشید که محتوای <filename>/var/crash</filename> حساس "
"است و به‌احتمال بالا شامل اطلاعات محرمانه‌ای مانند رمزها هست."

#. (itstool) path: sect2/title
#: book.translate.xml:8426
msgid "Extracting a Kernel Dump"
msgstr "استخراج روگرفت هسته"

#. (itstool) path: sect2/para
#: book.translate.xml:8428
msgid ""
"Once a dump has been written to a dump device, the dump must be extracted "
"before the swap device is mounted. To extract a dump from a dump device, use "
"the <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> program. If <varname>dumpdev</varname> has been "
"set in <citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</"
"manvolnum></citerefentry>, <citerefentry><refentrytitle>savecore</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> will be called "
"automatically on the first multi-user boot after the crash and before the "
"swap device is mounted. The location of the extracted core is placed in the "
"<citerefentry><refentrytitle>rc.conf</refentrytitle><manvolnum>5</"
"manvolnum></citerefentry> value <varname>dumpdir</varname>, by default "
"<filename>/var/crash</filename> and will be named <filename>vmcore.0</"
"filename>."
msgstr ""
"هنگامی‌که روگرفت در دستگاهِ روگرفت نوشته شد، روگرفت باید قبل از آنکه دستگاه "
"swap سوار شود استخراج شود. برای استخراج روگرفت از یک دستگاه روگرفت، از "
"برنامهٔ <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</ma"
"nvolnum></citerefentry> استفاده کنید. اگر <varname>dumpdev</varname> در "
"<citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> تنظیم شده باشد، <"
"citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</manvolnum><"
"/citerefentry> به‌طور خودکار پس از خرابی و قبل از سوار شدن دستگاه در اولین "
"بوتِ چند کاربری (multi-user) فراخوانی می‌شود. مکان روگرفت استخراج شده در "
"مقدار <varname>dumpdir</varname>، واقع در <citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> قرار داده شده "
"است، که این مقدار به‌طور پیش‌فرض <filename>/var/crash</filename> است و "
"<filename>vmcore.0</filename> نام گذاشته می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:8440
msgid ""
"In the event that there is already a file called <filename>vmcore.0</"
"filename> in <filename>/var/crash</filename> (or whatever <varname>dumpdir</"
"varname> is set to), the kernel will increment the trailing number for every "
"crash to avoid overwriting an existing <filename>vmcore</filename> (e.g., "
"<filename>vmcore.1</filename>). <citerefentry><refentrytitle>savecore</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> will always create a "
"symbolic link to named <filename>vmcore.last</filename> in <filename>/var/"
"crash</filename> after a dump is saved. This symbolic link can be used to "
"locate the name of the most recent dump."
msgstr ""
"در صورتی‌که از پیش پرونده‌ای به نام <filename>vmcore.0</filename> در "
"<filename>/var/crash</filename> (یا هر مقداری که به <varname>dumpdir</"
"varname> داده شده باشد) وجود داشته باشد، هسته برای جلوگیری از بازنویسیِ یک "
"<filename>vmcore</filename> موجود، اعداد دنباله‌دار را برای هر خرابی افزایش "
"می‌دهد (برای مثال، <filename>vmcore.1</filename>). <citerefentry><refentrytit"
"le>savecore</refentrytitle><manvolnum>8</manvolnum></citerefentry> پس از "
"ذخیرهٔ روگرفت، همیشه یک پیوند نمادین به نام <filename>vmcore.last</filename> "
"در <filename>/var/crash</filename> می‌سازد. این پیوند نمادین را می‌توان برای "
"یافتن نام روگرفت اخیر به‌کار برد."

#. (itstool) path: sect2/para
#: book.translate.xml:8452
msgid ""
"The <citerefentry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> utility generates a text file containing a summary "
"of information from a full memory dump or minidump. If <varname>dumpdev</"
"varname> has been set in <citerefentry><refentrytitle>rc.conf</"
"refentrytitle><manvolnum>5</manvolnum></citerefentry>, "
"<citerefentry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> will be invoked automatically after "
"<citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>. The output is saved to a file in "
"<varname>dumpdir</varname> named <filename>core.txt.<replaceable>N</"
"replaceable></filename>."
msgstr ""
"ابزار <citerefentry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</man"
"volnum></citerefentry> یک پروندهٔ نوشتاری ایجاد می‌کند که شامل چکیده‌ای از "
"اطلاعات از یک روگرفت حافظهٔ کامل یا روگرفت کوچک است. اگر <varname>dumpdev</"
"varname> درون <citerefentry><refentrytitle>rc."
"conf</refentrytitle><manvolnum>5</manvolnum></citerefentry> تنظیم شده باشد، <"
"citerefentry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</manvolnum>"
"</citerefentry> به‌طور خودکار پس از <citerefentry><refentrytitle>savecore</re"
"fentrytitle><manvolnum>8</manvolnum></citerefentry> فراخوانده می‌شود. خروجی "
"در یک پرونده در <varname>dumpdir</varname> به نام <filename>core."
"txt.<replaceable>N</replaceable></filename> ذخیره می‌شود."

#. (itstool) path: tip/para
#: book.translate.xml:8461
msgid ""
"If you are testing a new kernel but need to boot a different one in order to "
"get your system up and running again, boot it only into single user mode "
"using the <option>-s</option> flag at the boot prompt, and then perform the "
"following steps:"
msgstr ""
"چنانچه در حال امتحان کردن یک هستهٔ جدید هستید اما نیازمند شروع هستهٔ دیگری "
"برای راه‌اندازی مجدد سامانهٔ خود هستید، آن را تنها با استفاده از نشانِ "
"<option>-s</option> در پیام‌وارهٔ راه‌اندازی در حالت تک کاربری راه‌اندازی "
"کنید، و سپس مراحل زیر را اجرا کنید:"

#. (itstool) path: tip/screen
#: book.translate.xml:8466
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>fsck -p</userinput>\n"
"<prompt>#</prompt> <userinput>mount -a -t ufs</userinput>       # make sure /var/crash is writable\n"
"<prompt>#</prompt> <userinput>savecore /var/crash /dev/ad0s1b</userinput>\n"
"<prompt>#</prompt> <userinput>exit</userinput>                  # exit to multi-user"
msgstr ""
"<prompt>#</prompt> <userinput>fsck -p</userinput>\n"
"<prompt>#</prompt> <userinput>mount -a -t ufs</userinput>       # make sure /"
"var/crash is writable\n"
"<prompt>#</prompt> <userinput>savecore /var/crash /dev/ad0s1b</userinput>\n"
"<prompt>#</prompt> <userinput>exit</userinput>                  # exit to "
"multi-user"

#. (itstool) path: tip/para
#: book.translate.xml:8471
msgid ""
"This instructs <citerefentry><refentrytitle>savecore</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> to extract a kernel "
"dump from <filename>/dev/ad0s1b</filename> and place the contents in "
"<filename>/var/crash</filename>. Do not forget to make sure the destination "
"directory <filename>/var/crash</filename> has enough space for the dump. "
"Also, do not forget to specify the correct path to your swap device as it is "
"likely different than <filename>/dev/ad0s1b</filename>!"
msgstr ""
"این روش به <citerefentry><refentrytitle>savecore</refentrytitle><manvolnum>8<"
"/manvolnum></citerefentry> دستور می‌دهد تا روگرفت هسته را از <filename>/dev/"
"ad0s1b</filename> استخراج کند و محتوای آن را در <filename>/var/crash</"
"filename> بگذارد. اطمینان حاصل کنید که مسیر مقصد، یعنی <filename>/var/crash</"
"filename> دارای فضای کافی برای روگرفت باشد. همچنین، فراموش نکنید تا مسیر "
"درست را برای دستگاه swap خود تعیین کنید چنانکه احتمال دارد متفاوت از "
"<filename>/dev/ad0s1b</filename> باشد!"

#. (itstool) path: sect2/title
#: book.translate.xml:8481
msgid "Testing Kernel Dump Configuration"
msgstr "آزمودن پیکربندی روگرفت هسته"

#. (itstool) path: sect2/para
#: book.translate.xml:8483
msgid ""
"The kernel includes a <citerefentry><refentrytitle>sysctl</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> node that requests a "
"kernel panic. This can be used to verify that your system is properly "
"configured to save kernel crash dumps. You may wish to remount existing file "
"systems as read-only in single user mode before triggering the crash to "
"avoid data loss."
msgstr ""
"هسته شامل یک گرهٔ "
"<citerefentry><refentrytitle>sysctl</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> است که درخواست وحشت هسته می‌کند. این امر می‌تواند استفاده شود "
"تا درستیِ پیکربندی سامانهٔ شما به‌منظور ذخیرهٔ روگرفت‌های هسته تایید شود. "
"ممکن است بخواهید پیش از آنکه باعث تسریع خرابی شوید سامانه‌های پروندهٔ موجود "
"را به‌طور فقط خواندنی در حالت تک کاربری مجدد سوار کنید تا از اتلاف داده‌ها "
"اجتناب کنید."

#. (itstool) path: sect2/screen
#: book.translate.xml:8489
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>shutdown now</userinput>\n"
"...\n"
"Enter full pathname of shell or RETURN for /bin/sh:\n"
"<prompt>#</prompt> <userinput>mount -a -u -r</userinput>\n"
"<prompt>#</prompt> <userinput>sysctl debug.kdb.panic=1</userinput>\n"
"debug.kdb.panic:panic: kdb_sysctl_panic\n"
"..."
msgstr ""
"<prompt>#</prompt> <userinput>shutdown now</userinput>\n"
"...\n"
"Enter full pathname of shell or RETURN for /bin/sh:\n"
"<prompt>#</prompt> <userinput>mount -a -u -r</userinput>\n"
"<prompt>#</prompt> <userinput>sysctl debug.kdb.panic=1</userinput>\n"
"debug.kdb.panic:panic: kdb_sysctl_panic\n"
"..."

#. (itstool) path: sect2/para
#: book.translate.xml:8497
msgid ""
"After rebooting, your system should save a dump in <filename>/var/crash</"
"filename> along with a matching summary from "
"<citerefentry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>."
msgstr ""
"پس از راه‌اندازی مجدد، سامانهٔ شما باید در کنار خلاصه‌ای منطبق از <citerefent"
"ry><refentrytitle>crashinfo</refentrytitle><manvolnum>8</manvolnum></citerefe"
"ntry>، یک روگرفت در <filename>/var/crash</filename> ذخیره کند."

#. (itstool) path: sect1/title
#: book.translate.xml:8504
msgid "Debugging a Kernel Crash Dump with <command>kgdb</command>"
msgstr "اشکال‌زدایی روگرفت خرابی هسته با <command>kgdb</command>"

#. (itstool) path: note/para
#: book.translate.xml:8507
msgid ""
"This section covers <citerefentry><refentrytitle>kgdb</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry>. The latest version is "
"included in the <package>devel/gdb</package>. An older version is also "
"present in FreeBSD 11 and earlier."
msgstr ""
"این بخش "
"<citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> را پوشش می‌دهد. آخرین نسخه در <package>devel/gdb</package> "
"موجود است. نسخه‌ای قدیمی‌تر نیز در FreeBSD 11 و قبل‌تر در دسترس است."

#. (itstool) path: sect1/para
#: book.translate.xml:8512
msgid ""
"To enter into the debugger and begin getting information from the dump, "
"start kgdb:"
msgstr ""
"برای ورود به محیط اشکال‌زدا و دریافت اطلاعات از روگرفت، kgdb را شروع کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8515
#, no-wrap
msgid "<prompt>#</prompt> <userinput>kgdb -n <replaceable>N</replaceable></userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>kgdb -n "
"<replaceable>N</replaceable></userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8517
msgid ""
"Where <replaceable>N</replaceable> is the suffix of the <filename>vmcore."
"<replaceable>N</replaceable></filename> to examine. To open the most recent "
"dump use:"
msgstr ""
"که <replaceable>N</replaceable> پیشوند "
"<filename>vmcore.<replaceable>N</replaceable></filename> است. برای باز کردن "
"روگرفت اخیر وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8521
#, no-wrap
msgid "<prompt>#</prompt> <userinput>kgdb -n last</userinput>"
msgstr "<prompt>#</prompt> <userinput>kgdb -n last</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8523
msgid ""
"Normally, <citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry> should be able to locate the kernel running at the "
"time the dump was generated. If it is not able to locate the correct kernel, "
"pass the pathname of the kernel and dump as two arguments to kgdb:"
msgstr ""
"به‌طور معمول، "
"<citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> باید بتواند هسته‌ای را که در زمان تولید روگرفت در حال اجرا هست "
"را مکان‌یابی کند. چنانچه نتواند هستهٔ درست را مکان‌یابی کند، نام مسیر هسته و "
"روگرفت را به‌عنوان دو برهان به kgdb بدهید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8528
#, no-wrap
msgid "<prompt>#</prompt> <userinput>kgdb /boot/kernel/kernel /var/crash/vmcore.0</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>kgdb /boot/kernel/kernel /var/crash/vmcore."
"0</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8530
msgid ""
"You can debug the crash dump using the kernel sources just like you can for "
"any other program."
msgstr ""
"می‌توانید روگرفت خرابی را با استفاده از منابع هسته اشکال‌زدایی کنید، درست "
"همانطور که برای هر برنامهٔ دیگری می‌توانید."

#. (itstool) path: sect1/para
#: book.translate.xml:8533
msgid ""
"This dump is from a 5.2-BETA kernel and the crash comes from deep within the "
"kernel. The output below has been modified to include line numbers on the "
"left. This first trace inspects the instruction pointer and obtains a back "
"trace. The address that is used on line 41 for the <command>list</command> "
"command is the instruction pointer and can be found on line 17. Most "
"developers will request having at least this information sent to them if you "
"are unable to debug the problem yourself. If, however, you do solve the "
"problem, make sure that your patch winds its way into the source tree via a "
"problem report, mailing lists, or by being able to commit it!"
msgstr ""
"این روگرفت از جانب یک هستهٔ 5.2-BETA است و خرابی از عمق خود هسته می‌آید. "
"خروجیِ زیر تغییر داده شده است تا شامل شمارهٔ سطرها در سمت چپ باشد. اولین رد، "
"اشاره‌گر دستور را بررسی می‌کند و یک عقب‌گرد (backtrace) بدست می‌آورد. نشانی‌"
"ای که در سطر 41 برای دستور <command>list</command> به‌کار رفته است اشاره‌گر "
"دستور است و در سطر 17 می‌توان آن را یافت. چنانچه خودتان توان اشکال‌زدایی "
"مشکل را ندارید، بیشتر توسعه‌دهندگان حداقل خواهانِ ارسال این اطلاعات به آنها "
"هستند. چنانچه، در هر صورت، خودتان مشکل را برطرف کردید، اطمینان پیدا کنید که "
"اصلاح شما راه خود را از طریق گزارش مشکل به درخت منبع یا فهرست‌های پست‌سپاری "
"پیدا کند، یا امکان ثبت (commit) آن وجود داشته باشد!"

#. (itstool) path: sect1/screen
#: book.translate.xml:8545
#, no-wrap
msgid ""
" 1:<prompt>#</prompt> <userinput>cd /usr/obj/usr/src/sys/<replaceable>KERNCONF</replaceable></userinput>\n"
" 2:<prompt>#</prompt> <userinput>kgdb kernel.debug /var/crash/vmcore.0</userinput>\n"
" 3:GNU gdb 5.2.1 (FreeBSD)\n"
" 4:Copyright 2002 Free Software Foundation, Inc.\n"
" 5:GDB is free software, covered by the GNU General Public License, and you are\n"
" 6:welcome to change it and/or distribute copies of it under certain conditions.\n"
" 7:Type \"show copying\" to see the conditions.\n"
" 8:There is absolutely no warranty for GDB.  Type \"show warranty\" for details.\n"
" 9:This GDB was configured as \"i386-undermydesk-freebsd\"...\n"
"10:panic: page fault\n"
"11:panic messages:\n"
"12:---\n"
"13:Fatal trap 12: page fault while in kernel mode\n"
"14:cpuid = 0; apic id = 00\n"
"15:fault virtual address   = 0x300\n"
"16:fault code:             = supervisor read, page not present\n"
"17:instruction pointer     = 0x8:0xc0713860\n"
"18:stack pointer           = 0x10:0xdc1d0b70\n"
"19:frame pointer           = 0x10:0xdc1d0b7c\n"
"20:code segment            = base 0x0, limit 0xfffff, type 0x1b\n"
"21:                        = DPL 0, pres 1, def32 1, gran 1\n"
"22:processor eflags        = resume, IOPL = 0\n"
"23:current process         = 14394 (uname)\n"
"24:trap number             = 12\n"
"25:panic: page fault\n"
"26      cpuid = 0;\n"
"27:Stack backtrace:\n"
"28\n"
"29:syncing disks, buffers remaining... 2199 2199 panic: mi_switch: switch in a critical section\n"
"30:cpuid = 0;\n"
"31:Uptime: 2h43m19s\n"
"32:Dumping 255 MB\n"
"33: 16 32 48 64 80 96 112 128 144 160 176 192 208 224 240\n"
"34:---\n"
"35:Reading symbols from /boot/kernel/snd_maestro3.ko...done.\n"
"36:Loaded symbols for /boot/kernel/snd_maestro3.ko\n"
"37:Reading symbols from /boot/kernel/snd_pcm.ko...done.\n"
"38:Loaded symbols for /boot/kernel/snd_pcm.ko\n"
"39:#0  doadump () at /usr/src/sys/kern/kern_shutdown.c:240\n"
"40:240             dumping++;\n"
"41:<prompt>(kgdb)</prompt> <userinput>list *0xc0713860</userinput>\n"
"42:0xc0713860 is in lapic_ipi_wait (/usr/src/sys/i386/i386/local_apic.c:663).\n"
"43:658                     incr = 0;\n"
"44:659                     delay = 1;\n"
"45:660             } else\n"
"46:661                     incr = 1;\n"
"47:662             for (x = 0; x &lt; delay; x += incr) {\n"
"48:663                     if ((lapic-&gt;icr_lo &amp; APIC_DELSTAT_MASK) == APIC_DELSTAT_IDLE)\n"
"49:664                             return (1);\n"
"50:665                     ia32_pause();\n"
"51:666             }\n"
"52:667             return (0);\n"
"53:<prompt>(kgdb)</prompt> <userinput>backtrace</userinput>\n"
"54:#0  doadump () at /usr/src/sys/kern/kern_shutdown.c:240\n"
"55:#1  0xc055fd9b in boot (howto=260) at /usr/src/sys/kern/kern_shutdown.c:372\n"
"56:#2  0xc056019d in panic () at /usr/src/sys/kern/kern_shutdown.c:550\n"
"57:#3  0xc0567ef5 in mi_switch () at /usr/src/sys/kern/kern_synch.c:470\n"
"58:#4  0xc055fa87 in boot (howto=256) at /usr/src/sys/kern/kern_shutdown.c:312\n"
"59:#5  0xc056019d in panic () at /usr/src/sys/kern/kern_shutdown.c:550\n"
"60:#6  0xc0720c66 in trap_fatal (frame=0xdc1d0b30, eva=0)\n"
"61:    at /usr/src/sys/i386/i386/trap.c:821\n"
"62:#7  0xc07202b3 in trap (frame=\n"
"63:      {tf_fs = -1065484264, tf_es = -1065484272, tf_ds = -1065484272, tf_edi = 1, tf_esi = 0, tf_ebp = -602076292, tf_isp = -602076324, tf_ebx = 0, tf_edx = 0, tf_ecx = 1000000, tf_eax = 243, tf_trapno = 12, tf_err = 0, tf_eip = -1066321824, tf_cs = 8, tf_eflags = 65671, tf_esp = 243, tf_ss = 0})\n"
"64:    at /usr/src/sys/i386/i386/trap.c:250\n"
"65:#8  0xc070c9f8 in calltrap () at {standard input}:94\n"
"66:#9  0xc07139f3 in lapic_ipi_vectored (vector=0, dest=0)\n"
"67:    at /usr/src/sys/i386/i386/local_apic.c:733\n"
"68:#10 0xc0718b23 in ipi_selected (cpus=1, ipi=1)\n"
"69:    at /usr/src/sys/i386/i386/mp_machdep.c:1115\n"
"70:#11 0xc057473e in kseq_notify (ke=0xcc05e360, cpu=0)\n"
"71:    at /usr/src/sys/kern/sched_ule.c:520\n"
"72:#12 0xc0575cad in sched_add (td=0xcbcf5c80)\n"
"73:    at /usr/src/sys/kern/sched_ule.c:1366\n"
"74:#13 0xc05666c6 in setrunqueue (td=0xcc05e360)\n"
"75:    at /usr/src/sys/kern/kern_switch.c:422\n"
"76:#14 0xc05752f4 in sched_wakeup (td=0xcbcf5c80)\n"
"77:    at /usr/src/sys/kern/sched_ule.c:999\n"
"78:#15 0xc056816c in setrunnable (td=0xcbcf5c80)\n"
"79:    at /usr/src/sys/kern/kern_synch.c:570\n"
"80:#16 0xc0567d53 in wakeup (ident=0xcbcf5c80)\n"
"81:    at /usr/src/sys/kern/kern_synch.c:411\n"
"82:#17 0xc05490a8 in exit1 (td=0xcbcf5b40, rv=0)\n"
"83:    at /usr/src/sys/kern/kern_exit.c:509\n"
"84:#18 0xc0548011 in sys_exit () at /usr/src/sys/kern/kern_exit.c:102\n"
"85:#19 0xc0720fd0 in syscall (frame=\n"
"86:      {tf_fs = 47, tf_es = 47, tf_ds = 47, tf_edi = 0, tf_esi = -1, tf_ebp = -1077940712, tf_isp = -602075788, tf_ebx = 672411944, tf_edx = 10, tf_ecx = 672411600, tf_eax = 1, tf_trapno = 12, tf_err = 2, tf_eip = 671899563, tf_cs = 31, tf_eflags = 642, tf_esp = -1077940740, tf_ss = 47})\n"
"87:    at /usr/src/sys/i386/i386/trap.c:1010\n"
"88:#20 0xc070ca4d in Xint0x80_syscall () at {standard input}:136\n"
"89:---Can't read userspace from dump, or kernel process---\n"
"90:<prompt>(kgdb)</prompt> <userinput>quit</userinput>"
msgstr ""
" 1:<prompt>#</prompt> <userinput>cd /usr/obj/usr/src/sys/"
"<replaceable>KERNCONF</replaceable></userinput>\n"
" 2:<prompt>#</prompt> <userinput>kgdb kernel.debug /var/crash/vmcore."
"0</userinput>\n"
" 3:GNU gdb 5.2.1 (FreeBSD)\n"
" 4:Copyright 2002 Free Software Foundation, Inc.\n"
" 5:GDB is free software, covered by the GNU General Public License, and you "
"are\n"
" 6:welcome to change it and/or distribute copies of it under certain "
"conditions.\n"
" 7:Type \"show copying\" to see the conditions.\n"
" 8:There is absolutely no warranty for GDB.  Type \"show warranty\" for "
"details.\n"
" 9:This GDB was configured as \"i386-undermydesk-freebsd\"...\n"
"10:panic: page fault\n"
"11:panic messages:\n"
"12:---\n"
"13:Fatal trap 12: page fault while in kernel mode\n"
"14:cpuid = 0; apic id = 00\n"
"15:fault virtual address   = 0x300\n"
"16:fault code:             = supervisor read, page not present\n"
"17:instruction pointer     = 0x8:0xc0713860\n"
"18:stack pointer           = 0x10:0xdc1d0b70\n"
"19:frame pointer           = 0x10:0xdc1d0b7c\n"
"20:code segment            = base 0x0, limit 0xfffff, type 0x1b\n"
"21:                        = DPL 0, pres 1, def32 1, gran 1\n"
"22:processor eflags        = resume, IOPL = 0\n"
"23:current process         = 14394 (uname)\n"
"24:trap number             = 12\n"
"25:panic: page fault\n"
"26      cpuid = 0;\n"
"27:Stack backtrace:\n"
"28\n"
"29:syncing disks, buffers remaining... 2199 2199 panic: mi_switch: switch in "
"a critical section\n"
"30:cpuid = 0;\n"
"31:Uptime: 2h43m19s\n"
"32:Dumping 255 MB\n"
"33: 16 32 48 64 80 96 112 128 144 160 176 192 208 224 240\n"
"34:---\n"
"35:Reading symbols from /boot/kernel/snd_maestro3.ko...done.\n"
"36:Loaded symbols for /boot/kernel/snd_maestro3.ko\n"
"37:Reading symbols from /boot/kernel/snd_pcm.ko...done.\n"
"38:Loaded symbols for /boot/kernel/snd_pcm.ko\n"
"39:#0  doadump () at /usr/src/sys/kern/kern_shutdown.c:240\n"
"40:240             dumping++;\n"
"41:<prompt>(kgdb)</prompt> <userinput>list *0xc0713860</userinput>\n"
"42:0xc0713860 is in lapic_ipi_wait (/usr/src/sys/i386/i386/local_apic.c:663)."
"\n"
"43:658                     incr = 0;\n"
"44:659                     delay = 1;\n"
"45:660             } else\n"
"46:661                     incr = 1;\n"
"47:662             for (x = 0; x &lt; delay; x += incr) {\n"
"48:663                     if ((lapic-&gt;icr_lo &amp; APIC_DELSTAT_MASK) == "
"APIC_DELSTAT_IDLE)\n"
"49:664                             return (1);\n"
"50:665                     ia32_pause();\n"
"51:666             }\n"
"52:667             return (0);\n"
"53:<prompt>(kgdb)</prompt> <userinput>backtrace</userinput>\n"
"54:#0  doadump () at /usr/src/sys/kern/kern_shutdown.c:240\n"
"55:#1  0xc055fd9b in boot (howto=260) at /usr/src/sys/kern/kern_shutdown.c:"
"372\n"
"56:#2  0xc056019d in panic () at /usr/src/sys/kern/kern_shutdown.c:550\n"
"57:#3  0xc0567ef5 in mi_switch () at /usr/src/sys/kern/kern_synch.c:470\n"
"58:#4  0xc055fa87 in boot (howto=256) at /usr/src/sys/kern/kern_shutdown.c:"
"312\n"
"59:#5  0xc056019d in panic () at /usr/src/sys/kern/kern_shutdown.c:550\n"
"60:#6  0xc0720c66 in trap_fatal (frame=0xdc1d0b30, eva=0)\n"
"61:    at /usr/src/sys/i386/i386/trap.c:821\n"
"62:#7  0xc07202b3 in trap (frame=\n"
"63:      {tf_fs = -1065484264, tf_es = -1065484272, tf_ds = -1065484272, "
"tf_edi = 1, tf_esi = 0, tf_ebp = -602076292, tf_isp = -602076324, tf_ebx = "
"0, tf_edx = 0, tf_ecx = 1000000, tf_eax = 243, tf_trapno = 12, tf_err = 0, "
"tf_eip = -1066321824, tf_cs = 8, tf_eflags = 65671, tf_esp = 243, tf_ss = 0})"
"\n"
"64:    at /usr/src/sys/i386/i386/trap.c:250\n"
"65:#8  0xc070c9f8 in calltrap () at {standard input}:94\n"
"66:#9  0xc07139f3 in lapic_ipi_vectored (vector=0, dest=0)\n"
"67:    at /usr/src/sys/i386/i386/local_apic.c:733\n"
"68:#10 0xc0718b23 in ipi_selected (cpus=1, ipi=1)\n"
"69:    at /usr/src/sys/i386/i386/mp_machdep.c:1115\n"
"70:#11 0xc057473e in kseq_notify (ke=0xcc05e360, cpu=0)\n"
"71:    at /usr/src/sys/kern/sched_ule.c:520\n"
"72:#12 0xc0575cad in sched_add (td=0xcbcf5c80)\n"
"73:    at /usr/src/sys/kern/sched_ule.c:1366\n"
"74:#13 0xc05666c6 in setrunqueue (td=0xcc05e360)\n"
"75:    at /usr/src/sys/kern/kern_switch.c:422\n"
"76:#14 0xc05752f4 in sched_wakeup (td=0xcbcf5c80)\n"
"77:    at /usr/src/sys/kern/sched_ule.c:999\n"
"78:#15 0xc056816c in setrunnable (td=0xcbcf5c80)\n"
"79:    at /usr/src/sys/kern/kern_synch.c:570\n"
"80:#16 0xc0567d53 in wakeup (ident=0xcbcf5c80)\n"
"81:    at /usr/src/sys/kern/kern_synch.c:411\n"
"82:#17 0xc05490a8 in exit1 (td=0xcbcf5b40, rv=0)\n"
"83:    at /usr/src/sys/kern/kern_exit.c:509\n"
"84:#18 0xc0548011 in sys_exit () at /usr/src/sys/kern/kern_exit.c:102\n"
"85:#19 0xc0720fd0 in syscall (frame=\n"
"86:      {tf_fs = 47, tf_es = 47, tf_ds = 47, tf_edi = 0, tf_esi = -1, "
"tf_ebp = -1077940712, tf_isp = -602075788, tf_ebx = 672411944, tf_edx = 10, "
"tf_ecx = 672411600, tf_eax = 1, tf_trapno = 12, tf_err = 2, tf_eip = "
"671899563, tf_cs = 31, tf_eflags = 642, tf_esp = -1077940740, tf_ss = 47})\n"
"87:    at /usr/src/sys/i386/i386/trap.c:1010\n"
"88:#20 0xc070ca4d in Xint0x80_syscall () at {standard input}:136\n"
"89:---Can't read userspace from dump, or kernel process---\n"
"90:<prompt>(kgdb)</prompt> <userinput>quit</userinput>"

#. (itstool) path: tip/para
#: book.translate.xml:8635
msgid ""
"If your system is crashing regularly and you are running out of disk space, "
"deleting old <filename>vmcore</filename> files in <filename>/var/crash</"
"filename> could save a considerable amount of disk space!"
msgstr ""
"چنانچه سامانهٔ شما مدام خراب می‌شود و حافظهٔ دیسک شما رو به پایان است، پاک "
"کردن پرونده‌های قدیمیِ <filename>vmcore</filename> در <filename>/var/crash</"
"filename> می‌تواند مقدار قابل توجهی از حافظهٔ شما را حفظ کند!"

#. (itstool) path: sect1/title
#: book.translate.xml:8642
msgid "On-Line Kernel Debugging Using DDB"
msgstr "اشکال‌زدایی برخط هسته با DDB"

#. (itstool) path: sect1/para
#: book.translate.xml:8644
msgid ""
"While <command>kgdb</command> as an off-line debugger provides a very high "
"level of user interface, there are some things it cannot do. The most "
"important ones being breakpointing and single-stepping kernel code."
msgstr ""
"با اینکه <command>kgdb</command> به‌عنوان یک اشکال‌زدای برون‌خط سطح بسیار "
"بالایی از رابط کاربری را ارائه می‌دهد، برخی کارها هستند که در انجام آنها "
"ناتوان است. مهم‌ترین آنها شامل نقطهٔ توقف و تک مرحله‌ای کردن کد هسته است."

#. (itstool) path: sect1/para
#: book.translate.xml:8649
msgid ""
"If you need to do low-level debugging on your kernel, there is an on-line "
"debugger available called DDB. It allows setting of breakpoints, single-"
"stepping kernel functions, examining and changing kernel variables, etc. "
"However, it cannot access kernel source files, and only has access to the "
"global and static symbols, not to the full debug information like "
"<command>kgdb</command> does."
msgstr ""
"چنانچه به اشکال‌زداییِ هسته در سطح پایین نیاز دارید، اشکال‌زدای برخطی به نام "
"DDB وجود دارد که تنظیم کردن نقاط توقف، تک مرحله‌ای کردن توابع هسته، آزمایش و "
"تغییر متغیرهای هسته، و ... را ممکن می‌سازد. هرچند، نمی‌تواند به پرونده‌های "
"منبع هسته دسترسی پیدا کند، و تنها به نمادهای ثابت و جهانی دسترسی دارد، نه به "
"اطلاعات کامل اشکال‌زدایی مانند <command>kgdb</command>."

#. (itstool) path: para/programlisting
#: book.translate.xml:8658
#, no-wrap
msgid "options KDB"
msgstr "options KDB"

#. (itstool) path: para/programlisting
#: book.translate.xml:8659
#, no-wrap
msgid "options DDB"
msgstr "options DDB"

#. (itstool) path: sect1/para
#: book.translate.xml:8656
msgid ""
"To configure your kernel to include DDB, add the options <_:programlisting-1/"
"> <_:programlisting-2/> to your config file, and rebuild. (See <link xlink:"
"href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/handbook/index.html\">The "
"FreeBSD Handbook</link> for details on configuring the FreeBSD kernel)."
msgstr ""
"برای اضافه کردن DDB به هستهٔ خود، گزینه‌های <_:programlisting-1/> <_:"
"programlisting-2/> را به پروندهٔ پیکربندی خود اضافه کنید، و آن را دوباره "
"بسازید. (<link xlink:href=\"@@URL_RELPREFIX@@/doc/en_US.ISO8859-1/books/"
"handbook/index.html\">کتاب راهنمای FreeBSD</link> را برای جزئیات بیشتر در "
"مورد پیکربندی هستهٔ FreeBSD ببینید)."

#. (itstool) path: sect1/para
#: book.translate.xml:8664
msgid ""
"Once your DDB kernel is running, there are several ways to enter DDB. The "
"first, and earliest way is to use the boot flag <option>-d</option>. The "
"kernel will start up in debug mode and enter DDB prior to any device "
"probing. Hence you can even debug the device probe/attach functions. To use "
"this, exit the loader's boot menu and enter <command>boot -d</command> at "
"the loader prompt."
msgstr ""
"هنگامی‌که هستهٔ DDB شما در حال اجرا است، روش‌های دیگری برای ورود به DDB است. "
"اولین و ابتدایی‌ترین روش، استفاده از نشانِ boot، یعنی <option>-d</option> "
"است. هسته در حالت اشکال‌زدایی آغاز می‌شود و پیش از هر کاوش‌کردنِ (probing) "
"دستگاهی وارد DDB می‌شود. از این رو حتی می‌توانید توابعِ probe/attach در "
"دستگاه را اشکال‌زدایی کنید. برای استفاده از آن، از صفحهٔ بوتِ بارکن (loader) "
"خارج شوید و <command>boot -d</command> را در پیام‌وارهٔ بارکن بنویسید."

#. (itstool) path: sect1/para
#: book.translate.xml:8672
msgid ""
"The second scenario is to drop to the debugger once the system has booted. "
"There are two simple ways to accomplish this. If you would like to break to "
"the debugger from the command prompt, simply type the command:"
msgstr ""
"حالت دوم زمانی است که سامانه هنگام بالا آمدن وارد اشکال‌زدا ‌شود. دو روش "
"ساده برای رسیدن به این ‌منظور وجود دارد. چنانچه تمایل به خروج از اشکال‌زدا "
"از طریق خط فرمان را دارید، به‌سادگی این دستور را وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8677
#, no-wrap
msgid "<prompt>#</prompt> <userinput>sysctl debug.kdb.enter=1</userinput>"
msgstr "<prompt>#</prompt> <userinput>sysctl debug.kdb.enter=1</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8679
msgid ""
"Alternatively, if you are at the system console, you may use a hot-key on "
"the keyboard. The default break-to-debugger sequence is <keycombo action="
"\"simul\"><keycap>Ctrl</keycap> <keycap>Alt</keycap><keycap>ESC</keycap></"
"keycombo>. For syscons, this sequence can be remapped and some of the "
"distributed maps out there do this, so check to make sure you know the right "
"sequence to use. There is an option available for serial consoles that "
"allows the use of a serial line BREAK on the console line to enter DDB "
"(<literal>options BREAK_TO_DEBUGGER</literal> in the kernel config file). It "
"is not the default since there are a lot of serial adapters around that "
"gratuitously generate a BREAK condition, for example when pulling the cable."
msgstr ""
"همچنین، اگر در پیشانهٔ سامانه هستید، می‌توانید از میان‌بر در صفحهٔ کلیدتان "
"استفاده کنید. ترتیب پیش‌فرض break-to-debugger، <keycombo action=\"simul\""
"><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>ESC</keycap></keycombo> "
"است. برای syscon ها، این ترتیب را می‌توان بازتخصیص کرد و برخی طرح‌ها نیز "
"برای همین کار موجود هستند، در نتیجه مطمئن شوید ترتیب درست برای این منظور را "
"بشناسید. گزینه‌ای برای پیشانه‌های سریال در دسترس است که امکان استفاده از خط "
"سریالِ BREAK در خط پیشانه برای ورود به DDB را می‌دهد (<literal>options "
"BREAK_TO_DEBUGGER</literal> در پروندهٔ پیکربندی هسته). این روش پیش‌فرض نیست "
"زیرا سازوارگرهای سریال بسیاری وجود دارند که به‌رایگان یک شرط BREAK ایجاد "
"می‌کنند، برای مثال در هنگام کشیدن کابل."

#. (itstool) path: sect1/para
#: book.translate.xml:8692
msgid ""
"The third way is that any panic condition will branch to DDB if the kernel "
"is configured to use it. For this reason, it is not wise to configure a "
"kernel with DDB for a machine running unattended."
msgstr ""
"روش سوم از این قرار است که چنانچه هسته بدین منظور پیکربندی شده باشد، هر کدام "
"از شروط وحشت به DDB انشعاب کنند. به‌همین دلیل، پیکربندی هسته با DDB برای "
"دستگاهی‌که در حالت اجرای بی‌متصدی است عاقلانه نیست."

#. (itstool) path: sect1/para
#: book.translate.xml:8696
msgid "To obtain the unattended functionality, add:"
msgstr "برای بدست آوردن عملکرد بی‌متصدی، این را اضافه کنید به:"

#. (itstool) path: sect1/programlisting
#: book.translate.xml:8698
#, no-wrap
msgid "options\tKDB_UNATTENDED"
msgstr "options\tKDB_UNATTENDED"

#. (itstool) path: sect1/para
#: book.translate.xml:8700
msgid "to the kernel configuration file and rebuild/reinstall."
msgstr "به پروندهٔ پیکربندی هسته و مجدداً بسازید/نصب کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:8702
msgid ""
"The DDB commands roughly resemble some <command>gdb</command> commands. The "
"first thing you probably need to do is to set a breakpoint:"
msgstr ""
"دستورهای DDB تقریباً شبیه به برخی دستورهای <command>gdb</command> هستند. "
"اولین کاری که احتمالاً لازم است انجام دهید ایجاد یک نقطهٔ توقف است:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8706
#, no-wrap
msgid "<userinput>break function-name address</userinput>"
msgstr "<userinput>break function-name address</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8708
msgid ""
"Numbers are taken hexadecimal by default, but to make them distinct from "
"symbol names; hexadecimal numbers starting with the letters <literal>a-f</"
"literal> need to be preceded with <literal>0x</literal> (this is optional "
"for other numbers). Simple expressions are allowed, for example: "
"<literal>function-name + 0x103</literal>."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:8714
msgid "To exit the debugger and continue execution, type:"
msgstr "به‌منظور خروج از اشکال‌زدا و ادامهٔ اجرا، بنویسید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8717
#, no-wrap
msgid "<userinput>continue</userinput>"
msgstr "<userinput>continue</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8719
msgid "To get a stack trace of the current thread, use:"
msgstr "برای بدست آوردن رد پشتهٔ بند جاری، از این استفاده کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8721
#, no-wrap
msgid "<userinput>trace</userinput>"
msgstr "<userinput>trace</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8723
msgid ""
"To get a stack trace of an arbitrary thread, specify a process ID or thread "
"ID as a second argument to <command>trace</command>."
msgstr ""
"برای بدست آوردن رد پشتهٔ یک بند اختیاری، شناسهٔ فرآیند یا شناسهٔ بند را به‌"
"عنوان دومین برهان در <command>trace</command> تعیین کنید."

#. (itstool) path: sect1/para
#: book.translate.xml:8727
msgid "If you want to remove a breakpoint, use"
msgstr "چنانچه می‌خواهید نقطهٔ توقف را حذف کنید، وارد کنید"

#. (itstool) path: sect1/screen
#: book.translate.xml:8729
#, no-wrap
msgid ""
"<userinput>del</userinput>\n"
"<userinput>del address-expression</userinput>"
msgstr ""
"<userinput>del</userinput>\n"
"<userinput>del address-expression</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8732
msgid ""
"The first form will be accepted immediately after a breakpoint hit, and "
"deletes the current breakpoint. The second form can remove any breakpoint, "
"but you need to specify the exact address; this can be obtained from:"
msgstr ""
"اولین قالب پس از اصابت نقطهٔ توقف به‌سرعت پذیرفته می‌شود، و نقطهٔ توقف جاری "
"را حذف می‌کند. دومین قالب می‌تواند هر نقطهٔ توقفی را حذف کند، اما لازم است "
"که نشانی دقیق را تعیین کنید؛ این امر را می‌توان بدین شکل بدست آورد:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8737
#, no-wrap
msgid "<userinput>show b</userinput>"
msgstr "<userinput>show b</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8739
msgid "or:"
msgstr "یا:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8741
#, no-wrap
msgid "<userinput>show break</userinput>"
msgstr "<userinput>show break</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8743
msgid "To single-step the kernel, try:"
msgstr "برای تک مرحله‌ای کردن هسته، وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8745
#, no-wrap
msgid "<userinput>s</userinput>"
msgstr "<userinput>s</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8747
msgid ""
"This will step into functions, but you can make DDB trace them until the "
"matching return statement is reached by:"
msgstr ""
"این مرحله وارد توابع می‌شود، اما می‌توانید DDB را وادار به ردیابی آنها کنید "
"تا زمانی‌که عبارت بازگشتِ تطابق‌یافته برسد به:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8750
#, no-wrap
msgid "<userinput>n</userinput>"
msgstr "<userinput>n</userinput>"

#. (itstool) path: note/para
#: book.translate.xml:8753
msgid ""
"This is different from <command>gdb</command>'s <command>next</command> "
"statement; it is like <command>gdb</command>'s <command>finish</command>. "
"Pressing <keycap>n</keycap> more than once will cause a continue."
msgstr ""
"این عبارت از عبارتِ <command>next</command> در <command>gdb</command> متفاوت "
"است؛ مانند <command>finish</command> در <command>gdb</command> است. فشردن "
"کلید <keycap>n</keycap> بیش از یکبار باعث ادامه‌دادن می‌شود."

#. (itstool) path: para/screen
#: book.translate.xml:8761
#, no-wrap
msgid ""
"<userinput>x/wx 0xf0133fe0,40</userinput>\n"
"<userinput>x/hd db_symtab_space</userinput>\n"
"<userinput>x/bc termbuf,10</userinput>\n"
"<userinput>x/s stringbuf</userinput>"
msgstr ""
"<userinput>x/wx 0xf0133fe0,40</userinput>\n"
"<userinput>x/hd db_symtab_space</userinput>\n"
"<userinput>x/bc termbuf,10</userinput>\n"
"<userinput>x/s stringbuf</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8759
msgid ""
"To examine data from memory, use (for example): <_:screen-1/> for word/"
"halfword/byte access, and hexadecimal/decimal/character/ string display. The "
"number after the comma is the object count. To display the next 0x10 items, "
"simply use:"
msgstr ""
"برای بررسی داده‌ها از حافظه، (برای مثال) از: <_:screen-1/> برای دسترسیِ "
"کلمه/نیم‌کلمه/بایت، و نمایش دستگاه شانزده‌شانزدهی/ده‌دهی/نویسه/رشته استفاده "
"کنید. عددی که بعد از ویرگول می‌آید هدف شمارش است. برای نمایش مواردِ 0x10 "
"بعدی، به‌سادگی از این استفاده کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8770
#, no-wrap
msgid "<userinput>x ,10</userinput>"
msgstr "<userinput>x ,10</userinput>"

#. (itstool) path: para/screen
#: book.translate.xml:8774
#, no-wrap
msgid "<userinput>x/ia foofunc,10</userinput>"
msgstr "<userinput>x/ia foofunc,10</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8772
msgid ""
"Similarly, use <_:screen-1/> to disassemble the first 0x10 instructions of "
"<function>foofunc</function>, and display them along with their offset from "
"the beginning of <function>foofunc</function>."
msgstr ""
"به همین ترتیب، از <_:screen-1/> برای ناهمگذاریِ راهنمایی‌های ابتداییِ 0x10 "
"از <function>foofunc</function> استفاده کنید، و آنها را به‌همراه جابجایی‌شان "
"از ابتدای <function>foofunc</function> نمایش دهید."

#. (itstool) path: sect1/para
#: book.translate.xml:8780
msgid "To modify memory, use the write command:"
msgstr "برای ایجاد تغییر در حافظه، از دستور write استفاده کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8782
#, no-wrap
msgid ""
"<userinput>w/b termbuf 0xa 0xb 0</userinput>\n"
"<userinput>w/w 0xf0010030 0 0</userinput>"
msgstr ""
"<userinput>w/b termbuf 0xa 0xb 0</userinput>\n"
"<userinput>w/w 0xf0010030 0 0</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8785
msgid ""
"The command modifier (<literal>b</literal>/<literal>h</literal>/<literal>w</"
"literal>) specifies the size of the data to be written, the first following "
"expression is the address to write to and the remainder is interpreted as "
"data to write to successive memory locations."
msgstr ""
"پیرایندهٔ "
"دستور<literal>b</literal>/<literal>h</literal>/<literal>w</literal>) اندازهٔ "
"داده‌هایی که نوشته می‌شوند را تعیین می‌کند، اولین عبارت پیش رو نشانی‌ای است "
"که در آن نوشته می‌شود و باقی‌مانده به‌عنوان داده‌ای که در مکان‌های حافظهٔ پی "
"در پی نوشته می‌شود تفسیر شده است."

#. (itstool) path: sect1/para
#: book.translate.xml:8791
msgid "If you need to know the current registers, use:"
msgstr "چنانچه نیاز به دانستن ثبات‌های جاری دارید، وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8793
#, no-wrap
msgid "<userinput>show reg</userinput>"
msgstr "<userinput>show reg</userinput>"

#. (itstool) path: para/screen
#: book.translate.xml:8797
#, no-wrap
msgid "<userinput>p $eax</userinput>"
msgstr "<userinput>p $eax</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8795
msgid ""
"Alternatively, you can display a single register value by e.g. <_:screen-1/> "
"and modify it by:"
msgstr ""
"همچنین، می‌توانید مقدار یک ثبات را بدین شکل نمایش e.g. <_:screen-1/> و تغییر "
"دهید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8801
#, no-wrap
msgid "<userinput>set $eax new-value</userinput>"
msgstr "<userinput>set $eax new-value</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8803
msgid "Should you need to call some kernel functions from DDB, simply say:"
msgstr ""
"درصورت نیاز به فراخوانی برخی از توابع هسته توسط DDB، به‌سادگی وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8806
#, no-wrap
msgid "<userinput>call func(arg1, arg2, ...)</userinput>"
msgstr "<userinput>call func(arg1, arg2, ...)</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8808
msgid "The return value will be printed."
msgstr "مقدار بازگشتی چاپ می‌شود."

#. (itstool) path: sect1/para
#: book.translate.xml:8810
msgid ""
"For a <citerefentry><refentrytitle>ps</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry> style summary of all running processes, use:"
msgstr ""
"برای خلاصه‌ای از تمام فرآیندهای در حال اجرا به سبک <citerefentry><refentrytit"
"le>ps</refentrytitle><manvolnum>1</manvolnum></citerefentry>، بدین شکل وارد "
"کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8812
#, no-wrap
msgid "<userinput>ps</userinput>"
msgstr "<userinput>ps</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8814
msgid ""
"Now you have examined why your kernel failed, and you wish to reboot. "
"Remember that, depending on the severity of previous malfunctioning, not all "
"parts of the kernel might still be working as expected. Perform one of the "
"following actions to shut down and reboot your system:"
msgstr ""
"حال، دلیل خراب شدن هستهٔ خود را مورد بررسی قرار دادید و می‌توانید سامانه را "
"مجدد راه‌اندازی کنید. به‌یاد داشته باشید که با توجه به شدت خرابی پیشین، ممکن "
"است تمام بخش‌های هسته همانطور که انتظار می‌رود کار نکنند. یک کدام از اعمال "
"پیش رو را انجام دهید تا سامانه را خاموش و مجدد راه‌اندازی کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8820
#, no-wrap
msgid "<userinput>panic</userinput>"
msgstr "<userinput>panic</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8822
msgid ""
"This will cause your kernel to dump core and reboot, so you can later "
"analyze the core on a higher level with <citerefentry><refentrytitle>kgdb</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry>."
msgstr ""
"این باعث می‌شود تا هستهٔ شما حافظه را روبرداری کند و مجدد راه اندازی شود، در "
"نتیجه بعدتر می‌توانید حافظه/هسته را توسط "
"<citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> در مرحلهٔ بالاتری بررسی کنید."

#. (itstool) path: sect1/screen
#: book.translate.xml:8825
#, no-wrap
msgid "<userinput>call boot(0)</userinput>"
msgstr "<userinput>call boot(0)</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8827
msgid ""
"Might be a good way to cleanly shut down the running system, "
"<function>sync()</function> all disks, and finally, in some cases, reboot. "
"As long as the disk and filesystem interfaces of the kernel are not damaged, "
"this could be a good way for an almost clean shutdown."
msgstr ""
"ممکن است راه مناسبی برای تمیز خاموش کردن سامانهٔ در حال اجرا باشد، تمام دیسک‌"
"ها را <function>sync()</function> کنید، در برخی موارد، مجدد راه اندازی کنید. "
"تا آنجا که رابط‌های دیسک و سامانهٔ پروندهٔ هسته آسیب ندیده باشند، این روش می‌"
"تواند راه مناسبی برای خاموش کردن تقریباً تمیز باشد."

#. (itstool) path: sect1/screen
#: book.translate.xml:8833
#, no-wrap
msgid "<userinput>reset</userinput>"
msgstr "<userinput>reset</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8835
msgid ""
"This is the final way out of disaster and almost the same as hitting the Big "
"Red Button."
msgstr ""
"این آخرین راه برای خروج از فاجعه است و تقریباً مانند فشردن دکمهٔ قرمز بزرگ "
"است."

#. (itstool) path: sect1/para
#: book.translate.xml:8838
msgid "If you need a short command summary, simply type:"
msgstr "اگر نیاز به خلاصه‌ای کوتاه از دستور دارید، به‌سادگی بنویسید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8840
#, no-wrap
msgid "<userinput>help</userinput>"
msgstr "<userinput>help</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8842
msgid ""
"It is highly recommended to have a printed copy of the "
"<citerefentry><refentrytitle>ddb</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> manual page ready for a debugging session. Remember that it is "
"hard to read the on-line manual while single-stepping the kernel."
msgstr ""
"به‌شدت پیشنهاد می‌شود که یک نسخهٔ چاپ شده از صفحهٔ راهنمای "
"<citerefentry><refentrytitle>ddb</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> برای جلسهٔ اشکال‌زدایی داشته باشید. به یاد داشته باشید که "
"خواندن راهنمای برخط هنگام تک مرحله‌ای کردن هسته سخت است."

#. (itstool) path: sect1/title
#: book.translate.xml:8849
msgid "On-Line Kernel Debugging Using Remote GDB"
msgstr "اشکال‌زدایی برخط هسته با GDB از راه دور"

#. (itstool) path: sect1/para
#: book.translate.xml:8851
msgid ""
"This feature has been supported since FreeBSD 2.2, and it is actually a very "
"neat one."
msgstr ""
"این امکان از زمان FreeBSD 2.2 پشتیبانی می‌شود، و در واقع یک امکان بسیار "
"هوشمندانه است."

#. (itstool) path: sect1/para
#: book.translate.xml:8854
msgid ""
"GDB has already supported <emphasis>remote debugging</emphasis> for a long "
"time. This is done using a very simple protocol along a serial line. Unlike "
"the other methods described above, you will need two machines for doing "
"this. One is the host providing the debugging environment, including all the "
"sources, and a copy of the kernel binary with all the symbols in it, and the "
"other one is the target machine that simply runs a similar copy of the very "
"same kernel (but stripped of the debugging information)."
msgstr ""
"GDB مدت‌هاست که <emphasis>اشکال‌زدایی از راه دور</emphasis> را پشتیبانی می‌"
"کند. این امر با استفاده از یک قرارداد بسیار ساده در کنار خط سریال صورت می‌"
"گیرد. برخلاف سایر روش‌هایی که در بالا تشریح شده است، شما برای انجام آن نیاز "
"به دو دستگاه دارید. یکی میزبانی است که محیط اشکال‌زدایی را فراهم می‌کند، "
"شامل تمام منابع، و یک نسخه از دودوییِ هسته با تمام نمادها درونش می‌شود، و "
"دیگری دستگاه هدفی است که یک نسخهٔ مشابه از همان هسته را اجرا می‌کند (اما "
"فاقد اطلاعات اشکال‌زدایی)."

#. (itstool) path: sect1/para
#: book.translate.xml:8863
msgid ""
"You should configure the kernel in question with <command>config -g</"
"command> if building the <quote>traditional</quote> way. If building the "
"<quote>new</quote> way, make sure that <literal>makeoptions DEBUG=-g</"
"literal> is in the configuration. In both cases, include <option>DDB</"
"option> in the configuration, and compile it as usual. This gives a large "
"binary, due to the debugging information. Copy this kernel to the target "
"machine, strip the debugging symbols off with <command>strip -x</command>, "
"and boot it using the <option>-d</option> boot option. Connect the serial "
"line of the target machine that has \"flags 080\" set on its uart device to "
"any serial line of the debugging host. See "
"<citerefentry><refentrytitle>uart</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> for information on how to set the flags on an uart device. "
"Now, on the debugging machine, go to the compile directory of the target "
"kernel, and start <command>gdb</command>:"
msgstr ""
"اگر از روش ساخت <quote>سنتی</quote>استفاده می‌کنید باید هستهٔ مورد بحث را با "
"<command>config -g</command> پیکربندی کنید. اگر از روش <quote>جدید</quote> "
"استفاده می‌کنید، اطمینان پیدا کنید که <literal>makeoptions DEBUG=-g</"
"literal> در پیکربندی است. در هر دو مورد، <option>DDB</option> را در پیکربندی "
"اضافه کنید، و مانند همیشه آن را همگردانی کنید. با توجه به اطلاعات "
"اشکال‌زدایی، حاصل این امر یک باینتریِ بزرگ است. این هسته را در دستگاه هدف "
"کپی کنید، نماد‌های اشکال‌زدایی را با <command>strip -x</command> حذف کنید، و "
"آن را با استفاده از گزینهٔ بوتِ <option>-d</option> بوت کنید. خط سریال "
"دستگاه هدف را که \"flags 080\" را بر روی دستگاه uart خود تنظیم کرده است به "
"هر خط سریال از میزبان اشکال‌زدایی متصل کنید. "
"<citerefentry><refentrytitle>uart</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> را برای اطلاعات بیشتر پیرامون چگونگی تنظیم کردن نشان‌ها در "
"دستگاه uart ببینید. اکنون، در دستگاه اشکال‌زدایی، بروید به مسیر همگردانیِ "
"هستهٔ مقصد، و <command>gdb</command> را آغاز کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8878
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>kgdb kernel</userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details.\n"
"GDB 4.16 (i386-unknown-freebsd),\n"
"Copyright 1996 Free Software Foundation, Inc...\n"
"<prompt>(kgdb)</prompt> "
msgstr ""
"<prompt>%</prompt> <userinput>kgdb kernel</userinput>\n"
"GDB is free software and you are welcome to distribute copies of it\n"
" under certain conditions; type \"show copying\" to see the conditions.\n"
"There is absolutely no warranty for GDB; type \"show warranty\" for details."
"\n"
"GDB 4.16 (i386-unknown-freebsd),\n"
"Copyright 1996 Free Software Foundation, Inc...\n"
"<prompt>(kgdb)</prompt> "

#. (itstool) path: sect1/para
#: book.translate.xml:8886
msgid ""
"Initialize the remote debugging session (assuming the first serial port is "
"being used) by:"
msgstr ""
"نشست اشکال‌زدایی از راه دور را آغاز کنید (با این نظرداشت که اولین درگاه در "
"حال استفاده است):"

#. (itstool) path: sect1/screen
#: book.translate.xml:8889
#, no-wrap
msgid "<prompt>(kgdb)</prompt> <userinput>target remote /dev/cuau0</userinput>"
msgstr "<prompt>(kgdb)</prompt> <userinput>target remote /dev/cuau0</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8891
msgid ""
"Now, on the target host (the one that entered DDB right before even starting "
"the device probe), type:"
msgstr ""
"حال، در میزبان مورد نظر (همان که درست قبل از آغاز کاوشِ (probe) دستگاه وارد "
"DDB شد)، وارد کنید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8894
#, no-wrap
msgid ""
"Debugger(\"Boot flags requested debugger\")\n"
"Stopped at Debugger+0x35: movb\t$0, edata+0x51bc\n"
"<prompt>db&gt;</prompt> <userinput>gdb</userinput>"
msgstr ""
"Debugger(\"Boot flags requested debugger\")\n"
"Stopped at Debugger+0x35: movb\t$0, edata+0x51bc\n"
"<prompt>db&gt;</prompt> <userinput>gdb</userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:8898
msgid "DDB will respond with:"
msgstr "DDB چنین پاسخ می‌دهد:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8900
#, no-wrap
msgid "Next trap will enter GDB remote protocol mode"
msgstr "Next trap will enter GDB remote protocol mode"

#. (itstool) path: sect1/para
#: book.translate.xml:8902
msgid ""
"Every time you type <command>gdb</command>, the mode will be toggled between "
"remote GDB and local DDB. In order to force a next trap immediately, simply "
"type <command>s</command> (step). Your hosting GDB will now gain control "
"over the target kernel:"
msgstr ""
"هر زمان بنویسید <command>gdb</command>، حالت بین GDB از راه دور و DDB محلی "
"تعویض می‌شود. برای آنکه تلهٔ بعدی را بلافاصله تحمیل کنید، کافیست بنویسید "
"<command>s</command> (step). حال GDB میزبان شما نظارت بر هستهٔ مورد نظر را "
"بدست می‌گیرد:"

#. (itstool) path: sect1/screen
#: book.translate.xml:8907
#, no-wrap
msgid ""
"Remote debugging using /dev/cuau0\n"
"Debugger (msg=0xf01b0383 \"Boot flags requested debugger\")\n"
"    at ../../i386/i386/db_interface.c:257\n"
"<prompt>(kgdb)</prompt>"
msgstr ""
"Remote debugging using /dev/cuau0\n"
"Debugger (msg=0xf01b0383 \"Boot flags requested debugger\")\n"
"    at ../../i386/i386/db_interface.c:257\n"
"<prompt>(kgdb)</prompt>"

#. (itstool) path: sect1/para
#: book.translate.xml:8912
msgid ""
"You can use this session almost as any other GDB session, including full "
"access to the source, running it in gud-mode inside an Emacs window (which "
"gives you an automatic source code display in another Emacs window), etc."
msgstr ""
"می‌توانید این جلسه را تقریباً مانند هر جلسهٔ دیگرِ GDB استفاده کنید، از جمله "
"دسترسی کامل به منبع، اجرای آن در حالت gud درون یک پنجرهٔ Emacs (که به شما یک "
"کد منبع خودکار در پنجرهٔ Emacs دیگر نمایش می‌دهد)، و غیره ... ."

#. (itstool) path: sect1/title
#: book.translate.xml:8919
msgid "Debugging a Console Driver"
msgstr "اشکال‌زدایی گردانندهٔ پیشانه"

#. (itstool) path: sect1/para
#: book.translate.xml:8921
msgid ""
"Since you need a console driver to run DDB on, things are more complicated "
"if the console driver itself is failing. You might remember the use of a "
"serial console (either with modified boot blocks, or by specifying <option>-"
"h</option> at the <prompt>Boot:</prompt> prompt), and hook up a standard "
"terminal onto your first serial port. DDB works on any configured console "
"driver, including a serial console."
msgstr ""
"از آنجاکه شما به یک گردانندهٔ پیشانه نیاز دارید تا DDB را بر روی آن اجرا "
"کنید، اگر گردانندهٔ پیشانه خراب شود مسائل پیچیده‌تر می‌شود. ممکن است استفاده "
"از پیشانهٔ سریال (یا با قطعه‌های آغازِ تغییریافته، یا با مشخص کردنِ "
"<option>-h</option> در پیام وارهٔ <prompt>Boot:</prompt>)، و متصل کردن یک "
"پایانهٔ استاندارد به اولین درگاه سریال خود را به‌ خاطر داشته باشید. DDB بر "
"روی هر گردانندهٔ پیشانهٔ پیکر‌بندی‌شده کار می‌کند."

#. (itstool) path: sect1/title
#: book.translate.xml:8931
msgid "Debugging Deadlocks"
msgstr "اشکال‌زدایی بن‌بست‌ها (Deadlocks)"

#. (itstool) path: sect1/para
#: book.translate.xml:8933
msgid ""
"You may experience so called deadlocks, a situation where a system stops "
"doing useful work. To provide a helpful bug report in this situation, use "
"<citerefentry><refentrytitle>ddb</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> as described in the previous section. Include the output of "
"<command>ps</command> and <command>trace</command> for suspected processes "
"in the report."
msgstr ""
"ممکن است این به‌اصطلاح بن‌بست‌ها (deadlocks) را تجربه کنید، موقعیتی که در آن "
"یک سامانه انجام دادن کارهای مفید را متوقف می‌سازد. برای ارائهٔ یک گزارش "
"اشکال مفید در چنین شرایطی، طبق توضیحات آمده در بخش پیشین از "
"<citerefentry><refentrytitle>ddb</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> استفاده کنید. خروجیِ <command>ps</command> و <command>trace</"
"command> را برای فرآیندهای مشکوک در گزارش قرار دهید."

#. (itstool) path: sect1/para
#: book.translate.xml:8940
msgid ""
"If possible, consider doing further investigation. The recipe below is "
"especially useful if you suspect that a deadlock occurs in the VFS layer. "
"Add these options to the kernel configuration file."
msgstr ""
"اگر ممکن است، تحقیقات بیشتری را مد نظر قرار دهید. اگر مشکوک به رخ دادن بن‌"
"بست در لایهٔ VFS هستید، رهنمود زیر به‌طور خاص مناسب است. این گزینه‌ها را به "
"پروندهٔ پیکربندیِ هسته اضافه کنید."

#. (itstool) path: sect1/programlisting
#: book.translate.xml:8945
#, no-wrap
msgid ""
"makeoptions \tDEBUG=-g\n"
"options \tINVARIANTS\n"
"options \tINVARIANT_SUPPORT\n"
"options \tWITNESS\n"
"options \tWITNESS_SKIPSPIN\n"
"options \tDEBUG_LOCKS\n"
"options \tDEBUG_VFS_LOCKS\n"
"options \tDIAGNOSTIC"
msgstr ""
"makeoptions \tDEBUG=-g\n"
"options \tINVARIANTS\n"
"options \tINVARIANT_SUPPORT\n"
"options \tWITNESS\n"
"options \tWITNESS_SKIPSPIN\n"
"options \tDEBUG_LOCKS\n"
"options \tDEBUG_VFS_LOCKS\n"
"options \tDIAGNOSTIC"

#. (itstool) path: sect1/para
#: book.translate.xml:8954
msgid ""
"When a deadlock occurs, in addition to the output of the <command>ps</"
"command> command, provide information from the <command>show pcpu</command>, "
"<command>show allpcpu</command>, <command>show locks</command>, "
"<command>show alllocks</command>, <command>show lockedvnods</command> and "
"<command>alltrace</command>."
msgstr ""
"هنگامی‌که بن‌بست رخ می‌دهد، افزون‌بر خروجی دستور <command>ps</command>، "
"اطلاعات به‌دست آمده از <command>show pcpu</command>، <command>show "
"allpcpu</command>، <command>show locks</command>، <command>show "
"alllocks</command>، <command>show lockedvnods</command> و <command>alltrace</"
"command> را ارائه دهید."

#. (itstool) path: sect1/para
#: book.translate.xml:8961
msgid ""
"To obtain meaningful backtraces for threaded processes, use <command>thread "
"thread-id</command> to switch to the thread stack, and do a backtrace with "
"<command>where</command>."
msgstr ""
"برای به‌دست آوردن عقب‌گردهای بامعنا برای فرآیندهای بند‌دار، از "
"<command>thread thread-id</command> برای تعویض به پشتهٔ بند استفاده کنید، و "
"یک عقب‌گرد توسط <command>where</command> انجام دهید."

#. (itstool) path: sect1/title
#: book.translate.xml:8967
msgid "Kernel debugging with Dcons"
msgstr "اشکال‌زدایی هسته با Dcons"

#. (itstool) path: sect1/para
#: book.translate.xml:8969
msgid ""
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> is a very simple console driver that is not directly connected "
"with any physical devices. It just reads and writes characters from and to a "
"buffer in a kernel or loader. Due to its simple nature, it is very useful "
"for kernel debugging, especially with a <trademark class=\"registered"
"\">FireWire</trademark> device. Currently, FreeBSD provides two ways to "
"interact with the buffer from outside of the kernel using "
"<citerefentry><refentrytitle>dconschat</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>."
msgstr ""
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> یک گردانندهٔ پیشانهٔ بسیار ساده است که به‌طور مستقیم با هیچ "
"وسیلهٔ فیزیکی‌ای در ارتباط نیست. فقط نویسه‌ها را از و در یک میان‌گیر در هسته "
"یا بارکن می‌نویسد و می‌خواند. به‌خاطر طبیعت سادهٔ آن، این امر برای اشکال‌"
"زدایی هسته بسیار مفید است، مخصوصاً با یک دستگاه <trademark class=\"registered"
"\">FireWire</trademark>. در حال حاضر، FreeBSD دو روش برای تعامل با میان‌گیر "
"از خارج از هسته دارد، به‌وسیلهٔ <citerefentry><refentrytitle>dconschat</refen"
"trytitle><manvolnum>8</manvolnum></citerefentry>."

#. (itstool) path: sect2/title
#: book.translate.xml:8978
msgid "Dcons over <trademark class=\"registered\">FireWire</trademark>"
msgstr "Dcons بر روی <trademark class=\"registered\">FireWire</trademark>"

#. (itstool) path: sect2/para
#: book.translate.xml:8980
msgid ""
"Most <trademark class=\"registered\">FireWire</trademark> (IEEE1394) host "
"controllers are based on the <acronym>OHCI</acronym> specification that "
"supports physical access to the host memory. This means that once the host "
"controller is initialized, we can access the host memory without the help of "
"software (kernel). We can exploit this facility for interaction with "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry>. <citerefentry><refentrytitle>dcons</"
"refentrytitle><manvolnum>4</manvolnum></citerefentry> provides similar "
"functionality as a serial console. It emulates two serial ports, one for the "
"console and <acronym>DDB</acronym>, the other for <acronym>GDB</acronym>. "
"Because remote memory access is fully handled by the hardware, the "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> buffer is accessible even when the system crashes."
msgstr ""
"بیشتر نظارت‌کنندگانِ میزبانِ <trademark class=\"registered\">FireWire</"
"trademark> (IEEE1394) بر مبنای مشخصات <acronym>OHCI</acronym> هستند که "
"دسترسی فیزیکی به حافظهٔ میزبان را پشتیبانی می‌کند. این بدان معناست که هنگامی‌"
"که نظارت‌کنندهٔ میزبان آغاز شده است، ما می‌توانیم بدون کمک‌گیری از نرم‌افزار "
"(هسته)، به حافظهٔ میزبان دسترسی پیدا کنیم. می‌توانیم این امکان را برای تعامل "
"با "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> به‌کار گیریم. "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> کارکردی مشابه پیشانهٔ سریال ارائه می‌دهد. دو درگاه سریال را "
"شبیه‌سازی می‌کند، یکی برای پیشانه و <acronym>DDB</acronym>، دیگری برای "
"<acronym>GDB</acronym>. زیرا دسترسی حافظهٔ از راه دور به‌طور کامل توسط سخت‌"
"افزار مدیریت می‌شود، میان‌گیرِ "
"‌<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> حتی زمانی‌که سامانه از کار افتاده باشد نیز دسترسی‌پذیر است."

#. (itstool) path: sect2/para
#: book.translate.xml:8993
msgid ""
"<trademark class=\"registered\">FireWire</trademark> devices are not limited "
"to those integrated into motherboards. <acronym>PCI</acronym> cards exist "
"for desktops, and a cardbus interface can be purchased for laptops."
msgstr ""
"دستگاه‌های <trademark class=\"registered\">FireWire</trademark> محدود به "
"آنهایی که با بردهای اصلی ادغام شده‌اند نیستند. کارت‌های <acronym>PCI</"
"acronym> برای رومیزی‌ها در دسترس هستند، و می‌توان یک رابط cardbus برای "
"لپ‌تاپ‌ها سفارش داد."

#. (itstool) path: sect3/title
#: book.translate.xml:8999
msgid ""
"Enabling <trademark class=\"registered\">FireWire</trademark> and Dcons "
"support on the target machine"
msgstr ""
"فعال‌سازی پشتیبانی <trademark class=\"registered\">FireWire</trademark> و "
"Dcons بر روی دستگاه هدف"

#. (itstool) path: sect3/para
#: book.translate.xml:9002
msgid ""
"To enable <trademark class=\"registered\">FireWire</trademark> and Dcons "
"support in the kernel of the <emphasis>target machine</emphasis>:"
msgstr ""
"برای فعال‌سازی پشتیبانی <trademark class=\"registered\">FireWire</trademark> "
"و Dcons در هستهٔ <emphasis>دستگاه هدف</emphasis>:"

#. (itstool) path: listitem/para
#: book.translate.xml:9007
msgid ""
"Make sure your kernel supports <literal>dcons</literal>, "
"<literal>dcons_crom</literal> and <literal>firewire</literal>. "
"<literal>Dcons</literal> should be statically linked with the kernel. For "
"<literal>dcons_crom</literal> and <literal>firewire</literal>, modules "
"should be OK."
msgstr ""
"اطمینان حاصل کنید که هستهٔ شما <literal>dcons</literal> "
"،<literal>dcons_crom</literal> و <literal>firewire</literal> را پشتیبانی "
"کند. <literal>Dcons</literal> باید به‌طور ثابت با هسته پیوند داشته باشد. "
"برای <literal>dcons_crom</literal> و <literal>firewire</literal>، ماژول‌ها "
"باید مناسب باشند."

#. (itstool) path: listitem/para
#: book.translate.xml:9016
msgid ""
"Make sure physical <acronym>DMA</acronym> is enabled. You may need to add "
"<literal>hw.firewire.phydma_enable=1</literal> to <filename>/boot/loader."
"conf</filename>."
msgstr ""
"اطمینان حاصل کنید که <acronym>DMA</acronym> فیزیکی فعال باشد. شاید نیاز باشد "
"تا <literal>hw.firewire.phydma_enable=1</literal> را به <filename>/boot/"
"loader.conf</filename> اضافه کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:9022
msgid "Add options for debugging."
msgstr "گزینه‌هایی به‌منظور اشکال‌زدایی اضافه کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:9025
msgid ""
"Add <literal>dcons_gdb=1</literal> in <filename>/boot/loader.conf</filename> "
"if you use GDB over <trademark class=\"registered\">FireWire</trademark>."
msgstr ""
"چنانچه از GDB بر روی <trademark class=\"registered\">FireWire</trademark> "
"استفاده می‌کنید، <literal>dcons_gdb=1</literal> را در <filename>/boot/loader."
"conf</filename> اضافه کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:9030
msgid "Enable <literal>dcons</literal> in <filename>/etc/ttys</filename>."
msgstr ""
"<literal>dcons</literal> را در <filename>/etc/ttys</filename> فعال کنید."

#. (itstool) path: listitem/para
#: book.translate.xml:9034
msgid ""
"Optionally, to force <literal>dcons</literal> to be the high-level console, "
"add <literal>hw.firewire.dcons_crom.force_console=1</literal> to "
"<filename>loader.conf</filename>."
msgstr ""
"در صورت تمایل، برای وادار کردنِ <literal>dcons</literal> به پیشانهٔ سطح بالا،"
" مقدار <literal>hw.firewire.dcons_crom.force_console=1</literal> را در "
"<filename>loader.conf</filename> اضافه کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:9041
msgid ""
"To enable <trademark class=\"registered\">FireWire</trademark> and Dcons "
"support in <citerefentry><refentrytitle>loader</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> on i386 or amd64:"
msgstr ""
"به‌منظور فعال کردن پشتیبانیِ <trademark class=\"registered\">FireWire</"
"trademark> و Dcons در "
"<citerefentry><refentrytitle>loader</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> بر روی i386 یا amd64:"

#. (itstool) path: sect3/para
#: book.translate.xml:9044
msgid ""
"Add <literal>LOADER_FIREWIRE_SUPPORT=YES</literal> in <filename>/etc/make."
"conf</filename> and rebuild <citerefentry><refentrytitle>loader</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>:"
msgstr ""
"<literal>LOADER_FIREWIRE_SUPPORT=YES</literal> را در <filename>/etc/make."
"conf</filename> اضافه کنید و "
"<citerefentry><refentrytitle>loader</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> را دوباره بسازید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9049
#, no-wrap
msgid "<prompt>#</prompt> <userinput>cd /sys/boot/i386 &amp;&amp; make clean &amp;&amp; make &amp;&amp; make install</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>cd /sys/boot/i386 &amp;&amp; make clean "
"&amp;&amp; make &amp;&amp; make install</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9051
msgid ""
"To enable <citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> as an active low-level console, add "
"<literal>boot_multicons=\"YES\"</literal> to <filename>/boot/loader.conf</"
"filename>."
msgstr ""
"برای فعال‌سازی "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> به‌عنوان یک پیشانهٔ سطح پایینِ فعال، <literal>boot_multicons="
"\"YES\"</literal> را در <filename>/boot/loader.conf</filename> اضافه کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:9055
msgid ""
"Here are a few configuration examples. A sample kernel configuration file "
"would contain:"
msgstr ""
"در اینجا چند نمونه پیکربندی آمده است. یک نمونه پروندهٔ پیکربندی هستهٔ ساده "
"شامل:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9058
#, no-wrap
msgid ""
"device dcons\n"
"device dcons_crom\n"
"options KDB\n"
"options DDB\n"
"options GDB\n"
"options ALT_BREAK_TO_DEBUGGER"
msgstr ""
"device dcons\n"
"device dcons_crom\n"
"options KDB\n"
"options DDB\n"
"options GDB\n"
"options ALT_BREAK_TO_DEBUGGER"

#. (itstool) path: sect3/para
#: book.translate.xml:9065
msgid "And a sample <filename>/boot/loader.conf</filename> would contain:"
msgstr "و یک نمونه <filename>/boot/loader.conf</filename> شامل:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9068
#, no-wrap
msgid ""
"dcons_crom_load=\"YES\"\n"
"dcons_gdb=1\n"
"boot_multicons=\"YES\"\n"
"hw.firewire.phydma_enable=1\n"
"hw.firewire.dcons_crom.force_console=1"
msgstr ""
"dcons_crom_load=\"YES\"\n"
"dcons_gdb=1\n"
"boot_multicons=\"YES\"\n"
"hw.firewire.phydma_enable=1\n"
"hw.firewire.dcons_crom.force_console=1"

#. (itstool) path: sect3/title
#: book.translate.xml:9077
msgid ""
"Enabling <trademark class=\"registered\">FireWire</trademark> and Dcons "
"support on the host machine"
msgstr ""
"فعال‌سازی پشتیبانی <trademark class=\"registered\">FireWire</trademark> و "
"Dcons در دستگاه میزبان"

#. (itstool) path: sect3/para
#: book.translate.xml:9080
msgid ""
"To enable <trademark class=\"registered\">FireWire</trademark> support in "
"the kernel on the <emphasis>host machine</emphasis>:"
msgstr ""
"برای فعال‌سازی پشتیبانی <trademark class=\"registered\">FireWire</trademark> "
"در هسته بر روی <emphasis>دستگاه میزبان</emphasis>:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9083
#, no-wrap
msgid "<prompt>#</prompt> <userinput>kldload firewire</userinput>"
msgstr "<prompt>#</prompt> <userinput>kldload firewire</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9085
msgid ""
"Find out the <acronym>EUI64</acronym> (the unique 64 bit identifier) of the "
"<trademark class=\"registered\">FireWire</trademark> host controller, and "
"use <citerefentry><refentrytitle>fwcontrol</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> or <command>dmesg</command> to find the "
"<acronym>EUI64</acronym> of the target machine."
msgstr ""
"<acronym>EUI64</acronym> (شناسندهٔ منحصر به‌فرد ۶۴ بیتی) ناظرِ میزبانِ "
"<trademark class=\"registered\">FireWire</trademark> را دریابید و از <citeref"
"entry><refentrytitle>fwcontrol</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> یا <command>dmesg</command> برای پیدا کردن <acronym>EUI64</"
"acronym> در دستگاه هدف استفاده کنید."

#. (itstool) path: sect3/para
#: book.translate.xml:9090
msgid ""
"Run <citerefentry><refentrytitle>dconschat</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>, with:"
msgstr ""
"<citerefentry><refentrytitle>dconschat</refentrytitle><manvolnum>8</manvolnum"
"></citerefentry> را بدین شکل اجرا کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9092
#, no-wrap
msgid "<prompt>#</prompt> <userinput>dconschat -e \\# -br -G 12345 -t <replaceable>00-11-22-33-44-55-66-77</replaceable></userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>dconschat -e \\# -br -G 12345 -t "
"<replaceable>00-11-22-33-44-55-66-77</replaceable></userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9094
msgid ""
"The following key combinations can be used once "
"<citerefentry><refentrytitle>dconschat</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry> is running:"
msgstr ""
"ترکیب‌های کلید پیش رو را زمانی‌که <citerefentry><refentrytitle>dconschat</ref"
"entrytitle><manvolnum>8</manvolnum></citerefentry> در حال اجراست می‌توان به "
"کار برد:"

#. (itstool) path: row/entry
#: book.translate.xml:9101
msgid ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycap>.</keycap> </keycombo>"
msgstr ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycap>.</keycap> </keycombo>"

#. (itstool) path: row/entry
#: book.translate.xml:9107
msgid "Disconnect"
msgstr "Disconnect"

#. (itstool) path: row/entry
#: book.translate.xml:9110
msgid ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>B</keycap> </keycombo> </keycombo>"
msgstr ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>B</keycap> </keycombo> </keycombo>"

#. (itstool) path: row/entry
#: book.translate.xml:9119
msgid "ALT BREAK"
msgstr "ALT BREAK"

#. (itstool) path: row/entry
#: book.translate.xml:9122
msgid ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>R</keycap> </keycombo> </keycombo>"
msgstr ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>R</keycap> </keycombo> </keycombo>"

#. (itstool) path: row/entry
#: book.translate.xml:9131
msgid "RESET target"
msgstr "RESET target"

#. (itstool) path: row/entry
#: book.translate.xml:9134
msgid ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>Z</keycap> </keycombo> </keycombo>"
msgstr ""
"<keycombo action=\"seq\"> <keycap>~</keycap> <keycombo action=\"simul\"> "
"<keycap>Ctrl</keycap> <keycap>Z</keycap> </keycombo> </keycombo>"

#. (itstool) path: row/entry
#: book.translate.xml:9143
msgid "Suspend dconschat"
msgstr "Suspend dconschat"

#. (itstool) path: sect3/para
#: book.translate.xml:9149
msgid ""
"Attach remote <acronym>GDB</acronym> by starting "
"<citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> with a remote debugging session:"
msgstr ""
"<citerefentry><refentrytitle>kgdb</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> را با جلسهٔ‌ اشکال‌زداییِ از راه دور آغاز کنید تا "
"<acronym>GDB</acronym> از راه دور الصاق شود:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9152
#, no-wrap
msgid "<userinput>kgdb -r :12345 kernel</userinput>"
msgstr "<userinput>kgdb -r :12345 kernel</userinput>"

#. (itstool) path: sect3/title
#: book.translate.xml:9156
msgid "Some general tips"
msgstr "برخی نکات کلی"

#. (itstool) path: sect3/para
#: book.translate.xml:9158
msgid "Here are some general tips:"
msgstr "در اینجا چند نکتهٔ کلی هست:"

#. (itstool) path: sect3/para
#: book.translate.xml:9160
msgid ""
"To take full advantage of the speed of <trademark class=\"registered"
"\">FireWire</trademark>, disable other slow console drivers:"
msgstr ""
"برای بهره‌وری کامل از سرعت <trademark class=\"registered\""
">FireWire</trademark>، سایر گرداننده‌های پیشانهٔ کند را غیرفعال کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9163
#, no-wrap
msgid ""
"<prompt>#</prompt> conscontrol delete ttyd0\t     # serial console\n"
"<prompt>#</prompt> conscontrol delete consolectl\t# video/keyboard"
msgstr ""
"<prompt>#</prompt> conscontrol delete ttyd0\t     # serial console\n"
"<prompt>#</prompt> conscontrol delete consolectl\t# video/keyboard"

#. (itstool) path: sect3/para
#: book.translate.xml:9166
msgid ""
"There exists a <acronym>GDB</acronym> mode for <citerefentry vendor=\"ports"
"\"><refentrytitle>emacs</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry>; this is what you will need to add to your <filename>.emacs</"
"filename>:"
msgstr ""
"حالتی از <acronym>GDB</acronym> برای <citerefentry vendor=\"ports\""
"><refentrytitle>emacs</refentrytitle><manvolnum>1</manvolnum></citerefentry> "
"وجود دارد؛ این همان چیزی است که باید در <filename>.emacs</filename> اضافه "
"کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9170
#, no-wrap
msgid ""
"<userinput>(setq gud-gdba-command-name \"kgdb -a -a -a -r :12345\")\n"
"(setq gdb-many-windows t)\n"
"(xterm-mouse-mode 1)\n"
"M-x gdba</userinput>"
msgstr ""
"<userinput>(setq gud-gdba-command-name \"kgdb -a -a -a -r :12345\")\n"
"(setq gdb-many-windows t)\n"
"(xterm-mouse-mode 1)\n"
"M-x gdba</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9175
msgid "And for <acronym>DDD</acronym> (<filename>devel/ddd</filename>):"
msgstr "و برای <acronym>DDD</acronym> (<filename>devel/ddd</filename>):"

#. (itstool) path: sect3/screen
#: book.translate.xml:9177
#, no-wrap
msgid ""
"# remote serial protocol\n"
"LANG=C ddd --debugger kgdb -r :12345 kernel\n"
"# live core debug\n"
"LANG=C ddd --debugger kgdb kernel /dev/fwmem0.2"
msgstr ""
"# remote serial protocol\n"
"LANG=C ddd --debugger kgdb -r :12345 kernel\n"
"# live core debug\n"
"LANG=C ddd --debugger kgdb kernel /dev/fwmem0.2"

#. (itstool) path: sect2/title
#: book.translate.xml:9185
msgid "Dcons with KVM"
msgstr "Dcons با KVM"

#. (itstool) path: sect2/para
#: book.translate.xml:9187
msgid ""
"We can directly read the <citerefentry><refentrytitle>dcons</"
"refentrytitle><manvolnum>4</manvolnum></citerefentry> buffer via <filename>/"
"dev/mem</filename> for live systems, and in the core dump for crashed "
"systems. These give you similar output to <command>dmesg -a</command>, but "
"the <citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> buffer includes more information."
msgstr ""
"می‌توانیم میان‌گیر "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> را به‌طور مستقیم به‌وسیلهٔ <filename>/dev/mem</filename> برای "
"سامانه‌های زنده، و در روگرفت حافظه برای سامانه‌های خراب شده بخوانیم. اینها "
"خروجی‌ای شبیه به <command>dmesg -a</command> را به شما می‌دهد، اما میان‌گیر "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> شامل اطلاعات بیشتری است."

#. (itstool) path: sect3/title
#: book.translate.xml:9194
msgid "Using Dcons with KVM"
msgstr "استفاده از Dcons با KVM"

#. (itstool) path: sect3/para
#: book.translate.xml:9196
msgid ""
"To use <citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> with <acronym>KVM</acronym>:"
msgstr ""
"برای استفاده از "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> با <acronym>KVM</acronym>:"

#. (itstool) path: sect3/para
#: book.translate.xml:9198
msgid ""
"Dump a <citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> buffer of a live system:"
msgstr ""
"از میان‌گیرِ "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> یک سامانهٔ زنده روبرداری کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9200
#, no-wrap
msgid "<prompt>#</prompt> <userinput>dconschat -1</userinput>"
msgstr "<prompt>#</prompt> <userinput>dconschat -1</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9202
msgid ""
"Dump a <citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</"
"manvolnum></citerefentry> buffer of a crash dump:"
msgstr ""
"از میان‌گیرِ "
"<citerefentry><refentrytitle>dcons</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> یک روگرفت خرابی روبرداری کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9204
#, no-wrap
msgid "<prompt>#</prompt> <userinput>dconschat -1 -M vmcore.XX</userinput>"
msgstr "<prompt>#</prompt> <userinput>dconschat -1 -M vmcore.XX</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:9206
msgid "Live core debugging can be done via:"
msgstr "اشکال‌زداییِ هستهٔ زنده را می‌توان بدین شکل انجام داد:"

#. (itstool) path: sect3/screen
#: book.translate.xml:9208
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>fwcontrol -m target_eui64</userinput>\n"
"<prompt>#</prompt> <userinput>kgdb kernel /dev/fwmem0.2</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>fwcontrol -m target_eui64</userinput>\n"
"<prompt>#</prompt> <userinput>kgdb kernel /dev/fwmem0.2</userinput>"

#. (itstool) path: sect1/title
#: book.translate.xml:9215
msgid "Glossary of Kernel Options for Debugging"
msgstr "واژه‌نامهٔ گزینه‌های هسته برای اشکال‌زدایی"

#. (itstool) path: sect1/para
#: book.translate.xml:9217
msgid ""
"This section provides a brief glossary of compile-time kernel options used "
"for debugging:"
msgstr ""
"این بخش واژه‌نامه‌ای مختصر از گزینه‌های هسته که برای اشکال‌زدایی در هنگام "
"همگردانی استفاده می‌شوند را ارائه می‌دهد:"

#. (itstool) path: listitem/para
#: book.translate.xml:9222
msgid ""
"<literal>options KDB</literal>: compiles in the kernel debugger framework. "
"Required for <literal>options DDB</literal> and <literal>options GDB</"
"literal>. Little or no performance overhead. By default, the debugger will "
"be entered on panic instead of an automatic reboot."
msgstr ""
"<literal>options KDB</literal>: در چارچوب اشکال‌زداییِ هسته همگردانی می‌کند. "
"برای <literal>options DDB</literal> و <literal>options GDB</literal> الزامی "
"است. شامل مقدار کوچک یا بدون هیچ سربارِ (overhead) عملکرد. به‌طور پیش‌فرض، "
"اشکال‌زدا به‌جای راه‌اندازیِ مجدد خودکار وارد حالت وحشت می‌شود."

#. (itstool) path: listitem/para
#: book.translate.xml:9230
msgid ""
"<literal>options KDB_UNATTENDED</literal>: change the default value of the "
"<literal>debug.debugger_on_panic</literal> sysctl to 0, which controls "
"whether the debugger is entered on panic. When <literal>options KDB</"
"literal> is not compiled into the kernel, the behavior is to automatically "
"reboot on panic; when it is compiled into the kernel, the default behavior "
"is to drop into the debugger unless <literal>options KDB_UNATTENDED</"
"literal> is compiled in. If you want to leave the kernel debugger compiled "
"into the kernel but want the system to come back up unless you're on-hand to "
"use the debugger for diagnostics, use this option."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9243
msgid ""
"<literal>options KDB_TRACE</literal>: change the default value of the "
"<literal>debug.trace_on_panic</literal> sysctl to 1, which controls whether "
"the debugger automatically prints a stack trace on panic. Especially if "
"running with <literal>options KDB_UNATTENDED</literal>, this can be helpful "
"to gather basic debugging information on the serial or firewire console "
"while still rebooting to recover."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9253
msgid ""
"<literal>options DDB</literal>: compile in support for the console debugger, "
"DDB. This interactive debugger runs on whatever the active low-level console "
"of the system is, which includes the video console, serial console, or "
"firewire console. It provides basic integrated debugging facilities, such as "
"stack tracing, process and thread listing, dumping of lock state, VM state, "
"file system state, and kernel memory management. DDB does not require "
"software running on a second machine or being able to generate a core dump "
"or full debugging kernel symbols, and provides detailed diagnostics of the "
"kernel at run-time. Many bugs can be fully diagnosed using only DDB output. "
"This option depends on <literal>options KDB</literal>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9268
msgid ""
"<literal>options GDB</literal>: compile in support for the remote debugger, "
"GDB, which can operate over serial cable or firewire. When the debugger is "
"entered, GDB may be attached to inspect structure contents, generate stack "
"traces, etc. Some kernel state is more awkward to access than in DDB, which "
"is able to generate useful summaries of kernel state automatically, such as "
"automatically walking lock debugging or kernel memory management structures, "
"and a second machine running the debugger is required. On the other hand, "
"GDB combines information from the kernel source and full debugging symbols, "
"and is aware of full data structure definitions, local variables, and is "
"scriptable. This option is not required to run GDB on a kernel core dump. "
"This option depends on <literal>options KDB</literal>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9285
msgid ""
"<literal>options BREAK_TO_DEBUGGER</literal>, <literal>options "
"ALT_BREAK_TO_DEBUGGER</literal>: allow a break signal or alternative signal "
"on the console to enter the debugger. If the system hangs without a panic, "
"this is a useful way to reach the debugger. Due to the current kernel "
"locking, a break signal generated on a serial console is significantly more "
"reliable at getting into the debugger, and is generally recommended. This "
"option has little or no performance impact."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9296
msgid ""
"<literal>options INVARIANTS</literal>: compile into the kernel a large "
"number of run-time assertion checks and tests, which constantly test the "
"integrity of kernel data structures and the invariants of kernel algorithms. "
"These tests can be expensive, so are not compiled in by default, but help "
"provide useful \"fail stop\" behavior, in which certain classes of undesired "
"behavior enter the debugger before kernel data corruption occurs, making "
"them easier to debug. Tests include memory scrubbing and use-after-free "
"testing, which is one of the more significant sources of overhead. This "
"option depends on <literal>options INVARIANT_SUPPORT</literal>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9310
msgid ""
"<literal>options INVARIANT_SUPPORT</literal>: many of the tests present in "
"<literal>options INVARIANTS</literal> require modified data structures or "
"additional kernel symbols to be defined."
msgstr ""
"<literal>options INVARIANT_SUPPORT</literal>: بسیاری از آزمون‌های ارائه شده "
"در <literal>options INVARIANTS</literal> نیازمند تعریف ساختمان‌های دادهٔ "
"اصلاح شده یا نمادهای هستهٔ اضافی هستند."

#. (itstool) path: listitem/para
#: book.translate.xml:9316
msgid ""
"<literal>options WITNESS</literal>: this option enables run-time lock order "
"tracking and verification, and is an invaluable tool for deadlock diagnosis. "
"WITNESS maintains a graph of acquired lock orders by lock type, and checks "
"the graph at each acquire for cycles (implicit or explicit). If a cycle is "
"detected, a warning and stack trace are generated to the console, indicating "
"that a potential deadlock might have occurred. WITNESS is required in order "
"to use the <command>show locks</command>, <command>show witness</command> "
"and <command>show alllocks</command> DDB commands. This debug option has "
"significant performance overhead, which may be somewhat mitigated through "
"the use of <literal>options WITNESS_SKIPSPIN</literal>. Detailed "
"documentation may be found in <citerefentry><refentrytitle>witness</"
"refentrytitle><manvolnum>4</manvolnum></citerefentry>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9332
msgid ""
"<literal>options WITNESS_SKIPSPIN</literal>: disable run-time checking of "
"spinlock lock order with WITNESS. As spin locks are acquired most frequently "
"in the scheduler, and scheduler events occur often, this option can "
"significantly speed up systems running with WITNESS. This option depends on "
"<literal>options WITNESS</literal>."
msgstr ""
"<literal>options WITNESS_SKIPSPIN</literal>: بررسیِ زمان اجرای ترتیب قفلِ "
"spinlock را توسط WITNESS غیرفعال می‌کند. از آنجاکه قفل‌های چرخش غالباً در "
"زمان‌بند به‌دست می‌آیند، و رویدادهای زمان‌بند خیلی اوقات روی می‌دهند، این "
"گزینه می‌تواند سامانه‌هایی که با WITNESS در حال اجرا هستند را به‌طور قابل "
"ملاحظه‌ای سرعت ببخشد. این گزینه وابسته به <literal>options WITNESS</literal> "
"است."

#. (itstool) path: listitem/para
#: book.translate.xml:9341
msgid ""
"<literal>options WITNESS_KDB</literal>: change the default value of the "
"<literal>debug.witness.kdb</literal> sysctl to 1, which causes WITNESS to "
"enter the debugger when a lock order violation is detected, rather than "
"simply printing a warning. This option depends on <literal>options WITNESS</"
"literal>."
msgstr ""
"<literal>options WITNESS_KDB</literal>: مقدار پیش‌فرض sysctl <literal>debug."
"witness.kdb</literal> را به ‌1 تغییر می‌دهد، که باعث می‌شود تا WITNESS زمانی‌"
"که نقض ترتیب قفل تشخیص داده می‌شود، به‌جای آنکه صرفاً‌ یک هشدار چاپ کند وارد "
"اشکال‌ز‌دا شود. این گزینه وابسته به <literal>options WITNESS</literal> است."

#. (itstool) path: listitem/para
#: book.translate.xml:9349
msgid ""
"<literal>options SOCKBUF_DEBUG</literal>: perform extensive run-time "
"consistency checking on socket buffers, which can be useful for debugging "
"both socket bugs and race conditions in protocols and device drivers that "
"interact with sockets. This option significantly impacts network "
"performance, and may change the timing in device driver races."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9358
msgid ""
"<literal>options DEBUG_VFS_LOCKS</literal>: track lock acquisition points "
"for lockmgr/vnode locks, expanding the amount of information displayed by "
"<command>show lockedvnods</command> in DDB. This option has a measurable "
"performance impact."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9365
msgid ""
"<literal>options DEBUG_MEMGUARD</literal>: a replacement for the "
"<citerefentry><refentrytitle>malloc</refentrytitle><manvolnum>9</manvolnum></"
"citerefentry> kernel memory allocator that uses the VM system to detect "
"reads or writes from allocated memory after free. Details may be found in "
"<citerefentry><refentrytitle>memguard</refentrytitle><manvolnum>9</"
"manvolnum></citerefentry>. This option has a significant performance impact, "
"but can be very helpful in debugging kernel memory corruption bugs."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:9374
msgid ""
"<literal>options DIAGNOSTIC</literal>: enable additional, more expensive "
"diagnostic tests along the lines of <literal>options INVARIANTS</literal>."
msgstr ""
"<literal>options DIAGNOSTIC</literal>: آزمون‌های تشخیص اضافی و هزینه‌برتری "
"را در امتداد سطور <literal>options INVARIANTS</literal> فعال می‌کند."

#. (itstool) path: part/title
#: book.translate.xml:9388
msgid "Architectures"
msgstr "معماری‌ها"

#. (itstool) path: chapter/title
#: book.translate.xml:9412
msgid "x86 Assembly Language Programming"
msgstr "برنامه‌نویسیِ زبان همگذاریِ x86"

#. (itstool) path: chapter/para
#: book.translate.xml:9414
msgid ""
"<emphasis>This chapter was written by G. Adam Stanislav "
"<email>adam@redprince.net</email>.</emphasis>"
msgstr ""
"<emphasis>این فصل توسط G. Adam Stanislav <email>adam@redprince.net</email> "
"نگاشته شده است.</emphasis>"

#. (itstool) path: sect1/para
#: book.translate.xml:9420
msgid ""
"Assembly language programming under <trademark class=\"registered\">UNIX</"
"trademark> is highly undocumented. It is generally assumed that no one would "
"ever want to use it because various <trademark class=\"registered\">UNIX</"
"trademark> systems run on different microprocessors, so everything should be "
"written in C for portability."
msgstr ""
"برنامه‌نویسیِ زبان همگذاری (Assembly) در <trademark class=\"registered\""
">UNIX</trademark> به‌شدت فاقد مستند است. به‌طور کلی چنین فرض می‌شود که هیچ "
"کس هرگز نمی‌خواهد از آن استفاده کند زیرا سامانه‌های گوناگونِ <trademark "
"class=\"registered\">UNIX</trademark> بر روی ریزپردازنده‌های مختلفی اجرا "
"می‌شوند، بنابراین همه‌چیز باید به‌منظور انتقال‌پذیری در C نگاشته شود."

#. (itstool) path: sect1/para
#: book.translate.xml:9426
msgid ""
"In reality, C portability is quite a myth. Even C programs need to be "
"modified when ported from one <trademark class=\"registered\">UNIX</"
"trademark> to another, regardless of what processor each runs on. Typically, "
"such a program is full of conditional statements depending on the system it "
"is compiled for."
msgstr ""
"در واقعیت، انتقال‌پذیریِ C تا حد زیادی یک افسانه است. حتی برنامه‌‌های C "
"زمانی‌که از یک <trademark class=\"registered\">UNIX</trademark> به دیگری "
"منتقل می‌شوند نیازمند تغییر هستند، صرف نظر از اینکه هر کدام از آنها بر روی "
"چه پردازنده‌ای اجرا می‌شوند. معمولاً، چنین برنامه‌ای بسته به سامانه‌ای که "
"برای آن همگردانی شده است، پر از عبارت‌های شرطی است."

#. (itstool) path: sect1/para
#: book.translate.xml:9432
msgid ""
"Even if we believe that all of <trademark class=\"registered\">UNIX</"
"trademark> software should be written in C, or some other high-level "
"language, we still need assembly language programmers: Who else would write "
"the section of C library that accesses the kernel?"
msgstr ""
"حتی اگر باور کنیم که تمام نرم‌افزارِ <trademark class=\"registered\">UNIX</"
"trademark> باید در C یا برخی زبان‌های سطح بالای دیگر نوشته شود، هنوز به "
"برنامه‌نویسان زبان اسمبلی نیاز داریم: چه کسی می‌تواند آن بخش از کتابخانهٔ C "
"را که به هسته دسترسی دارد بنویسد؟"

#. (itstool) path: sect1/para
#: book.translate.xml:9437
msgid ""
"In this chapter I will attempt to show you how you can use assembly language "
"writing <trademark class=\"registered\">UNIX</trademark> programs, "
"specifically under FreeBSD."
msgstr ""
"در این فصل من سعی می‌کنم تا به شما نحوهٔ استفاده از زبان اسمبلی برای نوشتن "
"برنامه‌های <trademark class=\"registered\">UNIX</trademark> را نشان دهم، به‌"
"طور مشخص تحت FreeBSD."

#. (itstool) path: sect1/para
#: book.translate.xml:9441
msgid ""
"This chapter does not explain the basics of assembly language. There are "
"enough resources about that (for a complete online course in assembly "
"language, see Randall Hyde's <link xlink:href=\"http://webster.cs.ucr.edu/"
"\">Art of Assembly Language</link>; or if you prefer a printed book, take a "
"look at Jeff Duntemann's Assembly Language Step-by-Step (ISBN: 0471375233). "
"However, once the chapter is finished, any assembly language programmer will "
"be able to write programs for FreeBSD quickly and efficiently."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:9450 book.translate.xml:14844
msgid "Copyright © 2000-2001 G. Adam Stanislav. All rights reserved."
msgstr "حق نشر © ۲۰۰۰-۲۰۰۱ G. Adam Stanislav. تمامی حقوق محفوظ است."

#. (itstool) path: sect1/title
#: book.translate.xml:9455
msgid "The Tools"
msgstr "ابزارها"

#. (itstool) path: sect2/title
#: book.translate.xml:9458
msgid "The Assembler"
msgstr "همگذار"

#. (itstool) path: sect2/para
#: book.translate.xml:9460
msgid ""
"The most important tool for assembly language programming is the assembler, "
"the software that converts assembly language code into machine language."
msgstr ""
"مهم‌ترین ابزار برای برنامه‌نویسیٰ زبان همگذاری (اسمبلی) همگذار است، نرم‌"
"افزاری که کد زبان همگذاری را به زبان ماشین تبدیل می‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:9464
msgid ""
"Two very different assemblers are available for FreeBSD. One is "
"<citerefentry><refentrytitle>as</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry>, which uses the traditional <trademark class=\"registered"
"\">UNIX</trademark> assembly language syntax. It comes with the system."
msgstr ""
"دو نوع همگذار متفاوت برای FreeBSD در دسترس هست. یکی "
"<citerefentry><refentrytitle>as</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> است، که از قواعد نحویِ سنتیِ زبان اسمبلیِ <trademark class="
"\"registered\">UNIX</trademark> پیروی می‌کند و به‌همراه سامانه می‌آید."

#. (itstool) path: sect2/para
#: book.translate.xml:9470
msgid ""
"The other is <application>/usr/ports/devel/nasm</application>. It uses the "
"Intel syntax. Its main advantage is that it can assemble code for many "
"operating systems. It needs to be installed separately, but is completely "
"free."
msgstr ""
"دیگری <application>/usr/ports/devel/nasm</application> است و از قواعد نحوی "
"Intel پیروی می‌کند. برتری اصلی آن این است که می‌تواند کد را برای سامانه‌های "
"عامل بسیاری همگذاری کند. و لازم است جداگانه نصب شود، اما کاملاً رایگان است."

#. (itstool) path: sect2/para
#: book.translate.xml:9476
msgid ""
"This chapter uses <application>nasm</application> syntax because most "
"assembly language programmers coming to FreeBSD from other operating systems "
"will find it easier to understand. And, because, quite frankly, that is what "
"I am used to."
msgstr ""
"این فصل از قواعد نحوی <application>nasm</application> استفاده می‌کند زیرا "
"فهم آن برای بیشتر برنامه‌نویسان زبان همگذاری که از دیگر سامانه‌های عامل به "
"FreeBSD می‌آیند آسان‌تر است. و، زیرا صادقانه بگویم، همان چیزیست که من عادت "
"کرده‌ام."

#. (itstool) path: sect2/title
#: book.translate.xml:9484
msgid "The Linker"
msgstr "پیوند دهنده"

#. (itstool) path: sect2/para
#: book.translate.xml:9486
msgid ""
"The output of the assembler, like that of any compiler, needs to be linked "
"to form an executable file."
msgstr ""
"خروجیِ همگذار، مانند سایر همگردان‌ها، برای شکل گرفتن یک پروندهٔ اجراپذیر "
"نیاز به پیوند دادن دارد."

#. (itstool) path: sect2/para
#: book.translate.xml:9489
msgid ""
"The standard <citerefentry><refentrytitle>ld</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry> linker comes with FreeBSD. It works with the code "
"assembled with either assembler."
msgstr ""
"پیوند‌ دهندهٔ استاندارد "
"<citerefentry><refentrytitle>ld</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> با FreeBSD می‌آید و با کد همگذاری شده با هر همگذاری کار می‌کند."

#. (itstool) path: sect1/title
#: book.translate.xml:9497
msgid "System Calls"
msgstr "فراخوان‌های سامانه"

#. (itstool) path: sect2/title
#: book.translate.xml:9500
msgid "Default Calling Convention"
msgstr "رویهٔ فراخوانیِ پیش‌فرض"

#. (itstool) path: sect2/para
#: book.translate.xml:9502
msgid ""
"By default, the FreeBSD kernel uses the C calling convention. Further, "
"although the kernel is accessed using <function role=\"opcode\">int 80h</"
"function>, it is assumed the program will call a function that issues "
"<function role=\"opcode\">int 80h</function>, rather than issuing <function "
"role=\"opcode\">int 80h</function> directly."
msgstr ""
"به‌طور پیش‌فرض، هستهٔ FreeBSD از رویهٔ فراخوانیِ C استفاده می‌کند. به‌علاوه، "
"گرچه هسته به‌وسیلهٔ <function role=\"opcode\">int 80h</function> قابل دسترسی "
"است، فرض بر این است که به جای صدور مستقیمِ <function role=\"opcode\">int "
"80h</function>، برنامه تابعی را فراخوانی می‌کند که <function role=\"opcode\""
">int 80h</function> را صادر می‌کند."

#. (itstool) path: sect2/para
#: book.translate.xml:9508
msgid ""
"This convention is very convenient, and quite superior to the <trademark "
"class=\"registered\">Microsoft</trademark> convention used by "
"<acronym><trademark class=\"registered\">MS-DOS</trademark></acronym>. Why? "
"Because the <trademark class=\"registered\">UNIX</trademark> convention "
"allows any program written in any language to access the kernel."
msgstr ""
"این رویه بسیار راحت است، و نسبت به رویهٔ <trademark class=\"registered\""
">Microsoft</trademark> که توسط <acronym><trademark class=\"registered\">MS-"
"DOS</trademark></acronym> استفاده شده است برتری کامل دارد. چرا؟ زیرا رویهٔ "
"<trademark class=\"registered\">UNIX</trademark> به هر برنامه‌ای که با هر "
"زبانی نوشته شده است اجازهٔ دسترسی به هسته را می‌دهد."

#. (itstool) path: sect2/para
#: book.translate.xml:9514
msgid ""
"An assembly language program can do that as well. For example, we could open "
"a file:"
msgstr ""
"یک برنامهٔ نوشته شده در زبان همگذاری هم می‌تواند چنین کاری را انجام دهد. "
"برای مثال، می‌توانیم یک پرونده را باز کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9517
#, no-wrap
msgid ""
"kernel:\n"
"\tint\t80h\t; Call kernel\n"
"\tret\n"
"\n"
"open:\n"
"\tpush\tdword mode\n"
"\tpush\tdword flags\n"
"\tpush\tdword path\n"
"\tmov\teax, 5\n"
"\tcall\tkernel\n"
"\tadd\tesp, byte 12\n"
"\tret"
msgstr ""
"kernel:\n"
"\tint\t80h\t; Call kernel\n"
"\tret\n"
"\n"
"open:\n"
"\tpush\tdword mode\n"
"\tpush\tdword flags\n"
"\tpush\tdword path\n"
"\tmov\teax, 5\n"
"\tcall\tkernel\n"
"\tadd\tesp, byte 12\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:9530
msgid ""
"This is a very clean and portable way of coding. If you need to port the "
"code to a <trademark class=\"registered\">UNIX</trademark> system which uses "
"a different interrupt, or a different way of passing parameters, all you "
"need to change is the kernel procedure."
msgstr ""
"این روش برنامه‌نویسی بسیار تمیز و اتقال‌پذیر است، اگر نیاز به پورت کردن کد "
"به سامانهٔ <trademark class=\"registered\">UNIX</trademark> دارید که از وقفه‌"
"ای متفاوت استفاده می‌کند، یا به روش متفاوتی پارامترها را می‌گذراند، تمام "
"آنچه که نیاز دارید تغییر روش هسته است."

#. (itstool) path: sect2/para
#: book.translate.xml:9535
msgid ""
"But assembly language programmers like to shave off cycles. The above "
"example requires a <function role=\"opcode\">call/ret</function> "
"combination. We can eliminate it by <function role=\"opcode\">push</"
"function>ing an extra dword:"
msgstr ""
"اما برنامه‌نویسان زبان همگذاری دوست دارند تا تعداد چرخه‌ها را کاهش دهند. "
"مثال بالا نیازمند یک ترکیب <function role=\"opcode\">call/ret</function> "
"است. می‌توانیم آن را با <function role=\"opcode\">push</function> کردن یک "
"مقدار اضافیِ dword از بین ببریم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9540
#, no-wrap
msgid ""
"open:\n"
"\tpush\tdword mode\n"
"\tpush\tdword flags\n"
"\tpush\tdword path\n"
"\tmov\teax, 5\n"
"\tpush\teax\t\t; Or any other dword\n"
"\tint\t80h\n"
"\tadd\tesp, byte 16"
msgstr ""
"open:\n"
"\tpush\tdword mode\n"
"\tpush\tdword flags\n"
"\tpush\tdword path\n"
"\tmov\teax, 5\n"
"\tpush\teax\t\t; Or any other dword\n"
"\tint\t80h\n"
"\tadd\tesp, byte 16"

#. (itstool) path: sect2/para
#: book.translate.xml:9549
msgid ""
"The <constant>5</constant> that we have placed in <varname role=\"register"
"\">EAX</varname> identifies the kernel function, in this case <function role="
"\"syscall\">open</function>."
msgstr ""
"مقدار <constant>5</constant> که ما درون <varname role=\"register\">EAX</"
"varname> قرار دادیم تابع هسته را تشخیص می‌دهد، در این مورد <function role="
"\"syscall\">open</function>."

#. (itstool) path: sect2/title
#: book.translate.xml:9554
msgid "Alternate Calling Convention"
msgstr "رویهٔ فراخوانیِ جایگزین"

#. (itstool) path: sect2/para
#: book.translate.xml:9556
msgid ""
"FreeBSD is an extremely flexible system. It offers other ways of calling the "
"kernel. For it to work, however, the system must have Linux emulation "
"installed."
msgstr ""
"FreeBSD یک سامانهٔ به‌شدت منعطف است و روش‌های دیگری برای فراخوانیِ هسته "
"ارائه می‌دهد. گرچه، برای آنکه بتواند کار کند، شبیه‌ساز Linux باید بر روی "
"سامانه نصب شده باشد."

#. (itstool) path: sect2/para
#: book.translate.xml:9560
msgid ""
"Linux is a <trademark class=\"registered\">UNIX</trademark> like system. "
"However, its kernel uses the same system-call convention of passing "
"parameters in registers <acronym><trademark class=\"registered\">MS-DOS</"
"trademark></acronym> does. As with the <trademark class=\"registered\">UNIX</"
"trademark> convention, the function number is placed in <varname role="
"\"register\">EAX</varname>. The parameters, however, are not passed on the "
"stack but in <varname role=\"register\">EBX, ECX, EDX, ESI, EDI, EBP</"
"varname>:"
msgstr ""
"Linux یک سامانهٔ شبه <trademark class=\"registered\">UNIX</trademark> است، "
"هرچند، هستهٔ آن از همان رویهٔ فراخوانِ سامانهٔ <acronym><trademark class="
"\"registered\">MS-DOS</trademark></acronym> برای منتقل کردن پارامترها در "
"ثبات‌ها پیروی می‌کند. با رویهٔ <trademark class=\"registered\""
">UNIX</trademark>، شمارهٔ تابع در <varname role=\"register\">EAX</varname> "
"قرار می‌گیرد. پارامترها، هرچند، در <varname role=\"register\">EBX, ECX, EDX, "
"ESI, EDI, EBP</varname> منتقل شده‌اند نه در پشته:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9567
#, no-wrap
msgid ""
"open:\n"
"\tmov\teax, 5\n"
"\tmov\tebx, path\n"
"\tmov\tecx, flags\n"
"\tmov\tedx, mode\n"
"\tint\t80h"
msgstr ""
"open:\n"
"\tmov\teax, 5\n"
"\tmov\tebx, path\n"
"\tmov\tecx, flags\n"
"\tmov\tedx, mode\n"
"\tint\t80h"

#. (itstool) path: sect2/para
#: book.translate.xml:9574
msgid ""
"This convention has a great disadvantage over the <trademark class="
"\"registered\">UNIX</trademark> way, at least as far as assembly language "
"programming is concerned: Every time you make a kernel call you must "
"<function role=\"opcode\">push</function> the registers, then <function role="
"\"opcode\">pop</function> them later. This makes your code bulkier and "
"slower. Nevertheless, FreeBSD gives you a choice."
msgstr ""
"این رویه در مقابل روش <trademark class=\"registered\">UNIX</trademark> یک "
"عیب بزرگ دارد، حداقل تا جایی که به برنامه‌نویسی زبان همگذاری (اسمبلی) مربوط "
"می‌شود. هر وقت شما فراخوانی تابع را انجام می‌دهید باید ثبات‌ها را <function "
"role=\"opcode\">push</function> کنید، سپس آنها را <function role=\"opcode\""
">pop</function> کنید. این امر کد شما را بزرگتر و کندتر می‌کند. با این حال، "
"FreeBSD به شما حق انتخاب می‌دهد."

#. (itstool) path: sect2/para
#: book.translate.xml:9582
msgid ""
"If you do choose the Linux convention, you must let the system know about "
"it. After your program is assembled and linked, you need to brand the "
"executable:"
msgstr ""
"اگر شما رویهٔ Linux را انتخاب کردید، باید سامانه را متوجه آن کنید. پس از "
"آنکه برنامهٔ شما همگذاری و پیوند داده شد، نیاز دارید تا اجراپذیر را نشانه‌"
"گذاری کنید:"

#. (itstool) path: sect2/screen
#: book.translate.xml:9586
#, no-wrap
msgid "<prompt>%</prompt> <userinput>brandelf -t Linux <replaceable>filename</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>brandelf -t Linux "
"<replaceable>filename</replaceable></userinput>"

#. (itstool) path: sect2/title
#: book.translate.xml:9590
msgid "Which Convention Should You Use?"
msgstr "از کدام رویه باید استفاده کنید؟"

#. (itstool) path: sect2/para
#: book.translate.xml:9592
msgid ""
"If you are coding specifically for FreeBSD, you should always use the "
"<trademark class=\"registered\">UNIX</trademark> convention: It is faster, "
"you can store global variables in registers, you do not have to brand the "
"executable, and you do not impose the installation of the Linux emulation "
"package on the target system."
msgstr ""
"اگر مخصوص FreeBSD کد می‌زنید، باید همیشه از رویهٔ‌ <trademark class="
"\"registered\">UNIX</trademark> استفاده کنید: این روش سریع‌تر است، می‌توانید "
"متغیر‌های جهانی را در ثبات‌ها ذخیره کنید، نیاز نیست تا اجراپذیر را نشانه‌"
"گذاری کنید، و نصب بستهٔ شبیه‌ساز Linux را بر روی سامانهٔ هدف تحمیل نمی‌کنید."

#. (itstool) path: sect2/para
#: book.translate.xml:9598
msgid ""
"If you want to create portable code that can also run on Linux, you will "
"probably still want to give the FreeBSD users as efficient a code as "
"possible. I will show you how you can accomplish that after I have explained "
"the basics."
msgstr ""
"اگر می‌خواهید کد انتقال‌پذیری بسازید که بتواند در Linux هم اجرا شود، احتمالاً"
" هنوز بخواهید به ‌کاربران FreeBSD تا آنجا که ممکن است یک کد بهینه تحویل "
"دهید. پس از آنکه مبانی را توضیح دادم، به شما نشان خواهم داد که چطور می‌"
"توانید این کار را انجام دهید."

#. (itstool) path: sect2/title
#: book.translate.xml:9605
msgid "Call Numbers"
msgstr "شماره‌های فراخوانی"

#. (itstool) path: sect2/para
#: book.translate.xml:9607
msgid ""
"To tell the kernel which system service you are calling, place its number in "
"<varname role=\"register\">EAX</varname>. Of course, you need to know what "
"the number is."
msgstr ""
"به‌منظور آگاه ساختن هسته نسبت به سرویس سامانه‌ای که شما فراخوانی می‌کنید، "
"شمارهٔ آن را درون <varname role=\"register\">EAX</varname> قرار دهید. البته، "
"باید خود شماره را بدانید."

#. (itstool) path: sect3/title
#: book.translate.xml:9612
msgid "The <filename>syscalls</filename> File"
msgstr "پروندهٔ <filename>syscalls</filename>"

#. (itstool) path: sect3/para
#: book.translate.xml:9614
msgid ""
"The numbers are listed in <filename>syscalls</filename>. <command>locate "
"syscalls</command> finds this file in several different formats, all "
"produced automatically from <filename>syscalls.master</filename>."
msgstr ""
"شماره‌ها در <filename>syscalls</filename> فهرست شده‌اند. <command>locate "
"syscalls</command> این پرونده را در قالب‌های مختلف پیدا می‌کند، تمام ‌آنها "
"به‌طور خودکار توسط <filename>syscalls.master</filename> تولید شده‌اند."

#. (itstool) path: sect3/para
#: book.translate.xml:9619
msgid ""
"You can find the master file for the default <trademark class=\"registered"
"\">UNIX</trademark> calling convention in <filename>/usr/src/sys/kern/"
"syscalls.master</filename>. If you need to use the other convention "
"implemented in the Linux emulation mode, read <filename>/usr/src/sys/i386/"
"linux/syscalls.master</filename>."
msgstr ""
"می‌توانید پروندهٔ اصلی برای رویهٔ فراخوانیِ پیش‌فرضِ <trademark class="
"\"registered\">UNIX</trademark> را در <filename>/usr/src/sys/kern/syscalls."
"master</filename> پیدا کنید. اگر می‌خواهید از سایر رویه‌های پیاده شده در "
"حالت شبیه‌ساز Linux استفاده کنید، <filename>/usr/src/sys/i386/linux/syscalls."
"master</filename> را بخوانید."

#. (itstool) path: note/para
#: book.translate.xml:9627
msgid ""
"Not only do FreeBSD and Linux use different calling conventions, they "
"sometimes use different numbers for the same functions."
msgstr ""
"نه تنها FreeBSD و Linux از رویه‌های فراخوانیِ متفاوتی استفاده می‌کنند، بلکه "
"گاهی اوقات از شماره‌های متفاوت برای یک تابع استفاده می‌کنند."

#. (itstool) path: sect3/para
#: book.translate.xml:9632
msgid ""
"<filename>syscalls.master</filename> describes how the call is to be made:"
msgstr ""
"<filename>syscalls.master</filename> نحوهٔ شکل‌گیریِ فراخوانی را تشریح "
"می‌کند:"

#. (itstool) path: sect3/programlisting
#: book.translate.xml:9635
#, no-wrap
msgid ""
"0\tSTD\tNOHIDE\t{ int nosys(void); } syscall nosys_args int\n"
"1\tSTD\tNOHIDE\t{ void exit(int rval); } exit rexit_args void\n"
"2\tSTD\tPOSIX\t{ int fork(void); }\n"
"3\tSTD\tPOSIX\t{ ssize_t read(int fd, void *buf, size_t nbyte); }\n"
"4\tSTD\tPOSIX\t{ ssize_t write(int fd, const void *buf, size_t nbyte); }\n"
"5\tSTD\tPOSIX\t{ int open(char *path, int flags, int mode); }\n"
"6\tSTD\tPOSIX\t{ int close(int fd); }\n"
"etc..."
msgstr ""
"0\tSTD\tNOHIDE\t{ int nosys(void); } syscall nosys_args int\n"
"1\tSTD\tNOHIDE\t{ void exit(int rval); } exit rexit_args void\n"
"2\tSTD\tPOSIX\t{ int fork(void); }\n"
"3\tSTD\tPOSIX\t{ ssize_t read(int fd, void *buf, size_t nbyte); }\n"
"4\tSTD\tPOSIX\t{ ssize_t write(int fd, const void *buf, size_t nbyte); }\n"
"5\tSTD\tPOSIX\t{ int open(char *path, int flags, int mode); }\n"
"6\tSTD\tPOSIX\t{ int close(int fd); }\n"
"etc..."

#. (itstool) path: sect3/para
#: book.translate.xml:9644
msgid ""
"It is the leftmost column that tells us the number to place in <varname role="
"\"register\">EAX</varname>."
msgstr ""
"این چپ‌ترین ستون است که به ما شماره‌ای که باید در <varname role=\"register\""
">EAX</varname> قرار دهیم را می‌گوید."

#. (itstool) path: sect3/para
#: book.translate.xml:9647
msgid ""
"The rightmost column tells us what parameters to <function role=\"opcode"
"\">push</function>. They are <function role=\"opcode\">push</function>ed "
"<emphasis>from right to left</emphasis>."
msgstr ""
"راست‌ترین ستون به ما می‌گوید که کدام پارامترها را <function role=\"opcode\""
">push</function> کنیم. آنها <emphasis>از راست به چپ</emphasis> <function "
"role=\"opcode\">push</function> شده‌اند."

#. (itstool) path: informalexample/para
#: book.translate.xml:9651
msgid ""
"For example, to <function>open</function> a file, we need to <function role="
"\"opcode\">push</function> the <varname>mode</varname> first, then "
"<varname>flags</varname>, then the address at which the <varname>path</"
"varname> is stored."
msgstr ""
"به فرض مثال، برای <function>open</function> کردن یک پرونده، نیاز است تا "
"ابتدا <varname>mode</varname> را، و سپس <varname>flags</varname> را و در آخر "
"نشانی‌ای که <varname>path</varname> در آن ذخیره می‌شود را <function role="
"\"opcode\">push</function> کنیم."

#. (itstool) path: sect1/title
#: book.translate.xml:9662
msgid "Return Values"
msgstr "مقادیر بازگشتی"

#. (itstool) path: sect1/para
#: book.translate.xml:9664
msgid ""
"A system call would not be useful most of the time if it did not return some "
"kind of a value: The file descriptor of an open file, the number of bytes "
"read to a buffer, the system time, etc."
msgstr ""
"یک فراخوان سامانه چنانچه نوعی مقدار را بازگشت ندهد فایده‌ای ندارد: توصیف‌گر "
"پروندهٔ یک پروندهٔ باز، تعداد بایت‌هایی که در میان‌گیر خوانده می‌شوند، زمان "
"سامانه، ... ."

#. (itstool) path: sect1/para
#: book.translate.xml:9669
msgid ""
"Additionally, the system needs to inform us if an error occurs: A file does "
"not exist, system resources are exhausted, we passed an invalid parameter, "
"etc."
msgstr ""
"افزون بر این، سامانه در صورت بروز خطا نیازمند آگاه‌سازیِ ما هست: یک پرونده "
"وجود ندارد، منابع سامانه خسته شده‌اند، یک پارامتر نامعتبر را پذیرفتیم، ... ."

#. (itstool) path: sect2/title
#: book.translate.xml:9674
msgid "Man Pages"
msgstr "صفحات راهنما (Man)"

#. (itstool) path: sect2/para
#: book.translate.xml:9676
msgid ""
"The traditional place to look for information about various system calls "
"under <trademark class=\"registered\">UNIX</trademark> systems are the "
"manual pages. FreeBSD describes its system calls in section 2, sometimes in "
"section 3."
msgstr ""
"مکان رایج برای جستجوی اطلاعات پیرامون فراخوان‌های سامانه تحت سامانه‌های "
"<trademark class=\"registered\">UNIX</trademark> صفحات راهنما هستند. FreeBSD "
"فراخوان‌های سامانه‌اش را در بخش ۲، و گاهی در بخش ۳ توضیح می‌دهد."

#. (itstool) path: sect2/para
#: book.translate.xml:9681
msgid ""
"For example, <citerefentry><refentrytitle>open</refentrytitle><manvolnum>2</"
"manvolnum></citerefentry> says:"
msgstr ""
"برای مثال، "
"<citerefentry><refentrytitle>open</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> می‌گوید:"

#. (itstool) path: blockquote/para
#: book.translate.xml:9686
msgid ""
"If successful, <function>open()</function> returns a non-negative integer, "
"termed a file descriptor. It returns <varname>-1</varname> on failure, and "
"sets <varname>errno</varname> to indicate the error."
msgstr ""
"اگر موفقیت آمیز بود، <function>open()</function> یک عدد صحیح غیرمنفی را به‌"
"عنوان توصیف‌گر پرونده برمی‌گرداند. در صورت شکست <varname>-1</varname> را "
"بر‌می‌گرداند و <varname>errno</varname> را تعیین می‌کند تا خطا را مشخص کند."

#. (itstool) path: sect2/para
#: book.translate.xml:9692
msgid ""
"The assembly language programmer new to <trademark class=\"registered"
"\">UNIX</trademark> and FreeBSD will immediately ask the puzzling question: "
"Where is <varname>errno</varname> and how do I get to it?"
msgstr ""
"برنامه‌نویس زبان همگذاریِ تازه وارد به <trademark class=\"registered\">UNIX</"
"trademark> و FreeBSD به‌سرعت سوال گیج‌کننده را می‌پرسد: <varname>errno</"
"varname> کجاست و چطور آن را دریافت کنم؟"

#. (itstool) path: note/para
#: book.translate.xml:9697
msgid ""
"The information presented in the manual pages applies to C programs. The "
"assembly language programmer needs additional information."
msgstr ""
"اطلاعات ارائه شده در صفحات راهنما در مورد برنامه‌های C صدق می‌کنند. برنامه‌"
"نویس زبان همگذاری نیازمند به اطلاعات اضافی است."

#. (itstool) path: sect2/title
#: book.translate.xml:9704
msgid "Where Are the Return Values?"
msgstr "مقادیر بازگشتی کجا هستند؟"

#. (itstool) path: sect2/para
#: book.translate.xml:9706
msgid ""
"Unfortunately, it depends... For most system calls it is in <varname role="
"\"register\">EAX</varname>, but not for all. A good rule of thumb, when "
"working with a system call for the first time, is to look for the return "
"value in <varname role=\"register\">EAX</varname>. If it is not there, you "
"need further research."
msgstr ""
"متأسفانه، بستگی دارد ... برای بیشتر فراخوانی‌های سامانه‌ داخل <varname role="
"\"register\">EAX</varname> قرار دارد، اما نه برای همه. یک قانون کلی، هنگامی‌"
"که برای اولین بار در حال کار با یک فراخوان سامانه هستید، به دنبال مقدار "
"بازگشتی در <varname role=\"register\">EAX</varname> باشید. اگر آنجا نباشد، "
"به جستجوی بیشتری نیاز دارید."

#. (itstool) path: note/para
#: book.translate.xml:9713
msgid ""
"I am aware of one system call that returns the value in <varname role="
"\"register\">EDX</varname>: <function role=\"syscall\">SYS_fork</function>. "
"All others I have worked with use <varname role=\"register\">EAX</varname>. "
"But I have not worked with them all yet."
msgstr ""
"من از یک فراخوان سامانه خبر دارم که مقدار را در <varname role=\"register\""
">EDX</varname>: <function role=\"syscall\">SYS_fork</function> برمی‌گرداند. "
"سایر فراخوان‌های سامانه‌ای که باهاشون کار کردم از <varname role=\"register\""
">EAX</varname> استفاده می‌کنند. اما هنوز با همهٔ آنها کار نکرده‌ام."

#. (itstool) path: tip/para
#: book.translate.xml:9720
msgid ""
"If you cannot find the answer here or anywhere else, study "
"<application>libc</application> source code and see how it interfaces with "
"the kernel."
msgstr ""
"اگر نمی‌توانید پاسخ را در اینجا یا هرجای دیگر پیدا کنید، کد منبعِ "
"<application>libc</application> را مطالعه کنید و نحوهٔ کارکرد رابط‌های آن با "
"هسته را مشاهده کنید."

#. (itstool) path: sect2/title
#: book.translate.xml:9727
msgid "Where Is <varname>errno</varname>?"
msgstr "<varname>errno</varname> کجاست؟"

#. (itstool) path: sect2/para
#: book.translate.xml:9729
msgid "Actually, nowhere..."
msgstr "در واقع، هیچ کجا ..."

#. (itstool) path: sect2/para
#: book.translate.xml:9731
msgid ""
"<varname>errno</varname> is part of the C language, not the <trademark class="
"\"registered\">UNIX</trademark> kernel. When accessing kernel services "
"directly, the error code is returned in <varname role=\"register\">EAX</"
"varname>, the same register the proper return value generally ends up in."
msgstr ""
"<varname>errno</varname> بخشی از زبان C هست، نه هستهٔ <trademark class="
"\"registered\">UNIX</trademark>. هنگام دسترسی مستقیم به سرویس‌های هسته، کد "
"خطا در <varname role=\"register\">EAX</varname> برگردانده می‌شود، همان ثباتی "
"که به‌طور کلی مقدار بازگشتیِ مناسب به آن منتهی می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:9736
msgid ""
"This makes perfect sense. If there is no error, there is no error code. If "
"there is an error, there is no return value. One register can contain either."
msgstr ""
"با عقل جور در می‌آید. اگر هیچ خطایی نباشد، یعنی هیچ کد خطایی وجود ندارد. اگر "
"خطایی باشد، یعنی هیچ مقدار بازگشتی‌ای وجود ندارد. یک ثبات می‌تواند هر دو را "
"شامل شود."

#. (itstool) path: sect2/title
#: book.translate.xml:9742
msgid "Determining an Error Occurred"
msgstr "تعیین خطای رخ داده"

#. (itstool) path: sect2/para
#: book.translate.xml:9744
msgid ""
"When using the standard FreeBSD calling convention, the <varname role="
"\"register\">carry flag</varname> is cleared upon success, set upon failure."
msgstr ""
"هنگام استفاده از رویهٔ استاندارد فراخوانیِ FreeBSD، <varname role=\"register"
"\">carry flag</varname> در صورت موفقیت پاک می‌شود، در صورت شکست تعیین می‌شود."

#. (itstool) path: sect2/para
#: book.translate.xml:9748
msgid ""
"When using the Linux emulation mode, the signed value in <varname role="
"\"register\">EAX</varname> is non-negative upon success, and contains the "
"return value. In case of an error, the value is negative, i.e., <varname>-"
"errno</varname>."
msgstr ""
"هنگام استفاده از حالت شبیه‌ساز Linux، در صورت موفقیت، مقدار علامت دار در "
"<varname role=\"register\">EAX</varname> غیر منفی است، و شامل مقدار بازگشتی "
"است. در صورت خطا، مقدار منفی است، برای مثال، <varname>-errno</varname>."

#. (itstool) path: sect1/title
#: book.translate.xml:9756
msgid "Creating Portable Code"
msgstr "ایجاد کد انتقال‌پذیر"

#. (itstool) path: sect1/para
#: book.translate.xml:9758
msgid ""
"Portability is generally not one of the strengths of assembly language. Yet, "
"writing assembly language programs for different platforms is possible, "
"especially with <application>nasm</application>. I have written assembly "
"language libraries that can be assembled for such different operating "
"systems as <trademark class=\"registered\">Windows</trademark> and FreeBSD."
msgstr ""
"انتقال‌پذیری به‌طور کلی جزو قدرت‌های زبان همگذاری نیست. با این حال، نوشتن "
"برنامه‌های اسمبلی برای بسترهای گوناگون ممکن است، مخصوصاً‌ با "
"<application>nasm</application>. من کتابخانه‌های اسمبلی‌ای نوشته‌ام که می‌"
"توان برای سامانه‌های عامل مختلفی مانند <trademark class=\"registered\""
">Windows</trademark> و FreeBSD همگذاری کرد."

#. (itstool) path: sect1/para
#: book.translate.xml:9765
msgid ""
"It is all the more possible when you want your code to run on two platforms "
"which, while different, are based on similar architectures."
msgstr ""
"این امکان وجود دارد که بخواهید کدتان را بر روی دو بستر اجرا کنید، که در عین "
"تفاوت، بر مبنای یک معماری هستند."

#. (itstool) path: sect1/para
#: book.translate.xml:9769
msgid ""
"For example, FreeBSD is <trademark class=\"registered\">UNIX</trademark>, "
"Linux is <trademark class=\"registered\">UNIX</trademark> like. I only "
"mentioned three differences between them (from an assembly language "
"programmer's perspective): The calling convention, the function numbers, and "
"the way of returning values."
msgstr ""
"برای مثال، FreeBSD یک <trademark class=\"registered\">UNIX</trademark> است، "
"Linux یک شبه <trademark class=\"registered\">UNIX</trademark> است. من تنها "
"سه تفاوت در میان آنها را ذکر کردم (از دیدگاه یک برنامه‌نویس زبان اسمبلی): "
"رویهٔ فراخوانی، شماره‌های توابع، و نحوهٔ برگرداندن مقدارها."

#. (itstool) path: sect2/title
#: book.translate.xml:9775
msgid "Dealing with Function Numbers"
msgstr "کار با شماره‌های توابع"

#. (itstool) path: sect2/para
#: book.translate.xml:9777
msgid ""
"In many cases the function numbers are the same. However, even when they are "
"not, the problem is easy to deal with: Instead of using numbers in your "
"code, use constants which you have declared differently depending on the "
"target architecture:"
msgstr ""
"در بسیاری موارد شماره‌های توابع یکی هستند. گرچه، حتی زمانی‌که نیستند، کنار "
"آمدن با این مشکل آسان است:‌ به جای استفاده از شماره‌‌ها در کد خود، از مقادیر "
"ثابتی که بسته به معماری هدف، متفاوت اعلان کرده‌اید استفاده کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9783
#, no-wrap
msgid ""
"%ifdef\tLINUX\n"
"%define\tSYS_execve\t11\n"
"%else\n"
"%define\tSYS_execve\t59\n"
"%endif"
msgstr ""
"%ifdef\tLINUX\n"
"%define\tSYS_execve\t11\n"
"%else\n"
"%define\tSYS_execve\t59\n"
"%endif"

#. (itstool) path: sect2/title
#: book.translate.xml:9791
msgid "Dealing with Conventions"
msgstr "کار با رویه‌ها"

#. (itstool) path: sect2/para
#: book.translate.xml:9793
msgid ""
"Both, the calling convention, and the return value (the <varname>errno</"
"varname> problem) can be resolved with macros:"
msgstr ""
"هر دو، رویهٔ فرخوانی، و مقدار بازگشتی (مسئلهٔ <varname>errno</varname>) را "
"می‌توان با ماکروها برطرف کرد:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9797
#, no-wrap
msgid ""
"%ifdef\tLINUX\n"
"\n"
"%macro\tsystem\t0\n"
"\tcall\tkernel\n"
"%endmacro\n"
"\n"
"align 4\n"
"kernel:\n"
"\tpush\tebx\n"
"\tpush\tecx\n"
"\tpush\tedx\n"
"\tpush\tesi\n"
"\tpush\tedi\n"
"\tpush\tebp\n"
"\n"
"\tmov\tebx, [esp+32]\n"
"\tmov\tecx, [esp+36]\n"
"\tmov\tedx, [esp+40]\n"
"\tmov\tesi, [esp+44]\n"
"\tmov\tebp, [esp+48]\n"
"\tint\t80h\n"
"\n"
"\tpop\tebp\n"
"\tpop\tedi\n"
"\tpop\tesi\n"
"\tpop\tedx\n"
"\tpop\tecx\n"
"\tpop\tebx\n"
"\n"
"\tor\teax, eax\n"
"\tjs\t.errno\n"
"\tclc\n"
"\tret\n"
"\n"
".errno:\n"
"\tneg\teax\n"
"\tstc\n"
"\tret\n"
"\n"
"%else\n"
"\n"
"%macro\tsystem\t0\n"
"\tint\t80h\n"
"%endmacro\n"
"\n"
"%endif"
msgstr ""
"%ifdef\tLINUX\n"
"\n"
"%macro\tsystem\t0\n"
"\tcall\tkernel\n"
"%endmacro\n"
"\n"
"align 4\n"
"kernel:\n"
"\tpush\tebx\n"
"\tpush\tecx\n"
"\tpush\tedx\n"
"\tpush\tesi\n"
"\tpush\tedi\n"
"\tpush\tebp\n"
"\n"
"\tmov\tebx, [esp+32]\n"
"\tmov\tecx, [esp+36]\n"
"\tmov\tedx, [esp+40]\n"
"\tmov\tesi, [esp+44]\n"
"\tmov\tebp, [esp+48]\n"
"\tint\t80h\n"
"\n"
"\tpop\tebp\n"
"\tpop\tedi\n"
"\tpop\tesi\n"
"\tpop\tedx\n"
"\tpop\tecx\n"
"\tpop\tebx\n"
"\n"
"\tor\teax, eax\n"
"\tjs\t.errno\n"
"\tclc\n"
"\tret\n"
"\n"
".errno:\n"
"\tneg\teax\n"
"\tstc\n"
"\tret\n"
"\n"
"%else\n"
"\n"
"%macro\tsystem\t0\n"
"\tint\t80h\n"
"%endmacro\n"
"\n"
"%endif"

#. (itstool) path: sect2/title
#: book.translate.xml:9846
msgid "Dealing with Other Portability Issues"
msgstr "پرداختن به سایر مسائل انتقال‌پذیری"

#. (itstool) path: sect2/para
#: book.translate.xml:9848
msgid ""
"The above solutions can handle most cases of writing code portable between "
"FreeBSD and Linux. Nevertheless, with some kernel services the differences "
"are deeper."
msgstr ""
"راهبردهای بالا می‌توانند به بیشتر موارد کد نویسیِ انتقال‌پذیر بین FreeBSD و "
"Linux رسیدگی کنند. با این حال، با برخی از سرویس‌های هسته تفاوت‌ها عمیق‌ترند."

#. (itstool) path: sect2/para
#: book.translate.xml:9852
msgid ""
"In that case, you need to write two different handlers for those particular "
"system calls, and use conditional assembly. Luckily, most of your code does "
"something other than calling the kernel, so usually you will only need a few "
"such conditional sections in your code."
msgstr ""
"در آن صورت، شما نیاز است تا دو نگاه‌دارنده برای آن فراخوان‌های سامانهٔ ویژه "
"بنویسید، و از همگذاریِ شرطی استفاده کنید. خوشبختانه، بیشتر کد شما کاری به "
"غیر از فراخوانی تابع انجام می‌دهد، پس معمولاً تنها به چند بخش‌ شرطی در کدتان "
"نیاز خواهید داشت."

#. (itstool) path: sect2/title
#: book.translate.xml:9860
msgid "Using a Library"
msgstr "استفاده از کتابخانه"

#. (itstool) path: sect2/para
#: book.translate.xml:9862
msgid ""
"You can avoid portability issues in your main code altogether by writing a "
"library of system calls. Create a separate library for FreeBSD, a different "
"one for Linux, and yet other libraries for more operating systems."
msgstr ""
"می‌توانید با نوشتن کتابخانه برای فراخوان‌های سامانه، از مسائل انتقال‌پذیری "
"در کد اصلیِ خود به‌طور کلی اجتناب کنید. یک کتابخانهٔ جداگانه برای FreeBSD "
"ایجاد کنید، یکی برای Linux، و حتی کتابخانه‌های دیگری برای سامانه‌های عامل "
"بیشتر."

#. (itstool) path: sect2/para
#: book.translate.xml:9867
msgid ""
"In your library, write a separate function (or procedure, if you prefer the "
"traditional assembly language terminology) for each system call. Use the C "
"calling convention of passing parameters. But still use <varname role="
"\"register\">EAX</varname> to pass the call number in. In that case, your "
"FreeBSD library can be very simple, as many seemingly different functions "
"can be just labels to the same code:"
msgstr ""
"در کتابخانهٔ خود، یک تابع جداگانه (یا روش، اگر اصطلاحات سنتی زبان همگذاری را "
"ترجیح می‌دهید) برای هر فراخوان سامانه بنویسید. از رویهٔ فراخوانیِ‌ C برای "
"قبول کردن پارامترها استفاده کنید. اما از <varname role=\"register\">EAX</"
"varname> هم برای قبول کردن شمارهٔ فراخوان استفاده کنید. در آن صورت، کتابخانهٔ"
" FreeBSD شما می‌تواند بسیار ساده باشد، همانطور که بسیاری از توابع به‌ظاهر "
"متفاوت می‌توانند برچسبی با همان کد باشند:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9875
#, no-wrap
msgid ""
"sys.open:\n"
"sys.close:\n"
"[etc...]\n"
"\tint\t80h\n"
"\tret"
msgstr ""
"sys.open:\n"
"sys.close:\n"
"[etc...]\n"
"\tint\t80h\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:9881
msgid ""
"Your Linux library will require more different functions. But even here you "
"can group system calls using the same number of parameters:"
msgstr ""
"کتابخانهٔ Linux شما نیازمند دو تابع متفاوت است. اما حتی در اینجا نیز می‌"
"توانید فراخوان‌های تابع را با استفاده از همان تعداد پارامترها گروه‌بندی کنید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9885
#, no-wrap
msgid ""
"sys.exit:\n"
"sys.close:\n"
"[etc... one-parameter functions]\n"
"\tpush\tebx\n"
"\tmov\tebx, [esp+12]\n"
"\tint\t80h\n"
"\tpop\tebx\n"
"\tjmp\tsys.return\n"
"\n"
"...\n"
"\n"
"sys.return:\n"
"\tor\teax, eax\n"
"\tjs\tsys.err\n"
"\tclc\n"
"\tret\n"
"\n"
"sys.err:\n"
"\tneg\teax\n"
"\tstc\n"
"\tret"
msgstr ""
"sys.exit:\n"
"sys.close:\n"
"[etc... one-parameter functions]\n"
"\tpush\tebx\n"
"\tmov\tebx, [esp+12]\n"
"\tint\t80h\n"
"\tpop\tebx\n"
"\tjmp\tsys.return\n"
"\n"
"...\n"
"\n"
"sys.return:\n"
"\tor\teax, eax\n"
"\tjs\tsys.err\n"
"\tclc\n"
"\tret\n"
"\n"
"sys.err:\n"
"\tneg\teax\n"
"\tstc\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:9907
msgid ""
"The library approach may seem inconvenient at first because it requires you "
"to produce a separate file your code depends on. But it has many advantages: "
"For one, you only need to write it once and can use it for all your "
"programs. You can even let other assembly language programmers use it, or "
"perhaps use one written by someone else. But perhaps the greatest advantage "
"of the library is that your code can be ported to other systems, even by "
"other programmers, by simply writing a new library without any changes to "
"your code."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:9917
msgid ""
"If you do not like the idea of having a library, you can at least place all "
"your system calls in a separate assembly language file and link it with your "
"main program. Here, again, all porters have to do is create a new object "
"file to link with your main program."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:9925
msgid "Using an Include File"
msgstr "استفاده از پروندهٔ Include"

#. (itstool) path: sect2/para
#: book.translate.xml:9927
msgid ""
"If you are releasing your software as (or with) source code, you can use "
"macros and place them in a separate file, which you include in your code."
msgstr ""
"چنانچه برنامهٔ خود را به‌عنوان (یا به‌همراه) کد منبع عرضه می‌کنید، می‌توانید "
"از ماکروها استفاده کنید و آنها در یک پروندهٔ جدا قرار دهید، که در کدتان قرار "
"می‌دهید."

#. (itstool) path: sect2/para
#: book.translate.xml:9931
msgid ""
"Porters of your software will simply write a new include file. No library or "
"external object file is necessary, yet your code is portable without any "
"need to edit the code."
msgstr ""
"پورت‌کنندگان برنامهٔ شما به‌سادگی یک پروندهٔ جدید include می‌نویسند. هیچ "
"کتابخانه یا پروندهٔ هدفی لازم نیست، با این حال کد شما بدون نیاز به هیچ "
"ویرایشی انتقال‌پذیر است."

#. (itstool) path: note/para
#: book.translate.xml:9936
msgid ""
"This is the approach we will use throughout this chapter. We will name our "
"include file <filename>system.inc</filename>, and add to it whenever we deal "
"with a new system call."
msgstr ""
"این روشی است که ما در طی این فصل از آن استفاده می‌کنیم. پروندهٔ include خود "
"را <filename>system.inc</filename> نام‌گذاری می‌کنیم، و هر زمان که در حال "
"کار با یک فراخوان سامانهٔ جدید هستیم در آن اضافه می‌کنیم."

#. (itstool) path: sect2/para
#: book.translate.xml:9941
msgid ""
"We can start our <filename>system.inc</filename> by declaring the standard "
"file descriptors:"
msgstr ""
"می‌توانیم <filename>system.inc</filename> خود را با اعلان توصیف‌گرهای پروندهٔ"
" استاندارد آغاز کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9944
#, no-wrap
msgid ""
"%define\tstdin\t0\n"
"%define\tstdout\t1\n"
"%define\tstderr\t2"
msgstr ""
"%define\tstdin\t0\n"
"%define\tstdout\t1\n"
"%define\tstderr\t2"

#. (itstool) path: sect2/para
#: book.translate.xml:9948
msgid "Next, we create a symbolic name for each system call:"
msgstr "سپس، یک نام نمایدن برای هر کدام از فراخوان‌های سامانه ایجاد می‌کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9950
#, no-wrap
msgid ""
"%define\tSYS_nosys\t0\n"
"%define\tSYS_exit\t1\n"
"%define\tSYS_fork\t2\n"
"%define\tSYS_read\t3\n"
"%define\tSYS_write\t4\n"
"; [etc...]"
msgstr ""
"%define\tSYS_nosys\t0\n"
"%define\tSYS_exit\t1\n"
"%define\tSYS_fork\t2\n"
"%define\tSYS_read\t3\n"
"%define\tSYS_write\t4\n"
"; [etc...]"

#. (itstool) path: sect2/para
#: book.translate.xml:9957
msgid ""
"We add a short, non-global procedure with a long name, so we do not "
"accidentally reuse the name in our code:"
msgstr ""
"ما یک روش کوتاه و غیرجهانی با نامی بلند اضافه می‌کنیم، در نتیجه به‌طور "
"تصادفی از همان نام در کدمان استفادهٔ مجدد نمی‌کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9960
#, no-wrap
msgid ""
"section\t.text\n"
"align 4\n"
"access.the.bsd.kernel:\n"
"\tint\t80h\n"
"\tret"
msgstr ""
"section\t.text\n"
"align 4\n"
"access.the.bsd.kernel:\n"
"\tint\t80h\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:9966
msgid "We create a macro which takes one argument, the syscall number:"
msgstr ""
"یک ماکرو ایجاد می‌کنیم که تنها یک برهان می‌پذیرد، شمارهٔ فراخوان سامانه:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9969
#, no-wrap
msgid ""
"%macro\tsystem\t1\n"
"\tmov\teax, %1\n"
"\tcall\taccess.the.bsd.kernel\n"
"%endmacro"
msgstr ""
"%macro\tsystem\t1\n"
"\tmov\teax, %1\n"
"\tcall\taccess.the.bsd.kernel\n"
"%endmacro"

#. (itstool) path: sect2/para
#: book.translate.xml:9974
msgid ""
"Finally, we create macros for each syscall. These macros take no arguments."
msgstr ""
"در انتها، برای هر فراخوان سامانه یک ماکرو می‌سازیم. این ماکروها هیچ برهانی "
"را نمی‌پذیرند."

#. (itstool) path: sect2/programlisting
#: book.translate.xml:9977
#, no-wrap
msgid ""
"%macro\tsys.exit\t0\n"
"\tsystem\tSYS_exit\n"
"%endmacro\n"
"\n"
"%macro\tsys.fork\t0\n"
"\tsystem\tSYS_fork\n"
"%endmacro\n"
"\n"
"%macro\tsys.read\t0\n"
"\tsystem\tSYS_read\n"
"%endmacro\n"
"\n"
"%macro\tsys.write\t0\n"
"\tsystem\tSYS_write\n"
"%endmacro\n"
"\n"
"; [etc...]"
msgstr ""
"%macro\tsys.exit\t0\n"
"\tsystem\tSYS_exit\n"
"%endmacro\n"
"\n"
"%macro\tsys.fork\t0\n"
"\tsystem\tSYS_fork\n"
"%endmacro\n"
"\n"
"%macro\tsys.read\t0\n"
"\tsystem\tSYS_read\n"
"%endmacro\n"
"\n"
"%macro\tsys.write\t0\n"
"\tsystem\tSYS_write\n"
"%endmacro\n"
"\n"
"; [etc...]"

#. (itstool) path: sect2/para
#: book.translate.xml:9995
msgid ""
"Go ahead, enter it into your editor and save it as <filename>system.inc</"
"filename>. We will add more to it as we discuss more syscalls."
msgstr ""
"ادامه دهید، آن را در ویرایش‌گر خود وارد کنید و به‌عنوان <filename>system."
"inc</filename> ذخیره کنید. در آینده که پیرامون فراخوان‌های سامانهٔ بیشتری "
"بحث می‌کنیم، موارد بیشتری را به آن اضافه می‌کنیم."

#. (itstool) path: sect1/title
#: book.translate.xml:10002
msgid "Our First Program"
msgstr "نخستین برنامهٔ ما"

#. (itstool) path: sect1/para
#: book.translate.xml:10004
msgid ""
"We are now ready for our first program, the mandatory <application>Hello, "
"World!</application>"
msgstr ""
"ما اکنون برای نخستین برنامهٔ خود آماده‌ایم، برنامهٔ الزامیِ "
"<application>Hello, World!</application>"

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10007
#, no-wrap
msgid ""
"1:\t%include\t'system.inc'\n"
" 2:\n"
" 3:\tsection\t.data\n"
" 4:\thello\tdb\t'Hello, World!', 0Ah\n"
" 5:\thbytes\tequ\t$-hello\n"
" 6:\n"
" 7:\tsection\t.text\n"
" 8:\tglobal\t_start\n"
" 9:\t_start:\n"
"10:\tpush\tdword hbytes\n"
"11:\tpush\tdword hello\n"
"12:\tpush\tdword stdout\n"
"13:\tsys.write\n"
"14:\n"
"15:\tpush\tdword 0\n"
"16:\tsys.exit"
msgstr ""
"1:\t%include\t'system.inc'\n"
" 2:\n"
" 3:\tsection\t.data\n"
" 4:\thello\tdb\t'Hello, World!', 0Ah\n"
" 5:\thbytes\tequ\t$-hello\n"
" 6:\n"
" 7:\tsection\t.text\n"
" 8:\tglobal\t_start\n"
" 9:\t_start:\n"
"10:\tpush\tdword hbytes\n"
"11:\tpush\tdword hello\n"
"12:\tpush\tdword stdout\n"
"13:\tsys.write\n"
"14:\n"
"15:\tpush\tdword 0\n"
"16:\tsys.exit"

#. (itstool) path: sect1/para
#: book.translate.xml:10024
msgid ""
"Here is what it does: Line 1 includes the defines, the macros, and the code "
"from <filename>system.inc</filename>."
msgstr ""
"آنچه که انجام می‌دهد بدین شرح است: خط 1 شامل تعریف‌ها (defines)، ماکروها، و "
"کدهای <filename>system.inc</filename> است."

#. (itstool) path: sect1/para
#: book.translate.xml:10027
msgid ""
"Lines 3-5 are the data: Line 3 starts the data section/segment. Line 4 "
"contains the string \"Hello, World!\" followed by a new line (<constant>0Ah</"
"constant>). Line 5 creates a constant that contains the length of the string "
"from line 4 in bytes."
msgstr ""
"خط 3 تا 5 شامل داده‌هاست: خط 3 بخش/تکهٔ داده‌ها را آغاز می‌کند. خط 4 شامل "
"رشتهٔ \"Hello, World!\" و به‌دنبال آن خط جدیدِ (<constant>0Ah</constant>) "
"است. خط 5 یک مقدار ثابت که شامل طول رشتهٔ خط چهارم در بایت‌هاست را ایجاد "
"می‌کند."

#. (itstool) path: sect1/para
#: book.translate.xml:10033
msgid ""
"Lines 7-16 contain the code. Note that FreeBSD uses the <emphasis>elf</"
"emphasis> file format for its executables, which requires every program to "
"start at the point labeled <varname>_start</varname> (or, more precisely, "
"the linker expects that). This label has to be global."
msgstr ""
"خط‌های 7 تا 16 شامل کد هستند. توجه داشته باشید که FreeBSD از قالب پروندهٔ "
"<emphasis>elf</emphasis> برای اجراپذیرهای خود استفاده می‌کند، که هر برنامه "
"را ملزم به آغاز در نقطهٔ برچسب‌گذاری شدهٔ <varname>_start</varname> می‌کند "
"(یا، به‌طور دقیق‌تر، پیوند دهنده چنین انتظاری دارد). این برچسب باید جهانی "
"باشد."

#. (itstool) path: sect1/para
#: book.translate.xml:10039
msgid ""
"Lines 10-13 ask the system to write <varname>hbytes</varname> bytes of the "
"<varname>hello</varname> string to <varname>stdout</varname>."
msgstr ""
"سطرهای 10 تا 13 از سامانه درخواست می‌کنند تا بایت‌های <varname>hbytes</"
"varname> از رشتهٔ <varname>hello</varname> را در <varname>stdout</varname> "
"بنویسند."

#. (itstool) path: sect1/para
#: book.translate.xml:10043
msgid ""
"Lines 15-16 ask the system to end the program with the return value of "
"<constant>0</constant>. The <function role=\"syscall\">SYS_exit</function> "
"syscall never returns, so the code ends there."
msgstr ""
"سطرهای 15 تا 16 از سامانه دروخواست می‌کنند تا برنامه را با مقدار بازگشتیِ "
"<constant>0</constant> به پایان برساند. فراخوان سامانهٔ‌ <function role="
"\"syscall\">SYS_exit</function> هرگز برنمی‌گرداند، از این رو کد همینجا به "
"پایان می‌رسد."

#. (itstool) path: note/para
#: book.translate.xml:10048
msgid ""
"If you have come to <trademark class=\"registered\">UNIX</trademark> from "
"<acronym><trademark class=\"registered\">MS-DOS</trademark></acronym> "
"assembly language background, you may be used to writing directly to the "
"video hardware. You will never have to worry about this in FreeBSD, or any "
"other flavor of <trademark class=\"registered\">UNIX</trademark>. As far as "
"you are concerned, you are writing to a file known as <filename>stdout</"
"filename>. This can be the video screen, or a <application>telnet</"
"application> terminal, or an actual file, or even the input of another "
"program. Which one it is, is for the system to figure out."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:10060
msgid "Assembling the Code"
msgstr "همگذاریِ کد"

#. (itstool) path: sect2/para
#: book.translate.xml:10062
msgid ""
"Type the code (except the line numbers) in an editor, and save it in a file "
"named <filename>hello.asm</filename>. You need <application>nasm</"
"application> to assemble it."
msgstr ""
"کدها را (به‌غیر از شمارهٔ سطرها) در یک ویرایشگر بنویسید، و آنها را در یک "
"پرونده به نام <filename>hello.asm</filename> ذخیره کنید. برای همگذآری آن به "
"<application>nasm</application> نیاز دارید."

#. (itstool) path: sect3/title
#: book.translate.xml:10067
msgid "Installing <application>nasm</application>"
msgstr "نصب <application>nasm</application>"

#. (itstool) path: sect3/para
#: book.translate.xml:10069
msgid "If you do not have <application>nasm</application>, type:"
msgstr "چنانچه <application>nasm</application> را ندارید، بنویسید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:10072
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>su</userinput>\n"
"Password:<userinput><replaceable>your root password</replaceable></userinput>\n"
"<prompt>#</prompt> <userinput>cd /usr/ports/devel/nasm</userinput>\n"
"<prompt>#</prompt> <userinput>make install</userinput>\n"
"<prompt>#</prompt> <userinput>exit</userinput>\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>su</userinput>\n"
"Password:<userinput><replaceable>your root password</replaceable></userinput>"
"\n"
"<prompt>#</prompt> <userinput>cd /usr/ports/devel/nasm</userinput>\n"
"<prompt>#</prompt> <userinput>make install</userinput>\n"
"<prompt>#</prompt> <userinput>exit</userinput>\n"
"<prompt>%</prompt>"

#. (itstool) path: sect3/para
#: book.translate.xml:10079
msgid ""
"You may type <userinput>make install clean</userinput> instead of just "
"<userinput>make install</userinput> if you do not want to keep "
"<application>nasm</application> source code."
msgstr ""
"چنانچه قصد نگه داشتن کد منبع <application>nasm</application> را ندارید، می‌"
"توانید به جای وارد کردنِ <userinput>make install</userinput> وارد کنید "
"<userinput>make install clean</userinput>."

#. (itstool) path: sect3/para
#: book.translate.xml:10084
msgid ""
"Either way, FreeBSD will automatically download <application>nasm</"
"application> from the Internet, compile it, and install it on your system."
msgstr ""
"در هر صورت، FreeBSD به‌طور خودکار <application>nasm</application> را از "
"اینترنت بارگیری می‌کند، آن را همگردانی کنید، و بر روی سامانهٔ خود نصب کنید."

#. (itstool) path: note/para
#: book.translate.xml:10089
msgid ""
"If your system is not FreeBSD, you need to get <application>nasm</"
"application> from its <link xlink:href=\"https://sourceforge.net/projects/"
"nasm\">home page</link>. You can still use it to assemble FreeBSD code."
msgstr ""
"اگر سامانهٔ شما FreeBSD نیست، لازم است تا <application>nasm</application> را "
"از <link xlink:href=\"https://sourceforge.net/projects/nasm\">صفحهٔ اصلی</"
"link> آن دریافت کنید. گرچه هنوز امکان همگذاری کد FreeBSD به‌وسیلهٔ آن ممکن "
"است."

#. (itstool) path: sect3/para
#: book.translate.xml:10095
msgid "Now you can assemble, link, and run the code:"
msgstr "حال می‌توانید کد را همگذاری، پیوند و اجرا کنید:"

#. (itstool) path: sect3/screen
#: book.translate.xml:10097
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>nasm -f elf hello.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hello hello.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hello</userinput>\n"
"Hello, World!\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>nasm -f elf hello.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hello hello.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hello</userinput>\n"
"Hello, World!\n"
"<prompt>%</prompt>"

#. (itstool) path: sect1/title
#: book.translate.xml:10107
msgid "Writing <trademark class=\"registered\">UNIX</trademark> Filters"
msgstr "نوشتن فیلترهای <trademark class=\"registered\">UNIX</trademark>"

#. (itstool) path: sect1/para
#: book.translate.xml:10109
msgid ""
"A common type of <trademark class=\"registered\">UNIX</trademark> "
"application is a filter—a program that reads data from the <filename>stdin</"
"filename>, processes it somehow, then writes the result to <filename>stdout</"
"filename>."
msgstr ""
"نوع متداولی از برنامهٔ <trademark class=\"registered\">UNIX</trademark> "
"فیلتر است —برنامه‌ای که داده‌ها را از <filename>stdin</filename> می‌خواند، "
"آن را به نحوی پردازش می‌کند، سپس نتیجه را در <filename>stdout</filename> "
"می‌نویسد."

#. (itstool) path: sect1/para
#: book.translate.xml:10114
msgid ""
"In this chapter, we shall develop a simple filter, and learn how to read "
"from <filename>stdin</filename> and write to <filename>stdout</filename>. "
"This filter will convert each byte of its input into a hexadecimal number "
"followed by a blank space."
msgstr ""
"در این فصل، یک فیلتر ساده ایجاد می‌کنیم، و نحوهٔ خواندن از <filename>stdin</"
"filename> و نوشتن در <filename>stdout</filename> را یاد خواهیم گرفت. این "
"فیلتر هر بایت از ورودی خود را به‌همراه فضایی خالی به یک شمارهٔ شانزده‌"
"شانزدهی تبدیل می‌کند."

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10120
#, no-wrap
msgid ""
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"buffer\tdb\t0, 0, ' '\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\t; read a byte from stdin\n"
"\tpush\tdword 1\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\n"
"\t; convert it to hex\n"
"\tmovzx\teax, byte [buffer]\n"
"\tmov\tedx, eax\n"
"\tshr\tdl, 4\n"
"\tmov\tdl, [hex+edx]\n"
"\tmov\t[buffer], dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tmov\t[buffer+1], al\n"
"\n"
"\t; print it\n"
"\tpush\tdword 3\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tjmp\tshort _start\n"
"\n"
".done:\n"
"\tpush\tdword 0\n"
"\tsys.exit"
msgstr ""
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"buffer\tdb\t0, 0, ' '\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\t; read a byte from stdin\n"
"\tpush\tdword 1\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\n"
"\t; convert it to hex\n"
"\tmovzx\teax, byte [buffer]\n"
"\tmov\tedx, eax\n"
"\tshr\tdl, 4\n"
"\tmov\tdl, [hex+edx]\n"
"\tmov\t[buffer], dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tmov\t[buffer+1], al\n"
"\n"
"\t; print it\n"
"\tpush\tdword 3\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tjmp\tshort _start\n"
"\n"
".done:\n"
"\tpush\tdword 0\n"
"\tsys.exit"

#. (itstool) path: sect1/para
#: book.translate.xml:10160
msgid ""
"In the data section we create an array called <varname>hex</varname>. It "
"contains the 16 hexadecimal digits in ascending order. The array is followed "
"by a buffer which we will use for both input and output. The first two bytes "
"of the buffer are initially set to <constant>0</constant>. This is where we "
"will write the two hexadecimal digits (the first byte also is where we will "
"read the input). The third byte is a space."
msgstr ""
"در بخش داده‌ها آرایه‌ای به نام <varname>hex</varname> می‌سازیم. این بخش شامل "
"۱۶ رقم شانزده‌شانزدهی به ترتیب صعودیست. این آرایه با میان‌گیری همراه می‌شود "
"که ما برای ورودی و خروجی استفاده می‌کنیم. دو بایت نخست میان‌گیر ابتدا بر روی "
"<constant>0</constant> تنظیم می‌شوند. در اینجا دو رقم شانزده‌شانزدهی را می‌"
"نویسیم (همچنین نخستین بایت محل خوانده ورودی است). بایت سوم شامل یک فضاست."

#. (itstool) path: sect1/para
#: book.translate.xml:10169
msgid ""
"The code section consists of four parts: Reading the byte, converting it to "
"a hexadecimal number, writing the result, and eventually exiting the program."
msgstr ""
"بخش کد شامل چهار قسمت است: خواندن بایت، تبدیل آن به یک عدد شانزده‌شانزدهی، "
"نوشتن نتیجه، و در انتها خروج از برنامه."

#. (itstool) path: sect1/para
#: book.translate.xml:10173
msgid ""
"To read the byte, we ask the system to read one byte from <filename>stdin</"
"filename>, and store it in the first byte of the <varname>buffer</varname>. "
"The system returns the number of bytes read in <varname role=\"register"
"\">EAX</varname>. This will be <constant>1</constant> while data is coming, "
"or <constant>0</constant>, when no more input data is available. Therefore, "
"we check the value of <varname role=\"register\">EAX</varname>. If it is "
"<constant>0</constant>, we jump to <varname>.done</varname>, otherwise we "
"continue."
msgstr ""
"برای خواندن بایت، از سامانه درخواست خواندن یک بایت از <filename>stdin</"
"filename> را می‌کنیم، و آن را در نخستین بایت <varname>buffer</varname> ذخیره "
"می‌کنیم. سامانه تعداد بایت‌های خوانده شده در <varname role=\"register\">EAX</"
"varname> را برمی‌گرداند. این عدد هنگام دریافت داده‌ها <constant>1</constant> "
"است، یا هنگامی‌که هیچ دادهٔ ورودی‌ای وجود نداشته باشد <constant>0</constant> "
"است. در نتیجه، مقدار <varname role=\"register\">EAX</varname> را بررسی می‌"
"کنیم. اگر <constant>0</constant> باشد، ما به <varname>.done</varname> پرش "
"می‌کنیم، در غیر اینصورت ادامه می‌دهیم."

#. (itstool) path: note/para
#: book.translate.xml:10184
msgid ""
"For simplicity sake, we are ignoring the possibility of an error condition "
"at this time."
msgstr "به‌خاطر سادگی، ما در اینجا از احتمال وجود خطا چشم‌پوشی می کنیم."

#. (itstool) path: sect1/para
#: book.translate.xml:10188
msgid ""
"The hexadecimal conversion reads the byte from the <varname>buffer</varname> "
"into <varname role=\"register\">EAX</varname>, or actually just <varname "
"role=\"register\">AL</varname>, while clearing the remaining bits of "
"<varname role=\"register\">EAX</varname> to zeros. We also copy the byte to "
"<varname role=\"register\">EDX</varname> because we need to convert the "
"upper four bits (nibble) separately from the lower four bits. We store the "
"result in the first two bytes of the buffer."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10196
msgid ""
"Next, we ask the system to write the three bytes of the buffer, i.e., the "
"two hexadecimal digits and the blank space, to <filename>stdout</filename>. "
"We then jump back to the beginning of the program and process the next byte."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10201
msgid ""
"Once there is no more input left, we ask the system to exit our program, "
"returning a zero, which is the traditional value meaning the program was "
"successful."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10205
msgid ""
"Go ahead, and save the code in a file named <filename>hex.asm</filename>, "
"then type the following (the <userinput>^D</userinput> means press the "
"control key and type <userinput>D</userinput> while holding the control key "
"down):"
msgstr ""

#. (itstool) path: sect1/screen
#: book.translate.xml:10211
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A <userinput>Here I come!</userinput>\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A <userinput>^D</userinput> <prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A <userinput>Here I come!</userinput>"
"\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A <userinput>^D</userinput> "
"<prompt>%</prompt>"

#. (itstool) path: note/para
#: book.translate.xml:10219
msgid ""
"If you are migrating to <trademark class=\"registered\">UNIX</trademark> "
"from <acronym><trademark class=\"registered\">MS-DOS</trademark></acronym>, "
"you may be wondering why each line ends with <constant>0A</constant> instead "
"of <constant>0D 0A</constant>. This is because <trademark class=\"registered"
"\">UNIX</trademark> does not use the cr/lf convention, but a \"new line\" "
"convention, which is <constant>0A</constant> in hexadecimal."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10227
msgid ""
"Can we improve this? Well, for one, it is a bit confusing because once we "
"have converted a line of text, our input no longer starts at the beginning "
"of the line. We can modify it to print a new line instead of a space after "
"each <constant>0A</constant>:"
msgstr ""

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10233
#, no-wrap
msgid ""
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"buffer\tdb\t0, 0, ' '\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tmov\tcl, ' '\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tpush\tdword 1\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\n"
"\t; convert it to hex\n"
"\tmovzx\teax, byte [buffer]\n"
"\tmov\t[buffer+2], cl\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.hex\n"
"\tmov\t[buffer+2], al\n"
"\n"
".hex:\n"
"\tmov\tedx, eax\n"
"\tshr\tdl, 4\n"
"\tmov\tdl, [hex+edx]\n"
"\tmov\t[buffer], dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tmov\t[buffer+1], al\n"
"\n"
"\t; print it\n"
"\tpush\tdword 3\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tjmp\tshort .loop\n"
"\n"
".done:\n"
"\tpush\tdword 0\n"
"\tsys.exit"
msgstr ""
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"buffer\tdb\t0, 0, ' '\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tmov\tcl, ' '\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tpush\tdword 1\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\n"
"\t; convert it to hex\n"
"\tmovzx\teax, byte [buffer]\n"
"\tmov\t[buffer+2], cl\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.hex\n"
"\tmov\t[buffer+2], al\n"
"\n"
".hex:\n"
"\tmov\tedx, eax\n"
"\tshr\tdl, 4\n"
"\tmov\tdl, [hex+edx]\n"
"\tmov\t[buffer], dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tmov\t[buffer+1], al\n"
"\n"
"\t; print it\n"
"\tpush\tdword 3\n"
"\tpush\tdword buffer\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tjmp\tshort .loop\n"
"\n"
".done:\n"
"\tpush\tdword 0\n"
"\tsys.exit"

#. (itstool) path: sect1/para
#: book.translate.xml:10282
msgid ""
"We have stored the space in the <varname role=\"register\">CL</varname> "
"register. We can do this safely because, unlike <trademark class=\"registered"
"\">Microsoft</trademark> <trademark class=\"registered\">Windows</"
"trademark>, <trademark class=\"registered\">UNIX</trademark> system calls do "
"not modify the value of any register they do not use to return a value in."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10287
msgid ""
"That means we only need to set <varname role=\"register\">CL</varname> once. "
"We have, therefore, added a new label <varname>.loop</varname> and jump to "
"it for the next byte instead of jumping at <varname>_start</varname>. We "
"have also added the <varname>.hex</varname> label so we can either have a "
"blank space or a new line as the third byte of the <varname>buffer</varname>."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10294
msgid ""
"Once you have changed <filename>hex.asm</filename> to reflect these changes, "
"type:"
msgstr ""
"پس از آنکه <filename>hex.asm</filename> را تغییر دادید، برای انعکاس تغییرات، "
"بنویسید:"

#. (itstool) path: sect1/screen
#: book.translate.xml:10297 book.translate.xml:10565
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A\n"
"<userinput>Here I come!</userinput>\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A\n"
"<userinput>^D</userinput> <prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A\n"
"<userinput>Here I come!</userinput>\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A\n"
"<userinput>^D</userinput> <prompt>%</prompt>"

#. (itstool) path: sect1/para
#: book.translate.xml:10306
msgid ""
"That looks better. But this code is quite inefficient! We are making a "
"system call for every single byte twice (once to read it, another time to "
"write the output)."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:10312
msgid "Buffered Input and Output"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10314
msgid ""
"We can improve the efficiency of our code by buffering our input and output. "
"We create an input buffer and read a whole sequence of bytes at one time. "
"Then we fetch them one by one from the buffer."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10319
msgid ""
"We also create an output buffer. We store our output in it until it is full. "
"At that time we ask the kernel to write the contents of the buffer to "
"<filename>stdout</filename>."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10324
msgid ""
"The program ends when there is no more input. But we still need to ask the "
"kernel to write the contents of our output buffer to <filename>stdout</"
"filename> one last time, otherwise some of our output would make it to the "
"output buffer, but never be sent out. Do not forget that, or you will be "
"wondering why some of your output is missing."
msgstr ""

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10331
#, no-wrap
msgid ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"
msgstr ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"

#. (itstool) path: sect1/para
#: book.translate.xml:10425
msgid ""
"We now have a third section in the source code, named <varname>.bss</"
"varname>. This section is not included in our executable file, and, "
"therefore, cannot be initialized. We use <function role=\"opcode\">resb</"
"function> instead of <function role=\"opcode\">db</function>. It simply "
"reserves the requested size of uninitialized memory for our use."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10432
msgid ""
"We take advantage of the fact that the system does not modify the registers: "
"We use registers for what, otherwise, would have to be global variables "
"stored in the <varname>.data</varname> section. This is also why the "
"<trademark class=\"registered\">UNIX</trademark> convention of passing "
"parameters to system calls on the stack is superior to the Microsoft "
"convention of passing them in the registers: We can keep the registers for "
"our own use."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10441
msgid ""
"We use <varname role=\"register\">EDI</varname> and <varname role=\"register"
"\">ESI</varname> as pointers to the next byte to be read from or written to. "
"We use <varname role=\"register\">EBX</varname> and <varname role=\"register"
"\">ECX</varname> to keep count of the number of bytes in the two buffers, so "
"we know when to dump the output to, or read more input from, the system."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10447
msgid "Let us see how it works now:"
msgstr "بیایید ببینیم اکنون چطور کار می‌کند:"

#. (itstool) path: sect1/screen
#: book.translate.xml:10449
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"<userinput>Here I come!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A\n"
"<userinput>^D</userinput> <prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>nasm -f elf hex.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o hex hex.o</userinput>\n"
"<prompt>%</prompt> <userinput>./hex</userinput>\n"
"<userinput>Hello, World!</userinput>\n"
"<userinput>Here I come!</userinput>\n"
"48 65 6C 6C 6F 2C 20 57 6F 72 6C 64 21 0A\n"
"48 65 72 65 20 49 20 63 6F 6D 65 21 0A\n"
"<userinput>^D</userinput> <prompt>%</prompt>"

#. (itstool) path: sect1/para
#: book.translate.xml:10458
msgid ""
"Not what you expected? The program did not print the output until we pressed "
"<userinput>^D</userinput>. That is easy to fix by inserting three lines of "
"code to write the output every time we have converted a new line to "
"<constant>0A</constant>. I have marked the three lines with &gt; (do not "
"copy the &gt; in your <filename>hex.asm</filename>)."
msgstr ""

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10466
#, no-wrap
msgid ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"&gt;\tcmp\tal, 0Ah\n"
"&gt;\tjne\t.loop\n"
"&gt;\tcall\twrite\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"
msgstr ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"&gt;\tcmp\tal, 0Ah\n"
"&gt;\tjne\t.loop\n"
"&gt;\tcall\twrite\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword stdin\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"

#. (itstool) path: sect1/para
#: book.translate.xml:10563
msgid "Now, let us see how it works:"
msgstr "اکنون، بیایید ببینیم چطور کار می‌کند:"

#. (itstool) path: sect1/para
#: book.translate.xml:10574
msgid "Not bad for a 644-byte executable, is it!"
msgstr "برای یک اجراپذیر ۶۴۴-بایتی بد نیست!"

#. (itstool) path: note/para
#: book.translate.xml:10577
msgid ""
"This approach to buffered input/output still contains a hidden danger. I "
"will discuss—and fix—it later, when I talk about the <link linkend=\"x86-"
"buffered-dark-side\">dark side of buffering</link>."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:10584
msgid "How to Unread a Character"
msgstr ""

#. (itstool) path: warning/para
#: book.translate.xml:10587
msgid ""
"This may be a somewhat advanced topic, mostly of interest to programmers "
"familiar with the theory of compilers. If you wish, you may <link linkend="
"\"x86-command-line\">skip to the next section</link>, and perhaps read this "
"later."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10593
msgid ""
"While our sample program does not require it, more sophisticated filters "
"often need to look ahead. In other words, they may need to see what the next "
"character is (or even several characters). If the next character is of a "
"certain value, it is part of the token currently being processed. Otherwise, "
"it is not."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10600
msgid ""
"For example, you may be parsing the input stream for a textual string (e.g., "
"when implementing a language compiler): If a character is followed by "
"another character, or perhaps a digit, it is part of the token you are "
"processing. If it is followed by white space, or some other value, then it "
"is not part of the current token."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10607
msgid ""
"This presents an interesting problem: How to return the next character back "
"to the input stream, so it can be read again later?"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10611
msgid ""
"One possible solution is to store it in a character variable, then set a "
"flag. We can modify <function>getchar</function> to check the flag, and if "
"it is set, fetch the byte from that variable instead of the input buffer, "
"and reset the flag. But, of course, that slows us down."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10618
msgid ""
"The C language has an <function>ungetc()</function> function, just for that "
"purpose. Is there a quick way to implement it in our code? I would like you "
"to scroll back up and take a look at the <function>getchar</function> "
"procedure and see if you can find a nice and fast solution before reading "
"the next paragraph. Then come back here and see my own solution."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10626
msgid ""
"The key to returning a character back to the stream is in how we are getting "
"the characters to start with:"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10629
msgid ""
"First we check if the buffer is empty by testing the value of <varname role="
"\"register\">EBX</varname>. If it is zero, we call the <function>read</"
"function> procedure."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10634
msgid ""
"If we do have a character available, we use <function role=\"opcode\">lodsb</"
"function>, then decrease the value of <varname role=\"register\">EBX</"
"varname>. The <function role=\"opcode\">lodsb</function> instruction is "
"effectively identical to:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:10638
#, no-wrap
msgid ""
"mov\tal, [esi]\n"
"\tinc\tesi"
msgstr ""
"mov\tal, [esi]\n"
"\tinc\tesi"

#. (itstool) path: sect2/para
#: book.translate.xml:10641
msgid ""
"The byte we have fetched remains in the buffer until the next time "
"<function>read</function> is called. We do not know when that happens, but "
"we do know it will not happen until the next call to <function>getchar</"
"function>. Hence, to \"return\" the last-read byte back to the stream, all "
"we have to do is decrease the value of <varname role=\"register\">ESI</"
"varname> and increase the value of <varname role=\"register\">EBX</varname>:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:10649
#, no-wrap
msgid ""
"ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\tret"
msgstr ""
"ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:10654
msgid ""
"But, be careful! We are perfectly safe doing this if our look-ahead is at "
"most one character at a time. If we are examining more than one upcoming "
"character and call <function>ungetc</function> several times in a row, it "
"will work most of the time, but not all the time (and will be tough to "
"debug). Why?"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10661
msgid ""
"Because as long as <function>getchar</function> does not have to call "
"<function>read</function>, all of the pre-read bytes are still in the "
"buffer, and our <function>ungetc</function> works without a glitch. But the "
"moment <function>getchar</function> calls <function>read</function>, the "
"contents of the buffer change."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10669
msgid ""
"We can always rely on <function>ungetc</function> working properly on the "
"last character we have read with <function>getchar</function>, but not on "
"anything we have read before that."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10674
msgid ""
"If your program reads more than one byte ahead, you have at least two "
"choices:"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10677
msgid ""
"If possible, modify the program so it only reads one byte ahead. This is the "
"simplest solution."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:10680
msgid ""
"If that option is not available, first of all determine the maximum number "
"of characters your program needs to return to the input stream at one time. "
"Increase that number slightly, just to be sure, preferably to a multiple of "
"16—so it aligns nicely. Then modify the <varname>.bss</varname> section of "
"your code, and create a small \"spare\" buffer right before your input "
"buffer, something like this:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:10689
#, no-wrap
msgid ""
"section\t.bss\n"
"\tresb\t16\t; or whatever the value you came up with\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE"
msgstr ""
"section\t.bss\n"
"\tresb\t16\t; or whatever the value you came up with\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE"

#. (itstool) path: sect2/para
#: book.translate.xml:10694
msgid ""
"You also need to modify your <function>ungetc</function> to pass the value "
"of the byte to unget in <varname role=\"register\">AL</varname>:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:10697
#, no-wrap
msgid ""
"ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\tmov\t[esi], al\n"
"\tret"
msgstr ""
"ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\tmov\t[esi], al\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:10703
msgid ""
"With this modification, you can call <function>ungetc</function> up to 17 "
"times in a row safely (the first call will still be within the buffer, the "
"remaining 16 may be either within the buffer or within the \"spare\")."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:10712
msgid "Command Line Arguments"
msgstr "براهین خط فرمان"

#. (itstool) path: sect1/para
#: book.translate.xml:10714
msgid ""
"Our <application>hex</application> program will be more useful if it can "
"read the names of an input and output file from its command line, i.e., if "
"it can process the command line arguments. But... Where are they?"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10719
msgid ""
"Before a <trademark class=\"registered\">UNIX</trademark> system starts a "
"program, it <function role=\"opcode\">push</function>es some data on the "
"stack, then jumps at the <varname>_start</varname> label of the program. "
"Yes, I said jumps, not calls. That means the data can be accessed by reading "
"<varname>[esp+offset]</varname>, or by simply <function role=\"opcode\">pop</"
"function>ping it."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10725
msgid ""
"The value at the top of the stack contains the number of command line "
"arguments. It is traditionally called <varname>argc</varname>, for "
"\"argument count.\""
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10729
msgid ""
"Command line arguments follow next, all <varname>argc</varname> of them. "
"These are typically referred to as <varname>argv</varname>, for \"argument "
"value(s).\" That is, we get <varname>argv[0]</varname>, <varname>argv[1]</"
"varname>, <varname>...</varname>, <varname>argv[argc-1]</varname>. These are "
"not the actual arguments, but pointers to arguments, i.e., memory addresses "
"of the actual arguments. The arguments themselves are NUL-terminated "
"character strings."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10739
msgid ""
"The <varname>argv</varname> list is followed by a NULL pointer, which is "
"simply a <constant>0</constant>. There is more, but this is enough for our "
"purposes right now."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:10744
msgid ""
"If you have come from the <acronym><trademark class=\"registered\">MS-DOS</"
"trademark></acronym> programming environment, the main difference is that "
"each argument is in a separate string. The second difference is that there "
"is no practical limit on how many arguments there can be."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10751
msgid ""
"Armed with this knowledge, we are almost ready for the next version of "
"<filename>hex.asm</filename>. First, however, we need to add a few lines to "
"<filename>system.inc</filename>:"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10756
msgid ""
"First, we need to add two new entries to our list of system call numbers:"
msgstr ""

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10759
#, no-wrap
msgid ""
"%define\tSYS_open\t5\n"
"%define\tSYS_close\t6"
msgstr ""
"%define\tSYS_open\t5\n"
"%define\tSYS_close\t6"

#. (itstool) path: sect1/para
#: book.translate.xml:10762
msgid "Then we add two new macros at the end of the file:"
msgstr ""

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10764
#, no-wrap
msgid ""
"%macro\tsys.open\t0\n"
"\tsystem\tSYS_open\n"
"%endmacro\n"
"\n"
"%macro\tsys.close\t0\n"
"\tsystem\tSYS_close\n"
"%endmacro"
msgstr ""
"%macro\tsys.open\t0\n"
"\tsystem\tSYS_open\n"
"%endmacro\n"
"\n"
"%macro\tsys.close\t0\n"
"\tsystem\tSYS_close\n"
"%endmacro"

#. (itstool) path: sect1/para
#: book.translate.xml:10772
msgid "Here, then, is our modified source code:"
msgstr "اکنون، کد منبع اصلاح شدهٔ ما چنین است:"

#. (itstool) path: sect1/programlisting
#: book.translate.xml:10774
#, no-wrap
msgid ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"align 4\n"
"err:\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\n"
"\tpop\tecx\n"
"\tjecxz\t.init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the path to input file\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\terr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\n"
"\tpop\tecx\n"
"\tjecxz\t.init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the path to output file\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\terr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from input file or stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tcmp\tal, dl\n"
"\tjne\t.loop\n"
"\tcall\twrite\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"
msgstr ""
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"hex\tdb\t'0123456789ABCDEF'\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"align 4\n"
"err:\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\n"
"\tpop\tecx\n"
"\tjecxz\t.init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the path to input file\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\terr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\n"
"\tpop\tecx\n"
"\tjecxz\t.init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the path to output file\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\terr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
".loop:\n"
"\t; read a byte from input file or stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; convert it to hex\n"
"\tmov\tdl, al\n"
"\tshr\tal, 4\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, dl\n"
"\tand\tal, 0Fh\n"
"\tmov\tal, [hex+eax]\n"
"\tcall\tputchar\n"
"\n"
"\tmov\tal, ' '\n"
"\tcmp\tdl, 0Ah\n"
"\tjne\t.put\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tcmp\tal, dl\n"
"\tjne\t.loop\n"
"\tcall\twrite\n"
"\tjmp\tshort .loop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
"\tret"

#. (itstool) path: sect1/para
#: book.translate.xml:10917
msgid ""
"In our <varname>.data</varname> section we now have two new variables, "
"<varname>fd.in</varname> and <varname>fd.out</varname>. We store the input "
"and output file descriptors here."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10922
msgid ""
"In the <varname>.text</varname> section we have replaced the references to "
"<varname>stdin</varname> and <varname>stdout</varname> with <varname>[fd."
"in]</varname> and <varname>[fd.out]</varname>."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10927
msgid ""
"The <varname>.text</varname> section now starts with a simple error handler, "
"which does nothing but exit the program with a return value of <constant>1</"
"constant>. The error handler is before <varname>_start</varname> so we are "
"within a short distance from where the errors occur."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10933
msgid ""
"Naturally, the program execution still begins at <varname>_start</varname>. "
"First, we remove <varname>argc</varname> and <varname>argv[0]</varname> from "
"the stack: They are of no interest to us (in this program, that is)."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10939
msgid ""
"We pop <varname>argv[1]</varname> to <varname role=\"register\">ECX</"
"varname>. This register is particularly suited for pointers, as we can "
"handle NULL pointers with <function role=\"opcode\">jecxz</function>. If "
"<varname>argv[1]</varname> is not NULL, we try to open the file named in the "
"first argument. Otherwise, we continue the program as before: Reading from "
"<varname>stdin</varname>, writing to <varname>stdout</varname>. If we fail "
"to open the input file (e.g., it does not exist), we jump to the error "
"handler and quit."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10949
msgid ""
"If all went well, we now check for the second argument. If it is there, we "
"open the output file. Otherwise, we send the output to <varname>stdout</"
"varname>. If we fail to open the output file (e.g., it exists and we do not "
"have the write permission), we, again, jump to the error handler."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10955
msgid ""
"The rest of the code is the same as before, except we close the input and "
"output files before exiting, and, as mentioned, we use <varname>[fd.in]</"
"varname> and <varname>[fd.out]</varname>."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10960
msgid "Our executable is now a whopping 768 bytes long."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10962
msgid ""
"Can we still improve it? Of course! Every program can be improved. Here are "
"a few ideas of what we could do:"
msgstr ""
"آیا هنوز هم می‌توانیم آن را بهبود ببخشیم؟ البته! هر برنامه‌ای قابل بهبود "
"است. در اینجا چند ایده از آنچه می‌توانیم انجام دهیم آورده شده است:"

#. (itstool) path: listitem/para
#: book.translate.xml:10967
msgid "Have our error handler print a message to <varname>stderr</varname>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:10972
msgid ""
"Add error handlers to the <function>read</function> and <function>write</"
"function> functions."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:10977
msgid ""
"Close <varname>stdin</varname> when we open an input file, <varname>stdout</"
"varname> when we open an output file."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:10983
msgid ""
"Add command line switches, such as <parameter>-i</parameter> and <parameter>-"
"o</parameter>, so we can list the input and output files in any order, or "
"perhaps read from <varname>stdin</varname> and write to a file."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:10991
msgid "Print a usage message if command line arguments are incorrect."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:10997
msgid ""
"I shall leave these enhancements as an exercise to the reader: You already "
"know everything you need to know to implement them."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:11003
msgid "<trademark class=\"registered\">UNIX</trademark> Environment"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11005
msgid ""
"An important <trademark class=\"registered\">UNIX</trademark> concept is the "
"environment, which is defined by <emphasis>environment variables</emphasis>. "
"Some are set by the system, others by you, yet others by the "
"<application>shell</application>, or any program that loads another program."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11012
msgid "How to Find Environment Variables"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11014
msgid ""
"I said earlier that when a program starts executing, the stack contains "
"<varname>argc</varname> followed by the NULL-terminated <varname>argv</"
"varname> array, followed by something else. The \"something else\" is the "
"<emphasis>environment</emphasis>, or, to be more precise, a NULL-terminated "
"array of pointers to <emphasis>environment variables</emphasis>. This is "
"often referred to as <varname>env</varname>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11023
msgid ""
"The structure of <varname>env</varname> is the same as that of "
"<varname>argv</varname>, a list of memory addresses followed by a NULL "
"(<constant>0</constant>). In this case, there is no <varname>\"envc\"</"
"varname>—we figure out where the array ends by searching for the final NULL."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11029
msgid ""
"The variables usually come in the <varname>name=value</varname> format, but "
"sometimes the <varname>=value</varname> part may be missing. We need to "
"account for that possibility."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11036
msgid "webvars"
msgstr "webvars"

#. (itstool) path: sect2/para
#: book.translate.xml:11038
msgid ""
"I could just show you some code that prints the environment the same way the "
"<trademark class=\"registered\">UNIX</trademark> <application>env</"
"application> command does. But I thought it would be more interesting to "
"write a simple assembly language CGI utility."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:11045
msgid "CGI: a Quick Overview"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11047
msgid ""
"I have a <link xlink:href=\"http://www.whizkidtech.redprince.net/cgi-bin/"
"tutorial\">detailed <acronym>CGI</acronym> tutorial</link> on my web site, "
"but here is a very quick overview of <acronym>CGI</acronym>:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11054
msgid ""
"The web server communicates with the <acronym>CGI</acronym> program by "
"setting <emphasis>environment variables</emphasis>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11060
msgid ""
"The <acronym>CGI</acronym> program sends its output to <filename>stdout</"
"filename>. The web server reads it from there."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11066
msgid ""
"It must start with an <acronym>HTTP</acronym> header followed by two blank "
"lines."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11071
msgid ""
"It then prints the <acronym>HTML</acronym> code, or whatever other type of "
"data it is producing."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:11077
msgid ""
"While certain <emphasis>environment variables</emphasis> use standard names, "
"others vary, depending on the web server. That makes <application>webvars</"
"application> quite a useful diagnostic tool."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:11086
msgid "The Code"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11088
msgid ""
"Our <application>webvars</application> program, then, must send out the "
"<acronym>HTTP</acronym> header followed by some <acronym>HTML</acronym> mark-"
"up. It then must read the <emphasis>environment variables</emphasis> one by "
"one and send them out as part of the <acronym>HTML</acronym> page."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11095
msgid ""
"The code follows. I placed comments and explanations right inside the code:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:11098
#, no-wrap
msgid ""
";;;;;;; webvars.asm ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Copyright (c) 2000 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
"; Redistribution and use in source and binary forms, with or without\n"
"; modification, are permitted provided that the following conditions\n"
"; are met:\n"
"; 1. Redistributions of source code must retain the above copyright\n"
";    notice, this list of conditions and the following disclaimer.\n"
"; 2. Redistributions in binary form must reproduce the above copyright\n"
";    notice, this list of conditions and the following disclaimer in the\n"
";    documentation and/or other materials provided with the distribution.\n"
";\n"
"; THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND\n"
"; ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n"
"; IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n"
"; ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE\n"
"; FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n"
"; DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n"
"; OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n"
"; HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT\n"
"; LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n"
"; OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n"
"; SUCH DAMAGE.\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Version 1.0\n"
";\n"
"; Started:\t 8-Dec-2000\n"
"; Updated:\t 8-Dec-2000\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"http\tdb\t'Content-type: text/html', 0Ah, 0Ah\n"
"\tdb\t'&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;', 0Ah\n"
"\tdb\t'&lt;!DOCTYPE html PUBLIC \"-//W3C/DTD XHTML Strict//EN\" '\n"
"\tdb\t'\"DTD/xhtml1-strict.dtd\"&gt;', 0Ah\n"
"\tdb\t'&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" '\n"
"\tdb\t'xml.lang=\"en\" lang=\"en\"&gt;', 0Ah\n"
"\tdb\t'&lt;head&gt;', 0Ah\n"
"\tdb\t'&lt;title&gt;Web Environment&lt;/title&gt;', 0Ah\n"
"\tdb\t'&lt;meta name=\"author\" content=\"G. Adam Stanislav\" /&gt;', 0Ah\n"
"\tdb\t'&lt;/head&gt;', 0Ah, 0Ah\n"
"\tdb\t'&lt;body bgcolor=\"#ffffff\" text=\"#000000\" link=\"#0000ff\" '\n"
"\tdb\t'vlink=\"#840084\" alink=\"#0000ff\"&gt;', 0Ah\n"
"\tdb\t'&lt;div class=\"webvars\"&gt;', 0Ah\n"
"\tdb\t'&lt;h1&gt;Web Environment&lt;/h1&gt;', 0Ah\n"
"\tdb\t'&lt;p&gt;The following &lt;b&gt;environment variables&lt;/b&gt; are defined '\n"
"\tdb\t'on this web server:&lt;/p&gt;', 0Ah, 0Ah\n"
"\tdb\t'&lt;table align=\"center\" width=\"80\" border=\"0\" cellpadding=\"10\" '\n"
"\tdb\t'cellspacing=\"0\" class=\"webvars\"&gt;', 0Ah\n"
"httplen\tequ\t$-http\n"
"left\tdb\t'&lt;tr&gt;', 0Ah\n"
"\tdb\t'&lt;td class=\"name\"&gt;&lt;tt&gt;'\n"
"leftlen\tequ\t$-left\n"
"middle\tdb\t'&lt;/tt&gt;&lt;/td&gt;', 0Ah\n"
"\tdb\t'&lt;td class=\"value\"&gt;&lt;tt&gt;&lt;b&gt;'\n"
"midlen\tequ\t$-middle\n"
"undef\tdb\t'&lt;i&gt;(undefined)&lt;/i&gt;'\n"
"undeflen\tequ\t$-undef\n"
"right\tdb\t'&lt;/b&gt;&lt;/tt&gt;&lt;/td&gt;', 0Ah\n"
"\tdb\t'&lt;/tr&gt;', 0Ah\n"
"rightlen\tequ\t$-right\n"
"wrap\tdb\t'&lt;/table&gt;', 0Ah\n"
"\tdb\t'&lt;/div&gt;', 0Ah\n"
"\tdb\t'&lt;/body&gt;', 0Ah\n"
"\tdb\t'&lt;/html&gt;', 0Ah, 0Ah\n"
"wraplen\tequ\t$-wrap\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\t; First, send out all the http and xhtml stuff that is\n"
"\t; needed before we start showing the environment\n"
"\tpush\tdword httplen\n"
"\tpush\tdword http\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Now find how far on the stack the environment pointers\n"
"\t; are. We have 12 bytes we have pushed before \"argc\"\n"
"\tmov\teax, [esp+12]\n"
"\n"
"\t; We need to remove the following from the stack:\n"
"\t;\n"
"\t;\tThe 12 bytes we pushed for sys.write\n"
"\t;\tThe  4 bytes of argc\n"
"\t;\tThe EAX*4 bytes of argv\n"
"\t;\tThe  4 bytes of the NULL after argv\n"
"\t;\n"
"\t; Total:\n"
"\t;\t20 + eax * 4\n"
"\t;\n"
"\t; Because stack grows down, we need to ADD that many bytes\n"
"\t; to ESP.\n"
"\tlea\tesp, [esp+20+eax*4]\n"
"\tcld\t\t; This should already be the case, but let's be sure.\n"
"\n"
"\t; Loop through the environment, printing it out\n"
".loop:\n"
"\tpop\tedi\n"
"\tor\tedi, edi\t; Done yet?\n"
"\tje\tnear .wrap\n"
"\n"
"\t; Print the left part of HTML\n"
"\tpush\tdword leftlen\n"
"\tpush\tdword left\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; It may be tempting to search for the '=' in the env string next.\n"
"\t; But it is possible there is no '=', so we search for the\n"
"\t; terminating NUL first.\n"
"\tmov\tesi, edi\t; Save start of string\n"
"\tsub\tecx, ecx\n"
"\tnot\tecx\t\t; ECX = FFFFFFFF\n"
"\tsub\teax, eax\n"
"repne\tscasb\n"
"\tnot\tecx\t\t; ECX = string length + 1\n"
"\tmov\tebx, ecx\t; Save it in EBX\n"
"\n"
"\t; Now is the time to find '='\n"
"\tmov\tedi, esi\t; Start of string\n"
"\tmov\tal, '='\n"
"repne\tscasb\n"
"\tnot\tecx\n"
"\tadd\tecx, ebx\t; Length of name\n"
"\n"
"\tpush\tecx\n"
"\tpush\tesi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Print the middle part of HTML table code\n"
"\tpush\tdword midlen\n"
"\tpush\tdword middle\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Find the length of the value\n"
"\tnot\tecx\n"
"\tlea\tebx, [ebx+ecx-1]\n"
"\n"
"\t; Print \"undefined\" if 0\n"
"\tor\tebx, ebx\n"
"\tjne\t.value\n"
"\n"
"\tmov\tebx, undeflen\n"
"\tmov\tedi, undef\n"
"\n"
".value:\n"
"\tpush\tebx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Print the right part of the table row\n"
"\tpush\tdword rightlen\n"
"\tpush\tdword right\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Get rid of the 60 bytes we have pushed\n"
"\tadd\tesp, byte 60\n"
"\n"
"\t; Get the next variable\n"
"\tjmp\t.loop\n"
"\n"
".wrap:\n"
"\t; Print the rest of HTML\n"
"\tpush\tdword wraplen\n"
"\tpush\tdword wrap\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Return success\n"
"\tpush\tdword 0\n"
"\tsys.exit"
msgstr ""
";;;;;;; webvars.asm "
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Copyright (c) 2000 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
"; Redistribution and use in source and binary forms, with or without\n"
"; modification, are permitted provided that the following conditions\n"
"; are met:\n"
"; 1. Redistributions of source code must retain the above copyright\n"
";    notice, this list of conditions and the following disclaimer.\n"
"; 2. Redistributions in binary form must reproduce the above copyright\n"
";    notice, this list of conditions and the following disclaimer in the\n"
";    documentation and/or other materials provided with the distribution.\n"
";\n"
"; THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND\n"
"; ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n"
"; IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR "
"PURPOSE\n"
"; ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE\n"
"; FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR "
"CONSEQUENTIAL\n"
"; DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS\n"
"; OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)\n"
"; HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, "
"STRICT\n"
"; LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY\n"
"; OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n"
"; SUCH DAMAGE.\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"
";;\n"
";\n"
"; Version 1.0\n"
";\n"
"; Started:\t 8-Dec-2000\n"
"; Updated:\t 8-Dec-2000\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"
";;\n"
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"http\tdb\t'Content-type: text/html', 0Ah, 0Ah\n"
"\tdb\t'&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;', 0Ah\n"
"\tdb\t'&lt;!DOCTYPE html PUBLIC \"-//W3C/DTD XHTML Strict//EN\" '\n"
"\tdb\t'\"DTD/xhtml1-strict.dtd\"&gt;', 0Ah\n"
"\tdb\t'&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" '\n"
"\tdb\t'xml.lang=\"en\" lang=\"en\"&gt;', 0Ah\n"
"\tdb\t'&lt;head&gt;', 0Ah\n"
"\tdb\t'&lt;title&gt;Web Environment&lt;/title&gt;', 0Ah\n"
"\tdb\t'&lt;meta name=\"author\" content=\"G. Adam Stanislav\" /&gt;', 0Ah\n"
"\tdb\t'&lt;/head&gt;', 0Ah, 0Ah\n"
"\tdb\t'&lt;body bgcolor=\"#ffffff\" text=\"#000000\" link=\"#0000ff\" '\n"
"\tdb\t'vlink=\"#840084\" alink=\"#0000ff\"&gt;', 0Ah\n"
"\tdb\t'&lt;div class=\"webvars\"&gt;', 0Ah\n"
"\tdb\t'&lt;h1&gt;Web Environment&lt;/h1&gt;', 0Ah\n"
"\tdb\t'&lt;p&gt;The following &lt;b&gt;environment variables&lt;/b&gt; are "
"defined '\n"
"\tdb\t'on this web server:&lt;/p&gt;', 0Ah, 0Ah\n"
"\tdb\t'&lt;table align=\"center\" width=\"80\" border=\"0\" cellpadding=\"10"
"\" '\n"
"\tdb\t'cellspacing=\"0\" class=\"webvars\"&gt;', 0Ah\n"
"httplen\tequ\t$-http\n"
"left\tdb\t'&lt;tr&gt;', 0Ah\n"
"\tdb\t'&lt;td class=\"name\"&gt;&lt;tt&gt;'\n"
"leftlen\tequ\t$-left\n"
"middle\tdb\t'&lt;/tt&gt;&lt;/td&gt;', 0Ah\n"
"\tdb\t'&lt;td class=\"value\"&gt;&lt;tt&gt;&lt;b&gt;'\n"
"midlen\tequ\t$-middle\n"
"undef\tdb\t'&lt;i&gt;(undefined)&lt;/i&gt;'\n"
"undeflen\tequ\t$-undef\n"
"right\tdb\t'&lt;/b&gt;&lt;/tt&gt;&lt;/td&gt;', 0Ah\n"
"\tdb\t'&lt;/tr&gt;', 0Ah\n"
"rightlen\tequ\t$-right\n"
"wrap\tdb\t'&lt;/table&gt;', 0Ah\n"
"\tdb\t'&lt;/div&gt;', 0Ah\n"
"\tdb\t'&lt;/body&gt;', 0Ah\n"
"\tdb\t'&lt;/html&gt;', 0Ah, 0Ah\n"
"wraplen\tequ\t$-wrap\n"
"\n"
"section\t.text\n"
"global\t_start\n"
"_start:\n"
"\t; First, send out all the http and xhtml stuff that is\n"
"\t; needed before we start showing the environment\n"
"\tpush\tdword httplen\n"
"\tpush\tdword http\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Now find how far on the stack the environment pointers\n"
"\t; are. We have 12 bytes we have pushed before \"argc\"\n"
"\tmov\teax, [esp+12]\n"
"\n"
"\t; We need to remove the following from the stack:\n"
"\t;\n"
"\t;\tThe 12 bytes we pushed for sys.write\n"
"\t;\tThe  4 bytes of argc\n"
"\t;\tThe EAX*4 bytes of argv\n"
"\t;\tThe  4 bytes of the NULL after argv\n"
"\t;\n"
"\t; Total:\n"
"\t;\t20 + eax * 4\n"
"\t;\n"
"\t; Because stack grows down, we need to ADD that many bytes\n"
"\t; to ESP.\n"
"\tlea\tesp, [esp+20+eax*4]\n"
"\tcld\t\t; This should already be the case, but let's be sure.\n"
"\n"
"\t; Loop through the environment, printing it out\n"
".loop:\n"
"\tpop\tedi\n"
"\tor\tedi, edi\t; Done yet?\n"
"\tje\tnear .wrap\n"
"\n"
"\t; Print the left part of HTML\n"
"\tpush\tdword leftlen\n"
"\tpush\tdword left\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; It may be tempting to search for the '=' in the env string next.\n"
"\t; But it is possible there is no '=', so we search for the\n"
"\t; terminating NUL first.\n"
"\tmov\tesi, edi\t; Save start of string\n"
"\tsub\tecx, ecx\n"
"\tnot\tecx\t\t; ECX = FFFFFFFF\n"
"\tsub\teax, eax\n"
"repne\tscasb\n"
"\tnot\tecx\t\t; ECX = string length + 1\n"
"\tmov\tebx, ecx\t; Save it in EBX\n"
"\n"
"\t; Now is the time to find '='\n"
"\tmov\tedi, esi\t; Start of string\n"
"\tmov\tal, '='\n"
"repne\tscasb\n"
"\tnot\tecx\n"
"\tadd\tecx, ebx\t; Length of name\n"
"\n"
"\tpush\tecx\n"
"\tpush\tesi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Print the middle part of HTML table code\n"
"\tpush\tdword midlen\n"
"\tpush\tdword middle\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Find the length of the value\n"
"\tnot\tecx\n"
"\tlea\tebx, [ebx+ecx-1]\n"
"\n"
"\t; Print \"undefined\" if 0\n"
"\tor\tebx, ebx\n"
"\tjne\t.value\n"
"\n"
"\tmov\tebx, undeflen\n"
"\tmov\tedi, undef\n"
"\n"
".value:\n"
"\tpush\tebx\n"
"\tpush\tedi\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Print the right part of the table row\n"
"\tpush\tdword rightlen\n"
"\tpush\tdword right\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Get rid of the 60 bytes we have pushed\n"
"\tadd\tesp, byte 60\n"
"\n"
"\t; Get the next variable\n"
"\tjmp\t.loop\n"
"\n"
".wrap:\n"
"\t; Print the rest of HTML\n"
"\tpush\tdword wraplen\n"
"\tpush\tdword wrap\n"
"\tpush\tdword stdout\n"
"\tsys.write\n"
"\n"
"\t; Return success\n"
"\tpush\tdword 0\n"
"\tsys.exit"

#. (itstool) path: sect3/para
#: book.translate.xml:11280
msgid ""
"This code produces a 1,396-byte executable. Most of it is data, i.e., the "
"<acronym>HTML</acronym> mark-up we need to send out."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11284
msgid "Assemble and link it as usual:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:11286
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>nasm -f elf webvars.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o webvars webvars.o</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>nasm -f elf webvars.asm</userinput>\n"
"<prompt>%</prompt> <userinput>ld -s -o webvars webvars.o</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:11289
msgid ""
"To use it, you need to upload <filename>webvars</filename> to your web "
"server. Depending on how your web server is set up, you may have to store it "
"in a special <filename>cgi-bin</filename> directory, or perhaps rename it "
"with a <filename>.cgi</filename> extension."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11295
msgid ""
"Then you need to use your browser to view its output. To see its output on "
"my web server, please go to <link xlink:href=\"http://www.int80h.org/webvars/"
"\"><filename>http://www.int80h.org/webvars/</filename></link>. If curious "
"about the additional environment variables present in a password protected "
"web directory, go to <link xlink:href=\"http://www.int80h.org/private/"
"\"><filename>http://www.int80h.org/private/</filename></link>, using the "
"name <userinput>asm</userinput> and password <userinput>programmer</"
"userinput>."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:11306
msgid "Working with Files"
msgstr "کار با پرونده‌ها"

#. (itstool) path: sect1/para
#: book.translate.xml:11308
msgid ""
"We have already done some basic file work: We know how to open and close "
"them, how to read and write them using buffers. But <trademark class="
"\"registered\">UNIX</trademark> offers much more functionality when it comes "
"to files. We will examine some of it in this section, and end up with a nice "
"file conversion utility."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11314
msgid ""
"Indeed, let us start at the end, that is, with the file conversion utility. "
"It always makes programming easier when we know from the start what the end "
"product is supposed to do."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11319
msgid ""
"One of the first programs I wrote for <trademark class=\"registered\">UNIX</"
"trademark> was <link xlink:href=\"ftp://ftp.int80h.org/unix/tuc/"
"\"><application>tuc</application></link>, a text-to-<trademark class="
"\"registered\">UNIX</trademark> file converter. It converts a text file from "
"other operating systems to a <trademark class=\"registered\">UNIX</"
"trademark> text file. In other words, it changes from different kind of line "
"endings to the newline convention of <trademark class=\"registered\">UNIX</"
"trademark>. It saves the output in a different file. Optionally, it converts "
"a <trademark class=\"registered\">UNIX</trademark> text file to a "
"<acronym>DOS</acronym> text file."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11327
msgid ""
"I have used <application>tuc</application> extensively, but always only to "
"convert from some other <acronym>OS</acronym> to <trademark class="
"\"registered\">UNIX</trademark>, never the other way. I have always wished "
"it would just overwrite the file instead of me having to send the output to "
"a different file. Most of the time, I end up using it like this:"
msgstr ""

#. (itstool) path: sect1/screen
#: book.translate.xml:11334
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>tuc <replaceable>myfile tempfile</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>mv <replaceable>tempfile myfile</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>tuc <replaceable>myfile "
"tempfile</replaceable></userinput>\n"
"<prompt>%</prompt> <userinput>mv <replaceable>tempfile "
"myfile</replaceable></userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:11337
msgid ""
"It would be nice to have a <application>ftuc</application>, i.e., "
"<emphasis>fast tuc</emphasis>, and use it like this:"
msgstr ""

#. (itstool) path: sect1/screen
#: book.translate.xml:11341
#, no-wrap
msgid "<prompt>%</prompt> <userinput>ftuc <replaceable>myfile</replaceable></userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>ftuc "
"<replaceable>myfile</replaceable></userinput>"

#. (itstool) path: sect1/para
#: book.translate.xml:11343
msgid ""
"In this chapter, then, we will write <application>ftuc</application> in "
"assembly language (the original <application>tuc</application> is in C), and "
"study various file-oriented kernel services in the process."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11348
msgid ""
"At first sight, such a file conversion is very simple: All you have to do is "
"strip the carriage returns, right?"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11351
msgid ""
"If you answered yes, think again: That approach will work most of the time "
"(at least with <acronym>MS DOS</acronym> text files), but will fail "
"occasionally."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11355
msgid ""
"The problem is that not all non <trademark class=\"registered\">UNIX</"
"trademark> text files end their line with the carriage return / line feed "
"sequence. Some use carriage returns without line feeds. Others combine "
"several blank lines into a single carriage return followed by several line "
"feeds. And so on."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11361
msgid ""
"A text file converter, then, must be able to handle any possible line "
"endings:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11366
msgid "carriage return / line feed"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11370
msgid "carriage return"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11374
msgid "line feed / carriage return"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11378
msgid "line feed"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:11382
msgid ""
"It should also handle files that use some kind of a combination of the above "
"(e.g., carriage return followed by several line feeds)."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11387
msgid "Finite State Machine"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11389
msgid ""
"The problem is easily solved by the use of a technique called "
"<emphasis>finite state machine</emphasis>, originally developed by the "
"designers of digital electronic circuits. A <emphasis>finite state machine</"
"emphasis> is a digital circuit whose output is dependent not only on its "
"input but on its previous input, i.e., on its state. The microprocessor is "
"an example of a <emphasis>finite state machine</emphasis>: Our assembly "
"language code is assembled to machine language in which some assembly "
"language code produces a single byte of machine language, while others "
"produce several bytes. As the microprocessor fetches the bytes from the "
"memory one by one, some of them simply change its state rather than produce "
"some output. When all the bytes of the op code are fetched, the "
"microprocessor produces some output, or changes the value of a register, etc."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11405
msgid ""
"Because of that, all software is essentially a sequence of state "
"instructions for the microprocessor. Nevertheless, the concept of "
"<emphasis>finite state machine</emphasis> is useful in software design as "
"well."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11410
msgid ""
"Our text file converter can be designer as a <emphasis>finite state machine</"
"emphasis> with three possible states. We could call them states 0-2, but it "
"will make our life easier if we give them symbolic names:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11417
msgid "<symbol>ordinary</symbol>"
msgstr "<symbol>ordinary</symbol>"

#. (itstool) path: listitem/para
#: book.translate.xml:11421
msgid "<symbol>cr</symbol>"
msgstr "<symbol>cr</symbol>"

#. (itstool) path: listitem/para
#: book.translate.xml:11425
msgid "<symbol>lf</symbol>"
msgstr "<symbol>lf</symbol>"

#. (itstool) path: sect2/para
#: book.translate.xml:11429
msgid ""
"Our program will start in the <symbol>ordinary</symbol> state. During this "
"state, the program action depends on its input as follows:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11435
msgid ""
"If the input is anything other than a carriage return or line feed, the "
"input is simply passed on to the output. The state remains unchanged."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11441
msgid ""
"If the input is a carriage return, the state is changed to <symbol>cr</"
"symbol>. The input is then discarded, i.e., no output is made."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11447
msgid ""
"If the input is a line feed, the state is changed to <symbol>lf</symbol>. "
"The input is then discarded."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11452
msgid ""
"Whenever we are in the <symbol>cr</symbol> state, it is because the last "
"input was a carriage return, which was unprocessed. What our software does "
"in this state again depends on the current input:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11459
msgid ""
"If the input is anything other than a carriage return or line feed, output a "
"line feed, then output the input, then change the state to <symbol>ordinary</"
"symbol>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11465
msgid ""
"If the input is a carriage return, we have received two (or more) carriage "
"returns in a row. We discard the input, we output a line feed, and leave the "
"state unchanged."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11472
msgid ""
"If the input is a line feed, we output the line feed and change the state to "
"<symbol>ordinary</symbol>. Note that this is not the same as the first case "
"above – if we tried to combine them, we would be outputting two line feeds "
"instead of one."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11480
msgid ""
"Finally, we are in the <symbol>lf</symbol> state after we have received a "
"line feed that was not preceded by a carriage return. This will happen when "
"our file already is in <trademark class=\"registered\">UNIX</trademark> "
"format, or whenever several lines in a row are expressed by a single "
"carriage return followed by several line feeds, or when line ends with a "
"line feed / carriage return sequence. Here is how we need to handle our "
"input in this state:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11491
msgid ""
"If the input is anything other than a carriage return or line feed, we "
"output a line feed, then output the input, then change the state to "
"<symbol>ordinary</symbol>. This is exactly the same action as in the "
"<symbol>cr</symbol> state upon receiving the same kind of input."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11500
msgid ""
"If the input is a carriage return, we discard the input, we output a line "
"feed, then change the state to <symbol>ordinary</symbol>."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:11506
msgid ""
"If the input is a line feed, we output the line feed, and leave the state "
"unchanged."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:11512
msgid "The Final State"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11514
msgid ""
"The above <emphasis>finite state machine</emphasis> works for the entire "
"file, but leaves the possibility that the final line end will be ignored. "
"That will happen whenever the file ends with a single carriage return or a "
"single line feed. I did not think of it when I wrote <application>tuc</"
"application>, just to discover that occasionally it strips the last line "
"ending."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11522
msgid ""
"This problem is easily fixed by checking the state after the entire file was "
"processed. If the state is not <symbol>ordinary</symbol>, we simply need to "
"output one last line feed."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:11528
msgid ""
"Now that we have expressed our algorithm as a <emphasis>finite state "
"machine</emphasis>, we could easily design a dedicated digital electronic "
"circuit (a \"chip\") to do the conversion for us. Of course, doing so would "
"be considerably more expensive than writing an assembly language program."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:11538
msgid "The Output Counter"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:11540
msgid ""
"Because our file conversion program may be combining two characters into "
"one, we need to use an output counter. We initialize it to <constant>0</"
"constant>, and increase it every time we send a character to the output. At "
"the end of the program, the counter will tell us what size we need to set "
"the file to."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11550
msgid "Implementing FSM in Software"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11552
msgid ""
"The hardest part of working with a <emphasis>finite state machine</emphasis> "
"is analyzing the problem and expressing it as a <emphasis>finite state "
"machine</emphasis>. That accomplished, the software almost writes itself."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11557
msgid ""
"In a high-level language, such as C, there are several main approaches. One "
"is to use a <function role=\"statement\">switch</function> statement which "
"chooses what function should be run. For example,"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11561
#, no-wrap
msgid ""
"switch (state) {\n"
"\tdefault:\n"
"\tcase REGULAR:\n"
"\t\tregular(inputchar);\n"
"\t\tbreak;\n"
"\tcase CR:\n"
"\t\tcr(inputchar);\n"
"\t\tbreak;\n"
"\tcase LF:\n"
"\t\tlf(inputchar);\n"
"\t\tbreak;\n"
"\t}"
msgstr ""
"switch (state) {\n"
"\tdefault:\n"
"\tcase REGULAR:\n"
"\t\tregular(inputchar);\n"
"\t\tbreak;\n"
"\tcase CR:\n"
"\t\tcr(inputchar);\n"
"\t\tbreak;\n"
"\tcase LF:\n"
"\t\tlf(inputchar);\n"
"\t\tbreak;\n"
"\t}"

#. (itstool) path: sect2/para
#: book.translate.xml:11574
msgid ""
"Another approach is by using an array of function pointers, something like "
"this:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11577
#, no-wrap
msgid "(output[state])(inputchar);"
msgstr "(output[state])(inputchar);"

#. (itstool) path: sect2/para
#: book.translate.xml:11579
msgid ""
"Yet another is to have <varname>state</varname> be a function pointer, set "
"to point at the appropriate function:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11583
#, no-wrap
msgid "(*state)(inputchar);"
msgstr "(*state)(inputchar);"

#. (itstool) path: sect2/para
#: book.translate.xml:11585
msgid ""
"This is the approach we will use in our program because it is very easy to "
"do in assembly language, and very fast, too. We will simply keep the address "
"of the right procedure in <varname role=\"register\">EBX</varname>, and then "
"just issue:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11591
#, no-wrap
msgid "call\tebx"
msgstr "call\tebx"

#. (itstool) path: sect2/para
#: book.translate.xml:11593
msgid ""
"This is possibly faster than hardcoding the address in the code because the "
"microprocessor does not have to fetch the address from the memory—it is "
"already stored in one of its registers. I said <emphasis>possibly</emphasis> "
"because with the caching modern microprocessors do, either way may be "
"equally fast."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11602
msgid "Memory Mapped Files"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11604
msgid ""
"Because our program works on a single file, we cannot use the approach that "
"worked for us before, i.e., to read from an input file and to write to an "
"output file."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11608
msgid ""
"<trademark class=\"registered\">UNIX</trademark> allows us to map a file, or "
"a section of a file, into memory. To do that, we first need to open the file "
"with the appropriate read/write flags. Then we use the <function role="
"\"syscall\">mmap</function> system call to map it into the memory. One nice "
"thing about <function role=\"syscall\">mmap</function> is that it "
"automatically works with virtual memory: We can map more of the file into "
"the memory than we have physical memory available, yet still access it "
"through regular memory op codes, such as <function role=\"opcode\">mov</"
"function>, <function role=\"opcode\">lods</function>, and <function role="
"\"opcode\">stos</function>. Whatever changes we make to the memory image of "
"the file will be written to the file by the system. We do not even have to "
"keep the file open: As long as it stays mapped, we can read from it and "
"write to it."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11620
msgid ""
"The 32-bit Intel microprocessors can access up to four gigabytes of memory – "
"physical or virtual. The FreeBSD system allows us to use up to a half of it "
"for file mapping."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11625
msgid ""
"For simplicity sake, in this tutorial we will only convert files that can be "
"mapped into the memory in their entirety. There are probably not too many "
"text files that exceed two gigabytes in size. If our program encounters one, "
"it will simply display a message suggesting we use the original "
"<application>tuc</application> instead."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11632
msgid ""
"If you examine your copy of <filename>syscalls.master</filename>, you will "
"find two separate syscalls named <function role=\"syscall\">mmap</function>. "
"This is because of evolution of <trademark class=\"registered\">UNIX</"
"trademark>: There was the traditional <acronym>BSD</acronym> <function role="
"\"syscall\">mmap</function>, syscall 71. That one was superseded by the "
"<acronym><trademark class=\"registered\">POSIX</trademark></acronym> "
"<function role=\"syscall\">mmap</function>, syscall 197. The FreeBSD system "
"supports both because older programs were written by using the original "
"<acronym>BSD</acronym> version. But new software uses the "
"<acronym><trademark class=\"registered\">POSIX</trademark></acronym> "
"version, which is what we will use."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11644
msgid ""
"The <filename>syscalls.master</filename> lists the <acronym><trademark class="
"\"registered\">POSIX</trademark></acronym> version like this:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11647
#, no-wrap
msgid ""
"197\tSTD\tBSD\t{ caddr_t mmap(caddr_t addr, size_t len, int prot, \\\n"
"\t\t\t    int flags, int fd, long pad, off_t pos); }"
msgstr ""
"197\tSTD\tBSD\t{ caddr_t mmap(caddr_t addr, size_t len, int prot, \\\n"
"\t\t\t    int flags, int fd, long pad, off_t pos); }"

#. (itstool) path: sect2/para
#: book.translate.xml:11650
msgid ""
"This differs slightly from what <citerefentry><refentrytitle>mmap</"
"refentrytitle><manvolnum>2</manvolnum></citerefentry> says. That is because "
"<citerefentry><refentrytitle>mmap</refentrytitle><manvolnum>2</manvolnum></"
"citerefentry> describes the C version."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11656
msgid ""
"The difference is in the <varname>long pad</varname> argument, which is not "
"present in the C version. However, the FreeBSD syscalls add a 32-bit pad "
"after <function role=\"opcode\">push</function>ing a 64-bit argument. In "
"this case, <varname>off_t</varname> is a 64-bit value."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11661
msgid ""
"When we are finished working with a memory-mapped file, we unmap it with the "
"<function role=\"syscall\">munmap</function> syscall:"
msgstr ""

#. (itstool) path: tip/para
#: book.translate.xml:11665
msgid ""
"For an in-depth treatment of <function role=\"syscall\">mmap</function>, see "
"W. Richard Stevens' <link xlink:href=\"http://www.int80h.org/cgi-bin/isbn?"
"isbn=0130810819\">Unix Network Programming, Volume 2, Chapter 12</link>."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11672
msgid "Determining File Size"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11674
msgid ""
"Because we need to tell <function role=\"syscall\">mmap</function> how many "
"bytes of the file to map into the memory, and because we want to map the "
"entire file, we need to determine the size of the file."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11678
msgid ""
"We can use the <function role=\"syscall\">fstat</function> syscall to get "
"all the information about an open file that the system can give us. That "
"includes the file size."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11682
msgid ""
"Again, <filename>syscalls.master</filename> lists two versions of <function "
"role=\"syscall\">fstat</function>, a traditional one (syscall 62), and a "
"<acronym><trademark class=\"registered\">POSIX</trademark></acronym> one "
"(syscall 189). Naturally, we will use the <acronym><trademark class="
"\"registered\">POSIX</trademark></acronym> version:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11688
#, no-wrap
msgid "189\tSTD\tPOSIX\t{ int fstat(int fd, struct stat *sb); }"
msgstr "189\tSTD\tPOSIX\t{ int fstat(int fd, struct stat *sb); }"

#. (itstool) path: sect2/para
#: book.translate.xml:11690
msgid ""
"This is a very straightforward call: We pass to it the address of a <varname "
"remap=\"structname\">stat</varname> structure and the descriptor of an open "
"file. It will fill out the contents of the <varname remap=\"structname"
"\">stat</varname> structure."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11695
msgid ""
"I do, however, have to say that I tried to declare the <varname remap="
"\"structname\">stat</varname> structure in the <varname>.bss</varname> "
"section, and <function role=\"syscall\">fstat</function> did not like it: It "
"set the carry flag indicating an error. After I changed the code to allocate "
"the structure on the stack, everything was working fine."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:11704
msgid "Changing the File Size"
msgstr "تغییر اندازهٔ پرونده"

#. (itstool) path: sect2/para
#: book.translate.xml:11706
msgid ""
"Because our program may combine carriage return / line feed sequences into "
"straight line feeds, our output may be smaller than our input. However, "
"since we are placing our output into the same file we read the input from, "
"we may have to change the size of the file."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11712
msgid ""
"The <function role=\"syscall\">ftruncate</function> system call allows us to "
"do just that. Despite its somewhat misleading name, the <function role="
"\"syscall\">ftruncate</function> system call can be used to both truncate "
"the file (make it smaller) and to grow it."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:11718
msgid ""
"And yes, we will find two versions of <function role=\"syscall\">ftruncate</"
"function> in <filename>syscalls.master</filename>, an older one (130), and a "
"newer one (201). We will use the newer one:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11722
#, no-wrap
msgid "201\tSTD\tBSD\t{ int ftruncate(int fd, int pad, off_t length); }"
msgstr "201\tSTD\tBSD\t{ int ftruncate(int fd, int pad, off_t length); }"

#. (itstool) path: sect2/para
#: book.translate.xml:11724
msgid "Please note that this one contains a <varname>int pad</varname> again."
msgstr ""
"لطفاً توجه داشته باشید که این مورد دوباره شامل یک <varname>int pad</varname> "
"است."

#. (itstool) path: sect2/title
#: book.translate.xml:11729
msgid "ftuc"
msgstr "ftuc"

#. (itstool) path: sect2/para
#: book.translate.xml:11731
msgid ""
"We now know everything we need to write <application>ftuc</application>. We "
"start by adding some new lines in <filename>system.inc</filename>. First, we "
"define some constants and structures, somewhere at or near the beginning of "
"the file:"
msgstr ""
"ما هر آنچه که برای نوشتن <application>ftuc</application> نیاز است را می‌"
"دانیم. با اضافه کردن چندین خط جدید به <filename>system.inc</filename> آغاز "
"می‌کنیم. ابتدا، چندین مقدار ثابت و ساختار را در جایی از ابتدای پرونده یا "
"نزدیک آن تعریف می‌کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11737
#, no-wrap
msgid ""
";;;;;;; open flags\n"
"%define\tO_RDONLY\t0\n"
"%define\tO_WRONLY\t1\n"
"%define\tO_RDWR\t2\n"
"\n"
";;;;;;; mmap flags\n"
"%define\tPROT_NONE\t0\n"
"%define\tPROT_READ\t1\n"
"%define\tPROT_WRITE\t2\n"
"%define\tPROT_EXEC\t4\n"
";;\n"
"%define\tMAP_SHARED\t0001h\n"
"%define\tMAP_PRIVATE\t0002h\n"
"\n"
";;;;;;; stat structure\n"
"struc\tstat\n"
"st_dev\t\tresd\t1\t; = 0\n"
"st_ino\t\tresd\t1\t; = 4\n"
"st_mode\t\tresw\t1\t; = 8, size is 16 bits\n"
"st_nlink\tresw\t1\t; = 10, ditto\n"
"st_uid\t\tresd\t1\t; = 12\n"
"st_gid\t\tresd\t1\t; = 16\n"
"st_rdev\t\tresd\t1\t; = 20\n"
"st_atime\tresd\t1\t; = 24\n"
"st_atimensec\tresd\t1\t; = 28\n"
"st_mtime\tresd\t1\t; = 32\n"
"st_mtimensec\tresd\t1\t; = 36\n"
"st_ctime\tresd\t1\t; = 40\n"
"st_ctimensec\tresd\t1\t; = 44\n"
"st_size\t\tresd\t2\t; = 48, size is 64 bits\n"
"st_blocks\tresd\t2\t; = 56, ditto\n"
"st_blksize\tresd\t1\t; = 64\n"
"st_flags\tresd\t1\t; = 68\n"
"st_gen\t\tresd\t1\t; = 72\n"
"st_lspare\tresd\t1\t; = 76\n"
"st_qspare\tresd\t4\t; = 80\n"
"endstruc"
msgstr ""
";;;;;;; open flags\n"
"%define\tO_RDONLY\t0\n"
"%define\tO_WRONLY\t1\n"
"%define\tO_RDWR\t2\n"
"\n"
";;;;;;; mmap flags\n"
"%define\tPROT_NONE\t0\n"
"%define\tPROT_READ\t1\n"
"%define\tPROT_WRITE\t2\n"
"%define\tPROT_EXEC\t4\n"
";;\n"
"%define\tMAP_SHARED\t0001h\n"
"%define\tMAP_PRIVATE\t0002h\n"
"\n"
";;;;;;; stat structure\n"
"struc\tstat\n"
"st_dev\t\tresd\t1\t; = 0\n"
"st_ino\t\tresd\t1\t; = 4\n"
"st_mode\t\tresw\t1\t; = 8, size is 16 bits\n"
"st_nlink\tresw\t1\t; = 10, ditto\n"
"st_uid\t\tresd\t1\t; = 12\n"
"st_gid\t\tresd\t1\t; = 16\n"
"st_rdev\t\tresd\t1\t; = 20\n"
"st_atime\tresd\t1\t; = 24\n"
"st_atimensec\tresd\t1\t; = 28\n"
"st_mtime\tresd\t1\t; = 32\n"
"st_mtimensec\tresd\t1\t; = 36\n"
"st_ctime\tresd\t1\t; = 40\n"
"st_ctimensec\tresd\t1\t; = 44\n"
"st_size\t\tresd\t2\t; = 48, size is 64 bits\n"
"st_blocks\tresd\t2\t; = 56, ditto\n"
"st_blksize\tresd\t1\t; = 64\n"
"st_flags\tresd\t1\t; = 68\n"
"st_gen\t\tresd\t1\t; = 72\n"
"st_lspare\tresd\t1\t; = 76\n"
"st_qspare\tresd\t4\t; = 80\n"
"endstruc"

#. (itstool) path: sect2/para
#: book.translate.xml:11775
msgid "We define the new syscalls:"
msgstr "فراخوان‌های سامانهٔ جدید را تعریف می‌کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11777
#, no-wrap
msgid ""
"%define\tSYS_mmap\t197\n"
"%define\tSYS_munmap\t73\n"
"%define\tSYS_fstat\t189\n"
"%define\tSYS_ftruncate\t201"
msgstr ""
"%define\tSYS_mmap\t197\n"
"%define\tSYS_munmap\t73\n"
"%define\tSYS_fstat\t189\n"
"%define\tSYS_ftruncate\t201"

#. (itstool) path: sect2/para
#: book.translate.xml:11782
msgid "We add the macros for their use:"
msgstr "ماکروها را برای استفادهٔ آنها اضافه می‌کنیم:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11784
#, no-wrap
msgid ""
"%macro\tsys.mmap\t0\n"
"\tsystem\tSYS_mmap\n"
"%endmacro\n"
"\n"
"%macro\tsys.munmap\t0\n"
"\tsystem\tSYS_munmap\n"
"%endmacro\n"
"\n"
"%macro\tsys.ftruncate\t0\n"
"\tsystem\tSYS_ftruncate\n"
"%endmacro\n"
"\n"
"%macro\tsys.fstat\t0\n"
"\tsystem\tSYS_fstat\n"
"%endmacro"
msgstr ""
"%macro\tsys.mmap\t0\n"
"\tsystem\tSYS_mmap\n"
"%endmacro\n"
"\n"
"%macro\tsys.munmap\t0\n"
"\tsystem\tSYS_munmap\n"
"%endmacro\n"
"\n"
"%macro\tsys.ftruncate\t0\n"
"\tsystem\tSYS_ftruncate\n"
"%endmacro\n"
"\n"
"%macro\tsys.fstat\t0\n"
"\tsystem\tSYS_fstat\n"
"%endmacro"

#. (itstool) path: sect2/para
#: book.translate.xml:11800
msgid "And here is our code:"
msgstr "و این کد ما هست:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:11802
#, no-wrap
msgid ""
";;;;;;; Fast Text-to-Unix Conversion (ftuc.asm) ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";;\n"
";; Started:\t21-Dec-2000\n"
";; Updated:\t22-Dec-2000\n"
";;\n"
";; Copyright 2000 G. Adam Stanislav.\n"
";; All rights reserved.\n"
";;\n"
";;;;;;; v.1 ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"\tdb\t'Copyright 2000 G. Adam Stanislav.', 0Ah\n"
"\tdb\t'All rights reserved.', 0Ah\n"
"usg\tdb\t'Usage: ftuc filename', 0Ah\n"
"usglen\tequ\t$-usg\n"
"co\tdb\t\"ftuc: Can't open file.\", 0Ah\n"
"colen\tequ\t$-co\n"
"fae\tdb\t'ftuc: File access error.', 0Ah\n"
"faelen\tequ\t$-fae\n"
"ftl\tdb\t'ftuc: File too long, use regular tuc instead.', 0Ah\n"
"ftllen\tequ\t$-ftl\n"
"mae\tdb\t'ftuc: Memory allocation error.', 0Ah\n"
"maelen\tequ\t$-mae\n"
"\n"
"section\t.text\n"
"\n"
"align 4\n"
"memerr:\n"
"\tpush\tdword maelen\n"
"\tpush\tdword mae\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"toolong:\n"
"\tpush\tdword ftllen\n"
"\tpush\tdword ftl\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"facerr:\n"
"\tpush\tdword faelen\n"
"\tpush\tdword fae\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"cantopen:\n"
"\tpush\tdword colen\n"
"\tpush\tdword co\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\n"
"error:\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\n"
"\tpush\tdword 1\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tpop\teax\t\t; argc\n"
"\tpop\teax\t\t; program name\n"
"\tpop\tecx\t\t; file to convert\n"
"\tjecxz\tusage\n"
"\n"
"\tpop\teax\n"
"\tor\teax, eax\t; Too many arguments?\n"
"\tjne\tusage\n"
"\n"
"\t; Open the file\n"
"\tpush\tdword O_RDWR\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tcantopen\n"
"\n"
"\tmov\tebp, eax\t; Save fd\n"
"\n"
"\tsub\tesp, byte stat_size\n"
"\tmov\tebx, esp\n"
"\n"
"\t; Find file size\n"
"\tpush\tebx\n"
"\tpush\tebp\t\t; fd\n"
"\tsys.fstat\n"
"\tjc\tfacerr\n"
"\n"
"\tmov\tedx, [ebx + st_size + 4]\n"
"\n"
"\t; File is too long if EDX != 0 ...\n"
"\tor\tedx, edx\n"
"\tjne\tnear toolong\n"
"\tmov\tecx, [ebx + st_size]\n"
"\t; ... or if it is above 2 GB\n"
"\tor\tecx, ecx\n"
"\tjs\tnear toolong\n"
"\n"
"\t; Do nothing if the file is 0 bytes in size\n"
"\tjecxz\t.quit\n"
"\n"
"\t; Map the entire file in memory\n"
"\tpush\tedx\n"
"\tpush\tedx\t\t; starting at offset 0\n"
"\tpush\tedx\t\t; pad\n"
"\tpush\tebp\t\t; fd\n"
"\tpush\tdword MAP_SHARED\n"
"\tpush\tdword PROT_READ | PROT_WRITE\n"
"\tpush\tecx\t\t; entire file size\n"
"\tpush\tedx\t\t; let system decide on the address\n"
"\tsys.mmap\n"
"\tjc\tnear memerr\n"
"\n"
"\tmov\tedi, eax\n"
"\tmov\tesi, eax\n"
"\tpush\tecx\t\t; for SYS_munmap\n"
"\tpush\tedi\n"
"\n"
"\t; Use EBX for state machine\n"
"\tmov\tebx, ordinary\n"
"\tmov\tah, 0Ah\n"
"\tcld\n"
"\n"
".loop:\n"
"\tlodsb\n"
"\tcall\tebx\n"
"\tloop\t.loop\n"
"\n"
"\tcmp\tebx, ordinary\n"
"\tje\t.filesize\n"
"\n"
"\t; Output final lf\n"
"\tmov\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
".filesize:\n"
"\t; truncate file to new size\n"
"\tpush\tdword 0\t\t; high dword\n"
"\tpush\tedx\t\t; low dword\n"
"\tpush\teax\t\t; pad\n"
"\tpush\tebp\n"
"\tsys.ftruncate\n"
"\n"
"\t; close it (ebp still pushed)\n"
"\tsys.close\n"
"\n"
"\tadd\tesp, byte 16\n"
"\tsys.munmap\n"
"\n"
".quit:\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"ordinary:\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tebx, cr\n"
"\tret\n"
"\n"
"align 4\n"
".lf:\n"
"\tmov\tebx, lf\n"
"\tret\n"
"\n"
"align 4\n"
"cr:\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
"\txchg\tal, ah\n"
"\t; fall through\n"
"\n"
".lf:\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tmov\tebx, ordinary\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret\n"
"\n"
"align 4\n"
"lf:\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tmov\tebx, ordinary\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tebx, ordinary\n"
"\tmov\tal, ah\n"
"\t; fall through\n"
"\n"
".lf:\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret"
msgstr ""
";;;;;;; Fast Text-to-Unix Conversion (ftuc.asm) "
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";;\n"
";; Started:\t21-Dec-2000\n"
";; Updated:\t22-Dec-2000\n"
";;\n"
";; Copyright 2000 G. Adam Stanislav.\n"
";; All rights reserved.\n"
";;\n"
";;;;;;; v.1 "
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
"%include\t'system.inc'\n"
"\n"
"section\t.data\n"
"\tdb\t'Copyright 2000 G. Adam Stanislav.', 0Ah\n"
"\tdb\t'All rights reserved.', 0Ah\n"
"usg\tdb\t'Usage: ftuc filename', 0Ah\n"
"usglen\tequ\t$-usg\n"
"co\tdb\t\"ftuc: Can't open file.\", 0Ah\n"
"colen\tequ\t$-co\n"
"fae\tdb\t'ftuc: File access error.', 0Ah\n"
"faelen\tequ\t$-fae\n"
"ftl\tdb\t'ftuc: File too long, use regular tuc instead.', 0Ah\n"
"ftllen\tequ\t$-ftl\n"
"mae\tdb\t'ftuc: Memory allocation error.', 0Ah\n"
"maelen\tequ\t$-mae\n"
"\n"
"section\t.text\n"
"\n"
"align 4\n"
"memerr:\n"
"\tpush\tdword maelen\n"
"\tpush\tdword mae\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"toolong:\n"
"\tpush\tdword ftllen\n"
"\tpush\tdword ftl\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"facerr:\n"
"\tpush\tdword faelen\n"
"\tpush\tdword fae\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"cantopen:\n"
"\tpush\tdword colen\n"
"\tpush\tdword co\n"
"\tjmp\tshort error\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\n"
"error:\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\n"
"\tpush\tdword 1\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tpop\teax\t\t; argc\n"
"\tpop\teax\t\t; program name\n"
"\tpop\tecx\t\t; file to convert\n"
"\tjecxz\tusage\n"
"\n"
"\tpop\teax\n"
"\tor\teax, eax\t; Too many arguments?\n"
"\tjne\tusage\n"
"\n"
"\t; Open the file\n"
"\tpush\tdword O_RDWR\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tcantopen\n"
"\n"
"\tmov\tebp, eax\t; Save fd\n"
"\n"
"\tsub\tesp, byte stat_size\n"
"\tmov\tebx, esp\n"
"\n"
"\t; Find file size\n"
"\tpush\tebx\n"
"\tpush\tebp\t\t; fd\n"
"\tsys.fstat\n"
"\tjc\tfacerr\n"
"\n"
"\tmov\tedx, [ebx + st_size + 4]\n"
"\n"
"\t; File is too long if EDX != 0 ...\n"
"\tor\tedx, edx\n"
"\tjne\tnear toolong\n"
"\tmov\tecx, [ebx + st_size]\n"
"\t; ... or if it is above 2 GB\n"
"\tor\tecx, ecx\n"
"\tjs\tnear toolong\n"
"\n"
"\t; Do nothing if the file is 0 bytes in size\n"
"\tjecxz\t.quit\n"
"\n"
"\t; Map the entire file in memory\n"
"\tpush\tedx\n"
"\tpush\tedx\t\t; starting at offset 0\n"
"\tpush\tedx\t\t; pad\n"
"\tpush\tebp\t\t; fd\n"
"\tpush\tdword MAP_SHARED\n"
"\tpush\tdword PROT_READ | PROT_WRITE\n"
"\tpush\tecx\t\t; entire file size\n"
"\tpush\tedx\t\t; let system decide on the address\n"
"\tsys.mmap\n"
"\tjc\tnear memerr\n"
"\n"
"\tmov\tedi, eax\n"
"\tmov\tesi, eax\n"
"\tpush\tecx\t\t; for SYS_munmap\n"
"\tpush\tedi\n"
"\n"
"\t; Use EBX for state machine\n"
"\tmov\tebx, ordinary\n"
"\tmov\tah, 0Ah\n"
"\tcld\n"
"\n"
".loop:\n"
"\tlodsb\n"
"\tcall\tebx\n"
"\tloop\t.loop\n"
"\n"
"\tcmp\tebx, ordinary\n"
"\tje\t.filesize\n"
"\n"
"\t; Output final lf\n"
"\tmov\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
".filesize:\n"
"\t; truncate file to new size\n"
"\tpush\tdword 0\t\t; high dword\n"
"\tpush\tedx\t\t; low dword\n"
"\tpush\teax\t\t; pad\n"
"\tpush\tebp\n"
"\tsys.ftruncate\n"
"\n"
"\t; close it (ebp still pushed)\n"
"\tsys.close\n"
"\n"
"\tadd\tesp, byte 16\n"
"\tsys.munmap\n"
"\n"
".quit:\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"ordinary:\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tebx, cr\n"
"\tret\n"
"\n"
"align 4\n"
".lf:\n"
"\tmov\tebx, lf\n"
"\tret\n"
"\n"
"align 4\n"
"cr:\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
"\txchg\tal, ah\n"
"\t; fall through\n"
"\n"
".lf:\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tmov\tebx, ordinary\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret\n"
"\n"
"align 4\n"
"lf:\n"
"\tcmp\tal, ah\n"
"\tje\t.lf\n"
"\n"
"\tcmp\tal, 0Dh\n"
"\tje\t.cr\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\n"
"\txchg\tal, ah\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tmov\tebx, ordinary\n"
"\tret\n"
"\n"
"align 4\n"
".cr:\n"
"\tmov\tebx, ordinary\n"
"\tmov\tal, ah\n"
"\t; fall through\n"
"\n"
".lf:\n"
"\tstosb\n"
"\tinc\tedx\n"
"\tret"

#. (itstool) path: warning/para
#: book.translate.xml:12040
msgid ""
"Do not use this program on files stored on a disk formatted by "
"<acronym><trademark class=\"registered\">MS-DOS</trademark></acronym> or "
"<trademark class=\"registered\">Windows</trademark>. There seems to be a "
"subtle bug in the FreeBSD code when using <function role=\"syscall\">mmap</"
"function> on these drives mounted under FreeBSD: If the file is over a "
"certain size, <function role=\"syscall\">mmap</function> will just fill the "
"memory with zeros, and then copy them to the file overwriting its contents."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:12053
msgid "One-Pointed Mind"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12055
msgid ""
"As a student of Zen, I like the idea of a one-pointed mind: Do one thing at "
"a time, and do it well."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12058
msgid ""
"This, indeed, is very much how <trademark class=\"registered\">UNIX</"
"trademark> works as well. While a typical <trademark class=\"registered"
"\">Windows</trademark> application is attempting to do everything imaginable "
"(and is, therefore, riddled with bugs), a typical <trademark class="
"\"registered\">UNIX</trademark> program does only one thing, and it does it "
"well."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12063
msgid ""
"The typical <trademark class=\"registered\">UNIX</trademark> user then "
"essentially assembles his own applications by writing a shell script which "
"combines the various existing programs by piping the output of one program "
"to the input of another."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12068
msgid ""
"When writing your own <trademark class=\"registered\">UNIX</trademark> "
"software, it is generally a good idea to see what parts of the problem you "
"need to solve can be handled by existing programs, and only write your own "
"programs for that part of the problem that you do not have an existing "
"solution for."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:12075
msgid "CSV"
msgstr "CSV"

#. (itstool) path: sect2/para
#: book.translate.xml:12077
msgid ""
"I will illustrate this principle with a specific real-life example I was "
"faced with recently:"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12080
msgid ""
"I needed to extract the 11th field of each record from a database I "
"downloaded from a web site. The database was a <acronym>CSV</acronym> file, "
"i.e., a list of <emphasis>comma-separated values</emphasis>. That is quite a "
"standard format for sharing data among people who may be using different "
"database software."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12087
msgid ""
"The first line of the file contains the list of various fields separated by "
"commas. The rest of the file contains the data listed line by line, with "
"values separated by commas."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12092
msgid ""
"I tried <application>awk</application>, using the comma as a separator. But "
"because several lines contained a quoted comma, <application>awk</"
"application> was extracting the wrong field from those lines."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12097
msgid ""
"Therefore, I needed to write my own software to extract the 11th field from "
"the <acronym>CSV</acronym> file. However, going with the <trademark class="
"\"registered\">UNIX</trademark> spirit, I only needed to write a simple "
"filter that would do the following:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12104
msgid "Remove the first line from the file;"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12108
msgid "Change all unquoted commas to a different character;"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12113
msgid "Remove all quotation marks."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12117
msgid ""
"Strictly speaking, I could use <application>sed</application> to remove the "
"first line from the file, but doing so in my own program was very easy, so I "
"decided to do it and reduce the size of the pipeline."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12122
msgid ""
"At any rate, writing a program like this took me about 20 minutes. Writing a "
"program that extracts the 11th field from the <acronym>CSV</acronym> file "
"would take a lot longer, and I could not reuse it to extract some other "
"field from some other database."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12128
msgid ""
"This time I decided to let it do a little more work than a typical tutorial "
"program would:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12133
msgid "It parses its command line for options;"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12137
msgid "It displays proper usage if it finds wrong arguments;"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:12142
msgid "It produces meaningful error messages."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12146
msgid "Here is its usage message:"
msgstr "در اینجا پیام نحوهٔ استفاده از آن آورده شده است:"

#. (itstool) path: sect2/screen
#: book.translate.xml:12148
#, no-wrap
msgid "Usage: csv [-t&lt;delim&gt;] [-c&lt;comma&gt;] [-p] [-o &lt;outfile&gt;] [-i &lt;infile&gt;]"
msgstr ""
"Usage: csv [-t&lt;delim&gt;] [-c&lt;comma&gt;] [-p] [-o &lt;outfile&gt;] [-i "
"&lt;infile&gt;]"

#. (itstool) path: sect2/para
#: book.translate.xml:12150
msgid "All parameters are optional, and can appear in any order."
msgstr "تمامی مؤلفه‌ها اختیاری هستند، و می‌توانند به هر ترتیبی آورده شوند."

#. (itstool) path: sect2/para
#: book.translate.xml:12153
msgid ""
"The <parameter>-t</parameter> parameter declares what to replace the commas "
"with. The <constant>tab</constant> is the default here. For example, "
"<parameter>-t;</parameter> will replace all unquoted commas with semicolons."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12158
msgid ""
"I did not need the <parameter>-c</parameter> option, but it may come in "
"handy in the future. It lets me declare that I want a character other than a "
"comma replaced with something else. For example, <parameter>-c@</parameter> "
"will replace all at signs (useful if you want to split a list of email "
"addresses to their user names and domains)."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12165
msgid ""
"The <parameter>-p</parameter> option preserves the first line, i.e., it does "
"not delete it. By default, we delete the first line because in a "
"<acronym>CSV</acronym> file it contains the field names rather than data."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12170
msgid ""
"The <parameter>-i</parameter> and <parameter>-o</parameter> options let me "
"specify the input and the output files. Defaults are <filename>stdin</"
"filename> and <filename>stdout</filename>, so this is a regular <trademark "
"class=\"registered\">UNIX</trademark> filter."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12176
msgid ""
"I made sure that both <parameter>-i filename</parameter> and <parameter>-"
"ifilename</parameter> are accepted. I also made sure that only one input and "
"one output files may be specified."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12181
msgid "To get the 11th field of each record, I can now do:"
msgstr ""

#. (itstool) path: sect2/screen
#: book.translate.xml:12183
#, no-wrap
msgid "<prompt>%</prompt> <userinput>csv '-t;' <replaceable>data.csv</replaceable> | awk '-F;' '{print $11}'</userinput>"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12185
msgid ""
"The code stores the options (except for the file descriptors) in <varname "
"role=\"register\">EDX</varname>: The comma in <varname role=\"register\">DH</"
"varname>, the new separator in <varname role=\"register\">DL</varname>, and "
"the flag for the <parameter>-p</parameter> option in the highest bit of "
"<varname role=\"register\">EDX</varname>, so a check for its sign will give "
"us a quick decision what to do."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12193
msgid "Here is the code:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:12195
#, no-wrap
msgid ""
";;;;;;; csv.asm ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Convert a comma-separated file to a something-else separated file.\n"
";\n"
"; Started:\t31-May-2001\n"
"; Updated:\t 1-Jun-2001\n"
";\n"
"; Copyright (c) 2001 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
"\n"
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"usg\tdb\t'Usage: csv [-t&lt;delim&gt;] [-c&lt;comma&gt;] [-p] [-o &lt;outfile&gt;] [-i &lt;infile&gt;]', 0Ah\n"
"usglen\tequ\t$-usg\n"
"iemsg\tdb\t\"csv: Can't open input file\", 0Ah\n"
"iemlen\tequ\t$-iemsg\n"
"oemsg\tdb\t\"csv: Can't create output file\", 0Ah\n"
"oemlen\tequ\t$-oemsg\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"align 4\n"
"ierr:\n"
"\tpush\tdword iemlen\n"
"\tpush\tdword iemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"oerr:\n"
"\tpush\tdword oemlen\n"
"\tpush\tdword oemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 2\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 3\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\tmov\tedx, (',' &lt;&lt; 8) | 9\n"
"\n"
".arg:\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear .init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the pointer to an argument\n"
"\tcmp\tbyte [ecx], '-'\n"
"\tjne\tusage\n"
"\n"
"\tinc\tecx\n"
"\tmov\tax, [ecx]\n"
"\n"
".o:\n"
"\tcmp\tal, 'o'\n"
"\tjne\t.i\n"
"\n"
"\t; Make sure we are not asked for the output file twice\n"
"\tcmp\tdword [fd.out], stdout\n"
"\tjne\tusage\n"
"\n"
"\t; Find the path to output file - it is either at [ECX+1],\n"
"\t; i.e., -ofile --\n"
"\t; or in the next argument,\n"
"\t; i.e., -o file\n"
"\n"
"\tinc\tecx\n"
"\tor\tah, ah\n"
"\tjne\t.openoutput\n"
"\tpop\tecx\n"
"\tjecxz\tusage\n"
"\n"
".openoutput:\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear oerr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\tjmp\tshort .arg\n"
"\n"
".i:\n"
"\tcmp\tal, 'i'\n"
"\tjne\t.p\n"
"\n"
"\t; Make sure we are not asked twice\n"
"\tcmp\tdword [fd.in], stdin\n"
"\tjne\tnear usage\n"
"\n"
"\t; Find the path to the input file\n"
"\tinc\tecx\n"
"\tor\tah, ah\n"
"\tjne\t.openinput\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje near usage\n"
"\n"
".openinput:\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear ierr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\tjmp\t.arg\n"
"\n"
".p:\n"
"\tcmp\tal, 'p'\n"
"\tjne\t.t\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tor\tedx, 1 &lt;&lt; 31\n"
"\tjmp\t.arg\n"
"\n"
".t:\n"
"\tcmp\tal, 't'\t\t; redefine output delimiter\n"
"\tjne\t.c\n"
"\tor\tah, ah\n"
"\tje\tnear usage\n"
"\tmov\tdl, ah\n"
"\tjmp\t.arg\n"
"\n"
".c:\n"
"\tcmp\tal, 'c'\n"
"\tjne\tnear usage\n"
"\tor\tah, ah\n"
"\tje\tnear usage\n"
"\tmov\tdh, ah\n"
"\tjmp\t.arg\n"
"\n"
"align 4\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
"\t; See if we are to preserve the first line\n"
"\tor\tedx, edx\n"
"\tjs\t.loop\n"
"\n"
".firstline:\n"
"\t; get rid of the first line\n"
"\tcall\tgetchar\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.firstline\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; is it a comma (or whatever the user asked for)?\n"
"\tcmp\tal, dh\n"
"\tjne\t.quote\n"
"\n"
"\t; Replace the comma with a tab (or whatever the user wants)\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop\n"
"\n"
".quote:\n"
"\tcmp\tal, '\"'\n"
"\tjne\t.put\n"
"\n"
"\t; Print everything until you get another quote or EOL. If it\n"
"\t; is a quote, skip it. If it is EOL, print it.\n"
".qloop:\n"
"\tcall\tgetchar\n"
"\tcmp\tal, '\"'\n"
"\tje\t.loop\n"
"\n"
"\tcmp\tal, 0Ah\n"
"\tje\t.put\n"
"\n"
"\tcall\tputchar\n"
"\tjmp\tshort .qloop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tjecxz\t.read\n"
"\tcall\twrite\n"
"\n"
".read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tjecxz\t.ret\t; nothing to write\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
".ret:\n"
"\tret"
msgstr ""
";;;;;;; csv.asm "
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Convert a comma-separated file to a something-else separated file.\n"
";\n"
"; Started:\t31-May-2001\n"
"; Updated:\t 1-Jun-2001\n"
";\n"
"; Copyright (c) 2001 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"
";;\n"
"\n"
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"usg\tdb\t'Usage: csv [-t&lt;delim&gt;] [-c&lt;comma&gt;] [-p] [-o "
"&lt;outfile&gt;] [-i &lt;infile&gt;]', 0Ah\n"
"usglen\tequ\t$-usg\n"
"iemsg\tdb\t\"csv: Can't open input file\", 0Ah\n"
"iemlen\tequ\t$-iemsg\n"
"oemsg\tdb\t\"csv: Can't create output file\", 0Ah\n"
"oemlen\tequ\t$-oemsg\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"\n"
"section\t.text\n"
"align 4\n"
"ierr:\n"
"\tpush\tdword iemlen\n"
"\tpush\tdword iemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"oerr:\n"
"\tpush\tdword oemlen\n"
"\tpush\tdword oemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 2\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 3\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\tmov\tedx, (',' &lt;&lt; 8) | 9\n"
"\n"
".arg:\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear .init\t\t; no more arguments\n"
"\n"
"\t; ECX contains the pointer to an argument\n"
"\tcmp\tbyte [ecx], '-'\n"
"\tjne\tusage\n"
"\n"
"\tinc\tecx\n"
"\tmov\tax, [ecx]\n"
"\n"
".o:\n"
"\tcmp\tal, 'o'\n"
"\tjne\t.i\n"
"\n"
"\t; Make sure we are not asked for the output file twice\n"
"\tcmp\tdword [fd.out], stdout\n"
"\tjne\tusage\n"
"\n"
"\t; Find the path to output file - it is either at [ECX+1],\n"
"\t; i.e., -ofile --\n"
"\t; or in the next argument,\n"
"\t; i.e., -o file\n"
"\n"
"\tinc\tecx\n"
"\tor\tah, ah\n"
"\tjne\t.openoutput\n"
"\tpop\tecx\n"
"\tjecxz\tusage\n"
"\n"
".openoutput:\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear oerr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\tjmp\tshort .arg\n"
"\n"
".i:\n"
"\tcmp\tal, 'i'\n"
"\tjne\t.p\n"
"\n"
"\t; Make sure we are not asked twice\n"
"\tcmp\tdword [fd.in], stdin\n"
"\tjne\tnear usage\n"
"\n"
"\t; Find the path to the input file\n"
"\tinc\tecx\n"
"\tor\tah, ah\n"
"\tjne\t.openinput\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje near usage\n"
"\n"
".openinput:\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear ierr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\tjmp\t.arg\n"
"\n"
".p:\n"
"\tcmp\tal, 'p'\n"
"\tjne\t.t\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tor\tedx, 1 &lt;&lt; 31\n"
"\tjmp\t.arg\n"
"\n"
".t:\n"
"\tcmp\tal, 't'\t\t; redefine output delimiter\n"
"\tjne\t.c\n"
"\tor\tah, ah\n"
"\tje\tnear usage\n"
"\tmov\tdl, ah\n"
"\tjmp\t.arg\n"
"\n"
".c:\n"
"\tcmp\tal, 'c'\n"
"\tjne\tnear usage\n"
"\tor\tah, ah\n"
"\tje\tnear usage\n"
"\tmov\tdh, ah\n"
"\tjmp\t.arg\n"
"\n"
"align 4\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tmov\tedi, obuffer\n"
"\n"
"\t; See if we are to preserve the first line\n"
"\tor\tedx, edx\n"
"\tjs\t.loop\n"
"\n"
".firstline:\n"
"\t; get rid of the first line\n"
"\tcall\tgetchar\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.firstline\n"
"\n"
".loop:\n"
"\t; read a byte from stdin\n"
"\tcall\tgetchar\n"
"\n"
"\t; is it a comma (or whatever the user asked for)?\n"
"\tcmp\tal, dh\n"
"\tjne\t.quote\n"
"\n"
"\t; Replace the comma with a tab (or whatever the user wants)\n"
"\tmov\tal, dl\n"
"\n"
".put:\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop\n"
"\n"
".quote:\n"
"\tcmp\tal, '\"'\n"
"\tjne\t.put\n"
"\n"
"\t; Print everything until you get another quote or EOL. If it\n"
"\t; is a quote, skip it. If it is EOL, print it.\n"
".qloop:\n"
"\tcall\tgetchar\n"
"\tcmp\tal, '\"'\n"
"\tje\t.loop\n"
"\n"
"\tcmp\tal, 0Ah\n"
"\tje\t.put\n"
"\n"
"\tcall\tputchar\n"
"\tjmp\tshort .qloop\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tret\n"
"\n"
"read:\n"
"\tjecxz\t.read\n"
"\tcall\twrite\n"
"\n"
".read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.done\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tjecxz\t.ret\t; nothing to write\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
".ret:\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:12467
msgid ""
"Much of it is taken from <filename>hex.asm</filename> above. But there is "
"one important difference: I no longer call <function>write</function> "
"whenever I am outputting a line feed. Yet, the code can be used "
"interactively."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12472
msgid ""
"I have found a better solution for the interactive problem since I first "
"started writing this chapter. I wanted to make sure each line is printed out "
"separately only when needed. After all, there is no need to flush out every "
"line when used non-interactively."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12478
msgid ""
"The new solution I use now is to call <function>write</function> every time "
"I find the input buffer empty. That way, when running in the interactive "
"mode, the program reads one line from the user's keyboard, processes it, and "
"sees its input buffer is empty. It flushes its output and reads the next "
"line."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12486
msgid "The Dark Side of Buffering"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12488
msgid ""
"This change prevents a mysterious lockup in a very specific case. I refer to "
"it as the <emphasis>dark side of buffering</emphasis>, mostly because it "
"presents a danger that is not quite obvious."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12493
msgid ""
"It is unlikely to happen with a program like the <application>csv</"
"application> above, so let us consider yet another filter: In this case we "
"expect our input to be raw data representing color values, such as the "
"<emphasis>red</emphasis>, <emphasis>green</emphasis>, and <emphasis>blue</"
"emphasis> intensities of a pixel. Our output will be the negative of our "
"input."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12501
msgid ""
"Such a filter would be very simple to write. Most of it would look just like "
"all the other filters we have written so far, so I am only going to show you "
"its inner loop:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12506
#, no-wrap
msgid ""
".loop:\n"
"\tcall\tgetchar\n"
"\tnot\tal\t\t; Create a negative\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop"
msgstr ""
".loop:\n"
"\tcall\tgetchar\n"
"\tnot\tal\t\t; Create a negative\n"
"\tcall\tputchar\n"
"\tjmp\tshort .loop"

#. (itstool) path: sect3/para
#: book.translate.xml:12512
msgid ""
"Because this filter works with raw data, it is unlikely to be used "
"interactively."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12515
msgid ""
"But it could be called by image manipulation software. And, unless it calls "
"<function>write</function> before each call to <function>read</function>, "
"chances are it will lock up."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12520
msgid "Here is what might happen:"
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12524
msgid ""
"The image editor will load our filter using the C function "
"<function>popen()</function>."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12529
msgid "It will read the first row of pixels from a bitmap or pixmap."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12534
msgid ""
"It will write the first row of pixels to the <emphasis>pipe</emphasis> "
"leading to the <varname>fd.in</varname> of our filter."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12540
msgid ""
"Our filter will read each pixel from its input, turn it to a negative, and "
"write it to its output buffer."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12546
msgid ""
"Our filter will call <function>getchar</function> to fetch the next pixel."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12551
msgid ""
"<function>getchar</function> will find an empty input buffer, so it will "
"call <function>read</function>."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12557
msgid ""
"<function>read</function> will call the <function role=\"syscall\">SYS_read</"
"function> system call."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12562
msgid ""
"The <emphasis>kernel</emphasis> will suspend our filter until the image "
"editor sends more data to the pipe."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12568
msgid ""
"The image editor will read from the other pipe, connected to the <varname>fd."
"out</varname> of our filter so it can set the first row of the output image "
"<emphasis>before</emphasis> it sends us the second row of the input."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:12576
msgid ""
"The <emphasis>kernel</emphasis> suspends the image editor until it receives "
"some output from our filter, so it can pass it on to the image editor."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12582
msgid ""
"At this point our filter waits for the image editor to send it more data to "
"process, while the image editor is waiting for our filter to send it the "
"result of the processing of the first row. But the result sits in our output "
"buffer."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12588
msgid ""
"The filter and the image editor will continue waiting for each other forever "
"(or, at least, until they are killed). Our software has just entered a <link "
"linkend=\"secure-race-conditions\">race condition</link>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12593
msgid ""
"This problem does not exist if our filter flushes its output buffer "
"<emphasis>before</emphasis> asking the <emphasis>kernel</emphasis> for more "
"input data."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:12601
msgid "Using the <acronym>FPU</acronym>"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12603
msgid ""
"Strangely enough, most of assembly language literature does not even mention "
"the existence of the <acronym>FPU</acronym>, or <emphasis>floating point "
"unit</emphasis>, let alone discuss programming it."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:12608
msgid ""
"Yet, never does assembly language shine more than when we create highly "
"optimized <acronym>FPU</acronym> code by doing things that can be done "
"<emphasis>only</emphasis> in assembly language."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:12614
msgid "Organization of the <acronym>FPU</acronym>"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12616
msgid ""
"The <acronym>FPU</acronym> consists of 8 80–bit floating–point registers. "
"These are organized in a stack fashion—you can <function>push</function> a "
"value on <acronym>TOS</acronym> (<emphasis>top of stack</emphasis>) and you "
"can <function>pop</function> it."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12623
msgid ""
"That said, the assembly language op codes are not <function role=\"opcode"
"\">push</function> and <function role=\"opcode\">pop</function> because "
"those are already taken."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12627
msgid ""
"You can <function>push</function> a value on <acronym>TOS</acronym> by using "
"<function role=\"opcode\">fld</function>, <function role=\"opcode\">fild</"
"function>, and <function role=\"opcode\">fbld</function>. Several other op "
"codes let you <function>push</function> many common <emphasis>constants</"
"emphasis>—such as <emphasis>pi</emphasis>—on the <acronym>TOS</acronym>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12634
msgid ""
"Similarly, you can <function>pop</function> a value by using <function role="
"\"opcode\">fst</function>, <function role=\"opcode\">fstp</function>, "
"<function role=\"opcode\">fist</function>, <function role=\"opcode\">fistp</"
"function>, and <function role=\"opcode\">fbstp</function>. Actually, only "
"the op codes that end with a <emphasis>p</emphasis> will literally "
"<function>pop</function> the value, the rest will <function>store</function> "
"it somewhere else without removing it from the <acronym>TOS</acronym>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12641
msgid ""
"We can transfer the data between the <acronym>TOS</acronym> and the computer "
"memory either as a 32–bit, 64–bit, or 80–bit <emphasis>real</emphasis>, a 16–"
"bit, 32–bit, or 64–bit <emphasis>integer</emphasis>, or an 80–bit "
"<emphasis>packed decimal</emphasis>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12648
msgid ""
"The 80–bit <emphasis>packed decimal</emphasis> is a special case of "
"<emphasis>binary coded decimal</emphasis> which is very convenient when "
"converting between the <acronym>ASCII</acronym> representation of data and "
"the internal data of the <acronym>FPU</acronym>. It allows us to use 18 "
"significant digits."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12655
msgid ""
"No matter how we represent data in the memory, the <acronym>FPU</acronym> "
"always stores it in the 80–bit <emphasis>real</emphasis> format in its "
"registers."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12659
msgid ""
"Its internal precision is at least 19 decimal digits, so even if we choose "
"to display results as <acronym>ASCII</acronym> in the full 18–digit "
"precision, we are still showing correct results."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12664
msgid ""
"We can perform mathematical operations on the <acronym>TOS</acronym>: We can "
"calculate its <emphasis>sine</emphasis>, we can <emphasis>scale</emphasis> "
"it (i.e., we can multiply or divide it by a power of 2), we can calculate "
"its base–2 <emphasis>logarithm</emphasis>, and many other things."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12672
msgid ""
"We can also <emphasis>multiply</emphasis> or <emphasis>divide</emphasis> it "
"by, <emphasis>add</emphasis> it to, or <emphasis>subtract</emphasis> it "
"from, any of the <acronym>FPU</acronym> registers (including itself)."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12677
msgid ""
"The official Intel op code for the <acronym>TOS</acronym> is <varname role="
"\"register\">st</varname>, and for the <emphasis>registers</emphasis> "
"<varname role=\"register\">st(0)</varname>–<varname role=\"register\">st(7)</"
"varname>. <varname role=\"register\">st</varname> and <varname role="
"\"register\">st(0)</varname>, then, refer to the same register."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12682
msgid ""
"For whatever reasons, the original author of <application>nasm</application> "
"has decided to use different op codes, namely <varname role=\"register"
"\">st0</varname>–<varname role=\"register\">st7</varname>. In other words, "
"there are no parentheses, and the <acronym>TOS</acronym> is always <varname "
"role=\"register\">st0</varname>, never just <function role=\"opcode\">st</"
"function>."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12690
msgid "The Packed Decimal Format"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12692
msgid ""
"The <emphasis>packed decimal</emphasis> format uses 10 bytes (80 bits) of "
"memory to represent 18 digits. The number represented there is always an "
"<emphasis>integer</emphasis>."
msgstr ""

#. (itstool) path: tip/para
#: book.translate.xml:12698
msgid ""
"You can use it to get decimal places by multiplying the <acronym>TOS</"
"acronym> by a power of 10 first."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12703
msgid ""
"The highest bit of the highest byte (byte 9) is the <emphasis>sign bit</"
"emphasis>: If it is set, the number is <emphasis>negative</emphasis>, "
"otherwise, it is <emphasis>positive</emphasis>. The rest of the bits of this "
"byte are unused/ignored."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12709
msgid ""
"The remaining 9 bytes store the 18 digits of the number: 2 digits per byte."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12712
msgid ""
"The <emphasis>more significant digit</emphasis> is stored in the high "
"<emphasis>nibble</emphasis> (4 bits), the <emphasis>less significant digit</"
"emphasis> in the low <emphasis>nibble</emphasis>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12717
msgid ""
"That said, you might think that <constant>-1234567</constant> would be "
"stored in the memory like this (using hexadecimal notation):"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12721
#, no-wrap
msgid "80 00 00 00 00 00 01 23 45 67"
msgstr "80 00 00 00 00 00 01 23 45 67"

#. (itstool) path: sect3/para
#: book.translate.xml:12723
msgid ""
"Alas it is not! As with everything else of Intel make, even the "
"<emphasis>packed decimal</emphasis> is <emphasis>little–endian</emphasis>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12727
msgid "That means our <constant>-1234567</constant> is stored like this:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12730
#, no-wrap
msgid "67 45 23 01 00 00 00 00 00 80"
msgstr "67 45 23 01 00 00 00 00 00 80"

#. (itstool) path: sect3/para
#: book.translate.xml:12732
msgid "Remember that, or you will be pulling your hair out in desperation!"
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:12736
msgid ""
"The book to read—if you can find it—is Richard Startz' <link xlink:href="
"\"http://www.amazon.com/exec/obidos/ASIN/013246604X/whizkidtechnomag"
"\">8087/80287/80387 for the IBM PC &amp; Compatibles</link>. Though it does "
"seem to take the fact about the little–endian storage of the "
"<emphasis>packed decimal</emphasis> for granted. I kid you not about the "
"desperation of trying to figure out what was wrong with the filter I show "
"below <emphasis>before</emphasis> it occurred to me I should try the little–"
"endian order even for this type of data."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:12751
msgid "Excursion to Pinhole Photography"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12753
msgid ""
"To write meaningful software, we must not only understand our programming "
"tools, but also the field we are creating software for."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12757
msgid ""
"Our next filter will help us whenever we want to build a <emphasis>pinhole "
"camera</emphasis>, so, we need some background in <emphasis>pinhole "
"photography</emphasis> before we can continue."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12763
msgid "The Camera"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12765
msgid ""
"The easiest way to describe any camera ever built is as some empty space "
"enclosed in some lightproof material, with a small hole in the enclosure."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12769
msgid ""
"The enclosure is usually sturdy (e.g., a box), though sometimes it is "
"flexible (the bellows). It is quite dark inside the camera. However, the "
"hole lets light rays in through a single point (though in some cases there "
"may be several). These light rays form an image, a representation of "
"whatever is outside the camera, in front of the hole."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12777
msgid ""
"If some light sensitive material (such as film) is placed inside the camera, "
"it can capture the image."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12780
msgid ""
"The hole often contains a <emphasis>lens</emphasis>, or a lens assembly, "
"often called the <emphasis>objective</emphasis>."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12786
msgid "The Pinhole"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12788
msgid ""
"But, strictly speaking, the lens is not necessary: The original cameras did "
"not use a lens but a <emphasis>pinhole</emphasis>. Even today, "
"<emphasis>pinholes</emphasis> are used, both as a tool to study how cameras "
"work, and to achieve a special kind of image."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12795
msgid ""
"The image produced by the <emphasis>pinhole</emphasis> is all equally sharp. "
"Or <emphasis>blurred</emphasis>. There is an ideal size for a pinhole: If it "
"is either larger or smaller, the image loses its sharpness."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12802
msgid "Focal Length"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12804
msgid ""
"This ideal pinhole diameter is a function of the square root of "
"<emphasis>focal length</emphasis>, which is the distance of the pinhole from "
"the film."
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12808
#, no-wrap
msgid "D = PC * sqrt(FL)"
msgstr "D = PC * sqrt(FL)"

#. (itstool) path: sect3/para
#: book.translate.xml:12810
msgid ""
"In here, <varname>D</varname> is the ideal diameter of the pinhole, "
"<varname>FL</varname> is the focal length, and <constant>PC</constant> is a "
"pinhole constant. According to Jay Bender, its value is <constant>0.04</"
"constant>, while Kenneth Connors has determined it to be <constant>0.037</"
"constant>. Others have proposed other values. Plus, this value is for the "
"daylight only: Other types of light will require a different constant, whose "
"value can only be determined by experimentation."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12823
msgid "The F–Number"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12825
msgid ""
"The f–number is a very useful measure of how much light reaches the film. A "
"light meter can determine that, for example, to expose a film of specific "
"sensitivity with f5.6 mkay require the exposure to last 1/1000 sec."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12831
msgid ""
"It does not matter whether it is a 35–mm camera, or a 6x9cm camera, etc. As "
"long as we know the f–number, we can determine the proper exposure."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12836
msgid "The f–number is easy to calculate:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12838
#, no-wrap
msgid "F = FL / D"
msgstr "F = FL / D"

#. (itstool) path: sect3/para
#: book.translate.xml:12840
msgid ""
"In other words, the f–number equals the focal length divided by the diameter "
"of the pinhole. It also means a higher f–number either implies a smaller "
"pinhole or a larger focal distance, or both. That, in turn, implies, the "
"higher the f–number, the longer the exposure has to be."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12847
msgid ""
"Furthermore, while pinhole diameter and focal distance are one–dimensional "
"measurements, both, the film and the pinhole, are two–dimensional. That "
"means that if you have measured the exposure at f–number <varname>A</"
"varname> as <varname>t</varname>, then the exposure at f–number <varname>B</"
"varname> is:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:12854
#, no-wrap
msgid "t * (B / A)²"
msgstr "t * (B / A)²"

#. (itstool) path: sect3/title
#: book.translate.xml:12858
msgid "Normalized F–Number"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12860
msgid ""
"While many modern cameras can change the diameter of their pinhole, and thus "
"their f–number, quite smoothly and gradually, such was not always the case."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12865
msgid ""
"To allow for different f–numbers, cameras typically contained a metal plate "
"with several holes of different sizes drilled to them."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12869
msgid ""
"Their sizes were chosen according to the above formula in such a way that "
"the resultant f–number was one of standard f–numbers used on all cameras "
"everywhere. For example, a very old Kodak Duaflex IV camera in my possession "
"has three such holes for f–numbers 8, 11, and 16."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12876
msgid ""
"A more recently made camera may offer f–numbers of 2.8, 4, 5.6, 8, 11, 16, "
"22, and 32 (as well as others). These numbers were not chosen arbitrarily: "
"They all are powers of the square root of 2, though they may be rounded "
"somewha."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12884
msgid "The F–Stop"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12886
msgid ""
"A typical camera is designed in such a way that setting any of the "
"normalized f–numbers changes the feel of the dial. It will naturally "
"<emphasis>stop</emphasis> in that position. Because of that, these positions "
"of the dial are called f–stops."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12893
msgid ""
"Since the f–numbers at each stop are powers of the square root of 2, moving "
"the dial by 1 stop will double the amount of light required for proper "
"exposure. Moving it by 2 stops will quadruple the required exposure. Moving "
"the dial by 3 stops will require the increase in exposure 8 times, etc."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:12903
msgid "Designing the Pinhole Software"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:12905
msgid ""
"We are now ready to decide what exactly we want our pinhole software to do."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:12909
msgid "Processing Program Input"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12911
msgid ""
"Since its main purpose is to help us design a working pinhole camera, we "
"will use the <emphasis>focal length</emphasis> as the input to the program. "
"This is something we can determine without software: Proper focal length is "
"determined by the size of the film and by the need to shoot \"regular\" "
"pictures, wide angle pictures, or telephoto pictures."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12919
msgid ""
"Most of the programs we have written so far worked with individual "
"characters, or bytes, as their input: The <application>hex</application> "
"program converted individual bytes into a hexadecimal number, the "
"<application>csv</application> program either let a character through, or "
"deleted it, or changed it to a different character, etc."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12927
msgid ""
"One program, <application>ftuc</application> used the state machine to "
"consider at most two input bytes at a time."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12931
msgid ""
"But our <application>pinhole</application> program cannot just work with "
"individual characters, it has to deal with larger syntactic units."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12935
msgid ""
"For example, if we want the program to calculate the pinhole diameter (and "
"other values we will discuss later) at the focal lengths of <constant>100 "
"mm</constant>, <constant>150 mm</constant>, and <constant>210 mm</constant>, "
"we may want to enter something like this:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:12942
#, no-wrap
msgid "<userinput>100, 150, 210</userinput>"
msgstr "<userinput>100, 150, 210</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:12944
msgid ""
"Our program needs to consider more than a single byte of input at a time. "
"When it sees the first <constant>1</constant>, it must understand it is "
"seeing the first digit of a decimal number. When it sees the <constant>0</"
"constant> and the other <constant>0</constant>, it must know it is seeing "
"more digits of the same number."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12952
msgid ""
"When it encounters the first comma, it must know it is no longer receiving "
"the digits of the first number. It must be able to convert the digits of the "
"first number into the value of <constant>100</constant>. And the digits of "
"the second number into the value of <constant>150</constant>. And, of "
"course, the digits of the third number into the numeric value of "
"<constant>210</constant>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12961
msgid ""
"We need to decide what delimiters to accept: Do the input numbers have to be "
"separated by a comma? If so, how do we treat two numbers separated by "
"something else?"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12966
msgid ""
"Personally, I like to keep it simple. Something either is a number, so I "
"process it. Or it is not a number, so I discard it. I do not like the "
"computer complaining about me typing in an extra character when it is "
"<emphasis>obvious</emphasis> that it is an extra character. Duh!"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12973
msgid ""
"Plus, it allows me to break up the monotony of computing and type in a query "
"instead of just a number:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:12977
#, no-wrap
msgid ""
"<userinput>What is the best pinhole diameter for the\n"
"\t    focal length of 150?</userinput>"
msgstr ""
"<userinput>What is the best pinhole diameter for the\n"
"\t    focal length of 150?</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:12980
msgid "There is no reason for the computer to spit out a number of complaints:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:12983
#, no-wrap
msgid ""
"Syntax error: What\n"
"Syntax error: is\n"
"Syntax error: the\n"
"Syntax error: best"
msgstr ""
"Syntax error: What\n"
"Syntax error: is\n"
"Syntax error: the\n"
"Syntax error: best"

#. (itstool) path: sect3/para
#: book.translate.xml:12988
msgid "Et cetera, et cetera, et cetera."
msgstr "و غیره، و غیره، و غیره."

#. (itstool) path: sect3/para
#: book.translate.xml:12990
msgid ""
"Secondly, I like the <constant>#</constant> character to denote the start of "
"a comment which extends to the end of the line. This does not take too much "
"effort to code, and lets me treat input files for my software as executable "
"scripts."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:12996
msgid ""
"In our case, we also need to decide what units the input should come in: We "
"choose <emphasis>millimeters</emphasis> because that is how most "
"photographers measure the focus length."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13001
msgid ""
"Finally, we need to decide whether to allow the use of the decimal point (in "
"which case we must also consider the fact that much of the world uses a "
"decimal <emphasis>comma</emphasis>)."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13006
msgid ""
"In our case allowing for the decimal point/comma would offer a false sense "
"of precision: There is little if any noticeable difference between the focus "
"lengths of <constant>50</constant> and <constant>51</constant>, so allowing "
"the user to input something like <constant>50.5</constant> is not a good "
"idea. This is my opinion, mind you, but I am the one writing this program. "
"You can make other choices in yours, of course."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:13018
msgid "Offering Options"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13020
msgid ""
"The most important thing we need to know when building a pinhole camera is "
"the diameter of the pinhole. Since we want to shoot sharp images, we will "
"use the above formula to calculate the pinhole diameter from focal length. "
"As experts are offering several different values for the <constant>PC</"
"constant> constant, we will need to have the choice."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13028
msgid ""
"It is traditional in <trademark class=\"registered\">UNIX</trademark> "
"programming to have two main ways of choosing program parameters, plus to "
"have a default for the time the user does not make a choice."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13033
msgid "Why have two ways of choosing?"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13035
msgid ""
"One is to allow a (relatively) <emphasis>permanent</emphasis> choice that "
"applies automatically each time the software is run without us having to "
"tell it over and over what we want it to do."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13041
msgid ""
"The permanent choices may be stored in a configuration file, typically found "
"in the user's home directory. The file usually has the same name as the "
"application but is started with a dot. Often <emphasis>\"rc\"</emphasis> is "
"added to the file name. So, ours could be <filename>~/.pinhole</filename> or "
"<filename>~/.pinholerc</filename>. (The <filename>~/</filename> means "
"current user's home directory.)"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13051
msgid ""
"The configuration file is used mostly by programs that have many "
"configurable parameters. Those that have only one (or a few) often use a "
"different method: They expect to find the parameter in an "
"<emphasis>environment variable</emphasis>. In our case, we might look at an "
"environment variable named <varname>PINHOLE</varname>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13059
msgid ""
"Usually, a program uses one or the other of the above methods. Otherwise, if "
"a configuration file said one thing, but an environment variable another, "
"the program might get confused (or just too complicated)."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13064
msgid ""
"Because we only need to choose <emphasis>one</emphasis> such parameter, we "
"will go with the second method and search the environment for a variable "
"named <varname>PINHOLE</varname>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13069
msgid ""
"The other way allows us to make <emphasis>ad hoc</emphasis> decisions: "
"<emphasis>\"Though I usually want you to use 0.039, this time I want 0.03872."
"\"</emphasis> In other words, it allows us to <emphasis>override</emphasis> "
"the permanent choice."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13075
msgid "This type of choice is usually done with command line parameters."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13078
msgid ""
"Finally, a program <emphasis>always</emphasis> needs a <emphasis>default</"
"emphasis>. The user may not make any choices. Perhaps he does not know what "
"to choose. Perhaps he is \"just browsing.\" Preferably, the default will be "
"the value most users would choose anyway. That way they do not need to "
"choose. Or, rather, they can choose the default without an additional effort."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13086
msgid ""
"Given this system, the program may find conflicting options, and handle them "
"this way:"
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13091
msgid ""
"If it finds an <emphasis>ad hoc</emphasis> choice (e.g., command line "
"parameter), it should accept that choice. It must ignore any permanent "
"choice and any default."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13098
msgid ""
"<emphasis>Otherwise</emphasis>, if it finds a permanent option (e.g., an "
"environment variable), it should accept it, and ignore the default."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13104
msgid "<emphasis>Otherwise</emphasis>, it should use the default."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13109
msgid ""
"We also need to decide what <emphasis>format</emphasis> our <constant>PC</"
"constant> option should have."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13113
msgid ""
"At first site, it seems obvious to use the <varname>PINHOLE=0.04</varname> "
"format for the environment variable, and <parameter>-p0.04</parameter> for "
"the command line."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13118
msgid ""
"Allowing that is actually a security risk. The <constant>PC</constant> "
"constant is a very small number. Naturally, we will test our software using "
"various small values of <constant>PC</constant>. But what will happen if "
"someone runs the program choosing a huge value?"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13124
msgid ""
"It may crash the program because we have not designed it to handle huge "
"numbers."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13127
msgid ""
"Or, we may spend more time on the program so it can handle huge numbers. We "
"might do that if we were writing commercial software for computer illiterate "
"audience."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13132
msgid ""
"Or, we might say, <emphasis>\"Tough! The user should know better.\"\"</"
"emphasis>"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13135
msgid ""
"Or, we just may make it impossible for the user to enter a huge number. This "
"is the approach we will take: We will use an <emphasis>implied 0.</emphasis> "
"prefix."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13140
msgid ""
"In other words, if the user wants <constant>0.04</constant>, we will expect "
"him to type <parameter>-p04</parameter>, or set <varname>PINHOLE=04</"
"varname> in his environment. So, if he says <parameter>-p9999999</"
"parameter>, we will interpret it as <constant>0.9999999</constant>—still "
"ridiculous but at least safer."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13148
msgid ""
"Secondly, many users will just want to go with either Bender's constant or "
"Connors' constant. To make it easier on them, we will interpret <parameter>-"
"b</parameter> as identical to <parameter>-p04</parameter>, and <parameter>-"
"c</parameter> as identical to <parameter>-p037</parameter>."
msgstr ""

#. (itstool) path: sect3/title
#: book.translate.xml:13157
msgid "The Output"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13159
msgid ""
"We need to decide what we want our software to send to the output, and in "
"what format."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13162
msgid ""
"Since our input allows for an unspecified number of focal length entries, it "
"makes sense to use a traditional database–style output of showing the result "
"of the calculation for each focal length on a separate line, while "
"separating all values on one line by a <constant>tab</constant> character."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13169
msgid ""
"Optionally, we should also allow the user to specify the use of the "
"<acronym>CSV</acronym> format we have studied earlier. In this case, we will "
"print out a line of comma–separated names describing each field of every "
"line, then show our results as before, but substituting a <constant>comma</"
"constant> for the <constant>tab</constant>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13177
msgid ""
"We need a command line option for the <acronym>CSV</acronym> format. We "
"cannot use <parameter>-c</parameter> because that already means "
"<emphasis>use Connors' constant</emphasis>. For some strange reason, many "
"web sites refer to <acronym>CSV</acronym> files as <emphasis>\"Excel "
"spreadsheet\"</emphasis> (though the <acronym>CSV</acronym> format predates "
"Excel). We will, therefore, use the <parameter>-e</parameter> switch to "
"inform our software we want the output in the <acronym>CSV</acronym> format."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13189
msgid ""
"We will start each line of the output with the focal length. This may sound "
"repetitious at first, especially in the interactive mode: The user types in "
"the focal length, and we are repeating it."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13194
msgid ""
"But the user can type several focal lengths on one line. The input can also "
"come in from a file or from the output of another program. In that case the "
"user does not see the input at all."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13199
msgid ""
"By the same token, the output can go to a file which we will want to examine "
"later, or it could go to the printer, or become the input of another program."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13203
msgid ""
"So, it makes perfect sense to start each line with the focal length as "
"entered by the user."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13206
msgid ""
"No, wait! Not as entered by the user. What if the user types in something "
"like this:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:13209
#, no-wrap
msgid "<userinput>00000000150</userinput>"
msgstr "<userinput>00000000150</userinput>"

#. (itstool) path: sect3/para
#: book.translate.xml:13211
msgid "Clearly, we need to strip those leading zeros."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13213
msgid ""
"So, we might consider reading the user input as is, converting it to binary "
"inside the <acronym>FPU</acronym>, and printing it out from there."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13217 book.translate.xml:13545
msgid "But..."
msgstr "اما..."

#. (itstool) path: sect3/para
#: book.translate.xml:13219
msgid "What if the user types something like this:"
msgstr "اگر کاربر چیزی شبیه به این بنویسد چه:"

#. (itstool) path: sect3/screen
#: book.translate.xml:13221
#, no-wrap
msgid "<userinput>17459765723452353453534535353530530534563507309676764423</userinput>"
msgstr ""
"<userinput>17459765723452353453534535353530530534563507309676764423</userinpu"
"t>"

#. (itstool) path: sect3/para
#: book.translate.xml:13223
msgid ""
"Ha! The packed decimal <acronym>FPU</acronym> format lets us input 18–digit "
"numbers. But the user has entered more than 18 digits. How do we handle that?"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13228
msgid ""
"Well, we <emphasis>could</emphasis> modify our code to read the first 18 "
"digits, enter it to the <acronym>FPU</acronym>, then read more, multiply "
"what we already have on the <acronym>TOS</acronym> by 10 raised to the "
"number of additional digits, then <function>add</function> to it."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13235
msgid ""
"Yes, we could do that. But in <emphasis>this</emphasis> program it would be "
"ridiculous (in a different one it may be just the thing to do): Even the "
"circumference of the Earth expressed in millimeters only takes 11 digits. "
"Clearly, we cannot build a camera that large (not yet, anyway)."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13242
msgid ""
"So, if the user enters such a huge number, he is either bored, or testing "
"us, or trying to break into the system, or playing games—doing anything but "
"designing a pinhole camera."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13247
msgid "What will we do?"
msgstr "چه خواهیم کرد؟"

#. (itstool) path: sect3/para
#: book.translate.xml:13249
msgid "We will slap him in the face, in a manner of speaking:"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:13252
#, no-wrap
msgid "17459765723452353453534535353530530534563507309676764423\t???\t???\t???\t???\t???"
msgstr ""
"17459765723452353453534535353530530534563507309676764423\t???\t???\t???\t???"
"\t???"

#. (itstool) path: sect3/para
#: book.translate.xml:13254
msgid ""
"To achieve that, we will simply ignore any leading zeros. Once we find a non–"
"zero digit, we will initialize a counter to <constant>0</constant> and start "
"taking three steps:"
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13261
msgid "Send the digit to the output."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13265
msgid ""
"Append the digit to a buffer we will use later to produce the packed decimal "
"we can send to the <acronym>FPU</acronym>."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13271
msgid "Increase the counter."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13275
msgid ""
"Now, while we are taking these three steps, we also need to watch out for "
"one of two conditions:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:13280
msgid ""
"If the counter grows above 18, we stop appending to the buffer. We continue "
"reading the digits and sending them to the output."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:13286
msgid ""
"If, or rather <emphasis>when</emphasis>, the next input character is not a "
"digit, we are done inputting for now."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:13290
msgid ""
"Incidentally, we can simply discard the non–digit, unless it is a "
"<constant>#</constant>, which we must return to the input stream. It starts "
"a comment, so we must see it after we are done producing output and start "
"looking for more input."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13299
msgid ""
"That still leaves one possibility uncovered: If all the user enters is a "
"zero (or several zeros), we will never find a non–zero to display."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13303
msgid ""
"We can determine this has happened whenever our counter stays at "
"<constant>0</constant>. In that case we need to send <constant>0</constant> "
"to the output, and perform another \"slap in the face\":"
msgstr ""

#. (itstool) path: sect3/screen
#: book.translate.xml:13308
#, no-wrap
msgid "0\t???\t???\t???\t???\t???"
msgstr "0\t???\t???\t???\t???\t???"

#. (itstool) path: sect3/para
#: book.translate.xml:13310
msgid ""
"Once we have displayed the focal length and determined it is valid (greater "
"than <constant>0</constant> but not exceeding 18 digits), we can calculate "
"the pinhole diameter."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13315
msgid ""
"It is not by coincidence that <emphasis>pinhole</emphasis> contains the word "
"<emphasis>pin</emphasis>. Indeed, many a pinhole literally is a "
"<emphasis>pin hole</emphasis>, a hole carefully punched with the tip of a "
"pin."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13321
msgid ""
"That is because a typical pinhole is very small. Our formula gets the result "
"in millimeters. We will multiply it by <constant>1000</constant>, so we can "
"output the result in <emphasis>microns</emphasis>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13326
msgid ""
"At this point we have yet another trap to face: <emphasis>Too much precision."
"</emphasis>"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13329
msgid ""
"Yes, the <acronym>FPU</acronym> was designed for high precision mathematics. "
"But we are not dealing with high precision mathematics. We are dealing with "
"physics (optics, specifically)."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13334
msgid ""
"Suppose we want to convert a truck into a pinhole camera (we would not be "
"the first ones to do that!). Suppose its box is <constant>12</constant> "
"meters long, so we have the focal length of <constant>12000</constant>. "
"Well, using Bender's constant, it gives us square root of <constant>12000</"
"constant> multiplied by <constant>0.04</constant>, which is "
"<constant>4.381780460</constant> millimeters, or <constant>4381.780460</"
"constant> microns."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13344
msgid ""
"Put either way, the result is absurdly precise. Our truck is not "
"<emphasis>exactly</emphasis> <constant>12000</constant> millimeters long. We "
"did not measure its length with such a precision, so stating we need a "
"pinhole with the diameter of <constant>4.381780460</constant> millimeters "
"is, well, deceiving. <constant>4.4</constant> millimeters would do just fine."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:13354
msgid ""
"I \"only\" used ten digits in the above example. Imagine the absurdity of "
"going for all 18!"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13358
msgid ""
"We need to limit the number of significant digits of our result. One way of "
"doing it is by using an integer representing microns. So, our truck would "
"need a pinhole with the diameter of <constant>4382</constant> microns. "
"Looking at that number, we still decide that <constant>4400</constant> "
"microns, or <constant>4.4</constant> millimeters is close enough."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13367
msgid ""
"Additionally, we can decide that no matter how big a result we get, we only "
"want to display four significant digits (or any other number of them, of "
"course). Alas, the <acronym>FPU</acronym> does not offer rounding to a "
"specific number of digits (after all, it does not view the numbers as "
"decimal but as binary)."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13374
msgid ""
"We, therefore, must devise an algorithm to reduce the number of significant "
"digits."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13377
msgid ""
"Here is mine (I think it is awkward—if you know a better one, "
"<emphasis>please</emphasis>, let me know):"
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13383
msgid "Initialize a counter to <constant>0</constant>."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13388
msgid ""
"While the number is greater than or equal to <constant>10000</constant>, "
"divide it by <constant>10</constant> and increase the counter."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13395
msgid "Output the result."
msgstr ""

#. (itstool) path: step/para
#: book.translate.xml:13399
msgid ""
"While the counter is greater than <constant>0</constant>, output "
"<constant>0</constant> and decrease the counter."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:13406
msgid ""
"The <constant>10000</constant> is only good if you want <emphasis>four</"
"emphasis> significant digits. For any other number of significant digits, "
"replace <constant>10000</constant> with <constant>10</constant> raised to "
"the number of significant digits."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13413
msgid ""
"We will, then, output the pinhole diameter in microns, rounded off to four "
"significant digits."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13416
msgid ""
"At this point, we know the <emphasis>focal length</emphasis> and the "
"<emphasis>pinhole diameter</emphasis>. That means we have enough information "
"to also calculate the <emphasis>f–number</emphasis>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13422
msgid ""
"We will display the f–number, rounded to four significant digits. Chances "
"are the f–number will tell us very little. To make it more meaningful, we "
"can find the nearest <emphasis>normalized f–number</emphasis>, i.e., the "
"nearest power of the square root of 2."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13429
msgid ""
"We do that by multiplying the actual f–number by itself, which, of course, "
"will give us its <function>square</function>. We will then calculate its "
"base–2 logarithm, which is much easier to do than calculating the base–"
"square–root–of–2 logarithm! We will round the result to the nearest integer. "
"Next, we will raise 2 to the result. Actually, the <acronym>FPU</acronym> "
"gives us a good shortcut to do that: We can use the <function role=\"opcode"
"\">fscale</function> op code to \"scale\" 1, which is analogous to <function "
"role=\"opcode\">shift</function>ing an integer left. Finally, we calculate "
"the square root of it all, and we have the nearest normalized f–number."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13443
msgid ""
"If all that sounds overwhelming—or too much work, perhaps—it may become much "
"clearer if you see the code. It takes 9 op codes altogether:"
msgstr ""

#. (itstool) path: sect3/programlisting
#: book.translate.xml:13447
#, no-wrap
msgid ""
"fmul\tst0, st0\n"
"\tfld1\n"
"\tfld\tst1\n"
"\tfyl2x\n"
"\tfrndint\n"
"\tfld1\n"
"\tfscale\n"
"\tfsqrt\n"
"\tfstp\tst1"
msgstr ""
"fmul\tst0, st0\n"
"\tfld1\n"
"\tfld\tst1\n"
"\tfyl2x\n"
"\tfrndint\n"
"\tfld1\n"
"\tfscale\n"
"\tfsqrt\n"
"\tfstp\tst1"

#. (itstool) path: sect3/para
#: book.translate.xml:13457
msgid ""
"The first line, <function role=\"opcode\">fmul st0, st0</function>, squares "
"the contents of the <acronym>TOS</acronym> (top of the stack, same as "
"<varname role=\"register\">st</varname>, called <varname role=\"register"
"\">st0</varname> by <application>nasm</application>). The <function role="
"\"opcode\">fld1</function> pushes <constant>1</constant> on the "
"<acronym>TOS</acronym>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13465
msgid ""
"The next line, <function role=\"opcode\">fld st1</function>, pushes the "
"square back to the <acronym>TOS</acronym>. At this point the square is both "
"in <varname role=\"register\">st</varname> and <varname role=\"register"
"\">st(2)</varname> (it will become clear why we leave a second copy on the "
"stack in a moment). <varname role=\"register\">st(1)</varname> contains "
"<constant>1</constant>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13473
msgid ""
"Next, <function role=\"opcode\">fyl2x</function> calculates base–2 logarithm "
"of <varname role=\"register\">st</varname> multiplied by <varname role="
"\"register\">st(1)</varname>. That is why we placed <constant>1</constant> "
"on <varname role=\"register\">st(1)</varname> before."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13478
msgid ""
"At this point, <varname role=\"register\">st</varname> contains the "
"logarithm we have just calculated, <varname role=\"register\">st(1)</"
"varname> contains the square of the actual f–number we saved for later."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13482
msgid ""
"<function role=\"opcode\">frndint</function> rounds the <acronym>TOS</"
"acronym> to the nearest integer. <function role=\"opcode\">fld1</function> "
"pushes a <constant>1</constant>. <function role=\"opcode\">fscale</function> "
"shifts the <constant>1</constant> we have on the <acronym>TOS</acronym> by "
"the value in <varname role=\"register\">st(1)</varname>, effectively raising "
"2 to <varname role=\"register\">st(1)</varname>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13489
msgid ""
"Finally, <function role=\"opcode\">fsqrt</function> calculates the square "
"root of the result, i.e., the nearest normalized f–number."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13493
msgid ""
"We now have the nearest normalized f–number on the <acronym>TOS</acronym>, "
"the base–2 logarithm rounded to the nearest integer in <varname role="
"\"register\">st(1)</varname>, and the square of the actual f–number in "
"<varname role=\"register\">st(2)</varname>. We are saving the value in "
"<varname role=\"register\">st(2)</varname> for later."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13500
msgid ""
"But we do not need the contents of <varname role=\"register\">st(1)</"
"varname> anymore. The last line, <function role=\"opcode\">fstp st1</"
"function>, places the contents of <varname role=\"register\">st</varname> to "
"<varname role=\"register\">st(1)</varname>, and pops. As a result, what was "
"<varname role=\"register\">st(1)</varname> is now <varname role=\"register"
"\">st</varname>, what was <varname role=\"register\">st(2)</varname> is now "
"<varname role=\"register\">st(1)</varname>, etc. The new <varname role="
"\"register\">st</varname> contains the normalized f–number. The new <varname "
"role=\"register\">st(1)</varname> contains the square of the actual f–number "
"we have stored there for posterity."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13511
msgid ""
"At this point, we are ready to output the normalized f–number. Because it is "
"normalized, we will not round it off to four significant digits, but will "
"send it out in its full precision."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13516
msgid ""
"The normalized f-number is useful as long as it is reasonably small and can "
"be found on our light meter. Otherwise we need a different method of "
"determining proper exposure."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13521
msgid ""
"Earlier we have figured out the formula of calculating proper exposure at an "
"arbitrary f–number from that measured at a different f–number."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13525
msgid ""
"Every light meter I have ever seen can determine proper exposure at f5.6. We "
"will, therefore, calculate an <emphasis>\"f5.6 multiplier,\"</emphasis> i."
"e., by how much we need to multiply the exposure measured at f5.6 to "
"determine the proper exposure for our pinhole camera."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13532
msgid ""
"From the above formula we know this factor can be calculated by dividing our "
"f–number (the actual one, not the normalized one) by <constant>5.6</"
"constant>, and squaring the result."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13537
msgid ""
"Mathematically, dividing the square of our f–number by the square of "
"<constant>5.6</constant> will give us the same result."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13541
msgid ""
"Computationally, we do not want to square two numbers when we can only "
"square one. So, the first solution seems better at first."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13547
msgid ""
"<constant>5.6</constant> is a <emphasis>constant</emphasis>. We do not have "
"to have our <acronym>FPU</acronym> waste precious cycles. We can just tell "
"it to divide the square of the f–number by whatever <constant>5.6²</"
"constant> equals to. Or we can divide the f–number by <constant>5.6</"
"constant>, and then square the result. The two ways now seem equal."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13556
msgid "But, they are not!"
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13558
msgid ""
"Having studied the principles of photography above, we remember that the "
"<constant>5.6</constant> is actually square root of 2 raised to the fifth "
"power. An <emphasis>irrational</emphasis> number. The square of this number "
"is <emphasis>exactly</emphasis> <constant>32</constant>."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13565
msgid ""
"Not only is <constant>32</constant> an integer, it is a power of 2. We do "
"not need to divide the square of the f–number by <constant>32</constant>. We "
"only need to use <function role=\"opcode\">fscale</function> to shift it "
"right by five positions. In the <acronym>FPU</acronym> lingo it means we "
"will <function role=\"opcode\">fscale</function> it with <varname role="
"\"register\">st(1)</varname> equal to <constant>-5</constant>. That is "
"<emphasis>much faster</emphasis> than a division."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13574
msgid ""
"So, now it has become clear why we have saved the square of the f–number on "
"the top of the <acronym>FPU</acronym> stack. The calculation of the f5.6 "
"multiplier is the easiest calculation of this entire program! We will output "
"it rounded to four significant digits."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13581
msgid ""
"There is one more useful number we can calculate: The number of stops our f–"
"number is from f5.6. This may help us if our f–number is just outside the "
"range of our light meter, but we have a shutter which lets us set various "
"speeds, and this shutter uses stops."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13587
msgid ""
"Say, our f–number is 5 stops from f5.6, and the light meter says we should "
"use 1/1000 sec. Then we can set our shutter speed to 1/1000 first, then move "
"the dial by 5 stops."
msgstr ""

#. (itstool) path: sect3/para
#: book.translate.xml:13592
msgid ""
"This calculation is quite easy as well. All we have to do is to calculate "
"the base-2 logarithm of the f5.6 multiplier we had just calculated (though "
"we need its value from before we rounded it off). We then output the result "
"rounded to the nearest integer. We do not need to worry about having more "
"than four significant digits in this one: The result is most likely to have "
"only one or two digits anyway."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:13604
msgid "FPU Optimizations"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13606
msgid ""
"In assembly language we can optimize the <acronym>FPU</acronym> code in ways "
"impossible in high languages, including C."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13610
msgid ""
"Whenever a C function needs to calculate a floating–point value, it loads "
"all necessary variables and constants into <acronym>FPU</acronym> registers. "
"It then does whatever calculation is required to get the correct result. "
"Good C compilers can optimize that part of the code really well."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13617
msgid ""
"It \"returns\" the value by leaving the result on the <acronym>TOS</"
"acronym>. However, before it returns, it cleans up. Any variables and "
"constants it used in its calculation are now gone from the <acronym>FPU</"
"acronym>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13623
msgid ""
"It cannot do what we just did above: We calculated the square of the f–"
"number and kept it on the stack for later use by another function."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13627
msgid ""
"We <emphasis>knew</emphasis> we would need that value later on. We also knew "
"we had enough room on the stack (which only has room for 8 numbers) to store "
"it there."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13632
msgid ""
"A C compiler has no way of knowing that a value it has on the stack will be "
"required again in the very near future."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13636
msgid ""
"Of course, the C programmer may know it. But the only recourse he has is to "
"store the value in a memory variable."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13640
msgid ""
"That means, for one, the value will be changed from the 80-bit precision "
"used internally by the <acronym>FPU</acronym> to a C <emphasis>double</"
"emphasis> (64 bits) or even <emphasis>single</emphasis> (32 bits)."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13646
msgid ""
"That also means that the value must be moved from the <acronym>TOS</acronym> "
"into the memory, and then back again. Alas, of all <acronym>FPU</acronym> "
"operations, the ones that access the computer memory are the slowest."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13651
msgid ""
"So, whenever programming the <acronym>FPU</acronym> in assembly language, "
"look for the ways of keeping intermediate results on the <acronym>FPU</"
"acronym> stack."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13655
msgid ""
"We can take that idea even further! In our program we are using a "
"<emphasis>constant</emphasis> (the one we named <constant>PC</constant>)."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13659
msgid ""
"It does not matter how many pinhole diameters we are calculating: 1, 10, 20, "
"1000, we are always using the same constant. Therefore, we can optimize our "
"program by keeping the constant on the stack all the time."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13664
msgid ""
"Early on in our program, we are calculating the value of the above constant. "
"We need to divide our input by <constant>10</constant> for every digit in "
"the constant."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13669
msgid ""
"It is much faster to multiply than to divide. So, at the start of our "
"program, we divide <constant>10</constant> into <constant>1</constant> to "
"obtain <constant>0.1</constant>, which we then keep on the stack: Instead of "
"dividing the input by <constant>10</constant> for every digit, we multiply "
"it by <constant>0.1</constant>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13677
msgid ""
"By the way, we do not input <constant>0.1</constant> directly, even though "
"we could. We have a reason for that: While <constant>0.1</constant> can be "
"expressed with just one decimal place, we do not know how many "
"<emphasis>binary</emphasis> places it takes. We, therefore, let the "
"<acronym>FPU</acronym> calculate its binary value to its own high precision."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13685
msgid ""
"We are using other constants: We multiply the pinhole diameter by "
"<constant>1000</constant> to convert it from millimeters to microns. We "
"compare numbers to <constant>10000</constant> when we are rounding them off "
"to four significant digits. So, we keep both, <constant>1000</constant> and "
"<constant>10000</constant>, on the stack. And, of course, we reuse the "
"<constant>0.1</constant> when rounding off numbers to four digits."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13695
msgid ""
"Last but not least, we keep <constant>-5</constant> on the stack. We need it "
"to scale the square of the f–number, instead of dividing it by <constant>32</"
"constant>. It is not by coincidence we load this constant last. That makes "
"it the top of the stack when only the constants are on it. So, when the "
"square of the f–number is being scaled, the <constant>-5</constant> is at "
"<varname role=\"register\">st(1)</varname>, precisely where <function role="
"\"opcode\">fscale</function> expects it to be."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:13706
msgid ""
"It is common to create certain constants from scratch instead of loading "
"them from the memory. That is what we are doing with <constant>-5</constant>:"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:13710
#, no-wrap
msgid ""
"\tfld1\t\t\t; TOS =  1\n"
"\tfadd\tst0, st0\t; TOS =  2\n"
"\tfadd\tst0, st0\t; TOS =  4\n"
"\tfld1\t\t\t; TOS =  1\n"
"\tfaddp\tst1, st0\t; TOS =  5\n"
"\tfchs\t\t\t; TOS = -5"
msgstr ""
"\tfld1\t\t\t; TOS =  1\n"
"\tfadd\tst0, st0\t; TOS =  2\n"
"\tfadd\tst0, st0\t; TOS =  4\n"
"\tfld1\t\t\t; TOS =  1\n"
"\tfaddp\tst1, st0\t; TOS =  5\n"
"\tfchs\t\t\t; TOS = -5"

#. (itstool) path: sect2/para
#: book.translate.xml:13717
msgid ""
"We can generalize all these optimizations into one rule: <emphasis>Keep "
"repeat values on the stack!</emphasis>"
msgstr ""

#. (itstool) path: tip/para
#: book.translate.xml:13721
msgid ""
"<emphasis><trademark class=\"registered\">PostScript</trademark></emphasis> "
"is a stack–oriented programming language. There are many more books "
"available about <trademark class=\"registered\">PostScript</trademark> than "
"about the <acronym>FPU</acronym> assembly language: Mastering <trademark "
"class=\"registered\">PostScript</trademark> will help you master the "
"<acronym>FPU</acronym>."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:13731
msgid "<application>pinhole</application>—The Code"
msgstr ""

#. (itstool) path: sect2/programlisting
#: book.translate.xml:13733
#, no-wrap
msgid ""
";;;;;;; pinhole.asm ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Find various parameters of a pinhole camera construction and use\n"
";\n"
"; Started:\t 9-Jun-2001\n"
"; Updated:\t10-Jun-2001\n"
";\n"
"; Copyright (c) 2001 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
"\n"
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"align 4\n"
"ten\tdd\t10\n"
"thousand\tdd\t1000\n"
"tthou\tdd\t10000\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"envar\tdb\t'PINHOLE='\t; Exactly 8 bytes, or 2 dwords long\n"
"pinhole\tdb\t'04,', \t\t; Bender's constant (0.04)\n"
"connors\tdb\t'037', 0Ah\t; Connors' constant\n"
"usg\tdb\t'Usage: pinhole [-b] [-c] [-e] [-p &lt;value&gt;] [-o &lt;outfile&gt;] [-i &lt;infile&gt;]', 0Ah\n"
"usglen\tequ\t$-usg\n"
"iemsg\tdb\t\"pinhole: Can't open input file\", 0Ah\n"
"iemlen\tequ\t$-iemsg\n"
"oemsg\tdb\t\"pinhole: Can't create output file\", 0Ah\n"
"oemlen\tequ\t$-oemsg\n"
"pinmsg\tdb\t\"pinhole: The PINHOLE constant must not be 0\", 0Ah\n"
"pinlen\tequ\t$-pinmsg\n"
"toobig\tdb\t\"pinhole: The PINHOLE constant may not exceed 18 decimal places\", 0Ah\n"
"biglen\tequ\t$-toobig\n"
"huhmsg\tdb\t9, '???'\n"
"separ\tdb\t9, '???'\n"
"sep2\tdb\t9, '???'\n"
"sep3\tdb\t9, '???'\n"
"sep4\tdb\t9, '???', 0Ah\n"
"huhlen\tequ\t$-huhmsg\n"
"header\tdb\t'focal length in millimeters,pinhole diameter in microns,'\n"
"\tdb\t'F-number,normalized F-number,F-5.6 multiplier,stops '\n"
"\tdb\t'from F-5.6', 0Ah\n"
"headlen\tequ\t$-header\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"dbuffer\tresb\t20\t\t; decimal input buffer\n"
"bbuffer\tresb\t10\t\t; BCD buffer\n"
"\n"
"section\t.text\n"
"align 4\n"
"huh:\n"
"\tcall\twrite\n"
"\tpush\tdword huhlen\n"
"\tpush\tdword huhmsg\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tret\n"
"\n"
"align 4\n"
"perr:\n"
"\tpush\tdword pinlen\n"
"\tpush\tdword pinmsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 4\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"consttoobig:\n"
"\tpush\tdword biglen\n"
"\tpush\tdword toobig\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 5\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"ierr:\n"
"\tpush\tdword iemlen\n"
"\tpush\tdword iemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"oerr:\n"
"\tpush\tdword oemlen\n"
"\tpush\tdword oemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 2\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 3\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\tsub\tesi, esi\n"
"\n"
".arg:\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear .getenv\t\t; no more arguments\n"
"\n"
"\t; ECX contains the pointer to an argument\n"
"\tcmp\tbyte [ecx], '-'\n"
"\tjne\tusage\n"
"\n"
"\tinc\tecx\n"
"\tmov\tax, [ecx]\n"
"\tinc\tecx\n"
"\n"
".o:\n"
"\tcmp\tal, 'o'\n"
"\tjne\t.i\n"
"\n"
"\t; Make sure we are not asked for the output file twice\n"
"\tcmp\tdword [fd.out], stdout\n"
"\tjne\tusage\n"
"\n"
"\t; Find the path to output file - it is either at [ECX+1],\n"
"\t; i.e., -ofile --\n"
"\t; or in the next argument,\n"
"\t; i.e., -o file\n"
"\n"
"\tor\tah, ah\n"
"\tjne\t.openoutput\n"
"\tpop\tecx\n"
"\tjecxz\tusage\n"
"\n"
".openoutput:\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear oerr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\tjmp\tshort .arg\n"
"\n"
".i:\n"
"\tcmp\tal, 'i'\n"
"\tjne\t.p\n"
"\n"
"\t; Make sure we are not asked twice\n"
"\tcmp\tdword [fd.in], stdin\n"
"\tjne\tnear usage\n"
"\n"
"\t; Find the path to the input file\n"
"\tor\tah, ah\n"
"\tjne\t.openinput\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje near usage\n"
"\n"
".openinput:\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear ierr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\tjmp\t.arg\n"
"\n"
".p:\n"
"\tcmp\tal, 'p'\n"
"\tjne\t.c\n"
"\tor\tah, ah\n"
"\tjne\t.pcheck\n"
"\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear usage\n"
"\n"
"\tmov\tah, [ecx]\n"
"\n"
".pcheck:\n"
"\tcmp\tah, '0'\n"
"\tjl\tnear usage\n"
"\tcmp\tah, '9'\n"
"\tja\tnear usage\n"
"\tmov\tesi, ecx\n"
"\tjmp\t.arg\n"
"\n"
".c:\n"
"\tcmp\tal, 'c'\n"
"\tjne\t.b\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tesi, connors\n"
"\tjmp\t.arg\n"
"\n"
".b:\n"
"\tcmp\tal, 'b'\n"
"\tjne\t.e\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tesi, pinhole\n"
"\tjmp\t.arg\n"
"\n"
".e:\n"
"\tcmp\tal, 'e'\n"
"\tjne\tnear usage\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tal, ','\n"
"\tmov\t[huhmsg], al\n"
"\tmov\t[separ], al\n"
"\tmov\t[sep2], al\n"
"\tmov\t[sep3], al\n"
"\tmov\t[sep4], al\n"
"\tjmp\t.arg\n"
"\n"
"align 4\n"
".getenv:\n"
"\t; If ESI = 0, we did not have a -p argument,\n"
"\t; and need to check the environment for \"PINHOLE=\"\n"
"\tor\tesi, esi\n"
"\tjne\t.init\n"
"\n"
"\tsub\tecx, ecx\n"
"\n"
".nextenv:\n"
"\tpop\tesi\n"
"\tor\tesi, esi\n"
"\tje\t.default\t; no PINHOLE envar found\n"
"\n"
"\t; check if this envar starts with 'PINHOLE='\n"
"\tmov\tedi, envar\n"
"\tmov\tcl, 2\t\t; 'PINHOLE=' is 2 dwords long\n"
"rep\tcmpsd\n"
"\tjne\t.nextenv\n"
"\n"
"\t; Check if it is followed by a digit\n"
"\tmov\tal, [esi]\n"
"\tcmp\tal, '0'\n"
"\tjl\t.default\n"
"\tcmp\tal, '9'\n"
"\tjbe\t.init\n"
"\t; fall through\n"
"\n"
"align 4\n"
".default:\n"
"\t; We got here because we had no -p argument,\n"
"\t; and did not find the PINHOLE envar.\n"
"\tmov\tesi, pinhole\n"
"\t; fall through\n"
"\n"
"align 4\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tsub\tedx, edx\n"
"\tmov\tedi, dbuffer+1\n"
"\tmov\tbyte [dbuffer], '0'\n"
"\n"
"\t; Convert the pinhole constant to real\n"
".constloop:\n"
"\tlodsb\n"
"\tcmp\tal, '9'\n"
"\tja\t.setconst\n"
"\tcmp\tal, '0'\n"
"\tje\t.processconst\n"
"\tjb\t.setconst\n"
"\n"
"\tinc\tdl\n"
"\n"
".processconst:\n"
"\tinc\tcl\n"
"\tcmp\tcl, 18\n"
"\tja\tnear consttoobig\n"
"\tstosb\n"
"\tjmp\tshort .constloop\n"
"\n"
"align 4\n"
".setconst:\n"
"\tor\tdl, dl\n"
"\tje\tnear perr\n"
"\n"
"\tfinit\n"
"\tfild\tdword [tthou]\n"
"\n"
"\tfld1\n"
"\tfild\tdword [ten]\n"
"\tfdivp\tst1, st0\n"
"\n"
"\tfild\tdword [thousand]\n"
"\tmov\tedi, obuffer\n"
"\n"
"\tmov\tebp, ecx\n"
"\tcall\tbcdload\n"
"\n"
".constdiv:\n"
"\tfmul\tst0, st2\n"
"\tloop\t.constdiv\n"
"\n"
"\tfld1\n"
"\tfadd\tst0, st0\n"
"\tfadd\tst0, st0\n"
"\tfld1\n"
"\tfaddp\tst1, st0\n"
"\tfchs\n"
"\n"
"\t; If we are creating a CSV file,\n"
"\t; print header\n"
"\tcmp\tbyte [separ], ','\n"
"\tjne\t.bigloop\n"
"\n"
"\tpush\tdword headlen\n"
"\tpush\tdword header\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\n"
".bigloop:\n"
"\tcall\tgetchar\n"
"\tjc\tnear done\n"
"\n"
"\t; Skip to the end of the line if you got '#'\n"
"\tcmp\tal, '#'\n"
"\tjne\t.num\n"
"\tcall\tskiptoeol\n"
"\tjmp\tshort .bigloop\n"
"\n"
".num:\n"
"\t; See if you got a number\n"
"\tcmp\tal, '0'\n"
"\tjl\t.bigloop\n"
"\tcmp\tal, '9'\n"
"\tja\t.bigloop\n"
"\n"
"\t; Yes, we have a number\n"
"\tsub\tebp, ebp\n"
"\tsub\tedx, edx\n"
"\n"
".number:\n"
"\tcmp\tal, '0'\n"
"\tje\t.number0\n"
"\tmov\tdl, 1\n"
"\n"
".number0:\n"
"\tor\tdl, dl\t\t; Skip leading 0's\n"
"\tje\t.nextnumber\n"
"\tpush\teax\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tinc\tebp\n"
"\tcmp\tebp, 19\n"
"\tjae\t.nextnumber\n"
"\tmov\t[dbuffer+ebp], al\n"
"\n"
".nextnumber:\n"
"\tcall\tgetchar\n"
"\tjc\t.work\n"
"\tcmp\tal, '#'\n"
"\tje\t.ungetc\n"
"\tcmp\tal, '0'\n"
"\tjl\t.work\n"
"\tcmp\tal, '9'\n"
"\tja\t.work\n"
"\tjmp\tshort .number\n"
"\n"
".ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\n"
".work:\n"
"\t; Now, do all the work\n"
"\tor\tdl, dl\n"
"\tje\tnear .work0\n"
"\n"
"\tcmp\tebp, 19\n"
"\tjae\tnear .toobig\n"
"\n"
"\tcall\tbcdload\n"
"\n"
"\t; Calculate pinhole diameter\n"
"\n"
"\tfld\tst0\t; save it\n"
"\tfsqrt\n"
"\tfmul\tst0, st3\n"
"\tfld\tst0\n"
"\tfmul\tst5\n"
"\tsub\tebp, ebp\n"
"\n"
"\t; Round off to 4 significant digits\n"
".diameter:\n"
"\tfcom\tst0, st7\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\tjb\t.printdiameter\n"
"\tfmul\tst0, st6\n"
"\tinc\tebp\n"
"\tjmp\tshort .diameter\n"
"\n"
".printdiameter:\n"
"\tcall\tprintnumber\t; pinhole diameter\n"
"\n"
"\t; Calculate F-number\n"
"\n"
"\tfdivp\tst1, st0\n"
"\tfld\tst0\n"
"\n"
"\tsub\tebp, ebp\n"
"\n"
".fnumber:\n"
"\tfcom\tst0, st6\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\tjb\t.printfnumber\n"
"\tfmul\tst0, st5\n"
"\tinc\tebp\n"
"\tjmp\tshort .fnumber\n"
"\n"
".printfnumber:\n"
"\tcall\tprintnumber\t; F number\n"
"\n"
"\t; Calculate normalized F-number\n"
"\tfmul\tst0, st0\n"
"\tfld1\n"
"\tfld\tst1\n"
"\tfyl2x\n"
"\tfrndint\n"
"\tfld1\n"
"\tfscale\n"
"\tfsqrt\n"
"\tfstp\tst1\n"
"\n"
"\tsub\tebp, ebp\n"
"\tcall\tprintnumber\n"
"\n"
"\t; Calculate time multiplier from F-5.6\n"
"\n"
"\tfscale\n"
"\tfld\tst0\n"
"\n"
"\t; Round off to 4 significant digits\n"
".fmul:\n"
"\tfcom\tst0, st6\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\n"
"\tjb\t.printfmul\n"
"\tinc\tebp\n"
"\tfmul\tst0, st5\n"
"\tjmp\tshort .fmul\n"
"\n"
".printfmul:\n"
"\tcall\tprintnumber\t; F multiplier\n"
"\n"
"\t; Calculate F-stops from 5.6\n"
"\n"
"\tfld1\n"
"\tfxch\tst1\n"
"\tfyl2x\n"
"\n"
"\tsub\tebp, ebp\n"
"\tcall\tprintnumber\n"
"\n"
"\tmov\tal, 0Ah\n"
"\tcall\tputchar\n"
"\tjmp\t.bigloop\n"
"\n"
".work0:\n"
"\tmov\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
"align 4\n"
".toobig:\n"
"\tcall\thuh\n"
"\tjmp\t.bigloop\n"
"\n"
"align 4\n"
"done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\tfinit\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"skiptoeol:\n"
"\t; Keep reading until you come to cr, lf, or eof\n"
"\tcall\tgetchar\n"
"\tjc\tdone\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.cr\n"
"\tret\n"
"\n"
".cr:\n"
"\tcmp\tal, 0Dh\n"
"\tjne\tskiptoeol\n"
"\tret\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tclc\n"
"\tret\n"
"\n"
"read:\n"
"\tjecxz\t.read\n"
"\tcall\twrite\n"
"\n"
".read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.empty\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".empty:\n"
"\tadd\tesp, byte 4\n"
"\tstc\n"
"\tret\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tjecxz\t.ret\t; nothing to write\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
".ret:\n"
"\tret\n"
"\n"
"align 4\n"
"bcdload:\n"
"\t; EBP contains the number of chars in dbuffer\n"
"\tpush\tecx\n"
"\tpush\tesi\n"
"\tpush\tedi\n"
"\n"
"\tlea\tecx, [ebp+1]\n"
"\tlea\tesi, [dbuffer+ebp-1]\n"
"\tshr\tecx, 1\n"
"\n"
"\tstd\n"
"\n"
"\tmov\tedi, bbuffer\n"
"\tsub\teax, eax\n"
"\tmov\t[edi], eax\n"
"\tmov\t[edi+4], eax\n"
"\tmov\t[edi+2], ax\n"
"\n"
".loop:\n"
"\tlodsw\n"
"\tsub\tax, 3030h\n"
"\tshl\tal, 4\n"
"\tor\tal, ah\n"
"\tmov\t[edi], al\n"
"\tinc\tedi\n"
"\tloop\t.loop\n"
"\n"
"\tfbld\t[bbuffer]\n"
"\n"
"\tcld\n"
"\tpop\tedi\n"
"\tpop\tesi\n"
"\tpop\tecx\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
"printnumber:\n"
"\tpush\tebp\n"
"\tmov\tal, [separ]\n"
"\tcall\tputchar\n"
"\n"
"\t; Print the integer at the TOS\n"
"\tmov\tebp, bbuffer+9\n"
"\tfbstp\t[bbuffer]\n"
"\n"
"\t; Check the sign\n"
"\tmov\tal, [ebp]\n"
"\tdec\tebp\n"
"\tor\tal, al\n"
"\tjns\t.leading\n"
"\n"
"\t; We got a negative number (should never happen)\n"
"\tmov\tal, '-'\n"
"\tcall\tputchar\n"
"\n"
".leading:\n"
"\t; Skip leading zeros\n"
"\tmov\tal, [ebp]\n"
"\tdec\tebp\n"
"\tor\tal, al\n"
"\tjne\t.first\n"
"\tcmp\tebp, bbuffer\n"
"\tjae\t.leading\n"
"\n"
"\t; We are here because the result was 0.\n"
"\t; Print '0' and return\n"
"\tmov\tal, '0'\n"
"\tjmp\tputchar\n"
"\n"
".first:\n"
"\t; We have found the first non-zero.\n"
"\t; But it is still packed\n"
"\ttest\tal, 0F0h\n"
"\tjz\t.second\n"
"\tpush\teax\n"
"\tshr\tal, 4\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tand\tal, 0Fh\n"
"\n"
".second:\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
".next:\n"
"\tcmp\tebp, bbuffer\n"
"\tjb\t.done\n"
"\n"
"\tmov\tal, [ebp]\n"
"\tpush\teax\n"
"\tshr\tal, 4\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tand\tal, 0Fh\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
"\tdec\tebp\n"
"\tjmp\tshort .next\n"
"\n"
".done:\n"
"\tpop\tebp\n"
"\tor\tebp, ebp\n"
"\tje\t.ret\n"
"\n"
".zeros:\n"
"\tmov\tal, '0'\n"
"\tcall\tputchar\n"
"\tdec\tebp\n"
"\tjne\t.zeros\n"
"\n"
".ret:\n"
"\tret"
msgstr ""
";;;;;;; pinhole.asm "
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n"
";\n"
"; Find various parameters of a pinhole camera construction and use\n"
";\n"
"; Started:\t 9-Jun-2001\n"
"; Updated:\t10-Jun-2001\n"
";\n"
"; Copyright (c) 2001 G. Adam Stanislav\n"
"; All rights reserved.\n"
";\n"
";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"
";;\n"
"\n"
"%include\t'system.inc'\n"
"\n"
"%define\tBUFSIZE\t2048\n"
"\n"
"section\t.data\n"
"align 4\n"
"ten\tdd\t10\n"
"thousand\tdd\t1000\n"
"tthou\tdd\t10000\n"
"fd.in\tdd\tstdin\n"
"fd.out\tdd\tstdout\n"
"envar\tdb\t'PINHOLE='\t; Exactly 8 bytes, or 2 dwords long\n"
"pinhole\tdb\t'04,', \t\t; Bender's constant (0.04)\n"
"connors\tdb\t'037', 0Ah\t; Connors' constant\n"
"usg\tdb\t'Usage: pinhole [-b] [-c] [-e] [-p &lt;value&gt;] [-o "
"&lt;outfile&gt;] [-i &lt;infile&gt;]', 0Ah\n"
"usglen\tequ\t$-usg\n"
"iemsg\tdb\t\"pinhole: Can't open input file\", 0Ah\n"
"iemlen\tequ\t$-iemsg\n"
"oemsg\tdb\t\"pinhole: Can't create output file\", 0Ah\n"
"oemlen\tequ\t$-oemsg\n"
"pinmsg\tdb\t\"pinhole: The PINHOLE constant must not be 0\", 0Ah\n"
"pinlen\tequ\t$-pinmsg\n"
"toobig\tdb\t\"pinhole: The PINHOLE constant may not exceed 18 decimal "
"places\", 0Ah\n"
"biglen\tequ\t$-toobig\n"
"huhmsg\tdb\t9, '???'\n"
"separ\tdb\t9, '???'\n"
"sep2\tdb\t9, '???'\n"
"sep3\tdb\t9, '???'\n"
"sep4\tdb\t9, '???', 0Ah\n"
"huhlen\tequ\t$-huhmsg\n"
"header\tdb\t'focal length in millimeters,pinhole diameter in microns,'\n"
"\tdb\t'F-number,normalized F-number,F-5.6 multiplier,stops '\n"
"\tdb\t'from F-5.6', 0Ah\n"
"headlen\tequ\t$-header\n"
"\n"
"section .bss\n"
"ibuffer\tresb\tBUFSIZE\n"
"obuffer\tresb\tBUFSIZE\n"
"dbuffer\tresb\t20\t\t; decimal input buffer\n"
"bbuffer\tresb\t10\t\t; BCD buffer\n"
"\n"
"section\t.text\n"
"align 4\n"
"huh:\n"
"\tcall\twrite\n"
"\tpush\tdword huhlen\n"
"\tpush\tdword huhmsg\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tret\n"
"\n"
"align 4\n"
"perr:\n"
"\tpush\tdword pinlen\n"
"\tpush\tdword pinmsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 4\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"consttoobig:\n"
"\tpush\tdword biglen\n"
"\tpush\tdword toobig\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 5\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"ierr:\n"
"\tpush\tdword iemlen\n"
"\tpush\tdword iemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 1\t\t; return failure\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"oerr:\n"
"\tpush\tdword oemlen\n"
"\tpush\tdword oemsg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 2\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"usage:\n"
"\tpush\tdword usglen\n"
"\tpush\tdword usg\n"
"\tpush\tdword stderr\n"
"\tsys.write\n"
"\tpush\tdword 3\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"global\t_start\n"
"_start:\n"
"\tadd\tesp, byte 8\t; discard argc and argv[0]\n"
"\tsub\tesi, esi\n"
"\n"
".arg:\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear .getenv\t\t; no more arguments\n"
"\n"
"\t; ECX contains the pointer to an argument\n"
"\tcmp\tbyte [ecx], '-'\n"
"\tjne\tusage\n"
"\n"
"\tinc\tecx\n"
"\tmov\tax, [ecx]\n"
"\tinc\tecx\n"
"\n"
".o:\n"
"\tcmp\tal, 'o'\n"
"\tjne\t.i\n"
"\n"
"\t; Make sure we are not asked for the output file twice\n"
"\tcmp\tdword [fd.out], stdout\n"
"\tjne\tusage\n"
"\n"
"\t; Find the path to output file - it is either at [ECX+1],\n"
"\t; i.e., -ofile --\n"
"\t; or in the next argument,\n"
"\t; i.e., -o file\n"
"\n"
"\tor\tah, ah\n"
"\tjne\t.openoutput\n"
"\tpop\tecx\n"
"\tjecxz\tusage\n"
"\n"
".openoutput:\n"
"\tpush\tdword 420\t; file mode (644 octal)\n"
"\tpush\tdword 0200h | 0400h | 01h\n"
"\t; O_CREAT | O_TRUNC | O_WRONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear oerr\n"
"\n"
"\tadd\tesp, byte 12\n"
"\tmov\t[fd.out], eax\n"
"\tjmp\tshort .arg\n"
"\n"
".i:\n"
"\tcmp\tal, 'i'\n"
"\tjne\t.p\n"
"\n"
"\t; Make sure we are not asked twice\n"
"\tcmp\tdword [fd.in], stdin\n"
"\tjne\tnear usage\n"
"\n"
"\t; Find the path to the input file\n"
"\tor\tah, ah\n"
"\tjne\t.openinput\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje near usage\n"
"\n"
".openinput:\n"
"\tpush\tdword 0\t\t; O_RDONLY\n"
"\tpush\tecx\n"
"\tsys.open\n"
"\tjc\tnear ierr\t\t; open failed\n"
"\n"
"\tadd\tesp, byte 8\n"
"\tmov\t[fd.in], eax\n"
"\tjmp\t.arg\n"
"\n"
".p:\n"
"\tcmp\tal, 'p'\n"
"\tjne\t.c\n"
"\tor\tah, ah\n"
"\tjne\t.pcheck\n"
"\n"
"\tpop\tecx\n"
"\tor\tecx, ecx\n"
"\tje\tnear usage\n"
"\n"
"\tmov\tah, [ecx]\n"
"\n"
".pcheck:\n"
"\tcmp\tah, '0'\n"
"\tjl\tnear usage\n"
"\tcmp\tah, '9'\n"
"\tja\tnear usage\n"
"\tmov\tesi, ecx\n"
"\tjmp\t.arg\n"
"\n"
".c:\n"
"\tcmp\tal, 'c'\n"
"\tjne\t.b\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tesi, connors\n"
"\tjmp\t.arg\n"
"\n"
".b:\n"
"\tcmp\tal, 'b'\n"
"\tjne\t.e\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tesi, pinhole\n"
"\tjmp\t.arg\n"
"\n"
".e:\n"
"\tcmp\tal, 'e'\n"
"\tjne\tnear usage\n"
"\tor\tah, ah\n"
"\tjne\tnear usage\n"
"\tmov\tal, ','\n"
"\tmov\t[huhmsg], al\n"
"\tmov\t[separ], al\n"
"\tmov\t[sep2], al\n"
"\tmov\t[sep3], al\n"
"\tmov\t[sep4], al\n"
"\tjmp\t.arg\n"
"\n"
"align 4\n"
".getenv:\n"
"\t; If ESI = 0, we did not have a -p argument,\n"
"\t; and need to check the environment for \"PINHOLE=\"\n"
"\tor\tesi, esi\n"
"\tjne\t.init\n"
"\n"
"\tsub\tecx, ecx\n"
"\n"
".nextenv:\n"
"\tpop\tesi\n"
"\tor\tesi, esi\n"
"\tje\t.default\t; no PINHOLE envar found\n"
"\n"
"\t; check if this envar starts with 'PINHOLE='\n"
"\tmov\tedi, envar\n"
"\tmov\tcl, 2\t\t; 'PINHOLE=' is 2 dwords long\n"
"rep\tcmpsd\n"
"\tjne\t.nextenv\n"
"\n"
"\t; Check if it is followed by a digit\n"
"\tmov\tal, [esi]\n"
"\tcmp\tal, '0'\n"
"\tjl\t.default\n"
"\tcmp\tal, '9'\n"
"\tjbe\t.init\n"
"\t; fall through\n"
"\n"
"align 4\n"
".default:\n"
"\t; We got here because we had no -p argument,\n"
"\t; and did not find the PINHOLE envar.\n"
"\tmov\tesi, pinhole\n"
"\t; fall through\n"
"\n"
"align 4\n"
".init:\n"
"\tsub\teax, eax\n"
"\tsub\tebx, ebx\n"
"\tsub\tecx, ecx\n"
"\tsub\tedx, edx\n"
"\tmov\tedi, dbuffer+1\n"
"\tmov\tbyte [dbuffer], '0'\n"
"\n"
"\t; Convert the pinhole constant to real\n"
".constloop:\n"
"\tlodsb\n"
"\tcmp\tal, '9'\n"
"\tja\t.setconst\n"
"\tcmp\tal, '0'\n"
"\tje\t.processconst\n"
"\tjb\t.setconst\n"
"\n"
"\tinc\tdl\n"
"\n"
".processconst:\n"
"\tinc\tcl\n"
"\tcmp\tcl, 18\n"
"\tja\tnear consttoobig\n"
"\tstosb\n"
"\tjmp\tshort .constloop\n"
"\n"
"align 4\n"
".setconst:\n"
"\tor\tdl, dl\n"
"\tje\tnear perr\n"
"\n"
"\tfinit\n"
"\tfild\tdword [tthou]\n"
"\n"
"\tfld1\n"
"\tfild\tdword [ten]\n"
"\tfdivp\tst1, st0\n"
"\n"
"\tfild\tdword [thousand]\n"
"\tmov\tedi, obuffer\n"
"\n"
"\tmov\tebp, ecx\n"
"\tcall\tbcdload\n"
"\n"
".constdiv:\n"
"\tfmul\tst0, st2\n"
"\tloop\t.constdiv\n"
"\n"
"\tfld1\n"
"\tfadd\tst0, st0\n"
"\tfadd\tst0, st0\n"
"\tfld1\n"
"\tfaddp\tst1, st0\n"
"\tfchs\n"
"\n"
"\t; If we are creating a CSV file,\n"
"\t; print header\n"
"\tcmp\tbyte [separ], ','\n"
"\tjne\t.bigloop\n"
"\n"
"\tpush\tdword headlen\n"
"\tpush\tdword header\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\n"
".bigloop:\n"
"\tcall\tgetchar\n"
"\tjc\tnear done\n"
"\n"
"\t; Skip to the end of the line if you got '#'\n"
"\tcmp\tal, '#'\n"
"\tjne\t.num\n"
"\tcall\tskiptoeol\n"
"\tjmp\tshort .bigloop\n"
"\n"
".num:\n"
"\t; See if you got a number\n"
"\tcmp\tal, '0'\n"
"\tjl\t.bigloop\n"
"\tcmp\tal, '9'\n"
"\tja\t.bigloop\n"
"\n"
"\t; Yes, we have a number\n"
"\tsub\tebp, ebp\n"
"\tsub\tedx, edx\n"
"\n"
".number:\n"
"\tcmp\tal, '0'\n"
"\tje\t.number0\n"
"\tmov\tdl, 1\n"
"\n"
".number0:\n"
"\tor\tdl, dl\t\t; Skip leading 0's\n"
"\tje\t.nextnumber\n"
"\tpush\teax\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tinc\tebp\n"
"\tcmp\tebp, 19\n"
"\tjae\t.nextnumber\n"
"\tmov\t[dbuffer+ebp], al\n"
"\n"
".nextnumber:\n"
"\tcall\tgetchar\n"
"\tjc\t.work\n"
"\tcmp\tal, '#'\n"
"\tje\t.ungetc\n"
"\tcmp\tal, '0'\n"
"\tjl\t.work\n"
"\tcmp\tal, '9'\n"
"\tja\t.work\n"
"\tjmp\tshort .number\n"
"\n"
".ungetc:\n"
"\tdec\tesi\n"
"\tinc\tebx\n"
"\n"
".work:\n"
"\t; Now, do all the work\n"
"\tor\tdl, dl\n"
"\tje\tnear .work0\n"
"\n"
"\tcmp\tebp, 19\n"
"\tjae\tnear .toobig\n"
"\n"
"\tcall\tbcdload\n"
"\n"
"\t; Calculate pinhole diameter\n"
"\n"
"\tfld\tst0\t; save it\n"
"\tfsqrt\n"
"\tfmul\tst0, st3\n"
"\tfld\tst0\n"
"\tfmul\tst5\n"
"\tsub\tebp, ebp\n"
"\n"
"\t; Round off to 4 significant digits\n"
".diameter:\n"
"\tfcom\tst0, st7\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\tjb\t.printdiameter\n"
"\tfmul\tst0, st6\n"
"\tinc\tebp\n"
"\tjmp\tshort .diameter\n"
"\n"
".printdiameter:\n"
"\tcall\tprintnumber\t; pinhole diameter\n"
"\n"
"\t; Calculate F-number\n"
"\n"
"\tfdivp\tst1, st0\n"
"\tfld\tst0\n"
"\n"
"\tsub\tebp, ebp\n"
"\n"
".fnumber:\n"
"\tfcom\tst0, st6\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\tjb\t.printfnumber\n"
"\tfmul\tst0, st5\n"
"\tinc\tebp\n"
"\tjmp\tshort .fnumber\n"
"\n"
".printfnumber:\n"
"\tcall\tprintnumber\t; F number\n"
"\n"
"\t; Calculate normalized F-number\n"
"\tfmul\tst0, st0\n"
"\tfld1\n"
"\tfld\tst1\n"
"\tfyl2x\n"
"\tfrndint\n"
"\tfld1\n"
"\tfscale\n"
"\tfsqrt\n"
"\tfstp\tst1\n"
"\n"
"\tsub\tebp, ebp\n"
"\tcall\tprintnumber\n"
"\n"
"\t; Calculate time multiplier from F-5.6\n"
"\n"
"\tfscale\n"
"\tfld\tst0\n"
"\n"
"\t; Round off to 4 significant digits\n"
".fmul:\n"
"\tfcom\tst0, st6\n"
"\tfstsw\tax\n"
"\tsahf\n"
"\n"
"\tjb\t.printfmul\n"
"\tinc\tebp\n"
"\tfmul\tst0, st5\n"
"\tjmp\tshort .fmul\n"
"\n"
".printfmul:\n"
"\tcall\tprintnumber\t; F multiplier\n"
"\n"
"\t; Calculate F-stops from 5.6\n"
"\n"
"\tfld1\n"
"\tfxch\tst1\n"
"\tfyl2x\n"
"\n"
"\tsub\tebp, ebp\n"
"\tcall\tprintnumber\n"
"\n"
"\tmov\tal, 0Ah\n"
"\tcall\tputchar\n"
"\tjmp\t.bigloop\n"
"\n"
".work0:\n"
"\tmov\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
"align 4\n"
".toobig:\n"
"\tcall\thuh\n"
"\tjmp\t.bigloop\n"
"\n"
"align 4\n"
"done:\n"
"\tcall\twrite\t\t; flush output buffer\n"
"\n"
"\t; close files\n"
"\tpush\tdword [fd.in]\n"
"\tsys.close\n"
"\n"
"\tpush\tdword [fd.out]\n"
"\tsys.close\n"
"\n"
"\tfinit\n"
"\n"
"\t; return success\n"
"\tpush\tdword 0\n"
"\tsys.exit\n"
"\n"
"align 4\n"
"skiptoeol:\n"
"\t; Keep reading until you come to cr, lf, or eof\n"
"\tcall\tgetchar\n"
"\tjc\tdone\n"
"\tcmp\tal, 0Ah\n"
"\tjne\t.cr\n"
"\tret\n"
"\n"
".cr:\n"
"\tcmp\tal, 0Dh\n"
"\tjne\tskiptoeol\n"
"\tret\n"
"\n"
"align 4\n"
"getchar:\n"
"\tor\tebx, ebx\n"
"\tjne\t.fetch\n"
"\n"
"\tcall\tread\n"
"\n"
".fetch:\n"
"\tlodsb\n"
"\tdec\tebx\n"
"\tclc\n"
"\tret\n"
"\n"
"read:\n"
"\tjecxz\t.read\n"
"\tcall\twrite\n"
"\n"
".read:\n"
"\tpush\tdword BUFSIZE\n"
"\tmov\tesi, ibuffer\n"
"\tpush\tesi\n"
"\tpush\tdword [fd.in]\n"
"\tsys.read\n"
"\tadd\tesp, byte 12\n"
"\tmov\tebx, eax\n"
"\tor\teax, eax\n"
"\tje\t.empty\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
".empty:\n"
"\tadd\tesp, byte 4\n"
"\tstc\n"
"\tret\n"
"\n"
"align 4\n"
"putchar:\n"
"\tstosb\n"
"\tinc\tecx\n"
"\tcmp\tecx, BUFSIZE\n"
"\tje\twrite\n"
"\tret\n"
"\n"
"align 4\n"
"write:\n"
"\tjecxz\t.ret\t; nothing to write\n"
"\tsub\tedi, ecx\t; start of buffer\n"
"\tpush\tecx\n"
"\tpush\tedi\n"
"\tpush\tdword [fd.out]\n"
"\tsys.write\n"
"\tadd\tesp, byte 12\n"
"\tsub\teax, eax\n"
"\tsub\tecx, ecx\t; buffer is empty now\n"
".ret:\n"
"\tret\n"
"\n"
"align 4\n"
"bcdload:\n"
"\t; EBP contains the number of chars in dbuffer\n"
"\tpush\tecx\n"
"\tpush\tesi\n"
"\tpush\tedi\n"
"\n"
"\tlea\tecx, [ebp+1]\n"
"\tlea\tesi, [dbuffer+ebp-1]\n"
"\tshr\tecx, 1\n"
"\n"
"\tstd\n"
"\n"
"\tmov\tedi, bbuffer\n"
"\tsub\teax, eax\n"
"\tmov\t[edi], eax\n"
"\tmov\t[edi+4], eax\n"
"\tmov\t[edi+2], ax\n"
"\n"
".loop:\n"
"\tlodsw\n"
"\tsub\tax, 3030h\n"
"\tshl\tal, 4\n"
"\tor\tal, ah\n"
"\tmov\t[edi], al\n"
"\tinc\tedi\n"
"\tloop\t.loop\n"
"\n"
"\tfbld\t[bbuffer]\n"
"\n"
"\tcld\n"
"\tpop\tedi\n"
"\tpop\tesi\n"
"\tpop\tecx\n"
"\tsub\teax, eax\n"
"\tret\n"
"\n"
"align 4\n"
"printnumber:\n"
"\tpush\tebp\n"
"\tmov\tal, [separ]\n"
"\tcall\tputchar\n"
"\n"
"\t; Print the integer at the TOS\n"
"\tmov\tebp, bbuffer+9\n"
"\tfbstp\t[bbuffer]\n"
"\n"
"\t; Check the sign\n"
"\tmov\tal, [ebp]\n"
"\tdec\tebp\n"
"\tor\tal, al\n"
"\tjns\t.leading\n"
"\n"
"\t; We got a negative number (should never happen)\n"
"\tmov\tal, '-'\n"
"\tcall\tputchar\n"
"\n"
".leading:\n"
"\t; Skip leading zeros\n"
"\tmov\tal, [ebp]\n"
"\tdec\tebp\n"
"\tor\tal, al\n"
"\tjne\t.first\n"
"\tcmp\tebp, bbuffer\n"
"\tjae\t.leading\n"
"\n"
"\t; We are here because the result was 0.\n"
"\t; Print '0' and return\n"
"\tmov\tal, '0'\n"
"\tjmp\tputchar\n"
"\n"
".first:\n"
"\t; We have found the first non-zero.\n"
"\t; But it is still packed\n"
"\ttest\tal, 0F0h\n"
"\tjz\t.second\n"
"\tpush\teax\n"
"\tshr\tal, 4\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tand\tal, 0Fh\n"
"\n"
".second:\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
".next:\n"
"\tcmp\tebp, bbuffer\n"
"\tjb\t.done\n"
"\n"
"\tmov\tal, [ebp]\n"
"\tpush\teax\n"
"\tshr\tal, 4\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\tpop\teax\n"
"\tand\tal, 0Fh\n"
"\tadd\tal, '0'\n"
"\tcall\tputchar\n"
"\n"
"\tdec\tebp\n"
"\tjmp\tshort .next\n"
"\n"
".done:\n"
"\tpop\tebp\n"
"\tor\tebp, ebp\n"
"\tje\t.ret\n"
"\n"
".zeros:\n"
"\tmov\tal, '0'\n"
"\tcall\tputchar\n"
"\tdec\tebp\n"
"\tjne\t.zeros\n"
"\n"
".ret:\n"
"\tret"

#. (itstool) path: sect2/para
#: book.translate.xml:14431
msgid ""
"The code follows the same format as all the other filters we have seen "
"before, with one subtle exception:"
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14435
msgid ""
"We are no longer assuming that the end of input implies the end of things to "
"do, something we took for granted in the <emphasis>character–oriented</"
"emphasis> filters."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14440
msgid ""
"This filter does not process characters. It processes a <emphasis>language</"
"emphasis> (albeit a very simple one, consisting only of numbers)."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14444
msgid "When we have no more input, it can mean one of two things:"
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:14449
msgid "We are done and can quit. This is the same as before."
msgstr ""

#. (itstool) path: listitem/para
#: book.translate.xml:14454
msgid ""
"The last character we have read was a digit. We have stored it at the end of "
"our <acronym>ASCII</acronym>–to–float conversion buffer. We now need to "
"convert the contents of that buffer into a number and write the last line of "
"our output."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14463
msgid ""
"For that reason, we have modified our <function>getchar</function> and our "
"<function>read</function> routines to return with the <varname role="
"\"register\">carry flag</varname> <emphasis>clear</emphasis> whenever we are "
"fetching another character from the input, or the <varname role=\"register"
"\">carry flag</varname> <emphasis>set</emphasis> whenever there is no more "
"input."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14472
msgid ""
"Of course, we are still using assembly language magic to do that! Take a "
"good look at <function>getchar</function>. It <emphasis>always</emphasis> "
"returns with the <varname role=\"register\">carry flag</varname> "
"<emphasis>clear</emphasis>."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14477
msgid ""
"Yet, our main code relies on the <varname role=\"register\">carry flag</"
"varname> to tell it when to quit—and it works."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14480
msgid ""
"The magic is in <function>read</function>. Whenever it receives more input "
"from the system, it just returns to <function>getchar</function>, which "
"fetches a character from the input buffer, <emphasis>clears</emphasis> the "
"<varname role=\"register\">carry flag</varname> and returns."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14485
msgid ""
"But when <function>read</function> receives no more input from the system, "
"it does <emphasis>not</emphasis> return to <function>getchar</function> at "
"all. Instead, the <function role=\"opcode\">add esp, byte 4</function> op "
"code adds <constant>4</constant> to <varname role=\"register\">ESP</"
"varname>, <emphasis>sets</emphasis> the <varname role=\"register\">carry "
"flag</varname>, and returns."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14493
msgid ""
"So, where does it return to? Whenever a program uses the <function role="
"\"opcode\">call</function> op code, the microprocessor <function role="
"\"opcode\">push</function>es the return address, i.e., it stores it on the "
"top of the stack (not the <acronym>FPU</acronym> stack, the system stack, "
"which is in the memory). When a program uses the <function role=\"opcode"
"\">ret</function> op code, the microprocessor <function role=\"opcode\">pop</"
"function>s the return value from the stack, and jumps to the address that "
"was stored there."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14503
msgid ""
"But since we added <constant>4</constant> to <varname role=\"register\">ESP</"
"varname> (which is the stack pointer register), we have effectively given "
"the microprocessor a minor case of <emphasis>amnesia</emphasis>: It no "
"longer remembers it was <function>getchar</function> that <function role="
"\"opcode\">call</function>ed <function>read</function>."
msgstr ""

#. (itstool) path: blockquote/para
#: book.translate.xml:14509
msgid ""
"And since <function>getchar</function> never <function role=\"opcode\">push</"
"function>ed anything before <function role=\"opcode\">call</function>ing "
"<function>read</function>, the top of the stack now contains the return "
"address to whatever or whoever <function role=\"opcode\">call</function>ed "
"<function>getchar</function>. As far as that caller is concerned, he "
"<function role=\"opcode\">call</function>ed <function>getchar</function>, "
"which <function role=\"opcode\">ret</function>urned with the <varname role="
"\"register\">carry flag</varname> set!"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14517
msgid ""
"Other than that, the <function>bcdload</function> routine is caught up in "
"the middle of a Lilliputian conflict between the Big–Endians and the Little–"
"Endians."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14521
msgid ""
"It is converting the text representation of a number into that number: The "
"text is stored in the big–endian order, but the <emphasis>packed decimal</"
"emphasis> is little–endian."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14526
msgid ""
"To solve the conflict, we use the <function>std</function> op code early on. "
"We cancel it with <function>cld</function> later on: It is quite important "
"we do not <function>call</function> anything that may depend on the default "
"setting of the <emphasis>direction flag</emphasis> while <function>std</"
"function> is active."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14533
msgid ""
"Everything else in this code should be quit eclear, providing you have read "
"the entire chapter that precedes it."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14537
msgid ""
"It is a classical example of the adage that programming requires a lot of "
"thought and only a little coding. Once we have thought through every tiny "
"detail, the code almost writes itself."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:14544
msgid "Using <application>pinhole</application>"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14546
msgid ""
"Because we have decided to make the program <emphasis>ignore</emphasis> any "
"input except for numbers (and even those inside a comment), we can actually "
"perform <emphasis>textual queries</emphasis>. We do not <emphasis>have to</"
"emphasis>, but we <emphasis>can</emphasis>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14553
msgid ""
"In my humble opinion, forming a textual query, instead of having to follow a "
"very strict syntax, makes software much more user friendly."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14557
msgid ""
"Suppose we want to build a pinhole camera to use the 4x5 inch film. The "
"standard focal length for that film is about 150mm. We want to "
"<emphasis>fine–tune</emphasis> our focal length so the pinhole diameter is "
"as round a number as possible. Let us also suppose we are quite comfortable "
"with cameras but somewhat intimidated by computers. Rather than just have to "
"type in a bunch of numbers, we want to <emphasis>ask</emphasis> a couple of "
"questions."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14566
msgid "Our session might look like this:"
msgstr "ممکن است جلسهٔ ما بدین شکل باشد:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14568
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>pinhole\n"
"\n"
"Computer,\n"
"\n"
"What size pinhole do I need for the focal length of 150?</userinput>\n"
"150\t490\t306\t362\t2930\t12\n"
"<userinput>Hmmm... How about 160?</userinput>\n"
"160\t506\t316\t362\t3125\t12\n"
"<userinput>Let's make it 155, please.</userinput>\n"
"155\t498\t311\t362\t3027\t12\n"
"<userinput>Ah, let's try 157...</userinput>\n"
"157\t501\t313\t362\t3066\t12\n"
"<userinput>156?</userinput>\n"
"156\t500\t312\t362\t3047\t12\n"
"<userinput>That's it! Perfect! Thank you very much!\n"
"^D</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>pinhole\n"
"\n"
"Computer,\n"
"\n"
"What size pinhole do I need for the focal length of 150?</userinput>\n"
"150\t490\t306\t362\t2930\t12\n"
"<userinput>Hmmm... How about 160?</userinput>\n"
"160\t506\t316\t362\t3125\t12\n"
"<userinput>Let's make it 155, please.</userinput>\n"
"155\t498\t311\t362\t3027\t12\n"
"<userinput>Ah, let's try 157...</userinput>\n"
"157\t501\t313\t362\t3066\t12\n"
"<userinput>156?</userinput>\n"
"156\t500\t312\t362\t3047\t12\n"
"<userinput>That's it! Perfect! Thank you very much!\n"
"^D</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14585
msgid ""
"We have found that while for the focal length of 150, our pinhole diameter "
"should be 490 microns, or 0.49 mm, if we go with the almost identical focal "
"length of 156 mm, we can get away with a pinhole diameter of exactly one "
"half of a millimeter."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:14593
msgid "Scripting"
msgstr "اجرانامه‌نویسی"

#. (itstool) path: sect2/para
#: book.translate.xml:14595
msgid ""
"Because we have chosen the <constant>#</constant> character to denote the "
"start of a comment, we can treat our <application>pinhole</application> "
"software as a <emphasis>scripting language</emphasis>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14600
msgid ""
"You have probably seen <application>shell</application> <emphasis>scripts</"
"emphasis> that start with:"
msgstr ""
"شما احتمالاً <emphasis>اجرانامه‌های</emphasis><application>shell</"
"application> که بدین شکل شروع می‌شوند را دیده‌اید:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:14603
#, no-wrap
msgid "#! /bin/sh"
msgstr "#! /bin/sh"

#. (itstool) path: sect2/para
#: book.translate.xml:14605
msgid "...or..."
msgstr "...یا..."

#. (itstool) path: sect2/programlisting
#: book.translate.xml:14607
#, no-wrap
msgid "#!/bin/sh"
msgstr "#!/bin/sh"

#. (itstool) path: sect2/para
#: book.translate.xml:14609
msgid ""
"...because the blank space after the <function>#!</function> is optional."
msgstr "...زیرا فضای خالیِ بعد از <function>#!</function> اختیاریست."

#. (itstool) path: sect2/para
#: book.translate.xml:14612
msgid ""
"Whenever <trademark class=\"registered\">UNIX</trademark> is asked to run an "
"executable file which starts with the <function>#!</function>, it assumes "
"the file is a script. It adds the command to the rest of the first line of "
"the script, and tries to execute that."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14618
msgid ""
"Suppose now that we have installed <application>pinhole</application> in "
"<application>/usr/local/bin/</application>, we can now write a script to "
"calculate various pinhole diameters suitable for various focal lengths "
"commonly used with the 120 film."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14624
msgid "The script might look something like this:"
msgstr "ممکن است که اجرانامه چیزی شبیه به این باشد:"

#. (itstool) path: sect2/programlisting
#: book.translate.xml:14626
#, no-wrap
msgid ""
"#! /usr/local/bin/pinhole -b -i\n"
"# Find the best pinhole diameter\n"
"# for the 120 film\n"
"\n"
"### Standard\n"
"80\n"
"\n"
"### Wide angle\n"
"30, 40, 50, 60, 70\n"
"\n"
"### Telephoto\n"
"100, 120, 140"
msgstr ""
"#! /usr/local/bin/pinhole -b -i\n"
"# Find the best pinhole diameter\n"
"# for the 120 film\n"
"\n"
"### Standard\n"
"80\n"
"\n"
"### Wide angle\n"
"30, 40, 50, 60, 70\n"
"\n"
"### Telephoto\n"
"100, 120, 140"

#. (itstool) path: sect2/para
#: book.translate.xml:14639
msgid ""
"Because 120 is a medium size film, we may name this file "
"<application>medium</application>."
msgstr ""
"برای اینکه چون 120 یک فیلم با اندازهٔ متوسط است، ممکن است این پرونده را "
"<application>medium</application> نام‌گذاری کنیم."

#. (itstool) path: sect2/para
#: book.translate.xml:14642
msgid ""
"We can set its permissions to execute, and run it as if it were a program:"
msgstr ""
"می‌توانیم مجوزهای اجرانامه را به‌گونه‌ای تنظیم کنیم تا اجرا شود، و آن را "
"مانند یک برنامه اجرا کنیم:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14645
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>chmod 755 medium</userinput>\n"
"<prompt>%</prompt> <userinput>./medium</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>chmod 755 medium</userinput>\n"
"<prompt>%</prompt> <userinput>./medium</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14648
msgid ""
"<trademark class=\"registered\">UNIX</trademark> will interpret that last "
"command as:"
msgstr ""
"<trademark class=\"registered\">UNIX</trademark> آخرین دستور را بدین شکل "
"تفسیر می‌کند:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14650
#, no-wrap
msgid "<prompt>%</prompt> <userinput>/usr/local/bin/pinhole -b -i ./medium</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>/usr/local/bin/pinhole -b -i "
"./medium</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14652
msgid "It will run that command and display:"
msgstr "آن دستور را اجرا می‌کند و خروجی زیر را نمایش می‌دهد:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14654
#, no-wrap
msgid ""
"80\t358\t224\t256\t1562\t11\n"
"30\t219\t137\t128\t586\t9\n"
"40\t253\t158\t181\t781\t10\n"
"50\t283\t177\t181\t977\t10\n"
"60\t310\t194\t181\t1172\t10\n"
"70\t335\t209\t181\t1367\t10\n"
"100\t400\t250\t256\t1953\t11\n"
"120\t438\t274\t256\t2344\t11\n"
"140\t473\t296\t256\t2734\t11"
msgstr ""
"80\t358\t224\t256\t1562\t11\n"
"30\t219\t137\t128\t586\t9\n"
"40\t253\t158\t181\t781\t10\n"
"50\t283\t177\t181\t977\t10\n"
"60\t310\t194\t181\t1172\t10\n"
"70\t335\t209\t181\t1367\t10\n"
"100\t400\t250\t256\t1953\t11\n"
"120\t438\t274\t256\t2344\t11\n"
"140\t473\t296\t256\t2734\t11"

#. (itstool) path: sect2/para
#: book.translate.xml:14664
msgid "Now, let us enter:"
msgstr "اکنون، بیایید چنین وارد کنیم:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14666
#, no-wrap
msgid "<prompt>%</prompt> <userinput>./medium -c</userinput>"
msgstr "<prompt>%</prompt> <userinput>./medium -c</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14668
msgid "<trademark class=\"registered\">UNIX</trademark> will treat that as:"
msgstr ""
"<trademark class=\"registered\">UNIX</trademark> با آن چنین برخورد می‌کند:"

#. (itstool) path: sect2/screen
#: book.translate.xml:14670
#, no-wrap
msgid "<prompt>%</prompt> <userinput>/usr/local/bin/pinhole -b -i ./medium -c</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>/usr/local/bin/pinhole -b -i ./medium "
"-c</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14672
msgid ""
"That gives it two conflicting options: <parameter>-b</parameter> and "
"<parameter>-c</parameter> (Use Bender's constant and use Connors' constant). "
"We have programmed it so later options override early ones—our program will "
"calculate everything using Connors' constant:"
msgstr ""

#. (itstool) path: sect2/screen
#: book.translate.xml:14679
#, no-wrap
msgid ""
"80\t331\t242\t256\t1826\t11\n"
"30\t203\t148\t128\t685\t9\n"
"40\t234\t171\t181\t913\t10\n"
"50\t262\t191\t181\t1141\t10\n"
"60\t287\t209\t181\t1370\t10\n"
"70\t310\t226\t256\t1598\t11\n"
"100\t370\t270\t256\t2283\t11\n"
"120\t405\t296\t256\t2739\t11\n"
"140\t438\t320\t362\t3196\t12"
msgstr ""
"80\t331\t242\t256\t1826\t11\n"
"30\t203\t148\t128\t685\t9\n"
"40\t234\t171\t181\t913\t10\n"
"50\t262\t191\t181\t1141\t10\n"
"60\t287\t209\t181\t1370\t10\n"
"70\t310\t226\t256\t1598\t11\n"
"100\t370\t270\t256\t2283\t11\n"
"120\t405\t296\t256\t2739\t11\n"
"140\t438\t320\t362\t3196\t12"

#. (itstool) path: sect2/para
#: book.translate.xml:14689
msgid ""
"We decide we want to go with Bender's constant after all. We want to save "
"its values as a comma–separated file:"
msgstr ""

#. (itstool) path: sect2/screen
#: book.translate.xml:14693
#, no-wrap
msgid ""
"<prompt>%</prompt> <userinput>./medium -b -e &gt; bender</userinput>\n"
"<prompt>%</prompt> <userinput>cat bender</userinput>\n"
"focal length in millimeters,pinhole diameter in microns,F-number,normalized F-number,F-5.6 multiplier,stops from F-5.6\n"
"80,358,224,256,1562,11\n"
"30,219,137,128,586,9\n"
"40,253,158,181,781,10\n"
"50,283,177,181,977,10\n"
"60,310,194,181,1172,10\n"
"70,335,209,181,1367,10\n"
"100,400,250,256,1953,11\n"
"120,438,274,256,2344,11\n"
"140,473,296,256,2734,11\n"
"<prompt>%</prompt>"
msgstr ""
"<prompt>%</prompt> <userinput>./medium -b -e &gt; bender</userinput>\n"
"<prompt>%</prompt> <userinput>cat bender</userinput>\n"
"focal length in millimeters,pinhole diameter in microns,F-number,normalized "
"F-number,F-5.6 multiplier,stops from F-5.6\n"
"80,358,224,256,1562,11\n"
"30,219,137,128,586,9\n"
"40,253,158,181,781,10\n"
"50,283,177,181,977,10\n"
"60,310,194,181,1172,10\n"
"70,335,209,181,1367,10\n"
"100,400,250,256,1953,11\n"
"120,438,274,256,2344,11\n"
"140,473,296,256,2734,11\n"
"<prompt>%</prompt>"

#. (itstool) path: sect1/title
#: book.translate.xml:14710
msgid "Caveats"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14712
msgid ""
"Assembly language programmers who \"grew up\" under <acronym><trademark "
"class=\"registered\">MS-DOS</trademark></acronym> and <trademark class="
"\"registered\">Windows</trademark> often tend to take shortcuts. Reading the "
"keyboard scan codes and writing directly to video memory are two classical "
"examples of practices which, under <acronym><trademark class=\"registered"
"\">MS-DOS</trademark></acronym> are not frowned upon but considered the "
"right thing to do."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14719
msgid ""
"The reason? Both the <acronym>PC BIOS</acronym> and <acronym><trademark "
"class=\"registered\">MS-DOS</trademark></acronym> are notoriously slow when "
"performing these operations."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14723
msgid ""
"You may be tempted to continue similar practices in the <trademark class="
"\"registered\">UNIX</trademark> environment. For example, I have seen a web "
"site which explains how to access the keyboard scan codes on a popular "
"<trademark class=\"registered\">UNIX</trademark> clone."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14728
msgid ""
"That is generally a <emphasis>very bad idea</emphasis> in <trademark class="
"\"registered\">UNIX</trademark> environment! Let me explain why."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:14732
msgid "<trademark class=\"registered\">UNIX</trademark> Is Protected"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14734
msgid ""
"For one thing, it may simply not be possible. <trademark class=\"registered"
"\">UNIX</trademark> runs in protected mode. Only the kernel and device "
"drivers are allowed to access hardware directly. Perhaps a particular "
"<trademark class=\"registered\">UNIX</trademark> clone will let you read the "
"keyboard scan codes, but chances are a real <trademark class=\"registered"
"\">UNIX</trademark> operating system will not. And even if one version may "
"let you do it, the next one may not, so your carefully crafted software may "
"become a dinosaur overnight."
msgstr ""

#. (itstool) path: sect2/title
#: book.translate.xml:14745
msgid "<trademark class=\"registered\">UNIX</trademark> Is an Abstraction"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14747
msgid ""
"But there is a much more important reason not to try accessing the hardware "
"directly (unless, of course, you are writing a device driver), even on the "
"<trademark class=\"registered\">UNIX</trademark> like systems that let you "
"do it:"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14752
msgid ""
"<emphasis><trademark class=\"registered\">UNIX</trademark> is an abstraction!"
"</emphasis>"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14754
msgid ""
"There is a major difference in the philosophy of design between "
"<acronym><trademark class=\"registered\">MS-DOS</trademark></acronym> and "
"<trademark class=\"registered\">UNIX</trademark>. <acronym><trademark class="
"\"registered\">MS-DOS</trademark></acronym> was designed as a single-user "
"system. It is run on a computer with a keyboard and a video screen attached "
"directly to that computer. User input is almost guaranteed to come from that "
"keyboard. Your program's output virtually always ends up on that screen."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14763
msgid ""
"This is NEVER guaranteed under <trademark class=\"registered\">UNIX</"
"trademark>. It is quite common for a <trademark class=\"registered\">UNIX</"
"trademark> user to pipe and redirect program input and output:"
msgstr ""

#. (itstool) path: sect2/screen
#: book.translate.xml:14767
#, no-wrap
msgid "<prompt>%</prompt> <userinput>program1 | program2 | program3 &gt; file1</userinput>"
msgstr ""
"<prompt>%</prompt> <userinput>program1 | program2 | program3 &gt; "
"file1</userinput>"

#. (itstool) path: sect2/para
#: book.translate.xml:14769
msgid ""
"If you have written <application>program2</application>, your input does not "
"come from the keyboard but from the output of <application>program1</"
"application>. Similarly, your output does not go to the screen but becomes "
"the input for <application>program3</application> whose output, in turn, "
"goes to <filename>file1</filename>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14776
msgid ""
"But there is more! Even if you made sure that your input comes from, and "
"your output goes to, the terminal, there is no guarantee the terminal is a "
"PC: It may not have its video memory where you expect it, nor may its "
"keyboard be producing <acronym>PC</acronym>-style scan codes. It may be a "
"<trademark class=\"registered\">Macintosh</trademark>, or any other computer."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14783
msgid ""
"Now you may be shaking your head: My software is in <acronym>PC</acronym> "
"assembly language, how can it run on a <trademark class=\"registered"
"\">Macintosh</trademark>? But I did not say your software would be running "
"on a <trademark class=\"registered\">Macintosh</trademark>, only that its "
"terminal may be a <trademark class=\"registered\">Macintosh</trademark>."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14789
msgid ""
"Under <trademark class=\"registered\">UNIX</trademark>, the terminal does "
"not have to be directly attached to the computer that runs your software, it "
"can even be on another continent, or, for that matter, on another planet. It "
"is perfectly possible that a <trademark class=\"registered\">Macintosh</"
"trademark> user in Australia connects to a <trademark class=\"registered"
"\">UNIX</trademark> system in North America (or anywhere else) via "
"<application>telnet</application>. The software then runs on one computer, "
"while the terminal is on a different computer: If you try to read the scan "
"codes, you will get the wrong input!"
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14800
msgid ""
"Same holds true about any other hardware: A file you are reading may be on a "
"disk you have no direct access to. A camera you are reading images from may "
"be on a space shuttle, connected to you via satellites."
msgstr ""

#. (itstool) path: sect2/para
#: book.translate.xml:14805
msgid ""
"That is why under <trademark class=\"registered\">UNIX</trademark> you must "
"never make any assumptions about where your data is coming from and going "
"to. Always let the system handle the physical access to the hardware."
msgstr ""

#. (itstool) path: note/para
#: book.translate.xml:14811
msgid ""
"These are caveats, not absolute rules. Exceptions are possible. For example, "
"if a text editor has determined it is running on a local machine, it may "
"want to read the scan codes directly for improved control. I am not "
"mentioning these caveats to tell you what to do or what not to do, just to "
"make you aware of certain pitfalls that await you if you have just arrived "
"to <trademark class=\"registered\">UNIX</trademark> form <acronym><trademark "
"class=\"registered\">MS-DOS</trademark></acronym>. Of course, creative "
"people often break rules, and it is OK as long as they know they are "
"breaking them and why."
msgstr ""

#. (itstool) path: sect1/title
#: book.translate.xml:14826
msgid "Acknowledgements"
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14828
msgid ""
"This tutorial would never have been possible without the help of many "
"experienced FreeBSD programmers from the <link xlink:href=\"http://lists."
"FreeBSD.org/mailman/listinfo/freebsd-hackers\">FreeBSD technical discussions "
"mailing list</link>, many of whom have patiently answered my questions, and "
"pointed me in the right direction in my attempts to explore the inner "
"workings of <trademark class=\"registered\">UNIX</trademark> system "
"programming in general and FreeBSD in particular."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14835
msgid ""
"Thomas M. Sommers opened the door for me . His <link xlink:href=\"https://"
"web.archive.org/web/20090914064615/http://www.codebreakers-journal.com/"
"content/view/262/27\">How do I write \"Hello, world\" in FreeBSD assembler?</"
"link> web page was my first encounter with an example of assembly language "
"programming under FreeBSD."
msgstr ""

#. (itstool) path: sect1/para
#: book.translate.xml:14840
msgid ""
"Jake Burkholder has kept the door open by willingly answering all of my "
"questions and supplying me with example assembly language source code."
msgstr ""

#. (itstool) path: part/title
#: book.translate.xml:14853
msgid "Appendices"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14859
msgid ""
"<personname><firstname>Dave</firstname><othername role=\"MI\">A</"
"othername><surname>Patterson</surname></personname>"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14860
msgid ""
"<personname><firstname>John</firstname><othername role=\"MI\">L</"
"othername><surname>Hennessy</surname></personname>"
msgstr ""

#. (itstool) path: biblioentry/copyright
#: book.translate.xml:14862
msgid "<year>1998</year><holder>Morgan Kaufmann Publishers, Inc.</holder>"
msgstr ""

#. (itstool) path: biblioentry/biblioid
#: book.translate.xml:14864
msgid "1-55860-428-6"
msgstr ""

#. (itstool) path: publisher/publishername
#: book.translate.xml:14866
msgid "Morgan Kaufmann Publishers, Inc."
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14868
msgid "Computer Organization and Design"
msgstr ""

#. (itstool) path: biblioentry/subtitle
#: book.translate.xml:14869
msgid "The Hardware / Software Interface"
msgstr ""

#. (itstool) path: biblioentry/pagenums
#: book.translate.xml:14870 book.translate.xml:14884 book.translate.xml:14898
msgid "1-2"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14875
msgid ""
"<personname><firstname>W.</firstname><othername role=\"Middle\">Richard</"
"othername><surname>Stevens</surname></personname>"
msgstr ""

#. (itstool) path: biblioentry/copyright
#: book.translate.xml:14877
msgid "<year>1993</year><holder>Addison Wesley Longman, Inc.</holder>"
msgstr ""

#. (itstool) path: biblioentry/biblioid
#: book.translate.xml:14879
msgid "0-201-56317-7"
msgstr ""

#. (itstool) path: publisher/publishername
#: book.translate.xml:14881
msgid "Addison Wesley Longman, Inc."
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14883
msgid "Advanced Programming in the Unix Environment"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14889
msgid ""
"<personname><firstname>Marshall</firstname><othername role=\"Middle\">Kirk</"
"othername><surname>McKusick</surname></personname>"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14890
msgid ""
"<personname><firstname>George</firstname><surname>Neville-Neil</surname></"
"personname>"
msgstr ""

#. (itstool) path: biblioentry/copyright
#: book.translate.xml:14892
msgid "<year>2004</year><holder>Addison-Wesley</holder>"
msgstr ""

#. (itstool) path: biblioentry/biblioid
#: book.translate.xml:14893
msgid "0-201-70245-2"
msgstr ""

#. (itstool) path: publisher/publishername
#: book.translate.xml:14895
msgid "Addison-Wesley"
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14897
msgid "The Design and Implementation of the FreeBSD Operating System"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14903
msgid ""
"<personname><firstname>Aleph</firstname><surname>One</surname></personname>"
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14905
msgid "Phrack 49; \"Smashing the Stack for Fun and Profit\""
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14910
msgid ""
"<personname><firstname>Chrispin</firstname><surname>Cowan</surname></"
"personname>"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14911
msgid ""
"<personname><firstname>Calton</firstname><surname>Pu</surname></personname>"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14912
msgid ""
"<personname><firstname>Dave</firstname><surname>Maier</surname></personname>"
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14914
msgid ""
"StackGuard; Automatic Adaptive Detection and Prevention of Buffer-Overflow "
"Attacks"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14920
msgid ""
"<personname><firstname>Todd</firstname><surname>Miller</surname></personname>"
msgstr ""

#. (itstool) path: authorgroup/author
#: book.translate.xml:14921
msgid ""
"<personname><firstname>Theo</firstname><surname>de Raadt</surname></"
"personname>"
msgstr ""

#. (itstool) path: biblioentry/citetitle
#: book.translate.xml:14923
msgid "strlcpy and strlcat -- consistent, safe string copy and concatenation."
msgstr ""
