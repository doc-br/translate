# Hongyou Bai <bhy1924@gmail.com>, 2019. #zanata, 2020.
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2019-11-02 17:04-0300\n"
"PO-Revision-Date: 2020-04-11 15:17+0000\n"
"Last-Translator: Hongyou Bai <bhy1924@gmail.com>\n"
"Language-Team: Chinese (Simplified) <https://translate-dev.freebsd.org/"
"projects/freebsd-doc/articles_nanobsd/zh_CN/>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Weblate 3.11.3\n"

#. Put one translator per line, in the form NAME <EMAIL>, YEAR1, YEAR2
msgctxt "_"
msgid "translator-credits"
msgstr "delphij"

#. (itstool) path: info/title
#. (itstool) path: sect1/title
#: article.translate.xml:4 article.translate.xml:40
msgid "Introduction to NanoBSD"
msgstr "NanoBSD 简介"

#. (itstool) path: authorgroup/author
#: article.translate.xml:7
msgid ""
"<personname><firstname>Daniel</firstname><surname>Gerzo</surname></"
"personname>"
msgstr ""
"<personname><firstname>Daniel</firstname><surname>Gerzo</surname></"
"personname>"

#. (itstool) path: info/copyright
#: article.translate.xml:10
msgid "<year>2006</year> <holder>The FreeBSD Documentation Project</holder>"
msgstr "<year>2006</year> <holder>The FreeBSD Documentation Project</holder>"

#. (itstool) path: legalnotice/para
#: article.translate.xml:16
msgid "FreeBSD is a registered trademark of the FreeBSD Foundation."
msgstr "FreeBSD 是 FreeBSD 基金会的注册商标。"

#. (itstool) path: legalnotice/para
#: article.translate.xml:18
msgid ""
"Many of the designations used by manufacturers and sellers to distinguish "
"their products are claimed as trademarks. Where those designations appear in "
"this document, and the FreeBSD Project was aware of the trademark claim, the "
"designations have been followed by the <quote>™</quote> or the <quote>®</"
"quote> symbol."
msgstr ""
"制造商和销售商为区分其产品而使用的许多名称都被认作商标。如果这些标识出现在本文档中, 并且 FreeBSD 项目知道商标声明, 则在这些名称之后增加 "
"<quote>™</quote> 或 <quote>®</quote> 标记。"

#. (itstool) path: info/pubdate
#. (itstool) path: info/releaseinfo
#: article.translate.xml:26 article.translate.xml:28
msgid ""
"$FreeBSD: head/en_US.ISO8859-1/articles/nanobsd/article.xml 52722 2018-12-24 "
"19:45:39Z crees $"
msgstr ""
"$FreeBSD: head/en_US.ISO8859-1/articles/nanobsd/article.xml 52722 2018-12-24 "
"19:45:39Z crees $"

#. (itstool) path: abstract/para
#: article.translate.xml:31
msgid ""
"This document provides information about the <application>NanoBSD</"
"application> tools, which can be used to create FreeBSD system images for "
"embedded applications, suitable for use on a Compact Flash card (or other "
"mass storage medium)."
msgstr ""
"这篇文档提供了关于 <application>NanoBSD</application> 工具的介绍信息， 这一工"
"具可以用来创建用于嵌入式应用的 FreeBSD 系统映像， 以适应存放到袖珍闪存 "
"(Compact Flash) 卡 (或其它大容量存储介质) 上的需要。"

#. (itstool) path: sect1/indexterm
#: article.translate.xml:42
msgid "<primary>NanoBSD</primary>"
msgstr "<primary>NanoBSD</primary>"

#. (itstool) path: sect1/para
#: article.translate.xml:44
msgid ""
"<application>NanoBSD</application> is a tool currently developed by Poul-"
"Henning Kamp <email>phk@FreeBSD.org</email>. It creates a FreeBSD system "
"image for embedded applications, suitable for use on a Compact Flash card "
"(or other mass storage medium)."
msgstr ""
"<application>NanoBSD</application> 是 Poul-Henning Kamp <email>phk@FreeBSD."
"org</email> 目前正在开发的一项工具。 它可以用来创建用于嵌入式应用的 FreeBSD "
"系统映像， 以便配合袖珍闪存 (Compact Flash) 卡 (或其他大容量存储介质) 使用。"

#. (itstool) path: sect1/para
#: article.translate.xml:49
msgid ""
"It can be used to build specialized install images, designed for easy "
"installation and maintenance of systems commonly called <quote>computer "
"appliances</quote>. Computer appliances have their hardware and software "
"bundled in the product, which means all applications are pre-installed. The "
"appliance is plugged into an existing network and can begin working (almost) "
"immediately."
msgstr ""
"这一工具也可以用来构建定制的安装映像， 以简化通常称为 <quote>计算设备 "
"(computer appliances)</quote> 的系统的安装和维护工作。 计算设备通常在产品中将"
"捆绑硬件和软件， 或者换言之， 所有的应用程序都是预先装好的。 这些设备可以直接"
"插到暨存的网络中， 并 (几乎是) 立即投入使用。"

#. (itstool) path: sect1/para
#: article.translate.xml:57
msgid "The features of <application>NanoBSD</application> include:"
msgstr "<application>NanoBSD</application> 提供的功能包括："

#. (itstool) path: listitem/para
#: article.translate.xml:62
msgid ""
"Ports and packages work as in FreeBSD — Every single application can be "
"installed and used in a <application>NanoBSD</application> image, the same "
"way as in FreeBSD."
msgstr ""
"可以和 FreeBSD 一样使用 Ports 和预编译包── 所有的应用程序都可以在 "
"<application>NanoBSD</application> 映像中直接使用， 而方式与 FreeBSD 完全一"
"样。"

#. (itstool) path: listitem/para
#: article.translate.xml:69
msgid ""
"No missing functionality — If it is possible to do something with FreeBSD, "
"it is possible to do the same thing with <application>NanoBSD</application>, "
"unless the specific feature or features were explicitly removed from the "
"<application>NanoBSD</application> image when it was created."
msgstr ""
"不减少功能 ── 能够使用 FreeBSD 做的任何工作， 都可以在 <application>NanoBSD</"
"application> 中使用， 除非您在创建 <application>NanoBSD</application> 映像"
"时， 明确地删去它们。"

#. (itstool) path: listitem/para
#: article.translate.xml:78
msgid ""
"Everything is read-only at run-time — It is safe to pull the power-plug. "
"There is no necessity to run <citerefentry><refentrytitle>fsck</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> after a non-graceful "
"shutdown of the system."
msgstr ""
"所有对象在运行时均是只读的 ── 可以安全地拔掉电源插销。 在系统非正常关闭之"
"后， 无需运行 <citerefentry><refentrytitle>fsck</refentrytitle><manvolnum>8</"
"manvolnum></citerefentry>。"

#. (itstool) path: listitem/para
#: article.translate.xml:85
msgid ""
"Easy to build and customize — Making use of just one shell script and one "
"configuration file it is possible to build reduced and customized images "
"satisfying any arbitrary set of requirements."
msgstr ""
"便于联编和定制 ── 只需使用一个 shell 脚本和一个配置文件， 您可以很容易地裁减"
"和定制适于任意需求的映像。"

#. (itstool) path: sect1/title
#: article.translate.xml:94
msgid "NanoBSD Howto"
msgstr "如何使用 NanoBSD"

#. (itstool) path: sect2/title
#: article.translate.xml:97
msgid "The Design of NanoBSD"
msgstr "NanoBSD 的设计"

#. (itstool) path: sect2/para
#: article.translate.xml:99
msgid ""
"Once the image is present on the medium, it is possible to boot "
"<application>NanoBSD</application>. The mass storage medium is divided into "
"three parts by default:"
msgstr ""
"一旦将映像存入介质， 就可以用它来引导 <application>NanoBSD</application> "
"了。 默认情况下， 大容量存储器会划分为三个区："

#. (itstool) path: listitem/para
#: article.translate.xml:105
msgid ""
"Two image partitions: <literal>code#1</literal> and <literal>code#2</"
"literal>."
msgstr "两个映像区： <literal>code#1</literal> 和 <literal>code#2</literal>。"

#. (itstool) path: listitem/para
#: article.translate.xml:110
msgid ""
"The configuration file partition, which can be mounted under the <filename>/"
"cfg</filename> directory at run time."
msgstr ""
"一个配置文件区， 运行环境中， 可以将其挂接到 <filename>/cfg</filename> 目录"
"下。"

#. (itstool) path: sect2/para
#: article.translate.xml:116
msgid "These partitions are normally mounted read-only."
msgstr "这些分区默认情况下以只读方式挂接。"

#. (itstool) path: sect2/para
#: article.translate.xml:118
msgid ""
"The <filename>/etc</filename> and <filename>/var</filename> directories are "
"<citerefentry><refentrytitle>md</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> (malloc) disks."
msgstr ""
"<filename>/etc</filename> 和 <filename>/var</filename> 目录均为 "
"<citerefentry><refentrytitle>md</refentrytitle><manvolnum>4</manvolnum></"
"citerefentry> (malloc) 盘。"

#. (itstool) path: sect2/para
#: article.translate.xml:122
msgid ""
"The configuration file partition persists under the <filename>/cfg</"
"filename> directory. It contains files for <filename>/etc</filename> "
"directory and is briefly mounted read-only right after the system boot, "
"therefore it is required to copy modified files from <filename>/etc</"
"filename> back to the <filename>/cfg</filename> directory if changes are "
"expected to persist after the system restarts."
msgstr ""
"配置文件分区保存在 <filename>/cfg</filename> 目录。 它包含了用于 <filename>/"
"etc</filename> 目录的文件， 在启动之后暂时以只读方式挂接。 因此， 在需要从 "
"<filename>/etc</filename> 向 <filename>/cfg</filename> 目录复制所进行的、 希"
"望在重启时保持不变的配置时， 需要进行一些额外的操作。"

#. (itstool) path: example/title
#: article.translate.xml:132
msgid "Making Persistent Changes to <filename>/etc/resolv.conf</filename>"
msgstr "在 <filename>/etc/resolv.conf</filename> 中进行需要保持的修改"

#. (itstool) path: example/screen
#: article.translate.xml:135
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>vi /etc/resolv.conf</userinput>\n"
"[...]\n"
"<prompt>#</prompt> <userinput>mount /cfg</userinput>\n"
"<prompt>#</prompt> <userinput>cp /etc/resolv.conf /cfg</userinput>\n"
"<prompt>#</prompt> <userinput>umount /cfg</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>vi /etc/resolv.conf</userinput>\n"
"[...]\n"
"<prompt>#</prompt> <userinput>mount /cfg</userinput>\n"
"<prompt>#</prompt> <userinput>cp /etc/resolv.conf /cfg</userinput>\n"
"<prompt>#</prompt> <userinput>umount /cfg</userinput>"

#. (itstool) path: note/para
#: article.translate.xml:143
msgid ""
"The partition containing <filename>/cfg</filename> should be mounted only at "
"boot time and while overriding the configuration files."
msgstr ""
"只有在系统启动过程中， 以及需要修改配置文件的场合， 才需要挂接包含 "
"<filename>/cfg</filename> 的那个分区。"

#. (itstool) path: note/para
#: article.translate.xml:148
msgid ""
"Keeping <filename>/cfg</filename> mounted at all times is not a good idea, "
"especially if the <application>NanoBSD</application> system runs off a mass "
"storage medium that may be adversely affected by a large number of writes to "
"the partition (like when the filesystem syncer flushes data to the system "
"disks)."
msgstr ""
"在任何时候都保持挂接 <filename>/cfg</filename> 不是一个好主意， 特别是当您把 "
"<application>NanoBSD</application> 放在不适合进行大量写操作的分区时 (由于文件"
"系统的同步进程会定期向系统盘写一些数据)。"

#. (itstool) path: sect2/title
#: article.translate.xml:158
msgid "Building a NanoBSD Image"
msgstr "构建 NanoBSD 映像"

#. (itstool) path: sect2/para
#: article.translate.xml:160
msgid ""
"A <application>NanoBSD</application> image is built using a simple "
"<filename>nanobsd.sh</filename> shell script, which can be found in the "
"<filename><replaceable>/usr</replaceable>/src/tools/tools/nanobsd</filename> "
"directory. This script creates an image, which can be copied on the storage "
"medium using the <citerefentry><refentrytitle>dd</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry> utility."
msgstr ""
"<application>NanoBSD</application> 映像是通过使用非常简单的 "
"<filename>nanobsd.sh</filename> shell 脚本来构建的， 这个脚本可以在 "
"<filename><replaceable>/usr</replaceable>/src/tools/tools/nanobsd</filename> "
"目录中找到。 这个脚本建立的映像文件， 可以用 "
"<citerefentry><refentrytitle>dd</refentrytitle><manvolnum>1</manvolnum></"
"citerefentry> 工具复制到存储介质上。"

#. (itstool) path: sect2/para
#: article.translate.xml:167
msgid ""
"The necessary commands to build a <application>NanoBSD</application> image "
"are:"
msgstr "构建 <application>NanoBSD</application> 映像所需的命令是："

#. (itstool) path: sect2/screen
#: article.translate.xml:170
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>cd /usr/src/tools/tools/nanobsd</userinput> <co xml:id=\"nbsd-cd\"/>\n"
"<prompt>#</prompt> <userinput>sh nanobsd.sh</userinput> <co xml:id=\"nbsd-sh\"/>\n"
"<prompt>#</prompt> <userinput>cd /usr/obj/nanobsd.full</userinput> <co xml:id=\"nbsd-cd2\"/>\n"
"<prompt>#</prompt> <userinput>dd if=_.disk.full of=/dev/da0 bs=64k</userinput> <co xml:id=\"nbsd-dd\"/>"
msgstr ""
"<prompt>#</prompt> <userinput>cd /usr/src/tools/tools/nanobsd</userinput> <co xml:id=\"nbsd-cd\"/>\n"
"<prompt>#</prompt> <userinput>sh nanobsd.sh</userinput> <co xml:id=\"nbsd-sh\"/>\n"
"<prompt>#</prompt> <userinput>cd /usr/obj/nanobsd.full</userinput> <co xml:id=\"nbsd-cd2\"/>\n"
"<prompt>#</prompt> <userinput>dd if=_.disk.full of=/dev/da0 bs=64k</userinput> <co xml:id=\"nbsd-dd\"/>"

#. (itstool) path: callout/para
#: article.translate.xml:177
msgid ""
"Change the current directory to the base directory of the "
"<application>NanoBSD</application> build script."
msgstr "进入 <application>NanoBSD</application> 构建脚本的主目录。"

#. (itstool) path: callout/para
#: article.translate.xml:183
msgid "Start the build process."
msgstr "开始构建过程。"

#. (itstool) path: callout/para
#: article.translate.xml:187
msgid ""
"Change the current directory to the place where the built images are located."
msgstr "进入构建好的映像文件所在的目录。"

#. (itstool) path: callout/para
#: article.translate.xml:192
msgid "Install <application>NanoBSD</application> onto the storage medium."
msgstr "在存储介质上安装 <application>NanoBSD</application>。"

#. (itstool) path: sect2/title
#: article.translate.xml:199
msgid "Customizing a NanoBSD Image"
msgstr "定制 NanoBSD 映像"

#. (itstool) path: sect2/para
#: article.translate.xml:201
msgid ""
"This is probably the most important and most interesting feature of "
"<application>NanoBSD</application>. This is also where you will be spending "
"most of the time when developing with <application>NanoBSD</application>."
msgstr ""
"这可能是 <application>NanoBSD</application> 最为重要， 同时也是您最感兴趣的功"
"能。 同时， 您在开发 <application>NanoBSD</application> 应用时， 这也是相当耗"
"时的过程。"

#. (itstool) path: sect2/para
#: article.translate.xml:206
msgid ""
"Invocation of the following command will force the <filename>nanobsd.sh</"
"filename> to read its configuration from <filename>myconf.nano</filename> "
"located in the current directory:"
msgstr ""
"执行下面的命令将使 <filename>nanobsd.sh</filename> 从当前目录中的 "
"<filename>myconf.nano</filename> 文件读取配置："

#. (itstool) path: sect2/screen
#: article.translate.xml:211
#, no-wrap
msgid "<prompt>#</prompt> <userinput>sh nanobsd.sh -c myconf.nano</userinput>"
msgstr "<prompt>#</prompt> <userinput>sh nanobsd.sh -c myconf.nano</userinput>"

#. (itstool) path: sect2/para
#: article.translate.xml:213
msgid "Customization is done in two ways:"
msgstr "定制过程包含两步："

#. (itstool) path: listitem/para
#: article.translate.xml:217
msgid "Configuration options"
msgstr "配置选项"

#. (itstool) path: listitem/para
#: article.translate.xml:221
msgid "Custom functions"
msgstr "定制函数"

#. (itstool) path: sect3/title
#: article.translate.xml:226
msgid "Configuration Options"
msgstr "配置选项"

#. (itstool) path: para/buildtarget
#: article.translate.xml:230 article.translate.xml:262
#: article.translate.xml:274
msgid "buildworld"
msgstr "buildworld"

#. (itstool) path: para/buildtarget
#: article.translate.xml:231 article.translate.xml:268
#: article.translate.xml:275
msgid "installworld"
msgstr "installworld"

#. (itstool) path: sect3/para
#: article.translate.xml:228
msgid ""
"With configuration settings, it is possible to configure options passed to "
"both the <_:buildtarget-1/> and <_:buildtarget-2/> stages of the "
"<application>NanoBSD</application> build process, as well as internal "
"options passed to the main build process of <application>NanoBSD</"
"application>. Through these options it is possible to cut the system down, "
"so it will fit on as little as 64MB. You can use the configuration options "
"to trim down FreeBSD even more, until it will consists of just the kernel "
"and two or three files in the userland."
msgstr ""
"通过对配置进行设置， 可以配置用以传递给 <application>NanoBSD</application> 构"
"建过程中 <_:buildtarget-1/> 和 <_:buildtarget-2/> 阶段的联编和安装选项， 以"
"及 <application>NanoBSD</application> 的主构建过程中的选项。 通过使用这些选项"
"可以削减系统的尺寸， 使之能够放入 64MB 的存储。 您还可以进一步通过这些选项来"
"削减 FreeBSD， 直到它只包含内核以及两三个用户环境文件为止。"

#. (itstool) path: sect3/para
#: article.translate.xml:240
msgid ""
"The configuration file consists of configuration options, which override the "
"default values. The most important directives are:"
msgstr "配置文件中包含用以代替默认值的配置选项。 最重要的语句包括："

#. (itstool) path: listitem/para
#: article.translate.xml:246
msgid ""
"<literal>NANO_NAME</literal> — Name of build (used to construct the workdir "
"names)."
msgstr ""
"<literal>NANO_NAME</literal> ── 本次构建的名称 (用于创建工作目录的名字)。"

#. (itstool) path: listitem/para
#: article.translate.xml:251
msgid ""
"<literal>NANO_SRC</literal> — Path to the source tree used to build the "
"image."
msgstr "<literal>NANO_SRC</literal> ── 用以联编和构建映像的源码树的位置。"

#. (itstool) path: listitem/para
#: article.translate.xml:256
msgid ""
"<literal>NANO_KERNEL</literal> — Name of kernel configuration file used to "
"build kernel."
msgstr "<literal>NANO_KERNEL</literal> ── 用以联编内核的配置文件的名字。"

#. (itstool) path: listitem/para
#: article.translate.xml:261
msgid ""
"<literal>CONF_BUILD</literal> — Options passed to the <_:buildtarget-1/> "
"stage of the build."
msgstr ""
"<literal>CONF_BUILD</literal> ── 用于传递给 <_:buildtarget-1/> 构建阶段的选"
"项。"

#. (itstool) path: listitem/para
#: article.translate.xml:267
msgid ""
"<literal>CONF_INSTALL</literal> — Options passed to the <_:buildtarget-1/> "
"stage of the build."
msgstr ""
"<literal>CONF_INSTALL</literal> ── 用于传递给 <_:buildtarget-1/> 构建阶段的选"
"项。"

#. (itstool) path: listitem/para
#: article.translate.xml:273
msgid ""
"<literal>CONF_WORLD</literal> — Options passed to both the <_:buildtarget-1/"
"> and the <_:buildtarget-2/> stage of the build."
msgstr ""
"<literal>CONF_WORLD</literal> ── 用以传递给 <_:buildtarget-1/> 和 <_:"
"buildtarget-2/> 这两个构建阶段的选项。"

#. (itstool) path: listitem/para
#: article.translate.xml:280
msgid ""
"<literal>FlashDevice</literal> — Defines what type of media to use. Check "
"<filename>FlashDevice.sub</filename> for more details."
msgstr ""
"<literal>FlashDevice</literal> ── 定义所用的介质类型。 要了解进一步的细节， "
"请参考 <filename>FlashDevice.sub</filename> 文件。"

#. (itstool) path: sect3/title
#: article.translate.xml:289
msgid "Custom Functions"
msgstr "功能定制"

#. (itstool) path: sect3/para
#: article.translate.xml:291
msgid ""
"It is possible to fine-tune <application>NanoBSD</application> using shell "
"functions in the configuration file. The following example illustrates the "
"basic model of custom functions:"
msgstr ""
"通过在配置文件中使用 shell 函数可以进一步微调 <application>NanoBSD</"
"application>。 下面的例子展示了定制函数的基本模式："

#. (itstool) path: sect3/programlisting
#: article.translate.xml:296
#, no-wrap
msgid ""
"cust_foo () (\n"
"\techo \"bar=baz\" &gt; \\\n"
"\t\t${NANO_WORLDDIR}/etc/foo\n"
")\n"
"customize_cmd cust_foo"
msgstr ""
"cust_foo () (\n"
"\techo \"bar=baz\" &gt; \\\n"
"\t\t${NANO_WORLDDIR}/etc/foo\n"
")\n"
"customize_cmd cust_foo"

#. (itstool) path: sect3/para
#: article.translate.xml:302
msgid ""
"A more useful example of a customization function is the following, which "
"changes the default size of the <filename>/etc</filename> directory from 5MB "
"to 30MB:"
msgstr ""
"下面是一个更贴近实际的例子， 它将默认的 <filename>/etc</filename> 目录尺寸， "
"从 5MB 调整为 30MB："

#. (itstool) path: sect3/programlisting
#: article.translate.xml:306
#, no-wrap
msgid ""
"cust_etc_size () (\n"
"\tcd ${NANO_WORLDDIR}/conf\n"
"\techo 30000 &gt; default/etc/md_size\n"
")\n"
"customize_cmd cust_etc_size"
msgstr ""
"cust_etc_size () (\n"
"\tcd ${NANO_WORLDDIR}/conf\n"
"\techo 30000 &gt; default/etc/md_size\n"
")\n"
"customize_cmd cust_etc_size"

#. (itstool) path: sect3/para
#: article.translate.xml:312
msgid ""
"There are a few default pre-defined customization functions ready for use:"
msgstr "除此之外， 还有几个默认的预定义定制函数："

#. (itstool) path: listitem/para
#: article.translate.xml:317
msgid ""
"<literal>cust_comconsole</literal> — Disables "
"<citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> on the VGA devices (the <filename>/dev/ttyv*</filename> device "
"nodes) and enables the use of the COM1 serial port as the system console."
msgstr ""
"<literal>cust_comconsole</literal> ── 在 VGA 设备上禁止 "
"<citerefentry><refentrytitle>getty</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> (<filename>/dev/ttyv*</filename> 设备节点) 并启用串口 COM1 作为"
"系统控制台。"

#. (itstool) path: listitem/para
#: article.translate.xml:325
msgid ""
"<literal>cust_allow_ssh_root</literal> — Allow <systemitem class=\"username"
"\">root</systemitem> to login via <citerefentry><refentrytitle>sshd</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry>."
msgstr ""
"<literal>cust_allow_ssh_root</literal> ── 允许 <systemitem class=\"username"
"\">root</systemitem> 通过 <citerefentry><refentrytitle>sshd</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> 登录。"

#. (itstool) path: listitem/para
#: article.translate.xml:331
msgid ""
"<literal>cust_install_files</literal> — Installs files from the "
"<filename>nanobsd/Files</filename> directory, which contains some useful "
"scripts for system administration."
msgstr ""
"<literal>cust_install_files</literal> ── 从 <filename>nanobsd/Files</"
"filename> 目录中安装文件， 这包含一些实用的系统管理脚本。"

#. (itstool) path: sect3/title
#: article.translate.xml:341
msgid "Adding Packages"
msgstr "安装预编译软件包"

#. (itstool) path: sect3/para
#: article.translate.xml:343
msgid ""
"Packages can be added to a <application>NanoBSD</application> image using a "
"custom function. The following function will install all the packages "
"located in <filename>/usr/src/tools/tools/nanobsd/packages</filename>:"
msgstr ""
"通过增加自定义的函数， 可以在 <application>NanoBSD</application> 增加预编译的"
"软件包。 下面的函数会添加位于 <filename>/usr/src/tools/tools/nanobsd/"
"packages</filename> 的全部预编译软件包："

#. (itstool) path: sect3/programlisting
#: article.translate.xml:349
#, no-wrap
msgid ""
"install_packages () (\n"
"mkdir -p ${NANO_WORLDDIR}/packages\n"
"cp /usr/src/tools/tools/nanobsd/packages/* ${NANO_WORLDDIR}/packages\n"
"cp $(which pkg-static) ${NANO_WORLDDIR}/\n"
"chroot ${NANO_WORLDDIR} sh -c 'cd packages; /pkg-static add *;cd ..;'\n"
"rm -rf ${NANO_WORLDDIR}/packages ${NANO_WORLDDIR}/pkg-static\n"
")\n"
"customize_cmd install_packages"
msgstr ""
"install_packages () (\n"
"mkdir -p ${NANO_WORLDDIR}/packages\n"
"cp /usr/src/tools/tools/nanobsd/packages/* ${NANO_WORLDDIR}/packages\n"
"cp $(which pkg-static) ${NANO_WORLDDIR}/\n"
"chroot ${NANO_WORLDDIR} sh -c 'cd packages; /pkg-static add *;cd ..;'\n"
"rm -rf ${NANO_WORLDDIR}/packages ${NANO_WORLDDIR}/pkg-static\n"
")\n"
"customize_cmd install_packages"

#. (itstool) path: sect3/title
#: article.translate.xml:360
msgid "Configuration File Example"
msgstr "配置文件举例"

#. (itstool) path: sect3/para
#: article.translate.xml:362
msgid ""
"A complete example of a configuration file for building a custom "
"<application>NanoBSD</application> image can be:"
msgstr ""
"下面是一个用于构建定制的 <application>NanoBSD</application> 映像的完整例子："

#. (itstool) path: sect3/programlisting
#: article.translate.xml:366
#, no-wrap
msgid ""
"NANO_NAME=custom\n"
"NANO_SRC=/usr/src\n"
"NANO_KERNEL=MYKERNEL\n"
"NANO_IMAGES=2\n"
"\n"
"CONF_BUILD='\n"
"WITHOUT_KLDLOAD=YES\n"
"WITHOUT_NETGRAPH=YES\n"
"WITHOUT_PAM=YES\n"
"'\n"
"\n"
"CONF_INSTALL='\n"
"WITHOUT_ACPI=YES\n"
"WITHOUT_BLUETOOTH=YES\n"
"WITHOUT_FORTRAN=YES\n"
"WITHOUT_HTML=YES\n"
"WITHOUT_LPR=YES\n"
"WITHOUT_MAN=YES\n"
"WITHOUT_SENDMAIL=YES\n"
"WITHOUT_SHAREDOCS=YES\n"
"WITHOUT_EXAMPLES=YES\n"
"WITHOUT_INSTALLLIB=YES\n"
"WITHOUT_CALENDAR=YES\n"
"WITHOUT_MISC=YES\n"
"WITHOUT_SHARE=YES\n"
"'\n"
"\n"
"CONF_WORLD='\n"
"WITHOUT_BIND=YES\n"
"WITHOUT_MODULES=YES\n"
"WITHOUT_KERBEROS=YES\n"
"WITHOUT_GAMES=YES\n"
"WITHOUT_RESCUE=YES\n"
"WITHOUT_LOCALES=YES\n"
"WITHOUT_SYSCONS=YES\n"
"WITHOUT_INFO=YES\n"
"'\n"
"\n"
"FlashDevice SanDisk 1G\n"
"\n"
"cust_nobeastie() (\n"
"\ttouch ${NANO_WORLDDIR}/boot/loader.conf\n"
"\techo \"beastie_disable=\\\"YES\\\"\" &gt;&gt; ${NANO_WORLDDIR}/boot/loader.conf\n"
")\n"
"\n"
"customize_cmd cust_comconsole\n"
"customize_cmd cust_install_files\n"
"customize_cmd cust_allow_ssh_root\n"
"customize_cmd cust_nobeastie"
msgstr ""
"NANO_NAME=custom\n"
"NANO_SRC=/usr/src\n"
"NANO_KERNEL=MYKERNEL\n"
"NANO_IMAGES=2\n"
"\n"
"CONF_BUILD='\n"
"WITHOUT_KLDLOAD=YES\n"
"WITHOUT_NETGRAPH=YES\n"
"WITHOUT_PAM=YES\n"
"'\n"
"\n"
"CONF_INSTALL='\n"
"WITHOUT_ACPI=YES\n"
"WITHOUT_BLUETOOTH=YES\n"
"WITHOUT_FORTRAN=YES\n"
"WITHOUT_HTML=YES\n"
"WITHOUT_LPR=YES\n"
"WITHOUT_MAN=YES\n"
"WITHOUT_SENDMAIL=YES\n"
"WITHOUT_SHAREDOCS=YES\n"
"WITHOUT_EXAMPLES=YES\n"
"WITHOUT_INSTALLLIB=YES\n"
"WITHOUT_CALENDAR=YES\n"
"WITHOUT_MISC=YES\n"
"WITHOUT_SHARE=YES\n"
"'\n"
"\n"
"CONF_WORLD='\n"
"WITHOUT_BIND=YES\n"
"WITHOUT_MODULES=YES\n"
"WITHOUT_KERBEROS=YES\n"
"WITHOUT_GAMES=YES\n"
"WITHOUT_RESCUE=YES\n"
"WITHOUT_LOCALES=YES\n"
"WITHOUT_SYSCONS=YES\n"
"WITHOUT_INFO=YES\n"
"'\n"
"\n"
"FlashDevice SanDisk 1G\n"
"\n"
"cust_nobeastie() (\n"
"\ttouch ${NANO_WORLDDIR}/boot/loader.conf\n"
"\techo \"beastie_disable=\\\"YES\\\"\" &gt;&gt; ${NANO_WORLDDIR}/boot/loader.conf\n"
")\n"
"\n"
"customize_cmd cust_comconsole\n"
"customize_cmd cust_install_files\n"
"customize_cmd cust_allow_ssh_root\n"
"customize_cmd cust_nobeastie"

#. (itstool) path: sect2/title
#: article.translate.xml:419
msgid "Updating NanoBSD"
msgstr "更新 NanoBSD"

#. (itstool) path: sect2/para
#: article.translate.xml:421
msgid ""
"The update process of <application>NanoBSD</application> is relatively "
"simple:"
msgstr "更新 <application>NanoBSD</application> 相对而言较为简单："

#. (itstool) path: step/para
#: article.translate.xml:426
msgid "Build a new <application>NanoBSD</application> image, as usual."
msgstr "和之前一样构建新的 <application>NanoBSD</application> 映像文件。"

#. (itstool) path: step/para
#: article.translate.xml:431
msgid ""
"Upload the new image into an unused partition of a running "
"<application>NanoBSD</application> appliance."
msgstr ""
"将新的映像放入正运行的 <application>NanoBSD</application> 设备中的一个未用的"
"分区。"

#. (itstool) path: step/para
#: article.translate.xml:435
msgid ""
"The most important difference of this step from the initial "
"<application>NanoBSD</application> installation is that now instead of using "
"<filename>_.disk.full</filename> (which contains an image of the entire "
"disk), the <filename>_.disk.image</filename> image is installed (which "
"contains an image of a single system partition)."
msgstr ""
"与之前最初安装 <application>NanoBSD</application> 的步骤相比， 这一步骤最重要"
"的区别在于这次不应使用 <filename>_.disk.full</filename> 文件 (它包含整个盘的"
"映像)， 而应安装 <filename>_.disk.image</filename> 映像 (这个文件中， 只包含"
"一个系统分区)。"

#. (itstool) path: step/para
#: article.translate.xml:445
msgid "Reboot, and start the system from the newly installed partition."
msgstr "重新启动， 并从新安装的分区中启动系统。"

#. (itstool) path: step/para
#: article.translate.xml:450
msgid "If all goes well, the upgrade is finished."
msgstr "如果一切顺利的话， 升级工作就完成了。"

#. (itstool) path: step/para
#: article.translate.xml:454
msgid ""
"If anything goes wrong, reboot back into the previous partition (which "
"contains the old, working image), to restore system functionality as fast as "
"possible. Fix any problems of the new build, and repeat the process."
msgstr ""
"如果发生了任何问题， 则可以从先前的分区启动 (其中包含了旧的、 可用的映像)， "
"来尽可能快地恢复系统功能。 接下来可以修正新联编的版本中存在的问题， 并重复前"
"述步骤。"

#. (itstool) path: sect2/para
#: article.translate.xml:461
msgid ""
"To install new image onto the running <application>NanoBSD</application> "
"system, it is possible to use either the <filename>updatep1</filename> or "
"<filename>updatep2</filename> script located in the <filename>/root</"
"filename> directory, depending from which partition is running the current "
"system."
msgstr ""
"要在正在运行的 <application>NanoBSD</application> 系统中安装新的映像， 可以使"
"用位于 <filename>/root</filename> 目录的 <filename>updatep1</filename> 或 "
"<filename>updatep2</filename> 脚本， 具体使用哪一个脚本， 取决于正在运行的系"
"统位于那个分区。"

#. (itstool) path: sect2/para
#: article.translate.xml:468
msgid ""
"According to which services are available on host serving new "
"<application>NanoBSD</application> image and what type of transfer is "
"preferred, it is possible to examine one of these three ways:"
msgstr ""
"随时提供新 <application>NanoBSD</application> 映像所提供的服务， 以及采用的传"
"输方法的不同， 您可以参考并使用下列三种方式之一："

#. (itstool) path: sect3/title
#: article.translate.xml:474
msgid ""
"Using <citerefentry><refentrytitle>ftp</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"
msgstr ""
"使用 <citerefentry><refentrytitle>ftp</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"

#. (itstool) path: sect3/para
#: article.translate.xml:476
msgid "If the transfer speed is in first place, use this example:"
msgstr "如果传输速度是第一要务， 采用下面的例子："

#. (itstool) path: sect3/screen
#: article.translate.xml:479
#, no-wrap
msgid ""
"<prompt>#</prompt> <userinput>ftp myhost\n"
"get _.disk.image \"| sh updatep1\"</userinput>"
msgstr ""
"<prompt>#</prompt> <userinput>ftp myhost\n"
"get _.disk.image \"| sh updatep1\"</userinput>"

#. (itstool) path: sect3/title
#: article.translate.xml:484
msgid ""
"Using <citerefentry><refentrytitle>ssh</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"
msgstr ""
"使用 <citerefentry><refentrytitle>ssh</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"

#. (itstool) path: sect3/para
#: article.translate.xml:486
msgid "If a secure transfer is preferred, consider using this example:"
msgstr "如果更倾向于安全传输， 应参考下面的例子："

#. (itstool) path: sect3/screen
#: article.translate.xml:489
#, no-wrap
msgid "<prompt>#</prompt> <userinput>ssh myhost cat _.disk.image.gz | zcat | sh updatep1</userinput>"
msgstr "<prompt>#</prompt> <userinput>ssh myhost cat _.disk.image.gz | zcat | sh updatep1</userinput>"

#. (itstool) path: sect3/title
#: article.translate.xml:493
msgid ""
"Using <citerefentry><refentrytitle>nc</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"
msgstr ""
"使用 <citerefentry><refentrytitle>nc</refentrytitle><manvolnum>1</"
"manvolnum></citerefentry>"

#. (itstool) path: sect3/para
#: article.translate.xml:495
msgid ""
"Try this example if the remote host is not running neither "
"<citerefentry><refentrytitle>ftpd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> or <citerefentry><refentrytitle>sshd</"
"refentrytitle><manvolnum>8</manvolnum></citerefentry> service:"
msgstr ""
"如果远程主机既不提供 <citerefentry><refentrytitle>ftp</"
"refentrytitle><manvolnum>1</manvolnum></citerefentry> 服务， 也不提供 "
"<citerefentry><refentrytitle>sshd</refentrytitle><manvolnum>8</manvolnum></"
"citerefentry> 服务："

#. (itstool) path: step/para
#: article.translate.xml:500
msgid ""
"At first, open a TCP listener on host serving the image and make it send the "
"image to client:"
msgstr ""
"开始时， 在提供映像的主机上开启 TCP 监听， 并令其将映像文件发给客户机："

#. (itstool) path: step/screen
#: article.translate.xml:503
#, no-wrap
msgid "myhost<prompt>#</prompt> <userinput>nc -l <replaceable>2222</replaceable> &lt; _.disk.image</userinput>"
msgstr "myhost<prompt>#</prompt> <userinput>nc -l <replaceable>2222</replaceable> &lt; _.disk.image</userinput>"

#. (itstool) path: note/para
#: article.translate.xml:506
msgid ""
"Make sure that the used port is not blocked to receive incoming connections "
"from <application>NanoBSD</application> host by firewall."
msgstr ""
"请确认您所使用的端口没有通过防火墙阻止来自 <application>NanoBSD</"
"application> 客户机的联接请求。"

#. (itstool) path: step/para
#: article.translate.xml:514
msgid ""
"Connect to the host serving new image and execute <filename>updatep1</"
"filename> script:"
msgstr ""
"连接到提供新映像服务的主机， 并执行 <filename>updatep1</filename> 脚本："

#. (itstool) path: step/screen
#: article.translate.xml:517
#, no-wrap
msgid "<prompt>#</prompt> <userinput>nc myhost <replaceable>2222</replaceable> | sh updatep1</userinput>"
msgstr "<prompt>#</prompt> <userinput>nc myhost <replaceable>2222</replaceable> | sh updatep1</userinput>"
